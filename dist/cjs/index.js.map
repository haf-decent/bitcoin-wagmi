{"version":3,"file":"index.js","sources":["../../node_modules/@tanstack/query-core/build/modern/subscribable.js","../../node_modules/@tanstack/query-core/build/modern/utils.js","../../node_modules/@tanstack/query-core/build/modern/focusManager.js","../../node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../node_modules/@tanstack/query-core/build/modern/retryer.js","../../node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../node_modules/@tanstack/query-core/build/modern/removable.js","../../node_modules/@tanstack/query-core/build/modern/query.js","../../node_modules/@tanstack/query-core/build/modern/queryCache.js","../../node_modules/@tanstack/query-core/build/modern/mutation.js","../../node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../node_modules/@tanstack/query-core/build/modern/queryClient.js","../../node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../node_modules/@tanstack/query-core/build/modern/mutationObserver.js","../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../node_modules/@tanstack/react-query/build/modern/isRestoring.js","../../node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../node_modules/@tanstack/react-query/build/modern/utils.js","../../node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","../../node_modules/@tanstack/react-query/build/modern/suspense.js","../../node_modules/@tanstack/react-query/build/modern/useQuery.js","../../node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","../../node_modules/@tanstack/react-query/build/modern/useMutation.js","../../node_modules/tslib/tslib.es6.js","../../node_modules/retry/lib/retry_operation.js","../../node_modules/retry/lib/retry.js","../../node_modules/retry/index.js","../../node_modules/async-retry/lib/index.js","../../node_modules/bitcoinjs-lib/src/networks.js","../../node_modules/bitcoinjs-lib/src/bip66.js","../../node_modules/bitcoinjs-lib/src/ops.js","../../node_modules/bitcoinjs-lib/src/push_data.js","../../node_modules/bitcoinjs-lib/src/script_number.js","../../node_modules/typeforce/native.js","../../node_modules/typeforce/errors.js","../../node_modules/typeforce/index.js","../../node_modules/typeforce/extra.js","../../node_modules/bitcoinjs-lib/src/script.js","../../node_modules/bitcoinjs-lib/src/script_signature.js","../../node_modules/bitcoinjs-lib/src/types.js","../../node_modules/bitcoinjs-lib/src/payments/lazy.js","../../node_modules/bitcoinjs-lib/src/payments/embed.js","../../node_modules/bitcoinjs-lib/src/payments/p2ms.js","../../node_modules/bitcoinjs-lib/src/payments/p2pk.js","../../node_modules/@noble/hashes/_assert.js","../../node_modules/@noble/hashes/crypto.js","../../node_modules/@noble/hashes/utils.js","../../node_modules/@noble/hashes/_md.js","../../node_modules/@noble/hashes/ripemd160.js","../../node_modules/@noble/hashes/sha1.js","../../node_modules/@noble/hashes/sha256.js","../../node_modules/bitcoinjs-lib/src/crypto.js","../../node_modules/base-x/src/index.js","../../node_modules/bs58check/base.js","../../node_modules/bs58/index.js","../../node_modules/bs58check/index.js","../../node_modules/bitcoinjs-lib/src/payments/p2pkh.js","../../node_modules/bitcoinjs-lib/src/payments/p2sh.js","../../node_modules/bech32/dist/index.js","../../node_modules/bitcoinjs-lib/src/payments/p2wpkh.js","../../node_modules/bitcoinjs-lib/src/payments/p2wsh.js","../../node_modules/bitcoinjs-lib/src/ecc_lib.js","../../node_modules/safe-buffer/index.js","../../node_modules/varuint-bitcoin/index.js","../../node_modules/bitcoinjs-lib/src/bufferutils.js","../../node_modules/bitcoinjs-lib/src/payments/index.js","../../node_modules/bitcoinjs-lib/src/payments/p2tr.js","../../node_modules/bitcoinjs-lib/src/address.js","../../node_modules/bitcoinjs-lib/src/payments/bip341.js","../../node_modules/bitcoinjs-lib/src/merkle.js","../../node_modules/bitcoinjs-lib/src/transaction.js","../../node_modules/bitcoinjs-lib/src/block.js","../../node_modules/bip174/src/lib/typeFields.js","../../node_modules/bip174/src/lib/converter/global/globalXpub.js","../../node_modules/bip174/src/lib/converter/global/unsignedTx.js","../../node_modules/bip174/src/lib/converter/input/finalScriptSig.js","../../node_modules/bip174/src/lib/converter/input/finalScriptWitness.js","../../node_modules/bip174/src/lib/converter/input/nonWitnessUtxo.js","../../node_modules/bip174/src/lib/converter/input/partialSig.js","../../node_modules/bip174/src/lib/converter/input/porCommitment.js","../../node_modules/bip174/src/lib/converter/input/sighashType.js","../../node_modules/bip174/src/lib/converter/input/tapKeySig.js","../../node_modules/bip174/src/lib/converter/input/tapLeafScript.js","../../node_modules/bip174/src/lib/converter/input/tapMerkleRoot.js","../../node_modules/bip174/src/lib/converter/input/tapScriptSig.js","../../node_modules/bip174/src/lib/converter/varint.js","../../node_modules/bip174/src/lib/converter/tools.js","../../node_modules/bip174/src/lib/converter/input/witnessUtxo.js","../../node_modules/bip174/src/lib/converter/output/tapTree.js","../../node_modules/bip174/src/lib/converter/shared/bip32Derivation.js","../../node_modules/bip174/src/lib/converter/shared/checkPubkey.js","../../node_modules/bip174/src/lib/converter/shared/redeemScript.js","../../node_modules/bip174/src/lib/converter/shared/tapBip32Derivation.js","../../node_modules/bip174/src/lib/converter/shared/tapInternalKey.js","../../node_modules/bip174/src/lib/converter/shared/witnessScript.js","../../node_modules/bip174/src/lib/converter/index.js","../../node_modules/bip174/src/lib/parser/fromBuffer.js","../../node_modules/bip174/src/lib/parser/toBuffer.js","../../node_modules/bip174/src/lib/parser/index.js","../../node_modules/bip174/src/lib/combiner/index.js","../../node_modules/bip174/src/lib/utils.js","../../node_modules/bip174/src/lib/psbt.js","../../node_modules/bitcoinjs-lib/src/psbt/psbtutils.js","../../node_modules/bitcoinjs-lib/src/psbt/bip371.js","../../node_modules/bitcoinjs-lib/src/psbt.js","../../node_modules/bitcoinjs-lib/src/index.js","../../node_modules/@gobob/bob-sdk/dist/esplora.js","../../node_modules/@gobob/bob-sdk/dist/utils.js","../../node_modules/@gobob/bob-sdk/dist/relay.js","../../node_modules/@gobob/bob-sdk/dist/ordinals/signer.js","../../node_modules/@gobob/bob-sdk/dist/ordinals/commit.js","../../node_modules/@gobob/bob-sdk/dist/ordinals/reveal.js","../../node_modules/@gobob/bob-sdk/dist/ordinals/index.js","../../node_modules/@gobob/bob-sdk/dist/ordinal-api/index.js","../../node_modules/@gobob/bob-sdk/dist/inscription.js","../../node_modules/@gobob/bob-sdk/dist/helpers.js","../../node_modules/@gobob/bob-sdk/dist/wallet/address.js","../../node_modules/@scure/base/lib/index.js","../../node_modules/micro-packed/lib/index.js","../../node_modules/@noble/hashes/hmac.js","../../node_modules/@noble/curves/abstract/utils.js","../../node_modules/@noble/curves/abstract/modular.js","../../node_modules/@noble/curves/abstract/curve.js","../../node_modules/@noble/curves/abstract/weierstrass.js","../../node_modules/@noble/curves/_shortw_utils.js","../../node_modules/@noble/curves/abstract/hash-to-curve.js","../../node_modules/@noble/curves/secp256k1.js","../../node_modules/@scure/btc-signer/lib/utils.js","../../node_modules/@scure/btc-signer/lib/script.js","../../node_modules/@scure/btc-signer/lib/utxo.js","../../node_modules/@scure/btc-signer/lib/transaction.js","../../node_modules/@scure/btc-signer/lib/psbt.js","../../node_modules/@scure/btc-signer/lib/payment.js","../../node_modules/@scure/btc-signer/lib/index.js","../../node_modules/bitcoin-address-validation/lib/index.esm.js","../../node_modules/@gobob/bob-sdk/dist/wallet/utxo.js","../../node_modules/@gobob/bob-sdk/dist/wallet/index.js","../../node_modules/@gobob/bob-sdk/dist/gateway.js","../../node_modules/@gobob/utils/dist/index.mjs","../../node_modules/@gobob/bob-sdk/dist/index.js","../../src/connectors/base.ts","../../src/connectors/bitget.ts","../../src/connectors/leather.ts","../../src/connectors/okx.ts","../../src/connectors/unisat.ts","../../node_modules/lodash.omit/index.js","../../node_modules/base64-js/index.js","../../node_modules/jsontokens/lib/base64Url.js","../../node_modules/@noble/secp256k1/lib/index.js","../../node_modules/jsontokens/lib/ecdsaSigFormatter.js","../../node_modules/jsontokens/lib/errors.js","../../node_modules/jsontokens/lib/cryptoClients/secp256k1.js","../../node_modules/jsontokens/lib/cryptoClients/index.js","../../node_modules/jsontokens/lib/cryptoClients/sha256.js","../../node_modules/jsontokens/lib/signer.js","../../node_modules/jsontokens/lib/verifier.js","../../node_modules/jsontokens/lib/decode.js","../../node_modules/jsontokens/lib/index.js","../../node_modules/@sats-connect/core/dist/index.mjs","../../src/connectors/xverse.ts","../../src/provider.tsx","../../src/hooks/useBitcoinAccount.ts","../../src/hooks/useBitcoinConnect.ts","../../src/hooks/useBitcoinDisconnect.ts"],"sourcesContent":["// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/utils.ts\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n  return void 0;\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return !Object.keys(b).some((key) => !partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    const aItems = array ? a : Object.keys(a);\n    const aSize = aItems.length;\n    const bItems = array ? b : Object.keys(b);\n    const bSize = bItems.length;\n    const copy = array ? [] : {};\n    let equalItems = 0;\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i];\n      if ((!array && aItems.includes(key) || array) && a[key] === void 0 && b[key] === void 0) {\n        copy[key] = void 0;\n        equalItems++;\n      } else {\n        copy[key] = replaceEqualDeep(a[key], b[key]);\n        if (copy[key] === a[key] && a[key] !== void 0) {\n          equalItems++;\n        }\n      }\n    }\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n  return b;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class {\n  constructor(options) {\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let isResolved = false;\n  let continueFn;\n  let promiseResolve;\n  let promiseReject;\n  const promise = new Promise((outerResolve, outerReject) => {\n    promiseResolve = outerResolve;\n    promiseReject = outerReject;\n  });\n  const cancel = (cancelOptions) => {\n    if (!isResolved) {\n      reject(new CancelledError(cancelOptions));\n      config.abort?.();\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onSuccess?.(value);\n      continueFn?.();\n      promiseResolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onError?.(value);\n      continueFn?.();\n      promiseReject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return promise;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return promise;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/notifyManager.ts\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = (cb) => setTimeout(cb, 0);\n  const setScheduler = (fn) => {\n    scheduleFn = fn;\n  };\n  const batch = (callback) => {\n    let result;\n    transactions++;\n    try {\n      result = callback();\n    } finally {\n      transactions--;\n      if (!transactions) {\n        flush();\n      }\n    }\n    return result;\n  };\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const batchCalls = (callback) => {\n    return (...args) => {\n      schedule(() => {\n        callback(...args);\n      });\n    };\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  const setNotifyFunction = (fn) => {\n    notifyFn = fn;\n  };\n  const setBatchNotifyFunction = (fn) => {\n    batchNotifyFn = fn;\n  };\n  return {\n    batch,\n    batchCalls,\n    schedule,\n    setNotifyFunction,\n    setBatchNotifyFunction,\n    setScheduler\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { canFetch, createRetryer, isCancelledError } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#cache = config.cache;\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = config.state || getDefaultState(this.options);\n    this.state = this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    return this.getObserversCount() > 0 && !this.isActive();\n  }\n  isStale() {\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0;\n  }\n  isStaleByTime(staleTime = 0) {\n    return this.state.isInvalidated || this.state.data === void 0 || !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const queryFnContext = {\n        queryKey: this.queryKey,\n        meta: this.meta\n      };\n      addSignalProperty(queryFnContext);\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const context = {\n      fetchOptions,\n      options: this.options,\n      queryKey: this.queryKey,\n      state: this.state,\n      fetchFn\n    };\n    addSignalProperty(context);\n    this.options.behavior?.onFetch(\n      context,\n      this\n    );\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    const onError = (error) => {\n      if (!(isCancelledError(error) && error.silent)) {\n        this.#dispatch({\n          type: \"error\",\n          error\n        });\n      }\n      if (!isCancelledError(error)) {\n        this.#cache.config.onError?.(\n          error,\n          this\n        );\n        this.#cache.config.onSettled?.(\n          this.state.data,\n          error,\n          this\n        );\n      }\n      if (!this.isFetchingOptimistic) {\n        this.scheduleGc();\n      }\n      this.isFetchingOptimistic = false;\n    };\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      abort: abortController.abort.bind(abortController),\n      onSuccess: (data) => {\n        if (data === void 0) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(\n              `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n            );\n          }\n          onError(new Error(`${this.queryHash} data is undefined`));\n          return;\n        }\n        this.setData(data);\n        this.#cache.config.onSuccess?.(data, this);\n        this.#cache.config.onSettled?.(\n          data,\n          this.state.error,\n          this\n        );\n        if (!this.isFetchingOptimistic) {\n          this.scheduleGc();\n        }\n        this.isFetchingOptimistic = false;\n      },\n      onError,\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    return this.#retryer.start();\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n        case \"error\":\n          const error = action.error;\n          if (isCancelledError(error) && error.revert && this.#revertState) {\n            return { ...this.#revertState, fetchStatus: \"idle\" };\n          }\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (!restored) {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this\n        );\n        const context = await this.options.onMutate?.(variables);\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSuccess?.(data, variables, this.state.context);\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSettled?.(data, null, variables, this.state.context);\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Map();\n    this.#mutationId = Date.now();\n  }\n  #mutations;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    const scope = scopeFor(mutation);\n    const mutations = this.#mutations.get(scope) ?? [];\n    mutations.push(mutation);\n    this.#mutations.set(scope, mutations);\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    const scope = scopeFor(mutation);\n    if (this.#mutations.has(scope)) {\n      const mutations = this.#mutations.get(scope)?.filter((x) => x !== mutation);\n      if (mutations) {\n        if (mutations.length === 0) {\n          this.#mutations.delete(scope);\n        } else {\n          this.#mutations.set(scope, mutations);\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const firstPendingMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m.state.status === \"pending\");\n    return !firstPendingMutation || firstPendingMutation === mutation;\n  }\n  runNext(mutation) {\n    const foundMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m !== mutation && m.state.isPaused);\n    return foundMutation?.continue() ?? Promise.resolve();\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((mutation) => {\n        this.remove(mutation);\n      });\n    });\n  }\n  getAll() {\n    return [...this.#mutations.values()].flat();\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id ?? String(mutation.mutationId);\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const fetchFn = async () => {\n        const options = context.options;\n        const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n        const oldPages = context.state.data?.pages || [];\n        const oldPageParams = context.state.data?.pageParams || [];\n        const empty = { pages: [], pageParams: [] };\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const queryFnContext = {\n            queryKey: context.queryKey,\n            pageParam: param,\n            direction: previous ? \"backward\" : \"forward\",\n            meta: context.options.meta\n          };\n          addSignalProperty(queryFnContext);\n          const page = await queryFn(\n            queryFnContext\n          );\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        let result;\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          result = await fetchPage(\n            empty,\n            oldPageParams[0] ?? options.initialPageParam\n          );\n          const remainingPages = pages ?? oldPages.length;\n          for (let i = 1; i < remainingPages; i++) {\n            const param = getNextPageParam(options, result);\n            result = await fetchPage(result, param);\n          }\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data)\n    return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam)\n    return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1)\n      return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0)\n      return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const cachedData = this.getQueryData(options.queryKey);\n    if (cachedData === void 0)\n      return this.fetchQuery(options);\n    else {\n      const defaultedOptions = this.defaultQueryOptions(options);\n      const query = this.#queryCache.build(this, defaultedOptions);\n      if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n        void this.prefetchQuery(defaultedOptions);\n      }\n      return Promise.resolve(cachedData);\n    }\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    const refetchFilters = {\n      type: \"active\",\n      ...filters\n    };\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  cancelQueries(filters = {}, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters = {}, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      const refetchFilters = {\n        ...filters,\n        type: filters.refetchType ?? filters.type ?? \"active\"\n      };\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  refetchQueries(filters = {}, options) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options?.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.enabled !== true && defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","// src/queryObserver.ts\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { fetchState } from \"./query.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options, notifyOptions) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult(notifyOptions);\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    const trackedResult = {};\n    Object.keys(result).forEach((key) => {\n      Object.defineProperty(trackedResult, key, {\n        configurable: false,\n        enumerable: true,\n        get: () => {\n          this.trackProp(key);\n          onPropTracked?.(key);\n          return result[key];\n        }\n      });\n    });\n    return trackedResult;\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    query.isFetchingOptimistic = true;\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    if (options.select && newState.data !== void 0) {\n      if (prevResult && newState.data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(newState.data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    } else {\n      data = newState.data;\n    }\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n        if (options.select && placeholderData !== void 0) {\n          try {\n            placeholderData = options.select(placeholderData);\n            this.#selectError = null;\n          } catch (selectError) {\n            this.#selectError = selectError;\n          }\n        }\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch\n    };\n    return result;\n  }\n  updateResult(notifyOptions) {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const defaultNotifyOptions = {};\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    if (notifyOptions?.listeners !== false && shouldNotifyListeners()) {\n      defaultNotifyOptions.listeners = true;\n    }\n    this.#notify({ ...defaultNotifyOptions, ...notifyOptions });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false) {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const context = this.#currentResult.context;\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(action.data, variables, context);\n          this.#mutateOptions.onSettled?.(action.data, null, variables, context);\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(action.error, variables, context);\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","\"use client\";\n\n// src/isRestoring.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=isRestoring.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","// src/utils.ts\nfunction shouldThrowError(throwError, params) {\n  if (typeof throwError === \"function\") {\n    return throwError(...params);\n  }\n  return !!throwError;\n}\nfunction noop() {\n}\nexport {\n  noop,\n  shouldThrowError\n};\n//# sourceMappingURL=utils.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"./utils.js\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && shouldThrowError(throwOnError, [result.error, query]);\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureStaleTime = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    if (typeof defaultedOptions.staleTime !== \"number\") {\n      defaultedOptions.staleTime = 1e3;\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureStaleTime,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { notifyManager } from \"@tanstack/query-core\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useIsRestoring } from \"./isRestoring.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { ensureStaleTime, fetchOptimistic, shouldSuspend } from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const client = useQueryClient(queryClient);\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureStaleTime(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = isRestoring ? () => void 0 : observer.subscribe(notifyManager.batchCalls(onStoreChange));\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, isRestoring]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions, { listeners: false });\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash)\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport { MutationObserver, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { noop, shouldThrowError } from \"./utils.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","function RetryOperation(timeouts, options) {\n  // Compatibility for the old (timeouts, retryForever) signature\n  if (typeof options === 'boolean') {\n    options = { forever: options };\n  }\n\n  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\n  this._timeouts = timeouts;\n  this._options = options || {};\n  this._maxRetryTime = options && options.maxRetryTime || Infinity;\n  this._fn = null;\n  this._errors = [];\n  this._attempts = 1;\n  this._operationTimeout = null;\n  this._operationTimeoutCb = null;\n  this._timeout = null;\n  this._operationStart = null;\n  this._timer = null;\n\n  if (this._options.forever) {\n    this._cachedTimeouts = this._timeouts.slice(0);\n  }\n}\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.reset = function() {\n  this._attempts = 1;\n  this._timeouts = this._originalTimeouts.slice(0);\n}\n\nRetryOperation.prototype.stop = function() {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n  if (this._timer) {\n    clearTimeout(this._timer);\n  }\n\n  this._timeouts       = [];\n  this._cachedTimeouts = null;\n};\n\nRetryOperation.prototype.retry = function(err) {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (!err) {\n    return false;\n  }\n  var currentTime = new Date().getTime();\n  if (err && currentTime - this._operationStart >= this._maxRetryTime) {\n    this._errors.push(err);\n    this._errors.unshift(new Error('RetryOperation timeout occurred'));\n    return false;\n  }\n\n  this._errors.push(err);\n\n  var timeout = this._timeouts.shift();\n  if (timeout === undefined) {\n    if (this._cachedTimeouts) {\n      // retry forever, only keep last error\n      this._errors.splice(0, this._errors.length - 1);\n      timeout = this._cachedTimeouts.slice(-1);\n    } else {\n      return false;\n    }\n  }\n\n  var self = this;\n  this._timer = setTimeout(function() {\n    self._attempts++;\n\n    if (self._operationTimeoutCb) {\n      self._timeout = setTimeout(function() {\n        self._operationTimeoutCb(self._attempts);\n      }, self._operationTimeout);\n\n      if (self._options.unref) {\n          self._timeout.unref();\n      }\n    }\n\n    self._fn(self._attempts);\n  }, timeout);\n\n  if (this._options.unref) {\n      this._timer.unref();\n  }\n\n  return true;\n};\n\nRetryOperation.prototype.attempt = function(fn, timeoutOps) {\n  this._fn = fn;\n\n  if (timeoutOps) {\n    if (timeoutOps.timeout) {\n      this._operationTimeout = timeoutOps.timeout;\n    }\n    if (timeoutOps.cb) {\n      this._operationTimeoutCb = timeoutOps.cb;\n    }\n  }\n\n  var self = this;\n  if (this._operationTimeoutCb) {\n    this._timeout = setTimeout(function() {\n      self._operationTimeoutCb();\n    }, self._operationTimeout);\n  }\n\n  this._operationStart = new Date().getTime();\n\n  this._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function(fn) {\n  console.log('Using RetryOperation.try() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = function(fn) {\n  console.log('Using RetryOperation.start() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function() {\n  return this._errors;\n};\n\nRetryOperation.prototype.attempts = function() {\n  return this._attempts;\n};\n\nRetryOperation.prototype.mainError = function() {\n  if (this._errors.length === 0) {\n    return null;\n  }\n\n  var counts = {};\n  var mainError = null;\n  var mainErrorCount = 0;\n\n  for (var i = 0; i < this._errors.length; i++) {\n    var error = this._errors[i];\n    var message = error.message;\n    var count = (counts[message] || 0) + 1;\n\n    counts[message] = count;\n\n    if (count >= mainErrorCount) {\n      mainError = error;\n      mainErrorCount = count;\n    }\n  }\n\n  return mainError;\n};\n","var RetryOperation = require('./retry_operation');\n\nexports.operation = function(options) {\n  var timeouts = exports.timeouts(options);\n  return new RetryOperation(timeouts, {\n      forever: options && (options.forever || options.retries === Infinity),\n      unref: options && options.unref,\n      maxRetryTime: options && options.maxRetryTime\n  });\n};\n\nexports.timeouts = function(options) {\n  if (options instanceof Array) {\n    return [].concat(options);\n  }\n\n  var opts = {\n    retries: 10,\n    factor: 2,\n    minTimeout: 1 * 1000,\n    maxTimeout: Infinity,\n    randomize: false\n  };\n  for (var key in options) {\n    opts[key] = options[key];\n  }\n\n  if (opts.minTimeout > opts.maxTimeout) {\n    throw new Error('minTimeout is greater than maxTimeout');\n  }\n\n  var timeouts = [];\n  for (var i = 0; i < opts.retries; i++) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  if (options && options.forever && !timeouts.length) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  // sort the array numerically ascending\n  timeouts.sort(function(a,b) {\n    return a - b;\n  });\n\n  return timeouts;\n};\n\nexports.createTimeout = function(attempt, opts) {\n  var random = (opts.randomize)\n    ? (Math.random() + 1)\n    : 1;\n\n  var timeout = Math.round(random * Math.max(opts.minTimeout, 1) * Math.pow(opts.factor, attempt));\n  timeout = Math.min(timeout, opts.maxTimeout);\n\n  return timeout;\n};\n\nexports.wrap = function(obj, options, methods) {\n  if (options instanceof Array) {\n    methods = options;\n    options = null;\n  }\n\n  if (!methods) {\n    methods = [];\n    for (var key in obj) {\n      if (typeof obj[key] === 'function') {\n        methods.push(key);\n      }\n    }\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    var method   = methods[i];\n    var original = obj[method];\n\n    obj[method] = function retryWrapper(original) {\n      var op       = exports.operation(options);\n      var args     = Array.prototype.slice.call(arguments, 1);\n      var callback = args.pop();\n\n      args.push(function(err) {\n        if (op.retry(err)) {\n          return;\n        }\n        if (err) {\n          arguments[0] = op.mainError();\n        }\n        callback.apply(this, arguments);\n      });\n\n      op.attempt(function() {\n        original.apply(obj, args);\n      });\n    }.bind(obj, original);\n    obj[method].options = options;\n  }\n};\n","module.exports = require('./lib/retry');","// Packages\nvar retrier = require('retry');\n\nfunction retry(fn, opts) {\n  function run(resolve, reject) {\n    var options = opts || {};\n    var op;\n\n    // Default `randomize` to true\n    if (!('randomize' in options)) {\n      options.randomize = true;\n    }\n\n    op = retrier.operation(options);\n\n    // We allow the user to abort retrying\n    // this makes sense in the cases where\n    // knowledge is obtained that retrying\n    // would be futile (e.g.: auth errors)\n\n    function bail(err) {\n      reject(err || new Error('Aborted'));\n    }\n\n    function onError(err, num) {\n      if (err.bail) {\n        bail(err);\n        return;\n      }\n\n      if (!op.retry(err)) {\n        reject(op.mainError());\n      } else if (options.onRetry) {\n        options.onRetry(err, num);\n      }\n    }\n\n    function runAttempt(num) {\n      var val;\n\n      try {\n        val = fn(bail, num);\n      } catch (err) {\n        onError(err, num);\n        return;\n      }\n\n      Promise.resolve(val)\n        .then(resolve)\n        .catch(function catchIt(err) {\n          onError(err, num);\n        });\n    }\n\n    op.attempt(runAttempt);\n  }\n\n  return new Promise(run);\n}\n\nmodule.exports = retry;\n","'use strict';\n// https://en.bitcoin.it/wiki/List_of_address_prefixes\n// Dogecoin BIP32 is a proposed standard: https://bitcointalk.org/index.php?topic=409731\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.testnet = exports.regtest = exports.bitcoin = void 0;\n/**\n * Represents the Bitcoin network configuration.\n */\nexports.bitcoin = {\n  /**\n   * The message prefix used for signing Bitcoin messages.\n   */\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  /**\n   * The Bech32 prefix used for Bitcoin addresses.\n   */\n  bech32: 'bc',\n  /**\n   * The BIP32 key prefixes for Bitcoin.\n   */\n  bip32: {\n    /**\n     * The public key prefix for BIP32 extended public keys.\n     */\n    public: 0x0488b21e,\n    /**\n     * The private key prefix for BIP32 extended private keys.\n     */\n    private: 0x0488ade4,\n  },\n  /**\n   * The prefix for Bitcoin public key hashes.\n   */\n  pubKeyHash: 0x00,\n  /**\n   * The prefix for Bitcoin script hashes.\n   */\n  scriptHash: 0x05,\n  /**\n   * The prefix for Bitcoin Wallet Import Format (WIF) private keys.\n   */\n  wif: 0x80,\n};\n/**\n * Represents the regtest network configuration.\n */\nexports.regtest = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bcrt',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n/**\n * Represents the testnet network configuration.\n */\nexports.testnet = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'tb',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n","'use strict';\n// Reference https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki\n// Format: 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n// NOTE: SIGHASH byte ignored AND restricted, truncate before use\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.encode = exports.decode = exports.check = void 0;\nfunction check(buffer) {\n  if (buffer.length < 8) return false;\n  if (buffer.length > 72) return false;\n  if (buffer[0] !== 0x30) return false;\n  if (buffer[1] !== buffer.length - 2) return false;\n  if (buffer[2] !== 0x02) return false;\n  const lenR = buffer[3];\n  if (lenR === 0) return false;\n  if (5 + lenR >= buffer.length) return false;\n  if (buffer[4 + lenR] !== 0x02) return false;\n  const lenS = buffer[5 + lenR];\n  if (lenS === 0) return false;\n  if (6 + lenR + lenS !== buffer.length) return false;\n  if (buffer[4] & 0x80) return false;\n  if (lenR > 1 && buffer[4] === 0x00 && !(buffer[5] & 0x80)) return false;\n  if (buffer[lenR + 6] & 0x80) return false;\n  if (lenS > 1 && buffer[lenR + 6] === 0x00 && !(buffer[lenR + 7] & 0x80))\n    return false;\n  return true;\n}\nexports.check = check;\nfunction decode(buffer) {\n  if (buffer.length < 8) throw new Error('DER sequence length is too short');\n  if (buffer.length > 72) throw new Error('DER sequence length is too long');\n  if (buffer[0] !== 0x30) throw new Error('Expected DER sequence');\n  if (buffer[1] !== buffer.length - 2)\n    throw new Error('DER sequence length is invalid');\n  if (buffer[2] !== 0x02) throw new Error('Expected DER integer');\n  const lenR = buffer[3];\n  if (lenR === 0) throw new Error('R length is zero');\n  if (5 + lenR >= buffer.length) throw new Error('R length is too long');\n  if (buffer[4 + lenR] !== 0x02) throw new Error('Expected DER integer (2)');\n  const lenS = buffer[5 + lenR];\n  if (lenS === 0) throw new Error('S length is zero');\n  if (6 + lenR + lenS !== buffer.length) throw new Error('S length is invalid');\n  if (buffer[4] & 0x80) throw new Error('R value is negative');\n  if (lenR > 1 && buffer[4] === 0x00 && !(buffer[5] & 0x80))\n    throw new Error('R value excessively padded');\n  if (buffer[lenR + 6] & 0x80) throw new Error('S value is negative');\n  if (lenS > 1 && buffer[lenR + 6] === 0x00 && !(buffer[lenR + 7] & 0x80))\n    throw new Error('S value excessively padded');\n  // non-BIP66 - extract R, S values\n  return {\n    r: buffer.slice(4, 4 + lenR),\n    s: buffer.slice(6 + lenR),\n  };\n}\nexports.decode = decode;\n/*\n * Expects r and s to be positive DER integers.\n *\n * The DER format uses the most significant bit as a sign bit (& 0x80).\n * If the significant bit is set AND the integer is positive, a 0x00 is prepended.\n *\n * Examples:\n *\n *      0 =>     0x00\n *      1 =>     0x01\n *     -1 =>     0xff\n *    127 =>     0x7f\n *   -127 =>     0x81\n *    128 =>   0x0080\n *   -128 =>     0x80\n *    255 =>   0x00ff\n *   -255 =>   0xff01\n *  16300 =>   0x3fac\n * -16300 =>   0xc054\n *  62300 => 0x00f35c\n * -62300 => 0xff0ca4\n */\nfunction encode(r, s) {\n  const lenR = r.length;\n  const lenS = s.length;\n  if (lenR === 0) throw new Error('R length is zero');\n  if (lenS === 0) throw new Error('S length is zero');\n  if (lenR > 33) throw new Error('R length is too long');\n  if (lenS > 33) throw new Error('S length is too long');\n  if (r[0] & 0x80) throw new Error('R value is negative');\n  if (s[0] & 0x80) throw new Error('S value is negative');\n  if (lenR > 1 && r[0] === 0x00 && !(r[1] & 0x80))\n    throw new Error('R value excessively padded');\n  if (lenS > 1 && s[0] === 0x00 && !(s[1] & 0x80))\n    throw new Error('S value excessively padded');\n  const signature = Buffer.allocUnsafe(6 + lenR + lenS);\n  // 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n  signature[0] = 0x30;\n  signature[1] = signature.length - 2;\n  signature[2] = 0x02;\n  signature[3] = r.length;\n  r.copy(signature, 4);\n  signature[4 + lenR] = 0x02;\n  signature[5 + lenR] = s.length;\n  s.copy(signature, 6 + lenR);\n  return signature;\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.REVERSE_OPS = exports.OPS = void 0;\nconst OPS = {\n  OP_FALSE: 0,\n  OP_0: 0,\n  OP_PUSHDATA1: 76,\n  OP_PUSHDATA2: 77,\n  OP_PUSHDATA4: 78,\n  OP_1NEGATE: 79,\n  OP_RESERVED: 80,\n  OP_TRUE: 81,\n  OP_1: 81,\n  OP_2: 82,\n  OP_3: 83,\n  OP_4: 84,\n  OP_5: 85,\n  OP_6: 86,\n  OP_7: 87,\n  OP_8: 88,\n  OP_9: 89,\n  OP_10: 90,\n  OP_11: 91,\n  OP_12: 92,\n  OP_13: 93,\n  OP_14: 94,\n  OP_15: 95,\n  OP_16: 96,\n  OP_NOP: 97,\n  OP_VER: 98,\n  OP_IF: 99,\n  OP_NOTIF: 100,\n  OP_VERIF: 101,\n  OP_VERNOTIF: 102,\n  OP_ELSE: 103,\n  OP_ENDIF: 104,\n  OP_VERIFY: 105,\n  OP_RETURN: 106,\n  OP_TOALTSTACK: 107,\n  OP_FROMALTSTACK: 108,\n  OP_2DROP: 109,\n  OP_2DUP: 110,\n  OP_3DUP: 111,\n  OP_2OVER: 112,\n  OP_2ROT: 113,\n  OP_2SWAP: 114,\n  OP_IFDUP: 115,\n  OP_DEPTH: 116,\n  OP_DROP: 117,\n  OP_DUP: 118,\n  OP_NIP: 119,\n  OP_OVER: 120,\n  OP_PICK: 121,\n  OP_ROLL: 122,\n  OP_ROT: 123,\n  OP_SWAP: 124,\n  OP_TUCK: 125,\n  OP_CAT: 126,\n  OP_SUBSTR: 127,\n  OP_LEFT: 128,\n  OP_RIGHT: 129,\n  OP_SIZE: 130,\n  OP_INVERT: 131,\n  OP_AND: 132,\n  OP_OR: 133,\n  OP_XOR: 134,\n  OP_EQUAL: 135,\n  OP_EQUALVERIFY: 136,\n  OP_RESERVED1: 137,\n  OP_RESERVED2: 138,\n  OP_1ADD: 139,\n  OP_1SUB: 140,\n  OP_2MUL: 141,\n  OP_2DIV: 142,\n  OP_NEGATE: 143,\n  OP_ABS: 144,\n  OP_NOT: 145,\n  OP_0NOTEQUAL: 146,\n  OP_ADD: 147,\n  OP_SUB: 148,\n  OP_MUL: 149,\n  OP_DIV: 150,\n  OP_MOD: 151,\n  OP_LSHIFT: 152,\n  OP_RSHIFT: 153,\n  OP_BOOLAND: 154,\n  OP_BOOLOR: 155,\n  OP_NUMEQUAL: 156,\n  OP_NUMEQUALVERIFY: 157,\n  OP_NUMNOTEQUAL: 158,\n  OP_LESSTHAN: 159,\n  OP_GREATERTHAN: 160,\n  OP_LESSTHANOREQUAL: 161,\n  OP_GREATERTHANOREQUAL: 162,\n  OP_MIN: 163,\n  OP_MAX: 164,\n  OP_WITHIN: 165,\n  OP_RIPEMD160: 166,\n  OP_SHA1: 167,\n  OP_SHA256: 168,\n  OP_HASH160: 169,\n  OP_HASH256: 170,\n  OP_CODESEPARATOR: 171,\n  OP_CHECKSIG: 172,\n  OP_CHECKSIGVERIFY: 173,\n  OP_CHECKMULTISIG: 174,\n  OP_CHECKMULTISIGVERIFY: 175,\n  OP_NOP1: 176,\n  OP_NOP2: 177,\n  OP_CHECKLOCKTIMEVERIFY: 177,\n  OP_NOP3: 178,\n  OP_CHECKSEQUENCEVERIFY: 178,\n  OP_NOP4: 179,\n  OP_NOP5: 180,\n  OP_NOP6: 181,\n  OP_NOP7: 182,\n  OP_NOP8: 183,\n  OP_NOP9: 184,\n  OP_NOP10: 185,\n  OP_CHECKSIGADD: 186,\n  OP_PUBKEYHASH: 253,\n  OP_PUBKEY: 254,\n  OP_INVALIDOPCODE: 255,\n};\nexports.OPS = OPS;\nconst REVERSE_OPS = {};\nexports.REVERSE_OPS = REVERSE_OPS;\nfor (const op of Object.keys(OPS)) {\n  const code = OPS[op];\n  REVERSE_OPS[code] = op;\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.decode = exports.encode = exports.encodingLength = void 0;\nconst ops_1 = require('./ops');\n/**\n * Calculates the encoding length of a number used for push data in Bitcoin transactions.\n * @param i The number to calculate the encoding length for.\n * @returns The encoding length of the number.\n */\nfunction encodingLength(i) {\n  return i < ops_1.OPS.OP_PUSHDATA1 ? 1 : i <= 0xff ? 2 : i <= 0xffff ? 3 : 5;\n}\nexports.encodingLength = encodingLength;\n/**\n * Encodes a number into a buffer using a variable-length encoding scheme.\n * The encoded buffer is written starting at the specified offset.\n * Returns the size of the encoded buffer.\n *\n * @param buffer - The buffer to write the encoded data into.\n * @param num - The number to encode.\n * @param offset - The offset at which to start writing the encoded buffer.\n * @returns The size of the encoded buffer.\n */\nfunction encode(buffer, num, offset) {\n  const size = encodingLength(num);\n  // ~6 bit\n  if (size === 1) {\n    buffer.writeUInt8(num, offset);\n    // 8 bit\n  } else if (size === 2) {\n    buffer.writeUInt8(ops_1.OPS.OP_PUSHDATA1, offset);\n    buffer.writeUInt8(num, offset + 1);\n    // 16 bit\n  } else if (size === 3) {\n    buffer.writeUInt8(ops_1.OPS.OP_PUSHDATA2, offset);\n    buffer.writeUInt16LE(num, offset + 1);\n    // 32 bit\n  } else {\n    buffer.writeUInt8(ops_1.OPS.OP_PUSHDATA4, offset);\n    buffer.writeUInt32LE(num, offset + 1);\n  }\n  return size;\n}\nexports.encode = encode;\n/**\n * Decodes a buffer and returns information about the opcode, number, and size.\n * @param buffer - The buffer to decode.\n * @param offset - The offset within the buffer to start decoding.\n * @returns An object containing the opcode, number, and size, or null if decoding fails.\n */\nfunction decode(buffer, offset) {\n  const opcode = buffer.readUInt8(offset);\n  let num;\n  let size;\n  // ~6 bit\n  if (opcode < ops_1.OPS.OP_PUSHDATA1) {\n    num = opcode;\n    size = 1;\n    // 8 bit\n  } else if (opcode === ops_1.OPS.OP_PUSHDATA1) {\n    if (offset + 2 > buffer.length) return null;\n    num = buffer.readUInt8(offset + 1);\n    size = 2;\n    // 16 bit\n  } else if (opcode === ops_1.OPS.OP_PUSHDATA2) {\n    if (offset + 3 > buffer.length) return null;\n    num = buffer.readUInt16LE(offset + 1);\n    size = 3;\n    // 32 bit\n  } else {\n    if (offset + 5 > buffer.length) return null;\n    if (opcode !== ops_1.OPS.OP_PUSHDATA4) throw new Error('Unexpected opcode');\n    num = buffer.readUInt32LE(offset + 1);\n    size = 5;\n  }\n  return {\n    opcode,\n    number: num,\n    size,\n  };\n}\nexports.decode = decode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.encode = exports.decode = void 0;\n/**\n * Decodes a script number from a buffer.\n *\n * @param buffer - The buffer containing the script number.\n * @param maxLength - The maximum length of the script number. Defaults to 4.\n * @param minimal - Whether the script number should be minimal. Defaults to true.\n * @returns The decoded script number.\n * @throws {TypeError} If the script number overflows the maximum length.\n * @throws {Error} If the script number is not minimally encoded when minimal is true.\n */\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0)\n        throw new Error('Non-minimally encoded script number');\n    }\n  }\n  // 40-bit\n  if (length === 5) {\n    const a = buffer.readUInt32LE(0);\n    const b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  let result = 0;\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i);\n  }\n  if (buffer[length - 1] & 0x80)\n    return -(result & ~(0x80 << (8 * (length - 1))));\n  return result;\n}\nexports.decode = decode;\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff\n    ? 5\n    : i > 0x7fffff\n    ? 4\n    : i > 0x7fff\n    ? 3\n    : i > 0x7f\n    ? 2\n    : i > 0x00\n    ? 1\n    : 0;\n}\n/**\n * Encodes a number into a Buffer using a specific format.\n *\n * @param _number - The number to encode.\n * @returns The encoded number as a Buffer.\n */\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = Buffer.allocUnsafe(size);\n  const negative = _number < 0;\n  for (let i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n  return buffer;\n}\nexports.encode = encode;\n","var types = {\n  Array: function (value) { return value !== null && value !== undefined && value.constructor === Array },\n  Boolean: function (value) { return typeof value === 'boolean' },\n  Function: function (value) { return typeof value === 'function' },\n  Nil: function (value) { return value === undefined || value === null },\n  Number: function (value) { return typeof value === 'number' },\n  Object: function (value) { return typeof value === 'object' },\n  String: function (value) { return typeof value === 'string' },\n  '': function () { return true }\n}\n\n// TODO: deprecate\ntypes.Null = types.Nil\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","var native = require('./native')\n\nfunction getTypeName (fn) {\n  return fn.name || fn.toString().match(/function (.*?)\\s*\\(/)[1]\n}\n\nfunction getValueTypeName (value) {\n  return native.Nil(value) ? '' : getTypeName(value.constructor)\n}\n\nfunction getValue (value) {\n  if (native.Function(value)) return ''\n  if (native.String(value)) return JSON.stringify(value)\n  if (value && native.Object(value)) return ''\n  return value\n}\n\nfunction captureStackTrace (e, t) {\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(e, t)\n  }\n}\n\nfunction tfJSON (type) {\n  if (native.Function(type)) return type.toJSON ? type.toJSON() : getTypeName(type)\n  if (native.Array(type)) return 'Array'\n  if (type && native.Object(type)) return 'Object'\n\n  return type !== undefined ? type : ''\n}\n\nfunction tfErrorString (type, value, valueTypeName) {\n  var valueJson = getValue(value)\n\n  return 'Expected ' + tfJSON(type) + ', got' +\n    (valueTypeName !== '' ? ' ' + valueTypeName : '') +\n    (valueJson !== '' ? ' ' + valueJson : '')\n}\n\nfunction TfTypeError (type, value, valueTypeName) {\n  valueTypeName = valueTypeName || getValueTypeName(value)\n  this.message = tfErrorString(type, value, valueTypeName)\n\n  captureStackTrace(this, TfTypeError)\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfTypeError.prototype = Object.create(Error.prototype)\nTfTypeError.prototype.constructor = TfTypeError\n\nfunction tfPropertyErrorString (type, label, name, value, valueTypeName) {\n  var description = '\" of type '\n  if (label === 'key') description = '\" with key type '\n\n  return tfErrorString('property \"' + tfJSON(name) + description + tfJSON(type), value, valueTypeName)\n}\n\nfunction TfPropertyTypeError (type, property, label, value, valueTypeName) {\n  if (type) {\n    valueTypeName = valueTypeName || getValueTypeName(value)\n    this.message = tfPropertyErrorString(type, label, property, value, valueTypeName)\n  } else {\n    this.message = 'Unexpected property \"' + property + '\"'\n  }\n\n  captureStackTrace(this, TfTypeError)\n  this.__label = label\n  this.__property = property\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfPropertyTypeError.prototype = Object.create(Error.prototype)\nTfPropertyTypeError.prototype.constructor = TfTypeError\n\nfunction tfCustomError (expected, actual) {\n  return new TfTypeError(expected, {}, actual)\n}\n\nfunction tfSubError (e, property, label) {\n  // sub child?\n  if (e instanceof TfPropertyTypeError) {\n    property = property + '.' + e.__property\n\n    e = new TfPropertyTypeError(\n      e.__type, property, e.__label, e.__value, e.__valueTypeName\n    )\n\n  // child?\n  } else if (e instanceof TfTypeError) {\n    e = new TfPropertyTypeError(\n      e.__type, property, label, e.__value, e.__valueTypeName\n    )\n  }\n\n  captureStackTrace(e)\n  return e\n}\n\nmodule.exports = {\n  TfTypeError: TfTypeError,\n  TfPropertyTypeError: TfPropertyTypeError,\n  tfCustomError: tfCustomError,\n  tfSubError: tfSubError,\n  tfJSON: tfJSON,\n  getValueTypeName: getValueTypeName\n}\n","var ERRORS = require('./errors')\nvar NATIVE = require('./native')\n\n// short-hand\nvar tfJSON = ERRORS.tfJSON\nvar TfTypeError = ERRORS.TfTypeError\nvar TfPropertyTypeError = ERRORS.TfPropertyTypeError\nvar tfSubError = ERRORS.tfSubError\nvar getValueTypeName = ERRORS.getValueTypeName\n\nvar TYPES = {\n  arrayOf: function arrayOf (type, options) {\n    type = compile(type)\n    options = options || {}\n\n    function _arrayOf (array, strict) {\n      if (!NATIVE.Array(array)) return false\n      if (NATIVE.Nil(array)) return false\n      if (options.minLength !== undefined && array.length < options.minLength) return false\n      if (options.maxLength !== undefined && array.length > options.maxLength) return false\n      if (options.length !== undefined && array.length !== options.length) return false\n\n      return array.every(function (value, i) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _arrayOf.toJSON = function () {\n      var str = '[' + tfJSON(type) + ']'\n      if (options.length !== undefined) {\n        str += '{' + options.length + '}'\n      } else if (options.minLength !== undefined || options.maxLength !== undefined) {\n        str += '{' +\n          (options.minLength === undefined ? 0 : options.minLength) + ',' +\n          (options.maxLength === undefined ? Infinity : options.maxLength) + '}'\n      }\n      return str\n    }\n\n    return _arrayOf\n  },\n\n  maybe: function maybe (type) {\n    type = compile(type)\n\n    function _maybe (value, strict) {\n      return NATIVE.Nil(value) || type(value, strict, maybe)\n    }\n    _maybe.toJSON = function () { return '?' + tfJSON(type) }\n\n    return _maybe\n  },\n\n  map: function map (propertyType, propertyKeyType) {\n    propertyType = compile(propertyType)\n    if (propertyKeyType) propertyKeyType = compile(propertyKeyType)\n\n    function _map (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      for (var propertyName in value) {\n        try {\n          if (propertyKeyType) {\n            typeforce(propertyKeyType, propertyName, strict)\n          }\n        } catch (e) {\n          throw tfSubError(e, propertyName, 'key')\n        }\n\n        try {\n          var propertyValue = value[propertyName]\n          typeforce(propertyType, propertyValue, strict)\n        } catch (e) {\n          throw tfSubError(e, propertyName)\n        }\n      }\n\n      return true\n    }\n\n    if (propertyKeyType) {\n      _map.toJSON = function () {\n        return '{' + tfJSON(propertyKeyType) + ': ' + tfJSON(propertyType) + '}'\n      }\n    } else {\n      _map.toJSON = function () { return '{' + tfJSON(propertyType) + '}' }\n    }\n\n    return _map\n  },\n\n  object: function object (uncompiled) {\n    var type = {}\n\n    for (var typePropertyName in uncompiled) {\n      type[typePropertyName] = compile(uncompiled[typePropertyName])\n    }\n\n    function _object (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      var propertyName\n\n      try {\n        for (propertyName in type) {\n          var propertyType = type[propertyName]\n          var propertyValue = value[propertyName]\n\n          typeforce(propertyType, propertyValue, strict)\n        }\n      } catch (e) {\n        throw tfSubError(e, propertyName)\n      }\n\n      if (strict) {\n        for (propertyName in value) {\n          if (type[propertyName]) continue\n\n          throw new TfPropertyTypeError(undefined, propertyName)\n        }\n      }\n\n      return true\n    }\n    _object.toJSON = function () { return tfJSON(type) }\n\n    return _object\n  },\n\n  anyOf: function anyOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _anyOf (value, strict) {\n      return types.some(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _anyOf.toJSON = function () { return types.map(tfJSON).join('|') }\n\n    return _anyOf\n  },\n\n  allOf: function allOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _allOf (value, strict) {\n      return types.every(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _allOf.toJSON = function () { return types.map(tfJSON).join(' & ') }\n\n    return _allOf\n  },\n\n  quacksLike: function quacksLike (type) {\n    function _quacksLike (value) {\n      return type === getValueTypeName(value)\n    }\n    _quacksLike.toJSON = function () { return type }\n\n    return _quacksLike\n  },\n\n  tuple: function tuple () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _tuple (values, strict) {\n      if (NATIVE.Nil(values)) return false\n      if (NATIVE.Nil(values.length)) return false\n      if (strict && (values.length !== types.length)) return false\n\n      return types.every(function (type, i) {\n        try {\n          return typeforce(type, values[i], strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _tuple.toJSON = function () { return '(' + types.map(tfJSON).join(', ') + ')' }\n\n    return _tuple\n  },\n\n  value: function value (expected) {\n    function _value (actual) {\n      return actual === expected\n    }\n    _value.toJSON = function () { return expected }\n\n    return _value\n  }\n}\n\n// TODO: deprecate\nTYPES.oneOf = TYPES.anyOf\n\nfunction compile (type) {\n  if (NATIVE.String(type)) {\n    if (type[0] === '?') return TYPES.maybe(type.slice(1))\n\n    return NATIVE[type] || TYPES.quacksLike(type)\n  } else if (type && NATIVE.Object(type)) {\n    if (NATIVE.Array(type)) {\n      if (type.length !== 1) throw new TypeError('Expected compile() parameter of type Array of length 1')\n      return TYPES.arrayOf(type[0])\n    }\n\n    return TYPES.object(type)\n  } else if (NATIVE.Function(type)) {\n    return type\n  }\n\n  return TYPES.value(type)\n}\n\nfunction typeforce (type, value, strict, surrogate) {\n  if (NATIVE.Function(type)) {\n    if (type(value, strict)) return true\n\n    throw new TfTypeError(surrogate || type, value)\n  }\n\n  // JIT\n  return typeforce(compile(type), value, strict)\n}\n\n// assign types to typeforce function\nfor (var typeName in NATIVE) {\n  typeforce[typeName] = NATIVE[typeName]\n}\n\nfor (typeName in TYPES) {\n  typeforce[typeName] = TYPES[typeName]\n}\n\nvar EXTRA = require('./extra')\nfor (typeName in EXTRA) {\n  typeforce[typeName] = EXTRA[typeName]\n}\n\ntypeforce.compile = compile\ntypeforce.TfTypeError = TfTypeError\ntypeforce.TfPropertyTypeError = TfPropertyTypeError\n\nmodule.exports = typeforce\n","var NATIVE = require('./native')\nvar ERRORS = require('./errors')\n\nfunction _Buffer (value) {\n  return Buffer.isBuffer(value)\n}\n\nfunction Hex (value) {\n  return typeof value === 'string' && /^([0-9a-f]{2})+$/i.test(value)\n}\n\nfunction _LengthN (type, length) {\n  var name = type.toJSON()\n\n  function Length (value) {\n    if (!type(value)) return false\n    if (value.length === length) return true\n\n    throw ERRORS.tfCustomError(name + '(Length: ' + length + ')', name + '(Length: ' + value.length + ')')\n  }\n  Length.toJSON = function () { return name }\n\n  return Length\n}\n\nvar _ArrayN = _LengthN.bind(null, NATIVE.Array)\nvar _BufferN = _LengthN.bind(null, _Buffer)\nvar _HexN = _LengthN.bind(null, Hex)\nvar _StringN = _LengthN.bind(null, NATIVE.String)\n\nfunction Range (a, b, f) {\n  f = f || NATIVE.Number\n  function _range (value, strict) {\n    return f(value, strict) && (value > a) && (value < b)\n  }\n  _range.toJSON = function () {\n    return `${f.toJSON()} between [${a}, ${b}]`\n  }\n  return _range\n}\n\nvar INT53_MAX = Math.pow(2, 53) - 1\n\nfunction Finite (value) {\n  return typeof value === 'number' && isFinite(value)\n}\nfunction Int8 (value) { return ((value << 24) >> 24) === value }\nfunction Int16 (value) { return ((value << 16) >> 16) === value }\nfunction Int32 (value) { return (value | 0) === value }\nfunction Int53 (value) {\n  return typeof value === 'number' &&\n    value >= -INT53_MAX &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\nfunction UInt8 (value) { return (value & 0xff) === value }\nfunction UInt16 (value) { return (value & 0xffff) === value }\nfunction UInt32 (value) { return (value >>> 0) === value }\nfunction UInt53 (value) {\n  return typeof value === 'number' &&\n    value >= 0 &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\n\nvar types = {\n  ArrayN: _ArrayN,\n  Buffer: _Buffer,\n  BufferN: _BufferN,\n  Finite: Finite,\n  Hex: Hex,\n  HexN: _HexN,\n  Int8: Int8,\n  Int16: Int16,\n  Int32: Int32,\n  Int53: Int53,\n  Range: Range,\n  StringN: _StringN,\n  UInt8: UInt8,\n  UInt16: UInt16,\n  UInt32: UInt32,\n  UInt53: UInt53\n}\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.signature =\n  exports.number =\n  exports.isCanonicalScriptSignature =\n  exports.isDefinedHashType =\n  exports.isCanonicalPubKey =\n  exports.toStack =\n  exports.fromASM =\n  exports.toASM =\n  exports.decompile =\n  exports.compile =\n  exports.countNonPushOnlyOPs =\n  exports.isPushOnly =\n  exports.OPS =\n    void 0;\n/**\n * Script tools, including decompile, compile, toASM, fromASM, toStack, isCanonicalPubKey, isCanonicalScriptSignature\n * @packageDocumentation\n */\nconst bip66 = require('./bip66');\nconst ops_1 = require('./ops');\nObject.defineProperty(exports, 'OPS', {\n  enumerable: true,\n  get: function () {\n    return ops_1.OPS;\n  },\n});\nconst pushdata = require('./push_data');\nconst scriptNumber = require('./script_number');\nconst scriptSignature = require('./script_signature');\nconst types = require('./types');\nconst { typeforce } = types;\nconst OP_INT_BASE = ops_1.OPS.OP_RESERVED; // OP_1 - 1\nfunction isOPInt(value) {\n  return (\n    types.Number(value) &&\n    (value === ops_1.OPS.OP_0 ||\n      (value >= ops_1.OPS.OP_1 && value <= ops_1.OPS.OP_16) ||\n      value === ops_1.OPS.OP_1NEGATE)\n  );\n}\nfunction isPushOnlyChunk(value) {\n  return types.Buffer(value) || isOPInt(value);\n}\nfunction isPushOnly(value) {\n  return types.Array(value) && value.every(isPushOnlyChunk);\n}\nexports.isPushOnly = isPushOnly;\nfunction countNonPushOnlyOPs(value) {\n  return value.length - value.filter(isPushOnlyChunk).length;\n}\nexports.countNonPushOnlyOPs = countNonPushOnlyOPs;\nfunction asMinimalOP(buffer) {\n  if (buffer.length === 0) return ops_1.OPS.OP_0;\n  if (buffer.length !== 1) return;\n  if (buffer[0] >= 1 && buffer[0] <= 16) return OP_INT_BASE + buffer[0];\n  if (buffer[0] === 0x81) return ops_1.OPS.OP_1NEGATE;\n}\nfunction chunksIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction chunksIsArray(buf) {\n  return types.Array(buf);\n}\nfunction singleChunkIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\n/**\n * Compiles an array of chunks into a Buffer.\n *\n * @param chunks - The array of chunks to compile.\n * @returns The compiled Buffer.\n * @throws Error if the compilation fails.\n */\nfunction compile(chunks) {\n  // TODO: remove me\n  if (chunksIsBuffer(chunks)) return chunks;\n  typeforce(types.Array, chunks);\n  const bufferSize = chunks.reduce((accum, chunk) => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      if (chunk.length === 1 && asMinimalOP(chunk) !== undefined) {\n        return accum + 1;\n      }\n      return accum + pushdata.encodingLength(chunk.length) + chunk.length;\n    }\n    // opcode\n    return accum + 1;\n  }, 0.0);\n  const buffer = Buffer.allocUnsafe(bufferSize);\n  let offset = 0;\n  chunks.forEach(chunk => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      const opcode = asMinimalOP(chunk);\n      if (opcode !== undefined) {\n        buffer.writeUInt8(opcode, offset);\n        offset += 1;\n        return;\n      }\n      offset += pushdata.encode(buffer, chunk.length, offset);\n      chunk.copy(buffer, offset);\n      offset += chunk.length;\n      // opcode\n    } else {\n      buffer.writeUInt8(chunk, offset);\n      offset += 1;\n    }\n  });\n  if (offset !== buffer.length) throw new Error('Could not decode chunks');\n  return buffer;\n}\nexports.compile = compile;\nfunction decompile(buffer) {\n  // TODO: remove me\n  if (chunksIsArray(buffer)) return buffer;\n  typeforce(types.Buffer, buffer);\n  const chunks = [];\n  let i = 0;\n  while (i < buffer.length) {\n    const opcode = buffer[i];\n    // data chunk\n    if (opcode > ops_1.OPS.OP_0 && opcode <= ops_1.OPS.OP_PUSHDATA4) {\n      const d = pushdata.decode(buffer, i);\n      // did reading a pushDataInt fail?\n      if (d === null) return null;\n      i += d.size;\n      // attempt to read too much data?\n      if (i + d.number > buffer.length) return null;\n      const data = buffer.slice(i, i + d.number);\n      i += d.number;\n      // decompile minimally\n      const op = asMinimalOP(data);\n      if (op !== undefined) {\n        chunks.push(op);\n      } else {\n        chunks.push(data);\n      }\n      // opcode\n    } else {\n      chunks.push(opcode);\n      i += 1;\n    }\n  }\n  return chunks;\n}\nexports.decompile = decompile;\n/**\n * Converts the given chunks into an ASM (Assembly) string representation.\n * If the chunks parameter is a Buffer, it will be decompiled into a Stack before conversion.\n * @param chunks - The chunks to convert into ASM.\n * @returns The ASM string representation of the chunks.\n */\nfunction toASM(chunks) {\n  if (chunksIsBuffer(chunks)) {\n    chunks = decompile(chunks);\n  }\n  if (!chunks) {\n    throw new Error('Could not convert invalid chunks to ASM');\n  }\n  return chunks\n    .map(chunk => {\n      // data?\n      if (singleChunkIsBuffer(chunk)) {\n        const op = asMinimalOP(chunk);\n        if (op === undefined) return chunk.toString('hex');\n        chunk = op;\n      }\n      // opcode!\n      return ops_1.REVERSE_OPS[chunk];\n    })\n    .join(' ');\n}\nexports.toASM = toASM;\n/**\n * Converts an ASM string to a Buffer.\n * @param asm The ASM string to convert.\n * @returns The converted Buffer.\n */\nfunction fromASM(asm) {\n  typeforce(types.String, asm);\n  return compile(\n    asm.split(' ').map(chunkStr => {\n      // opcode?\n      if (ops_1.OPS[chunkStr] !== undefined) return ops_1.OPS[chunkStr];\n      typeforce(types.Hex, chunkStr);\n      // data!\n      return Buffer.from(chunkStr, 'hex');\n    }),\n  );\n}\nexports.fromASM = fromASM;\n/**\n * Converts the given chunks into a stack of buffers.\n *\n * @param chunks - The chunks to convert.\n * @returns The stack of buffers.\n */\nfunction toStack(chunks) {\n  chunks = decompile(chunks);\n  typeforce(isPushOnly, chunks);\n  return chunks.map(op => {\n    if (singleChunkIsBuffer(op)) return op;\n    if (op === ops_1.OPS.OP_0) return Buffer.allocUnsafe(0);\n    return scriptNumber.encode(op - OP_INT_BASE);\n  });\n}\nexports.toStack = toStack;\nfunction isCanonicalPubKey(buffer) {\n  return types.isPoint(buffer);\n}\nexports.isCanonicalPubKey = isCanonicalPubKey;\nfunction isDefinedHashType(hashType) {\n  const hashTypeMod = hashType & ~0x80;\n  // return hashTypeMod > SIGHASH_ALL && hashTypeMod < SIGHASH_SINGLE\n  return hashTypeMod > 0x00 && hashTypeMod < 0x04;\n}\nexports.isDefinedHashType = isDefinedHashType;\nfunction isCanonicalScriptSignature(buffer) {\n  if (!Buffer.isBuffer(buffer)) return false;\n  if (!isDefinedHashType(buffer[buffer.length - 1])) return false;\n  return bip66.check(buffer.slice(0, -1));\n}\nexports.isCanonicalScriptSignature = isCanonicalScriptSignature;\nexports.number = scriptNumber;\nexports.signature = scriptSignature;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.encode = exports.decode = void 0;\nconst bip66 = require('./bip66');\nconst script_1 = require('./script');\nconst types = require('./types');\nconst { typeforce } = types;\nconst ZERO = Buffer.alloc(1, 0);\n/**\n * Converts a buffer to a DER-encoded buffer.\n * @param x - The buffer to be converted.\n * @returns The DER-encoded buffer.\n */\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return Buffer.concat([ZERO, x], 1 + x.length);\n  return x;\n}\n/**\n * Converts a DER-encoded signature to a buffer.\n * If the first byte of the input buffer is 0x00, it is skipped.\n * The resulting buffer is 32 bytes long, filled with zeros if necessary.\n * @param x - The DER-encoded signature.\n * @returns The converted buffer.\n */\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = Buffer.alloc(32, 0);\n  const bstart = Math.max(0, 32 - x.length);\n  x.copy(buffer, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\n/**\n * Decodes a buffer into a ScriptSignature object.\n * @param buffer - The buffer to decode.\n * @returns The decoded ScriptSignature object.\n * @throws Error if the hashType is invalid.\n */\nfunction decode(buffer) {\n  const hashType = buffer.readUInt8(buffer.length - 1);\n  if (!(0, script_1.isDefinedHashType)(hashType)) {\n    throw new Error('Invalid hashType ' + hashType);\n  }\n  const decoded = bip66.decode(buffer.slice(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = Buffer.concat([r, s], 64);\n  return { signature, hashType };\n}\nexports.decode = decode;\n/**\n * Encodes a signature and hash type into a buffer.\n * @param signature - The signature to encode.\n * @param hashType - The hash type to encode.\n * @returns The encoded buffer.\n * @throws Error if the hashType is invalid.\n */\nfunction encode(signature, hashType) {\n  typeforce(\n    {\n      signature: types.BufferN(64),\n      hashType: types.UInt8,\n    },\n    { signature, hashType },\n  );\n  if (!(0, script_1.isDefinedHashType)(hashType)) {\n    throw new Error('Invalid hashType ' + hashType);\n  }\n  const hashTypeBuffer = Buffer.allocUnsafe(1);\n  hashTypeBuffer.writeUInt8(hashType, 0);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return Buffer.concat([bip66.encode(r, s), hashTypeBuffer]);\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.oneOf =\n  exports.Null =\n  exports.BufferN =\n  exports.Function =\n  exports.UInt32 =\n  exports.UInt8 =\n  exports.tuple =\n  exports.maybe =\n  exports.Hex =\n  exports.Buffer =\n  exports.String =\n  exports.Boolean =\n  exports.Array =\n  exports.Number =\n  exports.Hash256bit =\n  exports.Hash160bit =\n  exports.Buffer256bit =\n  exports.isTaptree =\n  exports.isTapleaf =\n  exports.TAPLEAF_VERSION_MASK =\n  exports.Satoshi =\n  exports.isPoint =\n  exports.stacksEqual =\n  exports.typeforce =\n    void 0;\nconst buffer_1 = require('buffer');\nexports.typeforce = require('typeforce');\nconst ZERO32 = buffer_1.Buffer.alloc(32, 0);\nconst EC_P = buffer_1.Buffer.from(\n  'fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f',\n  'hex',\n);\n/**\n * Checks if two arrays of Buffers are equal.\n * @param a - The first array of Buffers.\n * @param b - The second array of Buffers.\n * @returns True if the arrays are equal, false otherwise.\n */\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\nexports.stacksEqual = stacksEqual;\n/**\n * Checks if the given value is a valid elliptic curve point.\n * @param p - The value to check.\n * @returns True if the value is a valid elliptic curve point, false otherwise.\n */\nfunction isPoint(p) {\n  if (!buffer_1.Buffer.isBuffer(p)) return false;\n  if (p.length < 33) return false;\n  const t = p[0];\n  const x = p.slice(1, 33);\n  if (x.compare(ZERO32) === 0) return false;\n  if (x.compare(EC_P) >= 0) return false;\n  if ((t === 0x02 || t === 0x03) && p.length === 33) {\n    return true;\n  }\n  const y = p.slice(33);\n  if (y.compare(ZERO32) === 0) return false;\n  if (y.compare(EC_P) >= 0) return false;\n  if (t === 0x04 && p.length === 65) return true;\n  return false;\n}\nexports.isPoint = isPoint;\nconst SATOSHI_MAX = 21 * 1e14;\nfunction Satoshi(value) {\n  return exports.typeforce.UInt53(value) && value <= SATOSHI_MAX;\n}\nexports.Satoshi = Satoshi;\nexports.TAPLEAF_VERSION_MASK = 0xfe;\nfunction isTapleaf(o) {\n  if (!o || !('output' in o)) return false;\n  if (!buffer_1.Buffer.isBuffer(o.output)) return false;\n  if (o.version !== undefined)\n    return (o.version & exports.TAPLEAF_VERSION_MASK) === o.version;\n  return true;\n}\nexports.isTapleaf = isTapleaf;\nfunction isTaptree(scriptTree) {\n  if (!(0, exports.Array)(scriptTree)) return isTapleaf(scriptTree);\n  if (scriptTree.length !== 2) return false;\n  return scriptTree.every(t => isTaptree(t));\n}\nexports.isTaptree = isTaptree;\nexports.Buffer256bit = exports.typeforce.BufferN(32);\nexports.Hash160bit = exports.typeforce.BufferN(20);\nexports.Hash256bit = exports.typeforce.BufferN(32);\nexports.Number = exports.typeforce.Number;\nexports.Array = exports.typeforce.Array;\nexports.Boolean = exports.typeforce.Boolean;\nexports.String = exports.typeforce.String;\nexports.Buffer = exports.typeforce.Buffer;\nexports.Hex = exports.typeforce.Hex;\nexports.maybe = exports.typeforce.maybe;\nexports.tuple = exports.typeforce.tuple;\nexports.UInt8 = exports.typeforce.UInt8;\nexports.UInt32 = exports.typeforce.UInt32;\nexports.Function = exports.typeforce.Function;\nexports.BufferN = exports.typeforce.BufferN;\nexports.Null = exports.typeforce.Null;\nexports.oneOf = exports.typeforce.oneOf;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.value = exports.prop = void 0;\nfunction prop(object, name, f) {\n  Object.defineProperty(object, name, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      const _value = f.call(this);\n      this[name] = _value;\n      return _value;\n    },\n    set(_value) {\n      Object.defineProperty(this, name, {\n        configurable: true,\n        enumerable: true,\n        value: _value,\n        writable: true,\n      });\n    },\n  });\n}\nexports.prop = prop;\nfunction value(f) {\n  let _value;\n  return () => {\n    if (_value !== undefined) return _value;\n    _value = f();\n    return _value;\n  };\n}\nexports.value = value;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2data = void 0;\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\n// output: OP_RETURN ...\n/**\n * Embeds data in a Bitcoin payment.\n * @param a - The payment object.\n * @param opts - Optional payment options.\n * @returns The modified payment object.\n * @throws {TypeError} If there is not enough data or if the output is invalid.\n */\nfunction p2data(a, opts) {\n  if (!a.data && !a.output) throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n      data: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n      ),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'embed', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.data) return;\n    return bscript.compile([OPS.OP_RETURN].concat(a.data));\n  });\n  lazy.prop(o, 'data', () => {\n    if (!a.output) return;\n    return bscript.decompile(a.output).slice(1);\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      const chunks = bscript.decompile(a.output);\n      if (chunks[0] !== OPS.OP_RETURN) throw new TypeError('Output is invalid');\n      if (!chunks.slice(1).every(types_1.typeforce.Buffer))\n        throw new TypeError('Output is invalid');\n      if (a.data && !(0, types_1.stacksEqual)(a.data, o.data))\n        throw new TypeError('Data mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2data = p2data;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2ms = void 0;\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\nconst OP_INT_BASE = OPS.OP_RESERVED; // OP_1 - 1\n// input: OP_0 [signatures ...]\n// output: m [pubKeys ...] n OP_CHECKMULTISIG\n/**\n * Represents a function that creates a Pay-to-Multisig (P2MS) payment object.\n * @param a - The payment object.\n * @param opts - Optional payment options.\n * @returns The created payment object.\n * @throws {TypeError} If the provided data is not valid.\n */\nfunction p2ms(a, opts) {\n  if (\n    !a.input &&\n    !a.output &&\n    !(a.pubkeys && a.m !== undefined) &&\n    !a.signatures\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  function isAcceptableSignature(x) {\n    return (\n      bscript.isCanonicalScriptSignature(x) ||\n      (opts.allowIncomplete && x === OPS.OP_0) !== undefined\n    );\n  }\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      m: types_1.typeforce.maybe(types_1.typeforce.Number),\n      n: types_1.typeforce.maybe(types_1.typeforce.Number),\n      output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n      pubkeys: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.isPoint),\n      ),\n      signatures: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(isAcceptableSignature),\n      ),\n      input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { network };\n  let chunks = [];\n  let decoded = false;\n  function decode(output) {\n    if (decoded) return;\n    decoded = true;\n    chunks = bscript.decompile(output);\n    o.m = chunks[0] - OP_INT_BASE;\n    o.n = chunks[chunks.length - 2] - OP_INT_BASE;\n    o.pubkeys = chunks.slice(1, -2);\n  }\n  lazy.prop(o, 'output', () => {\n    if (!a.m) return;\n    if (!o.n) return;\n    if (!a.pubkeys) return;\n    return bscript.compile(\n      [].concat(\n        OP_INT_BASE + a.m,\n        a.pubkeys,\n        OP_INT_BASE + o.n,\n        OPS.OP_CHECKMULTISIG,\n      ),\n    );\n  });\n  lazy.prop(o, 'm', () => {\n    if (!o.output) return;\n    decode(o.output);\n    return o.m;\n  });\n  lazy.prop(o, 'n', () => {\n    if (!o.pubkeys) return;\n    return o.pubkeys.length;\n  });\n  lazy.prop(o, 'pubkeys', () => {\n    if (!a.output) return;\n    decode(a.output);\n    return o.pubkeys;\n  });\n  lazy.prop(o, 'signatures', () => {\n    if (!a.input) return;\n    return bscript.decompile(a.input).slice(1);\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signatures) return;\n    return bscript.compile([OPS.OP_0].concat(a.signatures));\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  lazy.prop(o, 'name', () => {\n    if (!o.m || !o.n) return;\n    return `p2ms(${o.m} of ${o.n})`;\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      decode(a.output);\n      if (!types_1.typeforce.Number(chunks[0]))\n        throw new TypeError('Output is invalid');\n      if (!types_1.typeforce.Number(chunks[chunks.length - 2]))\n        throw new TypeError('Output is invalid');\n      if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)\n        throw new TypeError('Output is invalid');\n      if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)\n        throw new TypeError('Output is invalid');\n      if (!o.pubkeys.every(x => (0, types_1.isPoint)(x)))\n        throw new TypeError('Output is invalid');\n      if (a.m !== undefined && a.m !== o.m) throw new TypeError('m mismatch');\n      if (a.n !== undefined && a.n !== o.n) throw new TypeError('n mismatch');\n      if (a.pubkeys && !(0, types_1.stacksEqual)(a.pubkeys, o.pubkeys))\n        throw new TypeError('Pubkeys mismatch');\n    }\n    if (a.pubkeys) {\n      if (a.n !== undefined && a.n !== a.pubkeys.length)\n        throw new TypeError('Pubkey count mismatch');\n      o.n = a.pubkeys.length;\n      if (o.n < o.m) throw new TypeError('Pubkey count cannot be less than m');\n    }\n    if (a.signatures) {\n      if (a.signatures.length < o.m)\n        throw new TypeError('Not enough signatures provided');\n      if (a.signatures.length > o.m)\n        throw new TypeError('Too many signatures provided');\n    }\n    if (a.input) {\n      if (a.input[0] !== OPS.OP_0) throw new TypeError('Input is invalid');\n      if (\n        o.signatures.length === 0 ||\n        !o.signatures.every(isAcceptableSignature)\n      )\n        throw new TypeError('Input has invalid signature(s)');\n      if (a.signatures && !(0, types_1.stacksEqual)(a.signatures, o.signatures))\n        throw new TypeError('Signature mismatch');\n      if (a.m !== undefined && a.m !== a.signatures.length)\n        throw new TypeError('Signature count mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2ms = p2ms;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2pk = void 0;\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\n// input: {signature}\n// output: {pubKey} OP_CHECKSIG\n/**\n * Creates a pay-to-public-key (P2PK) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2PK payment object.\n * @throws {TypeError} If the required data is not provided or if the data is invalid.\n */\nfunction p2pk(a, opts) {\n  if (!a.input && !a.output && !a.pubkey && !a.input && !a.signature)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n      pubkey: types_1.typeforce.maybe(types_1.isPoint),\n      signature: types_1.typeforce.maybe(bscript.isCanonicalScriptSignature),\n      input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n    },\n    a,\n  );\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pk', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.pubkey) return;\n    return bscript.compile([a.pubkey, OPS.OP_CHECKSIG]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.output) return;\n    return a.output.slice(1, -1);\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signature) return;\n    return bscript.compile([a.signature]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      if (a.output[a.output.length - 1] !== OPS.OP_CHECKSIG)\n        throw new TypeError('Output is invalid');\n      if (!(0, types_1.isPoint)(o.pubkey))\n        throw new TypeError('Output pubkey is invalid');\n      if (a.pubkey && !a.pubkey.equals(o.pubkey))\n        throw new TypeError('Pubkey mismatch');\n    }\n    if (a.signature) {\n      if (a.input && !a.input.equals(o.input))\n        throw new TypeError('Signature mismatch');\n    }\n    if (a.input) {\n      if (_chunks().length !== 1) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(o.signature))\n        throw new TypeError('Input has invalid signature');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pk = p2pk;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.output = exports.exists = exports.hash = exports.bytes = exports.bool = exports.number = exports.isBytes = void 0;\nfunction number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`positive integer expected, not ${n}`);\n}\nexports.number = number;\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`boolean expected, not ${b}`);\n}\nexports.bool = bool;\n// copied from utils\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nexports.isBytes = isBytes;\nfunction bytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Uint8Array expected of length ${lengths}, not of length=${b.length}`);\n}\nexports.bytes = bytes;\nfunction hash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(h.outputLen);\n    number(h.blockLen);\n}\nexports.hash = hash;\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexports.exists = exists;\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexports.output = output;\nconst assert = { number, bool, bytes, hash, exists, output };\nexports.default = assert;\n//# sourceMappingURL=_assert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.byteSwap32 = exports.byteSwapIfBE = exports.byteSwap = exports.isLE = exports.rotl = exports.rotr = exports.createView = exports.u32 = exports.u8 = exports.isBytes = void 0;\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\nconst _assert_js_1 = require(\"./_assert.js\");\n// export { isBytes } from './_assert.js';\n// We can't reuse isBytes from _assert, because somehow this causes huge perf issues\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nexports.isBytes = isBytes;\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | ((word >>> (32 - shift)) >>> 0);\nexports.rotl = rotl;\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// The byte swap operation for uint32\nconst byteSwap = (word) => ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff);\nexports.byteSwap = byteSwap;\n// Conditionally byte swap if on a big-endian platform\nexports.byteSwapIfBE = exports.isLE ? (n) => n : (n) => (0, exports.byteSwap)(n);\n// In place byte swap for Uint32Array\nfunction byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = (0, exports.byteSwap)(arr[i]);\n    }\n}\nexports.byteSwap32 = byteSwap32;\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    (0, _assert_js_1.bytes)(bytes);\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, _A: 65, _F: 70, _a: 97, _f: 102 };\nfunction asciiToBase16(char) {\n    if (char >= asciis._0 && char <= asciis._9)\n        return char - asciis._0;\n    if (char >= asciis._A && char <= asciis._F)\n        return char - (asciis._A - 10);\n    if (char >= asciis._a && char <= asciis._f)\n        return char - (asciis._a - 10);\n    return;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\nexports.utf8ToBytes = utf8ToBytes;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    (0, _assert_js_1.bytes)(data);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Copies several Uint8Arrays into one.\n */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        (0, _assert_js_1.bytes)(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\nconst toStr = {}.toString;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && toStr.call(opts) !== '[object Object]')\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\nfunction wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapXOFConstructorWithOpts = wrapXOFConstructorWithOpts;\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\nexports.randomBytes = randomBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HashMD = exports.Maj = exports.Chi = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\nexports.Chi = Chi;\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\nexports.Maj = Maj;\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nclass HashMD extends utils_js_1.Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = (0, utils_js_1.createView)(this.buffer);\n    }\n    update(data) {\n        (0, _assert_js_1.exists)(this);\n        const { view, buffer, blockLen } = this;\n        data = (0, utils_js_1.toBytes)(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = (0, utils_js_1.createView)(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        (0, _assert_js_1.exists)(this);\n        (0, _assert_js_1.output)(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = (0, utils_js_1.createView)(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\nexports.HashMD = HashMD;\n//# sourceMappingURL=_md.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ripemd160 = exports.RIPEMD160 = void 0;\nconst _md_js_1 = require(\"./_md.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\nconst Rho = /* @__PURE__ */ new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]);\nconst Id = /* @__PURE__ */ new Uint8Array(new Array(16).fill(0).map((_, i) => i));\nconst Pi = /* @__PURE__ */ Id.map((i) => (9 * i + 5) % 16);\nlet idxL = [Id];\nlet idxR = [Pi];\nfor (let i = 0; i < 4; i++)\n    for (let j of [idxL, idxR])\n        j.push(j[i].map((k) => Rho[k]));\nconst shifts = /* @__PURE__ */ [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => new Uint8Array(i));\nconst shiftsL = /* @__PURE__ */ idxL.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst shiftsR = /* @__PURE__ */ idxR.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst Kl = /* @__PURE__ */ new Uint32Array([\n    0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e,\n]);\nconst Kr = /* @__PURE__ */ new Uint32Array([\n    0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000,\n]);\n// It's called f() in spec.\nfunction f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    else if (group === 1)\n        return (x & y) | (~x & z);\n    else if (group === 2)\n        return (x | ~y) ^ z;\n    else if (group === 3)\n        return (x & z) | (y & ~z);\n    else\n        return x ^ (y | ~z);\n}\n// Temporary buffer, not used to store anything between runs\nconst R_BUF = /* @__PURE__ */ new Uint32Array(16);\nclass RIPEMD160 extends _md_js_1.HashMD {\n    constructor() {\n        super(64, 20, 8, true);\n        this.h0 = 0x67452301 | 0;\n        this.h1 = 0xefcdab89 | 0;\n        this.h2 = 0x98badcfe | 0;\n        this.h3 = 0x10325476 | 0;\n        this.h4 = 0xc3d2e1f0 | 0;\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            R_BUF[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl[group], hbr = Kr[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL[group], sr = shiftsR[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = ((0, utils_js_1.rotl)(al + f(group, bl, cl, dl) + R_BUF[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = (0, utils_js_1.rotl)(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = ((0, utils_js_1.rotl)(ar + f(rGroup, br, cr, dr) + R_BUF[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = (0, utils_js_1.rotl)(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        R_BUF.fill(0);\n    }\n    destroy() {\n        this.destroyed = true;\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\nexports.RIPEMD160 = RIPEMD160;\n/**\n * RIPEMD-160 - a hash function from 1990s.\n * @param message - msg that would be hashed\n */\nexports.ripemd160 = (0, utils_js_1.wrapConstructor)(() => new RIPEMD160());\n//# sourceMappingURL=ripemd160.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha1 = void 0;\nconst _md_js_1 = require(\"./_md.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// SHA1 (RFC 3174) was cryptographically broken. It's still used. Don't use it for a new protocol.\n// Initial state\nconst SHA1_IV = /* @__PURE__ */ new Uint32Array([\n    0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0,\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA1_W = /* @__PURE__ */ new Uint32Array(80);\nclass SHA1 extends _md_js_1.HashMD {\n    constructor() {\n        super(64, 20, 8, false);\n        this.A = SHA1_IV[0] | 0;\n        this.B = SHA1_IV[1] | 0;\n        this.C = SHA1_IV[2] | 0;\n        this.D = SHA1_IV[3] | 0;\n        this.E = SHA1_IV[4] | 0;\n    }\n    get() {\n        const { A, B, C, D, E } = this;\n        return [A, B, C, D, E];\n    }\n    set(A, B, C, D, E) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA1_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 80; i++)\n            SHA1_W[i] = (0, utils_js_1.rotl)(SHA1_W[i - 3] ^ SHA1_W[i - 8] ^ SHA1_W[i - 14] ^ SHA1_W[i - 16], 1);\n        // Compression function main loop, 80 rounds\n        let { A, B, C, D, E } = this;\n        for (let i = 0; i < 80; i++) {\n            let F, K;\n            if (i < 20) {\n                F = (0, _md_js_1.Chi)(B, C, D);\n                K = 0x5a827999;\n            }\n            else if (i < 40) {\n                F = B ^ C ^ D;\n                K = 0x6ed9eba1;\n            }\n            else if (i < 60) {\n                F = (0, _md_js_1.Maj)(B, C, D);\n                K = 0x8f1bbcdc;\n            }\n            else {\n                F = B ^ C ^ D;\n                K = 0xca62c1d6;\n            }\n            const T = ((0, utils_js_1.rotl)(A, 5) + F + E + K + SHA1_W[i]) | 0;\n            E = D;\n            D = C;\n            C = (0, utils_js_1.rotl)(B, 30);\n            B = A;\n            A = T;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        this.set(A, B, C, D, E);\n    }\n    roundClean() {\n        SHA1_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\nexports.sha1 = (0, utils_js_1.wrapConstructor)(() => new SHA1());\n//# sourceMappingURL=sha1.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sha224 = exports.sha256 = void 0;\nconst _md_js_1 = require(\"./_md.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// SHA2-256 need to try 2^128 hashes to execute birthday attack.\n// BTC network is doing 2^67 hashes/sec as per early 2023.\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state:\n// first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19\n// prettier-ignore\nconst SHA256_IV = /* @__PURE__ */ new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nclass SHA256 extends _md_js_1.HashMD {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = SHA256_IV[0] | 0;\n        this.B = SHA256_IV[1] | 0;\n        this.C = SHA256_IV[2] | 0;\n        this.D = SHA256_IV[3] | 0;\n        this.E = SHA256_IV[4] | 0;\n        this.F = SHA256_IV[5] | 0;\n        this.G = SHA256_IV[6] | 0;\n        this.H = SHA256_IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = (0, utils_js_1.rotr)(W15, 7) ^ (0, utils_js_1.rotr)(W15, 18) ^ (W15 >>> 3);\n            const s1 = (0, utils_js_1.rotr)(W2, 17) ^ (0, utils_js_1.rotr)(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = (0, utils_js_1.rotr)(E, 6) ^ (0, utils_js_1.rotr)(E, 11) ^ (0, utils_js_1.rotr)(E, 25);\n            const T1 = (H + sigma1 + (0, _md_js_1.Chi)(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = (0, utils_js_1.rotr)(A, 2) ^ (0, utils_js_1.rotr)(A, 13) ^ (0, utils_js_1.rotr)(A, 22);\n            const T2 = (sigma0 + (0, _md_js_1.Maj)(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n    constructor() {\n        super();\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n        this.outputLen = 28;\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexports.sha256 = (0, utils_js_1.wrapConstructor)(() => new SHA256());\nexports.sha224 = (0, utils_js_1.wrapConstructor)(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.taggedHash =\n  exports.TAGGED_HASH_PREFIXES =\n  exports.TAGS =\n  exports.hash256 =\n  exports.hash160 =\n  exports.sha256 =\n  exports.sha1 =\n  exports.ripemd160 =\n    void 0;\n/**\n * A module for hashing functions.\n * include ripemd160、sha1、sha256、hash160、hash256、taggedHash\n *\n * @packageDocumentation\n */\nconst ripemd160_1 = require('@noble/hashes/ripemd160');\nconst sha1_1 = require('@noble/hashes/sha1');\nconst sha256_1 = require('@noble/hashes/sha256');\nfunction ripemd160(buffer) {\n  return Buffer.from((0, ripemd160_1.ripemd160)(Uint8Array.from(buffer)));\n}\nexports.ripemd160 = ripemd160;\nfunction sha1(buffer) {\n  return Buffer.from((0, sha1_1.sha1)(Uint8Array.from(buffer)));\n}\nexports.sha1 = sha1;\nfunction sha256(buffer) {\n  return Buffer.from((0, sha256_1.sha256)(Uint8Array.from(buffer)));\n}\nexports.sha256 = sha256;\nfunction hash160(buffer) {\n  return Buffer.from(\n    (0, ripemd160_1.ripemd160)((0, sha256_1.sha256)(Uint8Array.from(buffer))),\n  );\n}\nexports.hash160 = hash160;\nfunction hash256(buffer) {\n  return Buffer.from(\n    (0, sha256_1.sha256)((0, sha256_1.sha256)(Uint8Array.from(buffer))),\n  );\n}\nexports.hash256 = hash256;\nexports.TAGS = [\n  'BIP0340/challenge',\n  'BIP0340/aux',\n  'BIP0340/nonce',\n  'TapLeaf',\n  'TapBranch',\n  'TapSighash',\n  'TapTweak',\n  'KeyAgg list',\n  'KeyAgg coefficient',\n];\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\n/**\n * Defines the tagged hash prefixes used in the crypto module.\n */\nexports.TAGGED_HASH_PREFIXES = {\n  'BIP0340/challenge': Buffer.from([\n    123, 181, 45, 122, 159, 239, 88, 50, 62, 177, 191, 122, 64, 125, 179, 130,\n    210, 243, 242, 216, 27, 177, 34, 79, 73, 254, 81, 143, 109, 72, 211, 124,\n    123, 181, 45, 122, 159, 239, 88, 50, 62, 177, 191, 122, 64, 125, 179, 130,\n    210, 243, 242, 216, 27, 177, 34, 79, 73, 254, 81, 143, 109, 72, 211, 124,\n  ]),\n  'BIP0340/aux': Buffer.from([\n    241, 239, 78, 94, 192, 99, 202, 218, 109, 148, 202, 250, 157, 152, 126, 160,\n    105, 38, 88, 57, 236, 193, 31, 151, 45, 119, 165, 46, 216, 193, 204, 144,\n    241, 239, 78, 94, 192, 99, 202, 218, 109, 148, 202, 250, 157, 152, 126, 160,\n    105, 38, 88, 57, 236, 193, 31, 151, 45, 119, 165, 46, 216, 193, 204, 144,\n  ]),\n  'BIP0340/nonce': Buffer.from([\n    7, 73, 119, 52, 167, 155, 203, 53, 91, 155, 140, 125, 3, 79, 18, 28, 244,\n    52, 215, 62, 247, 45, 218, 25, 135, 0, 97, 251, 82, 191, 235, 47, 7, 73,\n    119, 52, 167, 155, 203, 53, 91, 155, 140, 125, 3, 79, 18, 28, 244, 52, 215,\n    62, 247, 45, 218, 25, 135, 0, 97, 251, 82, 191, 235, 47,\n  ]),\n  TapLeaf: Buffer.from([\n    174, 234, 143, 220, 66, 8, 152, 49, 5, 115, 75, 88, 8, 29, 30, 38, 56, 211,\n    95, 28, 181, 64, 8, 212, 211, 87, 202, 3, 190, 120, 233, 238, 174, 234, 143,\n    220, 66, 8, 152, 49, 5, 115, 75, 88, 8, 29, 30, 38, 56, 211, 95, 28, 181,\n    64, 8, 212, 211, 87, 202, 3, 190, 120, 233, 238,\n  ]),\n  TapBranch: Buffer.from([\n    25, 65, 161, 242, 229, 110, 185, 95, 162, 169, 241, 148, 190, 92, 1, 247,\n    33, 111, 51, 237, 130, 176, 145, 70, 52, 144, 208, 91, 245, 22, 160, 21, 25,\n    65, 161, 242, 229, 110, 185, 95, 162, 169, 241, 148, 190, 92, 1, 247, 33,\n    111, 51, 237, 130, 176, 145, 70, 52, 144, 208, 91, 245, 22, 160, 21,\n  ]),\n  TapSighash: Buffer.from([\n    244, 10, 72, 223, 75, 42, 112, 200, 180, 146, 75, 242, 101, 70, 97, 237, 61,\n    149, 253, 102, 163, 19, 235, 135, 35, 117, 151, 198, 40, 228, 160, 49, 244,\n    10, 72, 223, 75, 42, 112, 200, 180, 146, 75, 242, 101, 70, 97, 237, 61, 149,\n    253, 102, 163, 19, 235, 135, 35, 117, 151, 198, 40, 228, 160, 49,\n  ]),\n  TapTweak: Buffer.from([\n    232, 15, 225, 99, 156, 156, 160, 80, 227, 175, 27, 57, 193, 67, 198, 62, 66,\n    156, 188, 235, 21, 217, 64, 251, 181, 197, 161, 244, 175, 87, 197, 233, 232,\n    15, 225, 99, 156, 156, 160, 80, 227, 175, 27, 57, 193, 67, 198, 62, 66, 156,\n    188, 235, 21, 217, 64, 251, 181, 197, 161, 244, 175, 87, 197, 233,\n  ]),\n  'KeyAgg list': Buffer.from([\n    72, 28, 151, 28, 60, 11, 70, 215, 240, 178, 117, 174, 89, 141, 78, 44, 126,\n    215, 49, 156, 89, 74, 92, 110, 199, 158, 160, 212, 153, 2, 148, 240, 72, 28,\n    151, 28, 60, 11, 70, 215, 240, 178, 117, 174, 89, 141, 78, 44, 126, 215, 49,\n    156, 89, 74, 92, 110, 199, 158, 160, 212, 153, 2, 148, 240,\n  ]),\n  'KeyAgg coefficient': Buffer.from([\n    191, 201, 4, 3, 77, 28, 136, 232, 200, 14, 34, 229, 61, 36, 86, 109, 100,\n    130, 78, 214, 66, 114, 129, 192, 145, 0, 249, 77, 205, 82, 201, 129, 191,\n    201, 4, 3, 77, 28, 136, 232, 200, 14, 34, 229, 61, 36, 86, 109, 100, 130,\n    78, 214, 66, 114, 129, 192, 145, 0, 249, 77, 205, 82, 201, 129,\n  ]),\n};\nfunction taggedHash(prefix, data) {\n  return sha256(Buffer.concat([exports.TAGGED_HASH_PREFIXES[prefix], data]));\n}\nexports.taggedHash = taggedHash;\n","'use strict'\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256)\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i)\n    var xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  var BASE = ALPHABET.length\n  var LEADER = ALPHABET.charAt(0)\n  var FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) {\n    } else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength)\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source)\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0\n    var length = 0\n    var pbegin = 0\n    var pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    var b58 = new Uint8Array(size)\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin]\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0\n        // Skip and count leading '1's.\n    var zeroes = 0\n    var length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size)\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)]\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n        // Skip leading zeroes in b256.\n    var it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    var vch = new Uint8Array(zeroes + (size - it4))\n    var j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nmodule.exports = base\n","'use strict'\n\nvar base58 = require('bs58')\n\nmodule.exports = function (checksumFn) {\n  // Encode a buffer as a base58-check encoded string\n  function encode (payload) {\n    var payloadU8 = Uint8Array.from(payload)\n    var checksum = checksumFn(payloadU8)\n    var length = payloadU8.length + 4\n    var both = new Uint8Array(length)\n    both.set(payloadU8, 0)\n    both.set(checksum.subarray(0, 4), payloadU8.length)\n    return base58.encode(both, length)\n  }\n\n  function decodeRaw (buffer) {\n    var payload = buffer.slice(0, -4)\n    var checksum = buffer.slice(-4)\n    var newChecksum = checksumFn(payload)\n\n    if (checksum[0] ^ newChecksum[0] |\n        checksum[1] ^ newChecksum[1] |\n        checksum[2] ^ newChecksum[2] |\n        checksum[3] ^ newChecksum[3]) return\n\n    return payload\n  }\n\n  // Decode a base58-check encoded string to a buffer, no result if checksum is wrong\n  function decodeUnsafe (string) {\n    var buffer = base58.decodeUnsafe(string)\n    if (!buffer) return\n\n    return decodeRaw(buffer)\n  }\n\n  function decode (string) {\n    var buffer = base58.decode(string)\n    var payload = decodeRaw(buffer, checksumFn)\n    if (!payload) throw new Error('Invalid checksum')\n    return payload\n  }\n\n  return {\n    encode: encode,\n    decode: decode,\n    decodeUnsafe: decodeUnsafe\n  }\n}\n","const basex = require('base-x')\nconst ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","'use strict'\n\nvar { sha256 } = require('@noble/hashes/sha256')\nvar bs58checkBase = require('./base')\n\n// SHA256(SHA256(buffer))\nfunction sha256x2 (buffer) {\n  return sha256(sha256(buffer))\n}\n\nmodule.exports = bs58checkBase(sha256x2)\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2pkh = void 0;\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst bs58check = require('bs58check');\nconst OPS = bscript.OPS;\n// input: {signature} {pubkey}\n// output: OP_DUP OP_HASH160 {hash160(pubkey)} OP_EQUALVERIFY OP_CHECKSIG\n/**\n * Creates a Pay-to-Public-Key-Hash (P2PKH) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2PKH payment object.\n * @throws {TypeError} If the required data is not provided or if the data is invalid.\n */\nfunction p2pkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      address: types_1.typeforce.maybe(types_1.typeforce.String),\n      hash: types_1.typeforce.maybe(types_1.typeforce.BufferN(20)),\n      output: types_1.typeforce.maybe(types_1.typeforce.BufferN(25)),\n      pubkey: types_1.typeforce.maybe(types_1.isPoint),\n      signature: types_1.typeforce.maybe(bscript.isCanonicalScriptSignature),\n      input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const payload = Buffer.from(bs58check.decode(a.address));\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(network.pubKeyHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(3, 23);\n    if (a.address) return _address().hash;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([\n      OPS.OP_DUP,\n      OPS.OP_HASH160,\n      o.hash,\n      OPS.OP_EQUALVERIFY,\n      OPS.OP_CHECKSIG,\n    ]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.input) return;\n    return _chunks()[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return bscript.compile([a.signature, a.pubkey]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.pubKeyHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 25 ||\n        a.output[0] !== OPS.OP_DUP ||\n        a.output[1] !== OPS.OP_HASH160 ||\n        a.output[2] !== 0x14 ||\n        a.output[23] !== OPS.OP_EQUALVERIFY ||\n        a.output[24] !== OPS.OP_CHECKSIG\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(3, 23);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.input) {\n      const chunks = _chunks();\n      if (chunks.length !== 2) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(chunks[0]))\n        throw new TypeError('Input has invalid signature');\n      if (!(0, types_1.isPoint)(chunks[1]))\n        throw new TypeError('Input has invalid pubkey');\n      if (a.signature && !a.signature.equals(chunks[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(chunks[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(chunks[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pkh = p2pkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2sh = void 0;\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst bs58check = require('bs58check');\nconst OPS = bscript.OPS;\n// input: [redeemScriptSig ...] {redeemScript}\n// witness: <?>\n// output: OP_HASH160 {hash160(redeemScript)} OP_EQUAL\n/**\n * Creates a Pay-to-Script-Hash (P2SH) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2SH payment object.\n * @throws {TypeError} If the required data is not provided or if the data is invalid.\n */\nfunction p2sh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      address: types_1.typeforce.maybe(types_1.typeforce.String),\n      hash: types_1.typeforce.maybe(types_1.typeforce.BufferN(20)),\n      output: types_1.typeforce.maybe(types_1.typeforce.BufferN(23)),\n      redeem: types_1.typeforce.maybe({\n        network: types_1.typeforce.maybe(types_1.typeforce.Object),\n        output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n        input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n        witness: types_1.typeforce.maybe(\n          types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n        ),\n      }),\n      input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n      witness: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n      ),\n    },\n    a,\n  );\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  const _address = lazy.value(() => {\n    const payload = Buffer.from(bs58check.decode(a.address));\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const _redeem = lazy.value(() => {\n    const chunks = _chunks();\n    const lastChunk = chunks[chunks.length - 1];\n    return {\n      network,\n      output: lastChunk === OPS.OP_FALSE ? Buffer.from([]) : lastChunk,\n      input: bscript.compile(chunks.slice(0, -1)),\n      witness: a.witness || [],\n    };\n  });\n  // output dependents\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(o.network.scriptHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    // in order of least effort\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().hash;\n    if (o.redeem && o.redeem.output) return bcrypto.hash160(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);\n  });\n  // input dependents\n  lazy.prop(o, 'redeem', () => {\n    if (!a.input) return;\n    return _redeem();\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.redeem || !a.redeem.input || !a.redeem.output) return;\n    return bscript.compile(\n      [].concat(bscript.decompile(a.redeem.input), a.redeem.output),\n    );\n  });\n  lazy.prop(o, 'witness', () => {\n    if (o.redeem && o.redeem.witness) return o.redeem.witness;\n    if (o.input) return [];\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2sh'];\n    if (o.redeem !== undefined && o.redeem.name !== undefined)\n      nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.scriptHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 23 ||\n        a.output[0] !== OPS.OP_HASH160 ||\n        a.output[1] !== 0x14 ||\n        a.output[22] !== OPS.OP_EQUAL\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2, 22);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    // inlined to prevent 'no-inner-declarations' failing\n    const checkRedeem = redeem => {\n      // is the redeem output empty/invalid?\n      if (redeem.output) {\n        const decompile = bscript.decompile(redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output too short');\n        if (redeem.output.byteLength > 520)\n          throw new TypeError(\n            'Redeem.output unspendable if larger than 520 bytes',\n          );\n        if (bscript.countNonPushOnlyOPs(decompile) > 201)\n          throw new TypeError(\n            'Redeem.output unspendable with more than 201 non-push ops',\n          );\n        // match hash against other sources\n        const hash2 = bcrypto.hash160(redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (redeem.input) {\n        const hasInput = redeem.input.length > 0;\n        const hasWitness = redeem.witness && redeem.witness.length > 0;\n        if (!hasInput && !hasWitness) throw new TypeError('Empty input');\n        if (hasInput && hasWitness)\n          throw new TypeError('Input and witness provided');\n        if (hasInput) {\n          const richunks = bscript.decompile(redeem.input);\n          if (!bscript.isPushOnly(richunks))\n            throw new TypeError('Non push-only scriptSig');\n        }\n      }\n    };\n    if (a.input) {\n      const chunks = _chunks();\n      if (!chunks || chunks.length < 1) throw new TypeError('Input too short');\n      if (!Buffer.isBuffer(_redeem().output))\n        throw new TypeError('Input is invalid');\n      checkRedeem(_redeem());\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      if (a.input) {\n        const redeem = _redeem();\n        if (a.redeem.output && !a.redeem.output.equals(redeem.output))\n          throw new TypeError('Redeem.output mismatch');\n        if (a.redeem.input && !a.redeem.input.equals(redeem.input))\n          throw new TypeError('Redeem.input mismatch');\n      }\n      checkRedeem(a.redeem);\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.witness &&\n        !(0, types_1.stacksEqual)(a.redeem.witness, a.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2sh = p2sh;\n","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bech32m = exports.bech32 = void 0;\nconst ALPHABET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l';\nconst ALPHABET_MAP = {};\nfor (let z = 0; z < ALPHABET.length; z++) {\n    const x = ALPHABET.charAt(z);\n    ALPHABET_MAP[x] = z;\n}\nfunction polymodStep(pre) {\n    const b = pre >> 25;\n    return (((pre & 0x1ffffff) << 5) ^\n        (-((b >> 0) & 1) & 0x3b6a57b2) ^\n        (-((b >> 1) & 1) & 0x26508e6d) ^\n        (-((b >> 2) & 1) & 0x1ea119fa) ^\n        (-((b >> 3) & 1) & 0x3d4233dd) ^\n        (-((b >> 4) & 1) & 0x2a1462b3));\n}\nfunction prefixChk(prefix) {\n    let chk = 1;\n    for (let i = 0; i < prefix.length; ++i) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            return 'Invalid prefix (' + prefix + ')';\n        chk = polymodStep(chk) ^ (c >> 5);\n    }\n    chk = polymodStep(chk);\n    for (let i = 0; i < prefix.length; ++i) {\n        const v = prefix.charCodeAt(i);\n        chk = polymodStep(chk) ^ (v & 0x1f);\n    }\n    return chk;\n}\nfunction convert(data, inBits, outBits, pad) {\n    let value = 0;\n    let bits = 0;\n    const maxV = (1 << outBits) - 1;\n    const result = [];\n    for (let i = 0; i < data.length; ++i) {\n        value = (value << inBits) | data[i];\n        bits += inBits;\n        while (bits >= outBits) {\n            bits -= outBits;\n            result.push((value >> bits) & maxV);\n        }\n    }\n    if (pad) {\n        if (bits > 0) {\n            result.push((value << (outBits - bits)) & maxV);\n        }\n    }\n    else {\n        if (bits >= inBits)\n            return 'Excess padding';\n        if ((value << (outBits - bits)) & maxV)\n            return 'Non-zero padding';\n    }\n    return result;\n}\nfunction toWords(bytes) {\n    return convert(bytes, 8, 5, true);\n}\nfunction fromWordsUnsafe(words) {\n    const res = convert(words, 5, 8, false);\n    if (Array.isArray(res))\n        return res;\n}\nfunction fromWords(words) {\n    const res = convert(words, 5, 8, false);\n    if (Array.isArray(res))\n        return res;\n    throw new Error(res);\n}\nfunction getLibraryFromEncoding(encoding) {\n    let ENCODING_CONST;\n    if (encoding === 'bech32') {\n        ENCODING_CONST = 1;\n    }\n    else {\n        ENCODING_CONST = 0x2bc830a3;\n    }\n    function encode(prefix, words, LIMIT) {\n        LIMIT = LIMIT || 90;\n        if (prefix.length + 7 + words.length > LIMIT)\n            throw new TypeError('Exceeds length limit');\n        prefix = prefix.toLowerCase();\n        // determine chk mod\n        let chk = prefixChk(prefix);\n        if (typeof chk === 'string')\n            throw new Error(chk);\n        let result = prefix + '1';\n        for (let i = 0; i < words.length; ++i) {\n            const x = words[i];\n            if (x >> 5 !== 0)\n                throw new Error('Non 5-bit word');\n            chk = polymodStep(chk) ^ x;\n            result += ALPHABET.charAt(x);\n        }\n        for (let i = 0; i < 6; ++i) {\n            chk = polymodStep(chk);\n        }\n        chk ^= ENCODING_CONST;\n        for (let i = 0; i < 6; ++i) {\n            const v = (chk >> ((5 - i) * 5)) & 0x1f;\n            result += ALPHABET.charAt(v);\n        }\n        return result;\n    }\n    function __decode(str, LIMIT) {\n        LIMIT = LIMIT || 90;\n        if (str.length < 8)\n            return str + ' too short';\n        if (str.length > LIMIT)\n            return 'Exceeds length limit';\n        // don't allow mixed case\n        const lowered = str.toLowerCase();\n        const uppered = str.toUpperCase();\n        if (str !== lowered && str !== uppered)\n            return 'Mixed-case string ' + str;\n        str = lowered;\n        const split = str.lastIndexOf('1');\n        if (split === -1)\n            return 'No separator character for ' + str;\n        if (split === 0)\n            return 'Missing prefix for ' + str;\n        const prefix = str.slice(0, split);\n        const wordChars = str.slice(split + 1);\n        if (wordChars.length < 6)\n            return 'Data too short';\n        let chk = prefixChk(prefix);\n        if (typeof chk === 'string')\n            return chk;\n        const words = [];\n        for (let i = 0; i < wordChars.length; ++i) {\n            const c = wordChars.charAt(i);\n            const v = ALPHABET_MAP[c];\n            if (v === undefined)\n                return 'Unknown character ' + c;\n            chk = polymodStep(chk) ^ v;\n            // not in the checksum?\n            if (i + 6 >= wordChars.length)\n                continue;\n            words.push(v);\n        }\n        if (chk !== ENCODING_CONST)\n            return 'Invalid checksum for ' + str;\n        return { prefix, words };\n    }\n    function decodeUnsafe(str, LIMIT) {\n        const res = __decode(str, LIMIT);\n        if (typeof res === 'object')\n            return res;\n    }\n    function decode(str, LIMIT) {\n        const res = __decode(str, LIMIT);\n        if (typeof res === 'object')\n            return res;\n        throw new Error(res);\n    }\n    return {\n        decodeUnsafe,\n        decode,\n        encode,\n        toWords,\n        fromWordsUnsafe,\n        fromWords,\n    };\n}\nexports.bech32 = getLibraryFromEncoding('bech32');\nexports.bech32m = getLibraryFromEncoding('bech32m');\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2wpkh = void 0;\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst bech32_1 = require('bech32');\nconst OPS = bscript.OPS;\nconst EMPTY_BUFFER = Buffer.alloc(0);\n// witness: {signature} {pubKey}\n// input: <>\n// output: OP_0 {pubKeyHash}\n/**\n * Creates a pay-to-witness-public-key-hash (p2wpkh) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The p2wpkh payment object.\n * @throws {TypeError} If the required data is missing or invalid.\n */\nfunction p2wpkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      address: types_1.typeforce.maybe(types_1.typeforce.String),\n      hash: types_1.typeforce.maybe(types_1.typeforce.BufferN(20)),\n      input: types_1.typeforce.maybe(types_1.typeforce.BufferN(0)),\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      output: types_1.typeforce.maybe(types_1.typeforce.BufferN(22)),\n      pubkey: types_1.typeforce.maybe(types_1.isPoint),\n      signature: types_1.typeforce.maybe(bscript.isCanonicalScriptSignature),\n      witness: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n      ),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32_1.bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32_1.bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2wpkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32_1.bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32_1.bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().data;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (!a.witness) return;\n    return a.witness[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.witness) return;\n    return a.witness[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return [a.signature, a.pubkey];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 20)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 22 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x14\n      )\n        throw new TypeError('Output is invalid');\n      if (hash.length > 0 && !hash.equals(a.output.slice(2)))\n        throw new TypeError('Hash mismatch');\n      else hash = a.output.slice(2);\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n      if (!(0, types_1.isPoint)(a.pubkey) || a.pubkey.length !== 33)\n        throw new TypeError('Invalid pubkey for p2wpkh');\n    }\n    if (a.witness) {\n      if (a.witness.length !== 2) throw new TypeError('Witness is invalid');\n      if (!bscript.isCanonicalScriptSignature(a.witness[0]))\n        throw new TypeError('Witness has invalid signature');\n      if (!(0, types_1.isPoint)(a.witness[1]) || a.witness[1].length !== 33)\n        throw new TypeError('Witness has invalid pubkey');\n      if (a.signature && !a.signature.equals(a.witness[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(a.witness[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(a.witness[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wpkh = p2wpkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2wsh = void 0;\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst lazy = require('./lazy');\nconst bech32_1 = require('bech32');\nconst OPS = bscript.OPS;\nconst EMPTY_BUFFER = Buffer.alloc(0);\nfunction chunkHasUncompressedPubkey(chunk) {\n  if (\n    Buffer.isBuffer(chunk) &&\n    chunk.length === 65 &&\n    chunk[0] === 0x04 &&\n    (0, types_1.isPoint)(chunk)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n// input: <>\n// witness: [redeemScriptSig ...] {redeemScript}\n// output: OP_0 {sha256(redeemScript)}\n/**\n * Creates a Pay-to-Witness-Script-Hash (P2WSH) payment object.\n *\n * @param a - The payment object containing the necessary data.\n * @param opts - Optional payment options.\n * @returns The P2WSH payment object.\n * @throws {TypeError} If the required data is missing or invalid.\n */\nfunction p2wsh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      address: types_1.typeforce.maybe(types_1.typeforce.String),\n      hash: types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),\n      output: types_1.typeforce.maybe(types_1.typeforce.BufferN(34)),\n      redeem: types_1.typeforce.maybe({\n        input: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n        network: types_1.typeforce.maybe(types_1.typeforce.Object),\n        output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n        witness: types_1.typeforce.maybe(\n          types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n        ),\n      }),\n      input: types_1.typeforce.maybe(types_1.typeforce.BufferN(0)),\n      witness: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n      ),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32_1.bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32_1.bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const _rchunks = lazy.value(() => {\n    return bscript.decompile(a.redeem.input);\n  });\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32_1.bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32_1.bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.redeem && o.redeem.output) return bcrypto.sha256(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'redeem', () => {\n    if (!a.witness) return;\n    return {\n      output: a.witness[a.witness.length - 1],\n      input: EMPTY_BUFFER,\n      witness: a.witness.slice(0, -1),\n    };\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    // transform redeem input to witness stack?\n    if (\n      a.redeem &&\n      a.redeem.input &&\n      a.redeem.input.length > 0 &&\n      a.redeem.output &&\n      a.redeem.output.length > 0\n    ) {\n      const stack = bscript.toStack(_rchunks());\n      // assign, and blank the existing input\n      o.redeem = Object.assign({ witness: stack }, a.redeem);\n      o.redeem.input = EMPTY_BUFFER;\n      return [].concat(stack, a.redeem.output);\n    }\n    if (!a.redeem) return;\n    if (!a.redeem.output) return;\n    if (!a.redeem.witness) return;\n    return [].concat(a.redeem.witness, a.redeem.output);\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2wsh'];\n    if (o.redeem !== undefined && o.redeem.name !== undefined)\n      nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().prefix !== network.bech32)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      // is there two redeem sources?\n      if (\n        a.redeem.input &&\n        a.redeem.input.length > 0 &&\n        a.redeem.witness &&\n        a.redeem.witness.length > 0\n      )\n        throw new TypeError('Ambiguous witness source');\n      // is the redeem output non-empty/valid?\n      if (a.redeem.output) {\n        const decompile = bscript.decompile(a.redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output is invalid');\n        if (a.redeem.output.byteLength > 3600)\n          throw new TypeError(\n            'Redeem.output unspendable if larger than 3600 bytes',\n          );\n        if (bscript.countNonPushOnlyOPs(decompile) > 201)\n          throw new TypeError(\n            'Redeem.output unspendable with more than 201 non-push ops',\n          );\n        // match hash against other sources\n        const hash2 = bcrypto.sha256(a.redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (a.redeem.input && !bscript.isPushOnly(_rchunks()))\n        throw new TypeError('Non push-only scriptSig');\n      if (\n        a.witness &&\n        a.redeem.witness &&\n        !(0, types_1.stacksEqual)(a.witness, a.redeem.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n      if (\n        (a.redeem.input && _rchunks().some(chunkHasUncompressedPubkey)) ||\n        (a.redeem.output &&\n          (bscript.decompile(a.redeem.output) || []).some(\n            chunkHasUncompressedPubkey,\n          ))\n      ) {\n        throw new TypeError(\n          'redeem.input or redeem.output contains uncompressed pubkey',\n        );\n      }\n    }\n    if (a.witness && a.witness.length > 0) {\n      const wScript = a.witness[a.witness.length - 1];\n      if (a.redeem && a.redeem.output && !a.redeem.output.equals(wScript))\n        throw new TypeError('Witness and redeem.output mismatch');\n      if (\n        a.witness.some(chunkHasUncompressedPubkey) ||\n        (bscript.decompile(wScript) || []).some(chunkHasUncompressedPubkey)\n      )\n        throw new TypeError('Witness contains uncompressed pubkey');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wsh = p2wsh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.getEccLib = exports.initEccLib = void 0;\nconst _ECCLIB_CACHE = {};\n/**\n * Initializes the ECC library with the provided instance.\n * If `eccLib` is `undefined`, the library will be cleared.\n * If `eccLib` is a new instance, it will be verified before setting it as the active library.\n *\n * @param eccLib The instance of the ECC library to initialize.\n */\nfunction initEccLib(eccLib) {\n  if (!eccLib) {\n    // allow clearing the library\n    _ECCLIB_CACHE.eccLib = eccLib;\n  } else if (eccLib !== _ECCLIB_CACHE.eccLib) {\n    // new instance, verify it\n    verifyEcc(eccLib);\n    _ECCLIB_CACHE.eccLib = eccLib;\n  }\n}\nexports.initEccLib = initEccLib;\n/**\n * Retrieves the ECC Library instance.\n * Throws an error if the ECC Library is not provided.\n * You must call initEccLib() with a valid TinySecp256k1Interface instance before calling this function.\n * @returns The ECC Library instance.\n * @throws Error if the ECC Library is not provided.\n */\nfunction getEccLib() {\n  if (!_ECCLIB_CACHE.eccLib)\n    throw new Error(\n      'No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance',\n    );\n  return _ECCLIB_CACHE.eccLib;\n}\nexports.getEccLib = getEccLib;\nconst h = hex => Buffer.from(hex, 'hex');\n/**\n * Verifies the ECC functionality.\n *\n * @param ecc - The TinySecp256k1Interface object.\n */\nfunction verifyEcc(ecc) {\n  assert(typeof ecc.isXOnlyPoint === 'function');\n  assert(\n    ecc.isXOnlyPoint(\n      h('79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798'),\n    ),\n  );\n  assert(\n    ecc.isXOnlyPoint(\n      h('fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e'),\n    ),\n  );\n  assert(\n    ecc.isXOnlyPoint(\n      h('f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9'),\n    ),\n  );\n  assert(\n    ecc.isXOnlyPoint(\n      h('0000000000000000000000000000000000000000000000000000000000000001'),\n    ),\n  );\n  assert(\n    !ecc.isXOnlyPoint(\n      h('0000000000000000000000000000000000000000000000000000000000000000'),\n    ),\n  );\n  assert(\n    !ecc.isXOnlyPoint(\n      h('fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n    ),\n  );\n  assert(typeof ecc.xOnlyPointAddTweak === 'function');\n  tweakAddVectors.forEach(t => {\n    const r = ecc.xOnlyPointAddTweak(h(t.pubkey), h(t.tweak));\n    if (t.result === null) {\n      assert(r === null);\n    } else {\n      assert(r !== null);\n      assert(r.parity === t.parity);\n      assert(Buffer.from(r.xOnlyPubkey).equals(h(t.result)));\n    }\n  });\n}\nfunction assert(bool) {\n  if (!bool) throw new Error('ecc library invalid');\n}\nconst tweakAddVectors = [\n  {\n    pubkey: '79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798',\n    tweak: 'fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140',\n    parity: -1,\n    result: null,\n  },\n  {\n    pubkey: '1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b',\n    tweak: 'a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac',\n    parity: 1,\n    result: 'e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf',\n  },\n  {\n    pubkey: '2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991',\n    tweak: '823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47',\n    parity: 0,\n    result: '9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c',\n  },\n];\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","'use strict'\nvar Buffer = require('safe-buffer').Buffer\n\n// Number.MAX_SAFE_INTEGER\nvar MAX_SAFE_INTEGER = 9007199254740991\n\nfunction checkUInt53 (n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0) throw new RangeError('value out of range')\n}\n\nfunction encode (number, buffer, offset) {\n  checkUInt53(number)\n\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(number))\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  // 8 bit\n  if (number < 0xfd) {\n    buffer.writeUInt8(number, offset)\n    encode.bytes = 1\n\n  // 16 bit\n  } else if (number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n    encode.bytes = 3\n\n  // 32 bit\n  } else if (number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n    encode.bytes = 5\n\n  // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset)\n    buffer.writeUInt32LE(number >>> 0, offset + 1)\n    buffer.writeUInt32LE((number / 0x100000000) | 0, offset + 5)\n    encode.bytes = 9\n  }\n\n  return buffer\n}\n\nfunction decode (buffer, offset) {\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  var first = buffer.readUInt8(offset)\n\n  // 8 bit\n  if (first < 0xfd) {\n    decode.bytes = 1\n    return first\n\n  // 16 bit\n  } else if (first === 0xfd) {\n    decode.bytes = 3\n    return buffer.readUInt16LE(offset + 1)\n\n  // 32 bit\n  } else if (first === 0xfe) {\n    decode.bytes = 5\n    return buffer.readUInt32LE(offset + 1)\n\n  // 64 bit\n  } else {\n    decode.bytes = 9\n    var lo = buffer.readUInt32LE(offset + 1)\n    var hi = buffer.readUInt32LE(offset + 5)\n    var number = hi * 0x0100000000 + lo\n    checkUInt53(number)\n\n    return number\n  }\n}\n\nfunction encodingLength (number) {\n  checkUInt53(number)\n\n  return (\n    number < 0xfd ? 1\n      : number <= 0xffff ? 3\n        : number <= 0xffffffff ? 5\n          : 9\n  )\n}\n\nmodule.exports = { encode: encode, decode: decode, encodingLength: encodingLength }\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.BufferReader =\n  exports.BufferWriter =\n  exports.cloneBuffer =\n  exports.reverseBuffer =\n  exports.writeUInt64LE =\n  exports.readUInt64LE =\n  exports.varuint =\n    void 0;\nconst types = require('./types');\nconst { typeforce } = types;\nconst varuint = require('varuint-bitcoin');\nexports.varuint = varuint;\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\n/**\n * Writes a 64-bit unsigned integer in little-endian format to the specified buffer at the given offset.\n *\n * @param buffer - The buffer to write the value to.\n * @param value - The 64-bit unsigned integer value to write.\n * @param offset - The offset in the buffer where the value should be written.\n * @returns The new offset after writing the value.\n */\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\n/**\n * Reverses the order of bytes in a buffer.\n * @param buffer - The buffer to reverse.\n * @returns A new buffer with the bytes reversed.\n */\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction cloneBuffer(buffer) {\n  const clone = Buffer.allocUnsafe(buffer.length);\n  buffer.copy(clone);\n  return clone;\n}\nexports.cloneBuffer = cloneBuffer;\n/**\n * Helper class for serialization of bitcoin data types into a pre-allocated buffer.\n */\nclass BufferWriter {\n  static withCapacity(size) {\n    return new BufferWriter(Buffer.alloc(size));\n  }\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    typeforce(types.tuple(types.Buffer, types.UInt32), [buffer, offset]);\n  }\n  writeUInt8(i) {\n    this.offset = this.buffer.writeUInt8(i, this.offset);\n  }\n  writeInt32(i) {\n    this.offset = this.buffer.writeInt32LE(i, this.offset);\n  }\n  writeUInt32(i) {\n    this.offset = this.buffer.writeUInt32LE(i, this.offset);\n  }\n  writeUInt64(i) {\n    this.offset = writeUInt64LE(this.buffer, i, this.offset);\n  }\n  writeVarInt(i) {\n    varuint.encode(i, this.buffer, this.offset);\n    this.offset += varuint.encode.bytes;\n  }\n  writeSlice(slice) {\n    if (this.buffer.length < this.offset + slice.length) {\n      throw new Error('Cannot write slice out of bounds');\n    }\n    this.offset += slice.copy(this.buffer, this.offset);\n  }\n  writeVarSlice(slice) {\n    this.writeVarInt(slice.length);\n    this.writeSlice(slice);\n  }\n  writeVector(vector) {\n    this.writeVarInt(vector.length);\n    vector.forEach(buf => this.writeVarSlice(buf));\n  }\n  end() {\n    if (this.buffer.length === this.offset) {\n      return this.buffer;\n    }\n    throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`);\n  }\n}\nexports.BufferWriter = BufferWriter;\n/**\n * Helper class for reading of bitcoin data types from a buffer.\n */\nclass BufferReader {\n  constructor(buffer, offset = 0) {\n    this.buffer = buffer;\n    this.offset = offset;\n    typeforce(types.tuple(types.Buffer, types.UInt32), [buffer, offset]);\n  }\n  readUInt8() {\n    const result = this.buffer.readUInt8(this.offset);\n    this.offset++;\n    return result;\n  }\n  readInt32() {\n    const result = this.buffer.readInt32LE(this.offset);\n    this.offset += 4;\n    return result;\n  }\n  readUInt32() {\n    const result = this.buffer.readUInt32LE(this.offset);\n    this.offset += 4;\n    return result;\n  }\n  readUInt64() {\n    const result = readUInt64LE(this.buffer, this.offset);\n    this.offset += 8;\n    return result;\n  }\n  readVarInt() {\n    const vi = varuint.decode(this.buffer, this.offset);\n    this.offset += varuint.decode.bytes;\n    return vi;\n  }\n  readSlice(n) {\n    if (this.buffer.length < this.offset + n) {\n      throw new Error('Cannot read slice out of bounds');\n    }\n    const result = this.buffer.slice(this.offset, this.offset + n);\n    this.offset += n;\n    return result;\n  }\n  readVarSlice() {\n    return this.readSlice(this.readVarInt());\n  }\n  readVector() {\n    const count = this.readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(this.readVarSlice());\n    return vector;\n  }\n}\nexports.BufferReader = BufferReader;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2tr =\n  exports.p2wsh =\n  exports.p2wpkh =\n  exports.p2sh =\n  exports.p2pkh =\n  exports.p2pk =\n  exports.p2ms =\n  exports.embed =\n    void 0;\nconst embed_1 = require('./embed');\nObject.defineProperty(exports, 'embed', {\n  enumerable: true,\n  get: function () {\n    return embed_1.p2data;\n  },\n});\nconst p2ms_1 = require('./p2ms');\nObject.defineProperty(exports, 'p2ms', {\n  enumerable: true,\n  get: function () {\n    return p2ms_1.p2ms;\n  },\n});\nconst p2pk_1 = require('./p2pk');\nObject.defineProperty(exports, 'p2pk', {\n  enumerable: true,\n  get: function () {\n    return p2pk_1.p2pk;\n  },\n});\nconst p2pkh_1 = require('./p2pkh');\nObject.defineProperty(exports, 'p2pkh', {\n  enumerable: true,\n  get: function () {\n    return p2pkh_1.p2pkh;\n  },\n});\nconst p2sh_1 = require('./p2sh');\nObject.defineProperty(exports, 'p2sh', {\n  enumerable: true,\n  get: function () {\n    return p2sh_1.p2sh;\n  },\n});\nconst p2wpkh_1 = require('./p2wpkh');\nObject.defineProperty(exports, 'p2wpkh', {\n  enumerable: true,\n  get: function () {\n    return p2wpkh_1.p2wpkh;\n  },\n});\nconst p2wsh_1 = require('./p2wsh');\nObject.defineProperty(exports, 'p2wsh', {\n  enumerable: true,\n  get: function () {\n    return p2wsh_1.p2wsh;\n  },\n});\nconst p2tr_1 = require('./p2tr');\nObject.defineProperty(exports, 'p2tr', {\n  enumerable: true,\n  get: function () {\n    return p2tr_1.p2tr;\n  },\n});\n// TODO\n// witness commitment\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.p2tr = void 0;\nconst buffer_1 = require('buffer');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst types_1 = require('../types');\nconst ecc_lib_1 = require('../ecc_lib');\nconst bip341_1 = require('./bip341');\nconst lazy = require('./lazy');\nconst bech32_1 = require('bech32');\nconst address_1 = require('../address');\nconst OPS = bscript.OPS;\nconst TAPROOT_WITNESS_VERSION = 0x01;\nconst ANNEX_PREFIX = 0x50;\n/**\n * Creates a Pay-to-Taproot (P2TR) payment object.\n *\n * @param a - The payment object containing the necessary data for P2TR.\n * @param opts - Optional payment options.\n * @returns The P2TR payment object.\n * @throws {TypeError} If the provided data is invalid or insufficient.\n */\nfunction p2tr(a, opts) {\n  if (\n    !a.address &&\n    !a.output &&\n    !a.pubkey &&\n    !a.internalPubkey &&\n    !(a.witness && a.witness.length > 1)\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  (0, types_1.typeforce)(\n    {\n      address: types_1.typeforce.maybe(types_1.typeforce.String),\n      input: types_1.typeforce.maybe(types_1.typeforce.BufferN(0)),\n      network: types_1.typeforce.maybe(types_1.typeforce.Object),\n      output: types_1.typeforce.maybe(types_1.typeforce.BufferN(34)),\n      internalPubkey: types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),\n      hash: types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),\n      pubkey: types_1.typeforce.maybe(types_1.typeforce.BufferN(32)),\n      signature: types_1.typeforce.maybe(\n        types_1.typeforce.anyOf(\n          types_1.typeforce.BufferN(64),\n          types_1.typeforce.BufferN(65),\n        ),\n      ),\n      witness: types_1.typeforce.maybe(\n        types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n      ),\n      scriptTree: types_1.typeforce.maybe(types_1.isTaptree),\n      redeem: types_1.typeforce.maybe({\n        output: types_1.typeforce.maybe(types_1.typeforce.Buffer),\n        redeemVersion: types_1.typeforce.maybe(types_1.typeforce.Number),\n        witness: types_1.typeforce.maybe(\n          types_1.typeforce.arrayOf(types_1.typeforce.Buffer),\n        ),\n      }),\n      redeemVersion: types_1.typeforce.maybe(types_1.typeforce.Number),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    return (0, address_1.fromBech32)(a.address);\n  });\n  // remove annex if present, ignored by taproot\n  const _witness = lazy.value(() => {\n    if (!a.witness || !a.witness.length) return;\n    if (\n      a.witness.length >= 2 &&\n      a.witness[a.witness.length - 1][0] === ANNEX_PREFIX\n    ) {\n      return a.witness.slice(0, -1);\n    }\n    return a.witness.slice();\n  });\n  const _hashTree = lazy.value(() => {\n    if (a.scriptTree) return (0, bip341_1.toHashTree)(a.scriptTree);\n    if (a.hash) return { hash: a.hash };\n    return;\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2tr', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.pubkey) return;\n    const words = bech32_1.bech32m.toWords(o.pubkey);\n    words.unshift(TAPROOT_WITNESS_VERSION);\n    return bech32_1.bech32m.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    const hashTree = _hashTree();\n    if (hashTree) return hashTree.hash;\n    const w = _witness();\n    if (w && w.length > 1) {\n      const controlBlock = w[w.length - 1];\n      const leafVersion = controlBlock[0] & types_1.TAPLEAF_VERSION_MASK;\n      const script = w[w.length - 2];\n      const leafHash = (0, bip341_1.tapleafHash)({\n        output: script,\n        version: leafVersion,\n      });\n      return (0, bip341_1.rootHashFromPath)(controlBlock, leafHash);\n    }\n    return null;\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.pubkey) return;\n    return bscript.compile([OPS.OP_1, o.pubkey]);\n  });\n  lazy.prop(o, 'redeemVersion', () => {\n    if (a.redeemVersion) return a.redeemVersion;\n    if (\n      a.redeem &&\n      a.redeem.redeemVersion !== undefined &&\n      a.redeem.redeemVersion !== null\n    ) {\n      return a.redeem.redeemVersion;\n    }\n    return bip341_1.LEAF_VERSION_TAPSCRIPT;\n  });\n  lazy.prop(o, 'redeem', () => {\n    const witness = _witness(); // witness without annex\n    if (!witness || witness.length < 2) return;\n    return {\n      output: witness[witness.length - 2],\n      witness: witness.slice(0, -2),\n      redeemVersion:\n        witness[witness.length - 1][0] & types_1.TAPLEAF_VERSION_MASK,\n    };\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.internalPubkey) {\n      const tweakedKey = (0, bip341_1.tweakKey)(o.internalPubkey, o.hash);\n      if (tweakedKey) return tweakedKey.x;\n    }\n  });\n  lazy.prop(o, 'internalPubkey', () => {\n    if (a.internalPubkey) return a.internalPubkey;\n    const witness = _witness();\n    if (witness && witness.length > 1)\n      return witness[witness.length - 1].slice(1, 33);\n  });\n  lazy.prop(o, 'signature', () => {\n    if (a.signature) return a.signature;\n    const witness = _witness(); // witness without annex\n    if (!witness || witness.length !== 1) return;\n    return witness[0];\n  });\n  lazy.prop(o, 'witness', () => {\n    if (a.witness) return a.witness;\n    const hashTree = _hashTree();\n    if (hashTree && a.redeem && a.redeem.output && a.internalPubkey) {\n      const leafHash = (0, bip341_1.tapleafHash)({\n        output: a.redeem.output,\n        version: o.redeemVersion,\n      });\n      const path = (0, bip341_1.findScriptPath)(hashTree, leafHash);\n      if (!path) return;\n      const outputKey = (0, bip341_1.tweakKey)(a.internalPubkey, hashTree.hash);\n      if (!outputKey) return;\n      const controlBock = buffer_1.Buffer.concat(\n        [\n          buffer_1.Buffer.from([o.redeemVersion | outputKey.parity]),\n          a.internalPubkey,\n        ].concat(path),\n      );\n      return [a.redeem.output, controlBock];\n    }\n    if (a.signature) return [a.signature];\n  });\n  // extended validation\n  if (opts.validate) {\n    let pubkey = buffer_1.Buffer.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== TAPROOT_WITNESS_VERSION)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      pubkey = _address().data;\n    }\n    if (a.pubkey) {\n      if (pubkey.length > 0 && !pubkey.equals(a.pubkey))\n        throw new TypeError('Pubkey mismatch');\n      else pubkey = a.pubkey;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_1 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      if (pubkey.length > 0 && !pubkey.equals(a.output.slice(2)))\n        throw new TypeError('Pubkey mismatch');\n      else pubkey = a.output.slice(2);\n    }\n    if (a.internalPubkey) {\n      const tweakedKey = (0, bip341_1.tweakKey)(a.internalPubkey, o.hash);\n      if (pubkey.length > 0 && !pubkey.equals(tweakedKey.x))\n        throw new TypeError('Pubkey mismatch');\n      else pubkey = tweakedKey.x;\n    }\n    if (pubkey && pubkey.length) {\n      if (!(0, ecc_lib_1.getEccLib)().isXOnlyPoint(pubkey))\n        throw new TypeError('Invalid pubkey for p2tr');\n    }\n    const hashTree = _hashTree();\n    if (a.hash && hashTree) {\n      if (!a.hash.equals(hashTree.hash)) throw new TypeError('Hash mismatch');\n    }\n    if (a.redeem && a.redeem.output && hashTree) {\n      const leafHash = (0, bip341_1.tapleafHash)({\n        output: a.redeem.output,\n        version: o.redeemVersion,\n      });\n      if (!(0, bip341_1.findScriptPath)(hashTree, leafHash))\n        throw new TypeError('Redeem script not in tree');\n    }\n    const witness = _witness();\n    // compare the provided redeem data with the one computed from witness\n    if (a.redeem && o.redeem) {\n      if (a.redeem.redeemVersion) {\n        if (a.redeem.redeemVersion !== o.redeem.redeemVersion)\n          throw new TypeError('Redeem.redeemVersion and witness mismatch');\n      }\n      if (a.redeem.output) {\n        if (bscript.decompile(a.redeem.output).length === 0)\n          throw new TypeError('Redeem.output is invalid');\n        // output redeem is constructed from the witness\n        if (o.redeem.output && !a.redeem.output.equals(o.redeem.output))\n          throw new TypeError('Redeem.output and witness mismatch');\n      }\n      if (a.redeem.witness) {\n        if (\n          o.redeem.witness &&\n          !(0, types_1.stacksEqual)(a.redeem.witness, o.redeem.witness)\n        )\n          throw new TypeError('Redeem.witness and witness mismatch');\n      }\n    }\n    if (witness && witness.length) {\n      if (witness.length === 1) {\n        // key spending\n        if (a.signature && !a.signature.equals(witness[0]))\n          throw new TypeError('Signature mismatch');\n      } else {\n        // script path spending\n        const controlBlock = witness[witness.length - 1];\n        if (controlBlock.length < 33)\n          throw new TypeError(\n            `The control-block length is too small. Got ${controlBlock.length}, expected min 33.`,\n          );\n        if ((controlBlock.length - 33) % 32 !== 0)\n          throw new TypeError(\n            `The control-block length of ${controlBlock.length} is incorrect!`,\n          );\n        const m = (controlBlock.length - 33) / 32;\n        if (m > 128)\n          throw new TypeError(\n            `The script path is too long. Got ${m}, expected max 128.`,\n          );\n        const internalPubkey = controlBlock.slice(1, 33);\n        if (a.internalPubkey && !a.internalPubkey.equals(internalPubkey))\n          throw new TypeError('Internal pubkey mismatch');\n        if (!(0, ecc_lib_1.getEccLib)().isXOnlyPoint(internalPubkey))\n          throw new TypeError('Invalid internalPubkey for p2tr witness');\n        const leafVersion = controlBlock[0] & types_1.TAPLEAF_VERSION_MASK;\n        const script = witness[witness.length - 2];\n        const leafHash = (0, bip341_1.tapleafHash)({\n          output: script,\n          version: leafVersion,\n        });\n        const hash = (0, bip341_1.rootHashFromPath)(controlBlock, leafHash);\n        const outputKey = (0, bip341_1.tweakKey)(internalPubkey, hash);\n        if (!outputKey)\n          // todo: needs test data\n          throw new TypeError('Invalid outputKey for p2tr witness');\n        if (pubkey.length && !pubkey.equals(outputKey.x))\n          throw new TypeError('Pubkey mismatch for p2tr witness');\n        if (outputKey.parity !== (controlBlock[0] & 1))\n          throw new Error('Incorrect parity');\n      }\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2tr = p2tr;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.toOutputScript =\n  exports.fromOutputScript =\n  exports.toBech32 =\n  exports.toBase58Check =\n  exports.fromBech32 =\n  exports.fromBase58Check =\n    void 0;\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst types_1 = require('./types');\nconst bech32_1 = require('bech32');\nconst bs58check = require('bs58check');\nconst FUTURE_SEGWIT_MAX_SIZE = 40;\nconst FUTURE_SEGWIT_MIN_SIZE = 2;\nconst FUTURE_SEGWIT_MAX_VERSION = 16;\nconst FUTURE_SEGWIT_MIN_VERSION = 2;\nconst FUTURE_SEGWIT_VERSION_DIFF = 0x50;\nconst FUTURE_SEGWIT_VERSION_WARNING =\n  'WARNING: Sending to a future segwit version address can lead to loss of funds. ' +\n  'End users MUST be warned carefully in the GUI and asked if they wish to proceed ' +\n  'with caution. Wallets should verify the segwit version from the output of fromBech32, ' +\n  'then decide when it is safe to use which version of segwit.';\nfunction _toFutureSegwitAddress(output, network) {\n  const data = output.slice(2);\n  if (\n    data.length < FUTURE_SEGWIT_MIN_SIZE ||\n    data.length > FUTURE_SEGWIT_MAX_SIZE\n  )\n    throw new TypeError('Invalid program length for segwit address');\n  const version = output[0] - FUTURE_SEGWIT_VERSION_DIFF;\n  if (\n    version < FUTURE_SEGWIT_MIN_VERSION ||\n    version > FUTURE_SEGWIT_MAX_VERSION\n  )\n    throw new TypeError('Invalid version for segwit address');\n  if (output[1] !== data.length)\n    throw new TypeError('Invalid script for segwit address');\n  console.warn(FUTURE_SEGWIT_VERSION_WARNING);\n  return toBech32(data, version, network.bech32);\n}\n/**\n * decode address with base58 specification,  return address version and address hash if valid\n */\nfunction fromBase58Check(address) {\n  const payload = Buffer.from(bs58check.decode(address));\n  // TODO: 4.0.0, move to \"toOutputScript\"\n  if (payload.length < 21) throw new TypeError(address + ' is too short');\n  if (payload.length > 21) throw new TypeError(address + ' is too long');\n  const version = payload.readUInt8(0);\n  const hash = payload.slice(1);\n  return { version, hash };\n}\nexports.fromBase58Check = fromBase58Check;\n/**\n * decode address with bech32 specification,  return address version、address prefix and address data if valid\n */\nfunction fromBech32(address) {\n  let result;\n  let version;\n  try {\n    result = bech32_1.bech32.decode(address);\n  } catch (e) {}\n  if (result) {\n    version = result.words[0];\n    if (version !== 0) throw new TypeError(address + ' uses wrong encoding');\n  } else {\n    result = bech32_1.bech32m.decode(address);\n    version = result.words[0];\n    if (version === 0) throw new TypeError(address + ' uses wrong encoding');\n  }\n  const data = bech32_1.bech32.fromWords(result.words.slice(1));\n  return {\n    version,\n    prefix: result.prefix,\n    data: Buffer.from(data),\n  };\n}\nexports.fromBech32 = fromBech32;\n/**\n * encode address hash to base58 address with version\n */\nfunction toBase58Check(hash, version) {\n  (0, types_1.typeforce)(\n    (0, types_1.tuple)(types_1.Hash160bit, types_1.UInt8),\n    arguments,\n  );\n  const payload = Buffer.allocUnsafe(21);\n  payload.writeUInt8(version, 0);\n  hash.copy(payload, 1);\n  return bs58check.encode(payload);\n}\nexports.toBase58Check = toBase58Check;\n/**\n * encode address hash to bech32 address with version and prefix\n */\nfunction toBech32(data, version, prefix) {\n  const words = bech32_1.bech32.toWords(data);\n  words.unshift(version);\n  return version === 0\n    ? bech32_1.bech32.encode(prefix, words)\n    : bech32_1.bech32m.encode(prefix, words);\n}\nexports.toBech32 = toBech32;\n/**\n * decode address from output script with network, return address if matched\n */\nfunction fromOutputScript(output, network) {\n  // TODO: Network\n  network = network || networks.bitcoin;\n  try {\n    return payments.p2pkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2sh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wpkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wsh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2tr({ output, network }).address;\n  } catch (e) {}\n  try {\n    return _toFutureSegwitAddress(output, network);\n  } catch (e) {}\n  throw new Error(bscript.toASM(output) + ' has no matching Address');\n}\nexports.fromOutputScript = fromOutputScript;\n/**\n * encodes address to output script with network, return output script if address matched\n */\nfunction toOutputScript(address, network) {\n  network = network || networks.bitcoin;\n  let decodeBase58;\n  let decodeBech32;\n  try {\n    decodeBase58 = fromBase58Check(address);\n  } catch (e) {}\n  if (decodeBase58) {\n    if (decodeBase58.version === network.pubKeyHash)\n      return payments.p2pkh({ hash: decodeBase58.hash }).output;\n    if (decodeBase58.version === network.scriptHash)\n      return payments.p2sh({ hash: decodeBase58.hash }).output;\n  } else {\n    try {\n      decodeBech32 = fromBech32(address);\n    } catch (e) {}\n    if (decodeBech32) {\n      if (decodeBech32.prefix !== network.bech32)\n        throw new Error(address + ' has an invalid prefix');\n      if (decodeBech32.version === 0) {\n        if (decodeBech32.data.length === 20)\n          return payments.p2wpkh({ hash: decodeBech32.data }).output;\n        if (decodeBech32.data.length === 32)\n          return payments.p2wsh({ hash: decodeBech32.data }).output;\n      } else if (decodeBech32.version === 1) {\n        if (decodeBech32.data.length === 32)\n          return payments.p2tr({ pubkey: decodeBech32.data }).output;\n      } else if (\n        decodeBech32.version >= FUTURE_SEGWIT_MIN_VERSION &&\n        decodeBech32.version <= FUTURE_SEGWIT_MAX_VERSION &&\n        decodeBech32.data.length >= FUTURE_SEGWIT_MIN_SIZE &&\n        decodeBech32.data.length <= FUTURE_SEGWIT_MAX_SIZE\n      ) {\n        console.warn(FUTURE_SEGWIT_VERSION_WARNING);\n        return bscript.compile([\n          decodeBech32.version + FUTURE_SEGWIT_VERSION_DIFF,\n          decodeBech32.data,\n        ]);\n      }\n    }\n  }\n  throw new Error(address + ' has no matching Script');\n}\nexports.toOutputScript = toOutputScript;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.tweakKey =\n  exports.tapTweakHash =\n  exports.tapleafHash =\n  exports.findScriptPath =\n  exports.toHashTree =\n  exports.rootHashFromPath =\n  exports.MAX_TAPTREE_DEPTH =\n  exports.LEAF_VERSION_TAPSCRIPT =\n    void 0;\nconst buffer_1 = require('buffer');\nconst ecc_lib_1 = require('../ecc_lib');\nconst bcrypto = require('../crypto');\nconst bufferutils_1 = require('../bufferutils');\nconst types_1 = require('../types');\nexports.LEAF_VERSION_TAPSCRIPT = 0xc0;\nexports.MAX_TAPTREE_DEPTH = 128;\nconst isHashBranch = ht => 'left' in ht && 'right' in ht;\n/**\n * Calculates the root hash from a given control block and leaf hash.\n * @param controlBlock - The control block buffer.\n * @param leafHash - The leaf hash buffer.\n * @returns The root hash buffer.\n * @throws {TypeError} If the control block length is less than 33.\n */\nfunction rootHashFromPath(controlBlock, leafHash) {\n  if (controlBlock.length < 33)\n    throw new TypeError(\n      `The control-block length is too small. Got ${controlBlock.length}, expected min 33.`,\n    );\n  const m = (controlBlock.length - 33) / 32;\n  let kj = leafHash;\n  for (let j = 0; j < m; j++) {\n    const ej = controlBlock.slice(33 + 32 * j, 65 + 32 * j);\n    if (kj.compare(ej) < 0) {\n      kj = tapBranchHash(kj, ej);\n    } else {\n      kj = tapBranchHash(ej, kj);\n    }\n  }\n  return kj;\n}\nexports.rootHashFromPath = rootHashFromPath;\n/**\n * Build a hash tree of merkle nodes from the scripts binary tree.\n * @param scriptTree - the tree of scripts to pairwise hash.\n */\nfunction toHashTree(scriptTree) {\n  if ((0, types_1.isTapleaf)(scriptTree))\n    return { hash: tapleafHash(scriptTree) };\n  const hashes = [toHashTree(scriptTree[0]), toHashTree(scriptTree[1])];\n  hashes.sort((a, b) => a.hash.compare(b.hash));\n  const [left, right] = hashes;\n  return {\n    hash: tapBranchHash(left.hash, right.hash),\n    left,\n    right,\n  };\n}\nexports.toHashTree = toHashTree;\n/**\n * Given a HashTree, finds the path from a particular hash to the root.\n * @param node - the root of the tree\n * @param hash - the hash to search for\n * @returns - array of sibling hashes, from leaf (inclusive) to root\n * (exclusive) needed to prove inclusion of the specified hash. undefined if no\n * path is found\n */\nfunction findScriptPath(node, hash) {\n  if (isHashBranch(node)) {\n    const leftPath = findScriptPath(node.left, hash);\n    if (leftPath !== undefined) return [...leftPath, node.right.hash];\n    const rightPath = findScriptPath(node.right, hash);\n    if (rightPath !== undefined) return [...rightPath, node.left.hash];\n  } else if (node.hash.equals(hash)) {\n    return [];\n  }\n  return undefined;\n}\nexports.findScriptPath = findScriptPath;\nfunction tapleafHash(leaf) {\n  const version = leaf.version || exports.LEAF_VERSION_TAPSCRIPT;\n  return bcrypto.taggedHash(\n    'TapLeaf',\n    buffer_1.Buffer.concat([\n      buffer_1.Buffer.from([version]),\n      serializeScript(leaf.output),\n    ]),\n  );\n}\nexports.tapleafHash = tapleafHash;\nfunction tapTweakHash(pubKey, h) {\n  return bcrypto.taggedHash(\n    'TapTweak',\n    buffer_1.Buffer.concat(h ? [pubKey, h] : [pubKey]),\n  );\n}\nexports.tapTweakHash = tapTweakHash;\nfunction tweakKey(pubKey, h) {\n  if (!buffer_1.Buffer.isBuffer(pubKey)) return null;\n  if (pubKey.length !== 32) return null;\n  if (h && h.length !== 32) return null;\n  const tweakHash = tapTweakHash(pubKey, h);\n  const res = (0, ecc_lib_1.getEccLib)().xOnlyPointAddTweak(pubKey, tweakHash);\n  if (!res || res.xOnlyPubkey === null) return null;\n  return {\n    parity: res.parity,\n    x: buffer_1.Buffer.from(res.xOnlyPubkey),\n  };\n}\nexports.tweakKey = tweakKey;\nfunction tapBranchHash(a, b) {\n  return bcrypto.taggedHash('TapBranch', buffer_1.Buffer.concat([a, b]));\n}\nfunction serializeScript(s) {\n  const varintLen = bufferutils_1.varuint.encodingLength(s.length);\n  const buffer = buffer_1.Buffer.allocUnsafe(varintLen); // better\n  bufferutils_1.varuint.encode(s.length, buffer);\n  return buffer_1.Buffer.concat([buffer, s]);\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.fastMerkleRoot = void 0;\n/**\n * Calculates the Merkle root of an array of buffers using a specified digest function.\n *\n * @param values - The array of buffers.\n * @param digestFn - The digest function used to calculate the hash of the concatenated buffers.\n * @returns The Merkle root as a buffer.\n * @throws {TypeError} If the values parameter is not an array or the digestFn parameter is not a function.\n */\nfunction fastMerkleRoot(values, digestFn) {\n  if (!Array.isArray(values)) throw TypeError('Expected values Array');\n  if (typeof digestFn !== 'function')\n    throw TypeError('Expected digest Function');\n  let length = values.length;\n  const results = values.concat();\n  while (length > 1) {\n    let j = 0;\n    for (let i = 0; i < length; i += 2, ++j) {\n      const left = results[i];\n      const right = i + 1 === length ? left : results[i + 1];\n      const data = Buffer.concat([left, right]);\n      results[j] = digestFn(data);\n    }\n    length = j;\n  }\n  return results[0];\n}\nexports.fastMerkleRoot = fastMerkleRoot;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.Transaction = void 0;\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst types = require('./types');\nconst { typeforce } = types;\nfunction varSliceSize(someScript) {\n  const length = someScript.length;\n  return bufferutils_1.varuint.encodingLength(length) + length;\n}\nfunction vectorSize(someVector) {\n  const length = someVector.length;\n  return (\n    bufferutils_1.varuint.encodingLength(length) +\n    someVector.reduce((sum, witness) => {\n      return sum + varSliceSize(witness);\n    }, 0)\n  );\n}\nconst EMPTY_BUFFER = Buffer.allocUnsafe(0);\nconst EMPTY_WITNESS = [];\nconst ZERO = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000000',\n  'hex',\n);\nconst ONE = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000001',\n  'hex',\n);\nconst VALUE_UINT64_MAX = Buffer.from('ffffffffffffffff', 'hex');\nconst BLANK_OUTPUT = {\n  script: EMPTY_BUFFER,\n  valueBuffer: VALUE_UINT64_MAX,\n};\nfunction isOutput(out) {\n  return out.value !== undefined;\n}\n/**\n * Represents a Bitcoin transaction.\n */\nclass Transaction {\n  constructor() {\n    this.version = 1;\n    this.locktime = 0;\n    this.ins = [];\n    this.outs = [];\n  }\n  static fromBuffer(buffer, _NO_STRICT) {\n    const bufferReader = new bufferutils_1.BufferReader(buffer);\n    const tx = new Transaction();\n    tx.version = bufferReader.readInt32();\n    const marker = bufferReader.readUInt8();\n    const flag = bufferReader.readUInt8();\n    let hasWitnesses = false;\n    if (\n      marker === Transaction.ADVANCED_TRANSACTION_MARKER &&\n      flag === Transaction.ADVANCED_TRANSACTION_FLAG\n    ) {\n      hasWitnesses = true;\n    } else {\n      bufferReader.offset -= 2;\n    }\n    const vinLen = bufferReader.readVarInt();\n    for (let i = 0; i < vinLen; ++i) {\n      tx.ins.push({\n        hash: bufferReader.readSlice(32),\n        index: bufferReader.readUInt32(),\n        script: bufferReader.readVarSlice(),\n        sequence: bufferReader.readUInt32(),\n        witness: EMPTY_WITNESS,\n      });\n    }\n    const voutLen = bufferReader.readVarInt();\n    for (let i = 0; i < voutLen; ++i) {\n      tx.outs.push({\n        value: bufferReader.readUInt64(),\n        script: bufferReader.readVarSlice(),\n      });\n    }\n    if (hasWitnesses) {\n      for (let i = 0; i < vinLen; ++i) {\n        tx.ins[i].witness = bufferReader.readVector();\n      }\n      // was this pointless?\n      if (!tx.hasWitnesses())\n        throw new Error('Transaction has superfluous witness data');\n    }\n    tx.locktime = bufferReader.readUInt32();\n    if (_NO_STRICT) return tx;\n    if (bufferReader.offset !== buffer.length)\n      throw new Error('Transaction has unexpected data');\n    return tx;\n  }\n  static fromHex(hex) {\n    return Transaction.fromBuffer(Buffer.from(hex, 'hex'), false);\n  }\n  static isCoinbaseHash(buffer) {\n    typeforce(types.Hash256bit, buffer);\n    for (let i = 0; i < 32; ++i) {\n      if (buffer[i] !== 0) return false;\n    }\n    return true;\n  }\n  isCoinbase() {\n    return (\n      this.ins.length === 1 && Transaction.isCoinbaseHash(this.ins[0].hash)\n    );\n  }\n  addInput(hash, index, sequence, scriptSig) {\n    typeforce(\n      types.tuple(\n        types.Hash256bit,\n        types.UInt32,\n        types.maybe(types.UInt32),\n        types.maybe(types.Buffer),\n      ),\n      arguments,\n    );\n    if (types.Null(sequence)) {\n      sequence = Transaction.DEFAULT_SEQUENCE;\n    }\n    // Add the input and return the input's index\n    return (\n      this.ins.push({\n        hash,\n        index,\n        script: scriptSig || EMPTY_BUFFER,\n        sequence: sequence,\n        witness: EMPTY_WITNESS,\n      }) - 1\n    );\n  }\n  addOutput(scriptPubKey, value) {\n    typeforce(types.tuple(types.Buffer, types.Satoshi), arguments);\n    // Add the output and return the output's index\n    return (\n      this.outs.push({\n        script: scriptPubKey,\n        value,\n      }) - 1\n    );\n  }\n  hasWitnesses() {\n    return this.ins.some(x => {\n      return x.witness.length !== 0;\n    });\n  }\n  weight() {\n    const base = this.byteLength(false);\n    const total = this.byteLength(true);\n    return base * 3 + total;\n  }\n  virtualSize() {\n    return Math.ceil(this.weight() / 4);\n  }\n  byteLength(_ALLOW_WITNESS = true) {\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    return (\n      (hasWitnesses ? 10 : 8) +\n      bufferutils_1.varuint.encodingLength(this.ins.length) +\n      bufferutils_1.varuint.encodingLength(this.outs.length) +\n      this.ins.reduce((sum, input) => {\n        return sum + 40 + varSliceSize(input.script);\n      }, 0) +\n      this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0) +\n      (hasWitnesses\n        ? this.ins.reduce((sum, input) => {\n            return sum + vectorSize(input.witness);\n          }, 0)\n        : 0)\n    );\n  }\n  clone() {\n    const newTx = new Transaction();\n    newTx.version = this.version;\n    newTx.locktime = this.locktime;\n    newTx.ins = this.ins.map(txIn => {\n      return {\n        hash: txIn.hash,\n        index: txIn.index,\n        script: txIn.script,\n        sequence: txIn.sequence,\n        witness: txIn.witness,\n      };\n    });\n    newTx.outs = this.outs.map(txOut => {\n      return {\n        script: txOut.script,\n        value: txOut.value,\n      };\n    });\n    return newTx;\n  }\n  /**\n   * Hash transaction for signing a specific input.\n   *\n   * Bitcoin uses a different hash for each signed transaction input.\n   * This method copies the transaction, makes the necessary changes based on the\n   * hashType, and then hashes the result.\n   * This hash can then be used to sign the provided transaction input.\n   */\n  hashForSignature(inIndex, prevOutScript, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, /* types.UInt8 */ types.Number),\n      arguments,\n    );\n    // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L29\n    if (inIndex >= this.ins.length) return ONE;\n    // ignore OP_CODESEPARATOR\n    const ourScript = bscript.compile(\n      bscript.decompile(prevOutScript).filter(x => {\n        return x !== script_1.OPS.OP_CODESEPARATOR;\n      }),\n    );\n    const txTmp = this.clone();\n    // SIGHASH_NONE: ignore all outputs? (wildcard payee)\n    if ((hashType & 0x1f) === Transaction.SIGHASH_NONE) {\n      txTmp.outs = [];\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, i) => {\n        if (i === inIndex) return;\n        input.sequence = 0;\n      });\n      // SIGHASH_SINGLE: ignore all outputs, except at the same index?\n    } else if ((hashType & 0x1f) === Transaction.SIGHASH_SINGLE) {\n      // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L60\n      if (inIndex >= this.outs.length) return ONE;\n      // truncate outputs after\n      txTmp.outs.length = inIndex + 1;\n      // \"blank\" outputs before\n      for (let i = 0; i < inIndex; i++) {\n        txTmp.outs[i] = BLANK_OUTPUT;\n      }\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, y) => {\n        if (y === inIndex) return;\n        input.sequence = 0;\n      });\n    }\n    // SIGHASH_ANYONECANPAY: ignore inputs entirely?\n    if (hashType & Transaction.SIGHASH_ANYONECANPAY) {\n      txTmp.ins = [txTmp.ins[inIndex]];\n      txTmp.ins[0].script = ourScript;\n      // SIGHASH_ALL: only ignore input scripts\n    } else {\n      // \"blank\" others input scripts\n      txTmp.ins.forEach(input => {\n        input.script = EMPTY_BUFFER;\n      });\n      txTmp.ins[inIndex].script = ourScript;\n    }\n    // serialize and hash\n    const buffer = Buffer.allocUnsafe(txTmp.byteLength(false) + 4);\n    buffer.writeInt32LE(hashType, buffer.length - 4);\n    txTmp.__toBuffer(buffer, 0, false);\n    return bcrypto.hash256(buffer);\n  }\n  hashForWitnessV1(inIndex, prevOutScripts, values, hashType, leafHash, annex) {\n    // https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#common-signature-message\n    typeforce(\n      types.tuple(\n        types.UInt32,\n        typeforce.arrayOf(types.Buffer),\n        typeforce.arrayOf(types.Satoshi),\n        types.UInt32,\n      ),\n      arguments,\n    );\n    if (\n      values.length !== this.ins.length ||\n      prevOutScripts.length !== this.ins.length\n    ) {\n      throw new Error('Must supply prevout script and value for all inputs');\n    }\n    const outputType =\n      hashType === Transaction.SIGHASH_DEFAULT\n        ? Transaction.SIGHASH_ALL\n        : hashType & Transaction.SIGHASH_OUTPUT_MASK;\n    const inputType = hashType & Transaction.SIGHASH_INPUT_MASK;\n    const isAnyoneCanPay = inputType === Transaction.SIGHASH_ANYONECANPAY;\n    const isNone = outputType === Transaction.SIGHASH_NONE;\n    const isSingle = outputType === Transaction.SIGHASH_SINGLE;\n    let hashPrevouts = EMPTY_BUFFER;\n    let hashAmounts = EMPTY_BUFFER;\n    let hashScriptPubKeys = EMPTY_BUFFER;\n    let hashSequences = EMPTY_BUFFER;\n    let hashOutputs = EMPTY_BUFFER;\n    if (!isAnyoneCanPay) {\n      let bufferWriter = bufferutils_1.BufferWriter.withCapacity(\n        36 * this.ins.length,\n      );\n      this.ins.forEach(txIn => {\n        bufferWriter.writeSlice(txIn.hash);\n        bufferWriter.writeUInt32(txIn.index);\n      });\n      hashPrevouts = bcrypto.sha256(bufferWriter.end());\n      bufferWriter = bufferutils_1.BufferWriter.withCapacity(\n        8 * this.ins.length,\n      );\n      values.forEach(value => bufferWriter.writeUInt64(value));\n      hashAmounts = bcrypto.sha256(bufferWriter.end());\n      bufferWriter = bufferutils_1.BufferWriter.withCapacity(\n        prevOutScripts.map(varSliceSize).reduce((a, b) => a + b),\n      );\n      prevOutScripts.forEach(prevOutScript =>\n        bufferWriter.writeVarSlice(prevOutScript),\n      );\n      hashScriptPubKeys = bcrypto.sha256(bufferWriter.end());\n      bufferWriter = bufferutils_1.BufferWriter.withCapacity(\n        4 * this.ins.length,\n      );\n      this.ins.forEach(txIn => bufferWriter.writeUInt32(txIn.sequence));\n      hashSequences = bcrypto.sha256(bufferWriter.end());\n    }\n    if (!(isNone || isSingle)) {\n      const txOutsSize = this.outs\n        .map(output => 8 + varSliceSize(output.script))\n        .reduce((a, b) => a + b);\n      const bufferWriter = bufferutils_1.BufferWriter.withCapacity(txOutsSize);\n      this.outs.forEach(out => {\n        bufferWriter.writeUInt64(out.value);\n        bufferWriter.writeVarSlice(out.script);\n      });\n      hashOutputs = bcrypto.sha256(bufferWriter.end());\n    } else if (isSingle && inIndex < this.outs.length) {\n      const output = this.outs[inIndex];\n      const bufferWriter = bufferutils_1.BufferWriter.withCapacity(\n        8 + varSliceSize(output.script),\n      );\n      bufferWriter.writeUInt64(output.value);\n      bufferWriter.writeVarSlice(output.script);\n      hashOutputs = bcrypto.sha256(bufferWriter.end());\n    }\n    const spendType = (leafHash ? 2 : 0) + (annex ? 1 : 0);\n    // Length calculation from:\n    // https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#cite_note-14\n    // With extension from:\n    // https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki#signature-validation\n    const sigMsgSize =\n      174 -\n      (isAnyoneCanPay ? 49 : 0) -\n      (isNone ? 32 : 0) +\n      (annex ? 32 : 0) +\n      (leafHash ? 37 : 0);\n    const sigMsgWriter = bufferutils_1.BufferWriter.withCapacity(sigMsgSize);\n    sigMsgWriter.writeUInt8(hashType);\n    // Transaction\n    sigMsgWriter.writeInt32(this.version);\n    sigMsgWriter.writeUInt32(this.locktime);\n    sigMsgWriter.writeSlice(hashPrevouts);\n    sigMsgWriter.writeSlice(hashAmounts);\n    sigMsgWriter.writeSlice(hashScriptPubKeys);\n    sigMsgWriter.writeSlice(hashSequences);\n    if (!(isNone || isSingle)) {\n      sigMsgWriter.writeSlice(hashOutputs);\n    }\n    // Input\n    sigMsgWriter.writeUInt8(spendType);\n    if (isAnyoneCanPay) {\n      const input = this.ins[inIndex];\n      sigMsgWriter.writeSlice(input.hash);\n      sigMsgWriter.writeUInt32(input.index);\n      sigMsgWriter.writeUInt64(values[inIndex]);\n      sigMsgWriter.writeVarSlice(prevOutScripts[inIndex]);\n      sigMsgWriter.writeUInt32(input.sequence);\n    } else {\n      sigMsgWriter.writeUInt32(inIndex);\n    }\n    if (annex) {\n      const bufferWriter = bufferutils_1.BufferWriter.withCapacity(\n        varSliceSize(annex),\n      );\n      bufferWriter.writeVarSlice(annex);\n      sigMsgWriter.writeSlice(bcrypto.sha256(bufferWriter.end()));\n    }\n    // Output\n    if (isSingle) {\n      sigMsgWriter.writeSlice(hashOutputs);\n    }\n    // BIP342 extension\n    if (leafHash) {\n      sigMsgWriter.writeSlice(leafHash);\n      sigMsgWriter.writeUInt8(0);\n      sigMsgWriter.writeUInt32(0xffffffff);\n    }\n    // Extra zero byte because:\n    // https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#cite_note-19\n    return bcrypto.taggedHash(\n      'TapSighash',\n      Buffer.concat([Buffer.from([0x00]), sigMsgWriter.end()]),\n    );\n  }\n  hashForWitnessV0(inIndex, prevOutScript, value, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, types.Satoshi, types.UInt32),\n      arguments,\n    );\n    let tbuffer = Buffer.from([]);\n    let bufferWriter;\n    let hashOutputs = ZERO;\n    let hashPrevouts = ZERO;\n    let hashSequence = ZERO;\n    if (!(hashType & Transaction.SIGHASH_ANYONECANPAY)) {\n      tbuffer = Buffer.allocUnsafe(36 * this.ins.length);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeSlice(txIn.hash);\n        bufferWriter.writeUInt32(txIn.index);\n      });\n      hashPrevouts = bcrypto.hash256(tbuffer);\n    }\n    if (\n      !(hashType & Transaction.SIGHASH_ANYONECANPAY) &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      tbuffer = Buffer.allocUnsafe(4 * this.ins.length);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.ins.forEach(txIn => {\n        bufferWriter.writeUInt32(txIn.sequence);\n      });\n      hashSequence = bcrypto.hash256(tbuffer);\n    }\n    if (\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      const txOutsSize = this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0);\n      tbuffer = Buffer.allocUnsafe(txOutsSize);\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      this.outs.forEach(out => {\n        bufferWriter.writeUInt64(out.value);\n        bufferWriter.writeVarSlice(out.script);\n      });\n      hashOutputs = bcrypto.hash256(tbuffer);\n    } else if (\n      (hashType & 0x1f) === Transaction.SIGHASH_SINGLE &&\n      inIndex < this.outs.length\n    ) {\n      const output = this.outs[inIndex];\n      tbuffer = Buffer.allocUnsafe(8 + varSliceSize(output.script));\n      bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n      bufferWriter.writeUInt64(output.value);\n      bufferWriter.writeVarSlice(output.script);\n      hashOutputs = bcrypto.hash256(tbuffer);\n    }\n    tbuffer = Buffer.allocUnsafe(156 + varSliceSize(prevOutScript));\n    bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);\n    const input = this.ins[inIndex];\n    bufferWriter.writeInt32(this.version);\n    bufferWriter.writeSlice(hashPrevouts);\n    bufferWriter.writeSlice(hashSequence);\n    bufferWriter.writeSlice(input.hash);\n    bufferWriter.writeUInt32(input.index);\n    bufferWriter.writeVarSlice(prevOutScript);\n    bufferWriter.writeUInt64(value);\n    bufferWriter.writeUInt32(input.sequence);\n    bufferWriter.writeSlice(hashOutputs);\n    bufferWriter.writeUInt32(this.locktime);\n    bufferWriter.writeUInt32(hashType);\n    return bcrypto.hash256(tbuffer);\n  }\n  getHash(forWitness) {\n    // wtxid for coinbase is always 32 bytes of 0x00\n    if (forWitness && this.isCoinbase()) return Buffer.alloc(32, 0);\n    return bcrypto.hash256(this.__toBuffer(undefined, undefined, forWitness));\n  }\n  getId() {\n    // transaction hash's are displayed in reverse order\n    return (0, bufferutils_1.reverseBuffer)(this.getHash(false)).toString(\n      'hex',\n    );\n  }\n  toBuffer(buffer, initialOffset) {\n    return this.__toBuffer(buffer, initialOffset, true);\n  }\n  toHex() {\n    return this.toBuffer(undefined, undefined).toString('hex');\n  }\n  setInputScript(index, scriptSig) {\n    typeforce(types.tuple(types.Number, types.Buffer), arguments);\n    this.ins[index].script = scriptSig;\n  }\n  setWitness(index, witness) {\n    typeforce(types.tuple(types.Number, [types.Buffer]), arguments);\n    this.ins[index].witness = witness;\n  }\n  __toBuffer(buffer, initialOffset, _ALLOW_WITNESS = false) {\n    if (!buffer) buffer = Buffer.allocUnsafe(this.byteLength(_ALLOW_WITNESS));\n    const bufferWriter = new bufferutils_1.BufferWriter(\n      buffer,\n      initialOffset || 0,\n    );\n    bufferWriter.writeInt32(this.version);\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    if (hasWitnesses) {\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);\n      bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);\n    }\n    bufferWriter.writeVarInt(this.ins.length);\n    this.ins.forEach(txIn => {\n      bufferWriter.writeSlice(txIn.hash);\n      bufferWriter.writeUInt32(txIn.index);\n      bufferWriter.writeVarSlice(txIn.script);\n      bufferWriter.writeUInt32(txIn.sequence);\n    });\n    bufferWriter.writeVarInt(this.outs.length);\n    this.outs.forEach(txOut => {\n      if (isOutput(txOut)) {\n        bufferWriter.writeUInt64(txOut.value);\n      } else {\n        bufferWriter.writeSlice(txOut.valueBuffer);\n      }\n      bufferWriter.writeVarSlice(txOut.script);\n    });\n    if (hasWitnesses) {\n      this.ins.forEach(input => {\n        bufferWriter.writeVector(input.witness);\n      });\n    }\n    bufferWriter.writeUInt32(this.locktime);\n    // avoid slicing unless necessary\n    if (initialOffset !== undefined)\n      return buffer.slice(initialOffset, bufferWriter.offset);\n    return buffer;\n  }\n}\nexports.Transaction = Transaction;\nTransaction.DEFAULT_SEQUENCE = 0xffffffff;\nTransaction.SIGHASH_DEFAULT = 0x00;\nTransaction.SIGHASH_ALL = 0x01;\nTransaction.SIGHASH_NONE = 0x02;\nTransaction.SIGHASH_SINGLE = 0x03;\nTransaction.SIGHASH_ANYONECANPAY = 0x80;\nTransaction.SIGHASH_OUTPUT_MASK = 0x03;\nTransaction.SIGHASH_INPUT_MASK = 0x80;\nTransaction.ADVANCED_TRANSACTION_MARKER = 0x00;\nTransaction.ADVANCED_TRANSACTION_FLAG = 0x01;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.Block = void 0;\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst merkle_1 = require('./merkle');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst { typeforce } = types;\nconst errorMerkleNoTxes = new TypeError(\n  'Cannot compute merkle root for zero transactions',\n);\nconst errorWitnessNotSegwit = new TypeError(\n  'Cannot compute witness commit for non-segwit block',\n);\nclass Block {\n  constructor() {\n    this.version = 1;\n    this.prevHash = undefined;\n    this.merkleRoot = undefined;\n    this.timestamp = 0;\n    this.witnessCommit = undefined;\n    this.bits = 0;\n    this.nonce = 0;\n    this.transactions = undefined;\n  }\n  static fromBuffer(buffer) {\n    if (buffer.length < 80) throw new Error('Buffer too small (< 80 bytes)');\n    const bufferReader = new bufferutils_1.BufferReader(buffer);\n    const block = new Block();\n    block.version = bufferReader.readInt32();\n    block.prevHash = bufferReader.readSlice(32);\n    block.merkleRoot = bufferReader.readSlice(32);\n    block.timestamp = bufferReader.readUInt32();\n    block.bits = bufferReader.readUInt32();\n    block.nonce = bufferReader.readUInt32();\n    if (buffer.length === 80) return block;\n    const readTransaction = () => {\n      const tx = transaction_1.Transaction.fromBuffer(\n        bufferReader.buffer.slice(bufferReader.offset),\n        true,\n      );\n      bufferReader.offset += tx.byteLength();\n      return tx;\n    };\n    const nTransactions = bufferReader.readVarInt();\n    block.transactions = [];\n    for (let i = 0; i < nTransactions; ++i) {\n      const tx = readTransaction();\n      block.transactions.push(tx);\n    }\n    const witnessCommit = block.getWitnessCommit();\n    // This Block contains a witness commit\n    if (witnessCommit) block.witnessCommit = witnessCommit;\n    return block;\n  }\n  static fromHex(hex) {\n    return Block.fromBuffer(Buffer.from(hex, 'hex'));\n  }\n  static calculateTarget(bits) {\n    const exponent = ((bits & 0xff000000) >> 24) - 3;\n    const mantissa = bits & 0x007fffff;\n    const target = Buffer.alloc(32, 0);\n    target.writeUIntBE(mantissa, 29 - exponent, 3);\n    return target;\n  }\n  static calculateMerkleRoot(transactions, forWitness) {\n    typeforce([{ getHash: types.Function }], transactions);\n    if (transactions.length === 0) throw errorMerkleNoTxes;\n    if (forWitness && !txesHaveWitnessCommit(transactions))\n      throw errorWitnessNotSegwit;\n    const hashes = transactions.map(transaction =>\n      transaction.getHash(forWitness),\n    );\n    const rootHash = (0, merkle_1.fastMerkleRoot)(hashes, bcrypto.hash256);\n    return forWitness\n      ? bcrypto.hash256(\n          Buffer.concat([rootHash, transactions[0].ins[0].witness[0]]),\n        )\n      : rootHash;\n  }\n  getWitnessCommit() {\n    if (!txesHaveWitnessCommit(this.transactions)) return null;\n    // The merkle root for the witness data is in an OP_RETURN output.\n    // There is no rule for the index of the output, so use filter to find it.\n    // The root is prepended with 0xaa21a9ed so check for 0x6a24aa21a9ed\n    // If multiple commits are found, the output with highest index is assumed.\n    const witnessCommits = this.transactions[0].outs\n      .filter(out =>\n        out.script.slice(0, 6).equals(Buffer.from('6a24aa21a9ed', 'hex')),\n      )\n      .map(out => out.script.slice(6, 38));\n    if (witnessCommits.length === 0) return null;\n    // Use the commit with the highest output (should only be one though)\n    const result = witnessCommits[witnessCommits.length - 1];\n    if (!(result instanceof Buffer && result.length === 32)) return null;\n    return result;\n  }\n  hasWitnessCommit() {\n    if (\n      this.witnessCommit instanceof Buffer &&\n      this.witnessCommit.length === 32\n    )\n      return true;\n    if (this.getWitnessCommit() !== null) return true;\n    return false;\n  }\n  hasWitness() {\n    return anyTxHasWitness(this.transactions);\n  }\n  weight() {\n    const base = this.byteLength(false, false);\n    const total = this.byteLength(false, true);\n    return base * 3 + total;\n  }\n  byteLength(headersOnly, allowWitness = true) {\n    if (headersOnly || !this.transactions) return 80;\n    return (\n      80 +\n      bufferutils_1.varuint.encodingLength(this.transactions.length) +\n      this.transactions.reduce((a, x) => a + x.byteLength(allowWitness), 0)\n    );\n  }\n  getHash() {\n    return bcrypto.hash256(this.toBuffer(true));\n  }\n  getId() {\n    return (0, bufferutils_1.reverseBuffer)(this.getHash()).toString('hex');\n  }\n  getUTCDate() {\n    const date = new Date(0); // epoch\n    date.setUTCSeconds(this.timestamp);\n    return date;\n  }\n  // TODO: buffer, offset compatibility\n  toBuffer(headersOnly) {\n    const buffer = Buffer.allocUnsafe(this.byteLength(headersOnly));\n    const bufferWriter = new bufferutils_1.BufferWriter(buffer);\n    bufferWriter.writeInt32(this.version);\n    bufferWriter.writeSlice(this.prevHash);\n    bufferWriter.writeSlice(this.merkleRoot);\n    bufferWriter.writeUInt32(this.timestamp);\n    bufferWriter.writeUInt32(this.bits);\n    bufferWriter.writeUInt32(this.nonce);\n    if (headersOnly || !this.transactions) return buffer;\n    bufferutils_1.varuint.encode(\n      this.transactions.length,\n      buffer,\n      bufferWriter.offset,\n    );\n    bufferWriter.offset += bufferutils_1.varuint.encode.bytes;\n    this.transactions.forEach(tx => {\n      const txSize = tx.byteLength(); // TODO: extract from toBuffer?\n      tx.toBuffer(buffer, bufferWriter.offset);\n      bufferWriter.offset += txSize;\n    });\n    return buffer;\n  }\n  toHex(headersOnly) {\n    return this.toBuffer(headersOnly).toString('hex');\n  }\n  checkTxRoots() {\n    // If the Block has segwit transactions but no witness commit,\n    // there's no way it can be valid, so fail the check.\n    const hasWitnessCommit = this.hasWitnessCommit();\n    if (!hasWitnessCommit && this.hasWitness()) return false;\n    return (\n      this.__checkMerkleRoot() &&\n      (hasWitnessCommit ? this.__checkWitnessCommit() : true)\n    );\n  }\n  checkProofOfWork() {\n    const hash = (0, bufferutils_1.reverseBuffer)(this.getHash());\n    const target = Block.calculateTarget(this.bits);\n    return hash.compare(target) <= 0;\n  }\n  __checkMerkleRoot() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    const actualMerkleRoot = Block.calculateMerkleRoot(this.transactions);\n    return this.merkleRoot.compare(actualMerkleRoot) === 0;\n  }\n  __checkWitnessCommit() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    if (!this.hasWitnessCommit()) throw errorWitnessNotSegwit;\n    const actualWitnessCommit = Block.calculateMerkleRoot(\n      this.transactions,\n      true,\n    );\n    return this.witnessCommit.compare(actualWitnessCommit) === 0;\n  }\n}\nexports.Block = Block;\nfunction txesHaveWitnessCommit(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions[0] &&\n    transactions[0].ins &&\n    transactions[0].ins instanceof Array &&\n    transactions[0].ins[0] &&\n    transactions[0].ins[0].witness &&\n    transactions[0].ins[0].witness instanceof Array &&\n    transactions[0].ins[0].witness.length > 0\n  );\n}\nfunction anyTxHasWitness(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions.some(\n      tx =>\n        typeof tx === 'object' &&\n        tx.ins instanceof Array &&\n        tx.ins.some(\n          input =>\n            typeof input === 'object' &&\n            input.witness instanceof Array &&\n            input.witness.length > 0,\n        ),\n    )\n  );\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar GlobalTypes;\n(function(GlobalTypes) {\n  GlobalTypes[(GlobalTypes['UNSIGNED_TX'] = 0)] = 'UNSIGNED_TX';\n  GlobalTypes[(GlobalTypes['GLOBAL_XPUB'] = 1)] = 'GLOBAL_XPUB';\n})((GlobalTypes = exports.GlobalTypes || (exports.GlobalTypes = {})));\nexports.GLOBAL_TYPE_NAMES = ['unsignedTx', 'globalXpub'];\nvar InputTypes;\n(function(InputTypes) {\n  InputTypes[(InputTypes['NON_WITNESS_UTXO'] = 0)] = 'NON_WITNESS_UTXO';\n  InputTypes[(InputTypes['WITNESS_UTXO'] = 1)] = 'WITNESS_UTXO';\n  InputTypes[(InputTypes['PARTIAL_SIG'] = 2)] = 'PARTIAL_SIG';\n  InputTypes[(InputTypes['SIGHASH_TYPE'] = 3)] = 'SIGHASH_TYPE';\n  InputTypes[(InputTypes['REDEEM_SCRIPT'] = 4)] = 'REDEEM_SCRIPT';\n  InputTypes[(InputTypes['WITNESS_SCRIPT'] = 5)] = 'WITNESS_SCRIPT';\n  InputTypes[(InputTypes['BIP32_DERIVATION'] = 6)] = 'BIP32_DERIVATION';\n  InputTypes[(InputTypes['FINAL_SCRIPTSIG'] = 7)] = 'FINAL_SCRIPTSIG';\n  InputTypes[(InputTypes['FINAL_SCRIPTWITNESS'] = 8)] = 'FINAL_SCRIPTWITNESS';\n  InputTypes[(InputTypes['POR_COMMITMENT'] = 9)] = 'POR_COMMITMENT';\n  InputTypes[(InputTypes['TAP_KEY_SIG'] = 19)] = 'TAP_KEY_SIG';\n  InputTypes[(InputTypes['TAP_SCRIPT_SIG'] = 20)] = 'TAP_SCRIPT_SIG';\n  InputTypes[(InputTypes['TAP_LEAF_SCRIPT'] = 21)] = 'TAP_LEAF_SCRIPT';\n  InputTypes[(InputTypes['TAP_BIP32_DERIVATION'] = 22)] =\n    'TAP_BIP32_DERIVATION';\n  InputTypes[(InputTypes['TAP_INTERNAL_KEY'] = 23)] = 'TAP_INTERNAL_KEY';\n  InputTypes[(InputTypes['TAP_MERKLE_ROOT'] = 24)] = 'TAP_MERKLE_ROOT';\n})((InputTypes = exports.InputTypes || (exports.InputTypes = {})));\nexports.INPUT_TYPE_NAMES = [\n  'nonWitnessUtxo',\n  'witnessUtxo',\n  'partialSig',\n  'sighashType',\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n  'finalScriptSig',\n  'finalScriptWitness',\n  'porCommitment',\n  'tapKeySig',\n  'tapScriptSig',\n  'tapLeafScript',\n  'tapBip32Derivation',\n  'tapInternalKey',\n  'tapMerkleRoot',\n];\nvar OutputTypes;\n(function(OutputTypes) {\n  OutputTypes[(OutputTypes['REDEEM_SCRIPT'] = 0)] = 'REDEEM_SCRIPT';\n  OutputTypes[(OutputTypes['WITNESS_SCRIPT'] = 1)] = 'WITNESS_SCRIPT';\n  OutputTypes[(OutputTypes['BIP32_DERIVATION'] = 2)] = 'BIP32_DERIVATION';\n  OutputTypes[(OutputTypes['TAP_INTERNAL_KEY'] = 5)] = 'TAP_INTERNAL_KEY';\n  OutputTypes[(OutputTypes['TAP_TREE'] = 6)] = 'TAP_TREE';\n  OutputTypes[(OutputTypes['TAP_BIP32_DERIVATION'] = 7)] =\n    'TAP_BIP32_DERIVATION';\n})((OutputTypes = exports.OutputTypes || (exports.OutputTypes = {})));\nexports.OUTPUT_TYPE_NAMES = [\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n  'tapInternalKey',\n  'tapTree',\n  'tapBip32Derivation',\n];\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst range = n => [...Array(n).keys()];\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.GlobalTypes.GLOBAL_XPUB) {\n    throw new Error(\n      'Decode Error: could not decode globalXpub with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (keyVal.key.length !== 79 || ![2, 3].includes(keyVal.key[46])) {\n    throw new Error(\n      'Decode Error: globalXpub has invalid extended pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if ((keyVal.value.length / 4) % 1 !== 0) {\n    throw new Error(\n      'Decode Error: Global GLOBAL_XPUB value length should be multiple of 4',\n    );\n  }\n  const extendedPubkey = keyVal.key.slice(1);\n  const data = {\n    masterFingerprint: keyVal.value.slice(0, 4),\n    extendedPubkey,\n    path: 'm',\n  };\n  for (const i of range(keyVal.value.length / 4 - 1)) {\n    const val = keyVal.value.readUInt32LE(i * 4 + 4);\n    const isHard = !!(val & 0x80000000);\n    const idx = val & 0x7fffffff;\n    data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n  }\n  return data;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const head = Buffer.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]);\n  const key = Buffer.concat([head, data.extendedPubkey]);\n  const splitPath = data.path.split('/');\n  const value = Buffer.allocUnsafe(splitPath.length * 4);\n  data.masterFingerprint.copy(value, 0);\n  let offset = 4;\n  splitPath.slice(1).forEach(level => {\n    const isHard = level.slice(-1) === \"'\";\n    let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n    if (isHard) num += 0x80000000;\n    value.writeUInt32LE(num, offset);\n    offset += 4;\n  });\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected =\n  '{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }';\nfunction check(data) {\n  const epk = data.extendedPubkey;\n  const mfp = data.masterFingerprint;\n  const p = data.path;\n  return (\n    Buffer.isBuffer(epk) &&\n    epk.length === 78 &&\n    [2, 3].indexOf(epk[45]) > -1 &&\n    Buffer.isBuffer(mfp) &&\n    mfp.length === 4 &&\n    typeof p === 'string' &&\n    !!p.match(/^m(\\/\\d+'?)*$/)\n  );\n}\nexports.check = check;\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.extendedPubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return (\n    array.filter(v => v.extendedPubkey.equals(item.extendedPubkey)).length === 0\n  );\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.GlobalTypes.UNSIGNED_TX]),\n    value: data.toBuffer(),\n  };\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTSIG) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTSIG]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.finalScriptSig === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTWITNESS) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptWitness with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTWITNESS]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData && !!newData && currentData.finalScriptWitness === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.NON_WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode nonWitnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.NON_WITNESS_UTXO]),\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.nonWitnessUtxo === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.PARTIAL_SIG) {\n    throw new Error(\n      'Decode Error: could not decode partialSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (\n    !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n    ![2, 3, 4].includes(keyVal.key[1])\n  ) {\n    throw new Error(\n      'Decode Error: partialSig has invalid pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const pubkey = keyVal.key.slice(1);\n  return {\n    pubkey,\n    signature: keyVal.value,\n  };\n}\nexports.decode = decode;\nfunction encode(pSig) {\n  const head = Buffer.from([typeFields_1.InputTypes.PARTIAL_SIG]);\n  return {\n    key: Buffer.concat([head, pSig.pubkey]),\n    value: pSig.signature,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ pubkey: Buffer; signature: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.pubkey) &&\n    Buffer.isBuffer(data.signature) &&\n    [33, 65].includes(data.pubkey.length) &&\n    [2, 3, 4].includes(data.pubkey[0]) &&\n    isDerSigWithSighash(data.signature)\n  );\n}\nexports.check = check;\nfunction isDerSigWithSighash(buf) {\n  if (!Buffer.isBuffer(buf) || buf.length < 9) return false;\n  if (buf[0] !== 0x30) return false;\n  if (buf.length !== buf[1] + 3) return false;\n  if (buf[2] !== 0x02) return false;\n  const rLen = buf[3];\n  if (rLen > 33 || rLen < 1) return false;\n  if (buf[3 + rLen + 1] !== 0x02) return false;\n  const sLen = buf[3 + rLen + 2];\n  if (sLen > 33 || sLen < 1) return false;\n  if (buf.length !== 3 + rLen + 2 + sLen + 2) return false;\n  return true;\n}\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.pubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.POR_COMMITMENT) {\n    throw new Error(\n      'Decode Error: could not decode porCommitment with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.toString('utf8');\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.POR_COMMITMENT]);\n  return {\n    key,\n    value: Buffer.from(data, 'utf8'),\n  };\n}\nexports.encode = encode;\nexports.expected = 'string';\nfunction check(data) {\n  return typeof data === 'string';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.porCommitment === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.SIGHASH_TYPE) {\n    throw new Error(\n      'Decode Error: could not decode sighashType with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.readUInt32LE(0);\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.SIGHASH_TYPE]);\n  const value = Buffer.allocUnsafe(4);\n  value.writeUInt32LE(data, 0);\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected = 'number';\nfunction check(data) {\n  return typeof data === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.sighashType === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (\n    keyVal.key[0] !== typeFields_1.InputTypes.TAP_KEY_SIG ||\n    keyVal.key.length !== 1\n  ) {\n    throw new Error(\n      'Decode Error: could not decode tapKeySig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (!check(keyVal.value)) {\n    throw new Error(\n      'Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature',\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(value) {\n  const key = Buffer.from([typeFields_1.InputTypes.TAP_KEY_SIG]);\n  return { key, value };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data) && (data.length === 64 || data.length === 65);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.tapKeySig === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.TAP_LEAF_SCRIPT) {\n    throw new Error(\n      'Decode Error: could not decode tapLeafScript with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if ((keyVal.key.length - 2) % 32 !== 0) {\n    throw new Error(\n      'Decode Error: tapLeafScript has invalid control block in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const leafVersion = keyVal.value[keyVal.value.length - 1];\n  if ((keyVal.key[1] & 0xfe) !== leafVersion) {\n    throw new Error(\n      'Decode Error: tapLeafScript bad leaf version in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const script = keyVal.value.slice(0, -1);\n  const controlBlock = keyVal.key.slice(1);\n  return { controlBlock, script, leafVersion };\n}\nexports.decode = decode;\nfunction encode(tScript) {\n  const head = Buffer.from([typeFields_1.InputTypes.TAP_LEAF_SCRIPT]);\n  const verBuf = Buffer.from([tScript.leafVersion]);\n  return {\n    key: Buffer.concat([head, tScript.controlBlock]),\n    value: Buffer.concat([tScript.script, verBuf]),\n  };\n}\nexports.encode = encode;\nexports.expected =\n  '{ controlBlock: Buffer; leafVersion: number, script: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.controlBlock) &&\n    (data.controlBlock.length - 1) % 32 === 0 &&\n    (data.controlBlock[0] & 0xfe) === data.leafVersion &&\n    Buffer.isBuffer(data.script)\n  );\n}\nexports.check = check;\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.controlBlock.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return (\n    array.filter(v => v.controlBlock.equals(item.controlBlock)).length === 0\n  );\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (\n    keyVal.key[0] !== typeFields_1.InputTypes.TAP_MERKLE_ROOT ||\n    keyVal.key.length !== 1\n  ) {\n    throw new Error(\n      'Decode Error: could not decode tapMerkleRoot with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (!check(keyVal.value)) {\n    throw new Error('Decode Error: tapMerkleRoot not a 32-byte hash');\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(value) {\n  const key = Buffer.from([typeFields_1.InputTypes.TAP_MERKLE_ROOT]);\n  return { key, value };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data) && data.length === 32;\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.tapMerkleRoot === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.TAP_SCRIPT_SIG) {\n    throw new Error(\n      'Decode Error: could not decode tapScriptSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (keyVal.key.length !== 65) {\n    throw new Error(\n      'Decode Error: tapScriptSig has invalid key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (keyVal.value.length !== 64 && keyVal.value.length !== 65) {\n    throw new Error(\n      'Decode Error: tapScriptSig has invalid signature in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const pubkey = keyVal.key.slice(1, 33);\n  const leafHash = keyVal.key.slice(33);\n  return {\n    pubkey,\n    leafHash,\n    signature: keyVal.value,\n  };\n}\nexports.decode = decode;\nfunction encode(tSig) {\n  const head = Buffer.from([typeFields_1.InputTypes.TAP_SCRIPT_SIG]);\n  return {\n    key: Buffer.concat([head, tSig.pubkey, tSig.leafHash]),\n    value: tSig.signature,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.pubkey) &&\n    Buffer.isBuffer(data.leafHash) &&\n    Buffer.isBuffer(data.signature) &&\n    data.pubkey.length === 32 &&\n    data.leafHash.length === 32 &&\n    (data.signature.length === 64 || data.signature.length === 65)\n  );\n}\nexports.check = check;\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString =\n    item.pubkey.toString('hex') + item.leafHash.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return (\n    array.filter(\n      v => v.pubkey.equals(item.pubkey) && v.leafHash.equals(item.leafHash),\n    ).length === 0\n  );\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// Number.MAX_SAFE_INTEGER\nconst MAX_SAFE_INTEGER = 9007199254740991;\nfunction checkUInt53(n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0)\n    throw new RangeError('value out of range');\n}\nfunction encode(_number, buffer, offset) {\n  checkUInt53(_number);\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(_number));\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  // 8 bit\n  if (_number < 0xfd) {\n    buffer.writeUInt8(_number, offset);\n    Object.assign(encode, { bytes: 1 });\n    // 16 bit\n  } else if (_number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset);\n    buffer.writeUInt16LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 3 });\n    // 32 bit\n  } else if (_number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset);\n    buffer.writeUInt32LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 5 });\n    // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset);\n    buffer.writeUInt32LE(_number >>> 0, offset + 1);\n    buffer.writeUInt32LE((_number / 0x100000000) | 0, offset + 5);\n    Object.assign(encode, { bytes: 9 });\n  }\n  return buffer;\n}\nexports.encode = encode;\nfunction decode(buffer, offset) {\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  const first = buffer.readUInt8(offset);\n  // 8 bit\n  if (first < 0xfd) {\n    Object.assign(decode, { bytes: 1 });\n    return first;\n    // 16 bit\n  } else if (first === 0xfd) {\n    Object.assign(decode, { bytes: 3 });\n    return buffer.readUInt16LE(offset + 1);\n    // 32 bit\n  } else if (first === 0xfe) {\n    Object.assign(decode, { bytes: 5 });\n    return buffer.readUInt32LE(offset + 1);\n    // 64 bit\n  } else {\n    Object.assign(decode, { bytes: 9 });\n    const lo = buffer.readUInt32LE(offset + 1);\n    const hi = buffer.readUInt32LE(offset + 5);\n    const _number = hi * 0x0100000000 + lo;\n    checkUInt53(_number);\n    return _number;\n  }\n}\nexports.decode = decode;\nfunction encodingLength(_number) {\n  checkUInt53(_number);\n  return _number < 0xfd\n    ? 1\n    : _number <= 0xffff\n    ? 3\n    : _number <= 0xffffffff\n    ? 5\n    : 9;\n}\nexports.encodingLength = encodingLength;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst varuint = require('./varint');\nexports.range = n => [...Array(n).keys()];\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction keyValsToBuffer(keyVals) {\n  const buffers = keyVals.map(keyValToBuffer);\n  buffers.push(Buffer.from([0]));\n  return Buffer.concat(buffers);\n}\nexports.keyValsToBuffer = keyValsToBuffer;\nfunction keyValToBuffer(keyVal) {\n  const keyLen = keyVal.key.length;\n  const valLen = keyVal.value.length;\n  const keyVarIntLen = varuint.encodingLength(keyLen);\n  const valVarIntLen = varuint.encodingLength(valLen);\n  const buffer = Buffer.allocUnsafe(\n    keyVarIntLen + keyLen + valVarIntLen + valLen,\n  );\n  varuint.encode(keyLen, buffer, 0);\n  keyVal.key.copy(buffer, keyVarIntLen);\n  varuint.encode(valLen, buffer, keyVarIntLen + keyLen);\n  keyVal.value.copy(buffer, keyVarIntLen + keyLen + valVarIntLen);\n  return buffer;\n}\nexports.keyValToBuffer = keyValToBuffer;\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst tools_1 = require('../tools');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode witnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const value = tools_1.readUInt64LE(keyVal.value, 0);\n  let _offset = 8;\n  const scriptLen = varuint.decode(keyVal.value, _offset);\n  _offset += varuint.encodingLength(scriptLen);\n  const script = keyVal.value.slice(_offset);\n  if (script.length !== scriptLen) {\n    throw new Error('Decode Error: WITNESS_UTXO script is not proper length');\n  }\n  return {\n    script,\n    value,\n  };\n}\nexports.decode = decode;\nfunction encode(data) {\n  const { script, value } = data;\n  const varintLen = varuint.encodingLength(script.length);\n  const result = Buffer.allocUnsafe(8 + varintLen + script.length);\n  tools_1.writeUInt64LE(result, value, 0);\n  varuint.encode(script.length, result, 8);\n  script.copy(result, 8 + varintLen);\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),\n    value: result,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ script: Buffer; value: number; }';\nfunction check(data) {\n  return Buffer.isBuffer(data.script) && typeof data.value === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.witnessUtxo === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (\n    keyVal.key[0] !== typeFields_1.OutputTypes.TAP_TREE ||\n    keyVal.key.length !== 1\n  ) {\n    throw new Error(\n      'Decode Error: could not decode tapTree with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  let _offset = 0;\n  const data = [];\n  while (_offset < keyVal.value.length) {\n    const depth = keyVal.value[_offset++];\n    const leafVersion = keyVal.value[_offset++];\n    const scriptLen = varuint.decode(keyVal.value, _offset);\n    _offset += varuint.encodingLength(scriptLen);\n    data.push({\n      depth,\n      leafVersion,\n      script: keyVal.value.slice(_offset, _offset + scriptLen),\n    });\n    _offset += scriptLen;\n  }\n  return { leaves: data };\n}\nexports.decode = decode;\nfunction encode(tree) {\n  const key = Buffer.from([typeFields_1.OutputTypes.TAP_TREE]);\n  const bufs = [].concat(\n    ...tree.leaves.map(tapLeaf => [\n      Buffer.of(tapLeaf.depth, tapLeaf.leafVersion),\n      varuint.encode(tapLeaf.script.length),\n      tapLeaf.script,\n    ]),\n  );\n  return {\n    key,\n    value: Buffer.concat(bufs),\n  };\n}\nexports.encode = encode;\nexports.expected =\n  '{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }';\nfunction check(data) {\n  return (\n    Array.isArray(data.leaves) &&\n    data.leaves.every(\n      tapLeaf =>\n        tapLeaf.depth >= 0 &&\n        tapLeaf.depth <= 128 &&\n        (tapLeaf.leafVersion & 0xfe) === tapLeaf.leafVersion &&\n        Buffer.isBuffer(tapLeaf.script),\n    )\n  );\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.tapTree === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst range = n => [...Array(n).keys()];\nconst isValidDERKey = pubkey =>\n  (pubkey.length === 33 && [2, 3].includes(pubkey[0])) ||\n  (pubkey.length === 65 && 4 === pubkey[0]);\nfunction makeConverter(TYPE_BYTE, isValidPubkey = isValidDERKey) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode bip32Derivation with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    const pubkey = keyVal.key.slice(1);\n    if (!isValidPubkey(pubkey)) {\n      throw new Error(\n        'Decode Error: bip32Derivation has invalid pubkey in key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if ((keyVal.value.length / 4) % 1 !== 0) {\n      throw new Error(\n        'Decode Error: Input BIP32_DERIVATION value length should be multiple of 4',\n      );\n    }\n    const data = {\n      masterFingerprint: keyVal.value.slice(0, 4),\n      pubkey,\n      path: 'm',\n    };\n    for (const i of range(keyVal.value.length / 4 - 1)) {\n      const val = keyVal.value.readUInt32LE(i * 4 + 4);\n      const isHard = !!(val & 0x80000000);\n      const idx = val & 0x7fffffff;\n      data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n    }\n    return data;\n  }\n  function encode(data) {\n    const head = Buffer.from([TYPE_BYTE]);\n    const key = Buffer.concat([head, data.pubkey]);\n    const splitPath = data.path.split('/');\n    const value = Buffer.allocUnsafe(splitPath.length * 4);\n    data.masterFingerprint.copy(value, 0);\n    let offset = 4;\n    splitPath.slice(1).forEach(level => {\n      const isHard = level.slice(-1) === \"'\";\n      let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n      if (isHard) num += 0x80000000;\n      value.writeUInt32LE(num, offset);\n      offset += 4;\n    });\n    return {\n      key,\n      value,\n    };\n  }\n  const expected =\n    '{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }';\n  function check(data) {\n    return (\n      Buffer.isBuffer(data.pubkey) &&\n      Buffer.isBuffer(data.masterFingerprint) &&\n      typeof data.path === 'string' &&\n      isValidPubkey(data.pubkey) &&\n      data.masterFingerprint.length === 4\n    );\n  }\n  function canAddToArray(array, item, dupeSet) {\n    const dupeString = item.pubkey.toString('hex');\n    if (dupeSet.has(dupeString)) return false;\n    dupeSet.add(dupeString);\n    return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAddToArray,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeChecker(pubkeyTypes) {\n  return checkPubkey;\n  function checkPubkey(keyVal) {\n    let pubkey;\n    if (pubkeyTypes.includes(keyVal.key[0])) {\n      pubkey = keyVal.key.slice(1);\n      if (\n        !(pubkey.length === 33 || pubkey.length === 65) ||\n        ![2, 3, 4].includes(pubkey[0])\n      ) {\n        throw new Error(\n          'Format Error: invalid pubkey in key 0x' + keyVal.key.toString('hex'),\n        );\n      }\n    }\n    return pubkey;\n  }\n}\nexports.makeChecker = makeChecker;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode redeemScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return !!currentData && !!newData && currentData.redeemScript === undefined;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst varuint = require('../varint');\nconst bip32Derivation = require('./bip32Derivation');\nconst isValidBIP340Key = pubkey => pubkey.length === 32;\nfunction makeConverter(TYPE_BYTE) {\n  const parent = bip32Derivation.makeConverter(TYPE_BYTE, isValidBIP340Key);\n  function decode(keyVal) {\n    const nHashes = varuint.decode(keyVal.value);\n    const nHashesLen = varuint.encodingLength(nHashes);\n    const base = parent.decode({\n      key: keyVal.key,\n      value: keyVal.value.slice(nHashesLen + nHashes * 32),\n    });\n    const leafHashes = new Array(nHashes);\n    for (let i = 0, _offset = nHashesLen; i < nHashes; i++, _offset += 32) {\n      leafHashes[i] = keyVal.value.slice(_offset, _offset + 32);\n    }\n    return Object.assign({}, base, { leafHashes });\n  }\n  function encode(data) {\n    const base = parent.encode(data);\n    const nHashesLen = varuint.encodingLength(data.leafHashes.length);\n    const nHashesBuf = Buffer.allocUnsafe(nHashesLen);\n    varuint.encode(data.leafHashes.length, nHashesBuf);\n    const value = Buffer.concat([nHashesBuf, ...data.leafHashes, base.value]);\n    return Object.assign({}, base, { value });\n  }\n  const expected =\n    '{ ' +\n    'masterFingerprint: Buffer; ' +\n    'pubkey: Buffer; ' +\n    'path: string; ' +\n    'leafHashes: Buffer[]; ' +\n    '}';\n  function check(data) {\n    return (\n      Array.isArray(data.leafHashes) &&\n      data.leafHashes.every(\n        leafHash => Buffer.isBuffer(leafHash) && leafHash.length === 32,\n      ) &&\n      parent.check(data)\n    );\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAddToArray: parent.canAddToArray,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE || keyVal.key.length !== 1) {\n      throw new Error(\n        'Decode Error: could not decode tapInternalKey with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if (keyVal.value.length !== 32) {\n      throw new Error(\n        'Decode Error: tapInternalKey not a 32-byte x-only pubkey',\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(value) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return { key, value };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data) && data.length === 32;\n  }\n  function canAdd(currentData, newData) {\n    return (\n      !!currentData && !!newData && currentData.tapInternalKey === undefined\n    );\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode witnessScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return (\n      !!currentData && !!newData && currentData.witnessScript === undefined\n    );\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../typeFields');\nconst globalXpub = require('./global/globalXpub');\nconst unsignedTx = require('./global/unsignedTx');\nconst finalScriptSig = require('./input/finalScriptSig');\nconst finalScriptWitness = require('./input/finalScriptWitness');\nconst nonWitnessUtxo = require('./input/nonWitnessUtxo');\nconst partialSig = require('./input/partialSig');\nconst porCommitment = require('./input/porCommitment');\nconst sighashType = require('./input/sighashType');\nconst tapKeySig = require('./input/tapKeySig');\nconst tapLeafScript = require('./input/tapLeafScript');\nconst tapMerkleRoot = require('./input/tapMerkleRoot');\nconst tapScriptSig = require('./input/tapScriptSig');\nconst witnessUtxo = require('./input/witnessUtxo');\nconst tapTree = require('./output/tapTree');\nconst bip32Derivation = require('./shared/bip32Derivation');\nconst checkPubkey = require('./shared/checkPubkey');\nconst redeemScript = require('./shared/redeemScript');\nconst tapBip32Derivation = require('./shared/tapBip32Derivation');\nconst tapInternalKey = require('./shared/tapInternalKey');\nconst witnessScript = require('./shared/witnessScript');\nconst globals = {\n  unsignedTx,\n  globalXpub,\n  // pass an Array of key bytes that require pubkey beside the key\n  checkPubkey: checkPubkey.makeChecker([]),\n};\nexports.globals = globals;\nconst inputs = {\n  nonWitnessUtxo,\n  partialSig,\n  sighashType,\n  finalScriptSig,\n  finalScriptWitness,\n  porCommitment,\n  witnessUtxo,\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.InputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.InputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.InputTypes.PARTIAL_SIG,\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ]),\n  tapKeySig,\n  tapScriptSig,\n  tapLeafScript,\n  tapBip32Derivation: tapBip32Derivation.makeConverter(\n    typeFields_1.InputTypes.TAP_BIP32_DERIVATION,\n  ),\n  tapInternalKey: tapInternalKey.makeConverter(\n    typeFields_1.InputTypes.TAP_INTERNAL_KEY,\n  ),\n  tapMerkleRoot,\n};\nexports.inputs = inputs;\nconst outputs = {\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.OutputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.OutputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ]),\n  tapBip32Derivation: tapBip32Derivation.makeConverter(\n    typeFields_1.OutputTypes.TAP_BIP32_DERIVATION,\n  ),\n  tapTree,\n  tapInternalKey: tapInternalKey.makeConverter(\n    typeFields_1.OutputTypes.TAP_INTERNAL_KEY,\n  ),\n};\nexports.outputs = outputs;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nconst varuint = require('../converter/varint');\nconst typeFields_1 = require('../typeFields');\nfunction psbtFromBuffer(buffer, txGetter) {\n  let offset = 0;\n  function varSlice() {\n    const keyLen = varuint.decode(buffer, offset);\n    offset += varuint.encodingLength(keyLen);\n    const key = buffer.slice(offset, offset + keyLen);\n    offset += keyLen;\n    return key;\n  }\n  function readUInt32BE() {\n    const num = buffer.readUInt32BE(offset);\n    offset += 4;\n    return num;\n  }\n  function readUInt8() {\n    const num = buffer.readUInt8(offset);\n    offset += 1;\n    return num;\n  }\n  function getKeyValue() {\n    const key = varSlice();\n    const value = varSlice();\n    return {\n      key,\n      value,\n    };\n  }\n  function checkEndOfKeyValPairs() {\n    if (offset >= buffer.length) {\n      throw new Error('Format Error: Unexpected End of PSBT');\n    }\n    const isEnd = buffer.readUInt8(offset) === 0;\n    if (isEnd) {\n      offset++;\n    }\n    return isEnd;\n  }\n  if (readUInt32BE() !== 0x70736274) {\n    throw new Error('Format Error: Invalid Magic Number');\n  }\n  if (readUInt8() !== 0xff) {\n    throw new Error(\n      'Format Error: Magic Number must be followed by 0xff separator',\n    );\n  }\n  const globalMapKeyVals = [];\n  const globalKeyIndex = {};\n  while (!checkEndOfKeyValPairs()) {\n    const keyVal = getKeyValue();\n    const hexKey = keyVal.key.toString('hex');\n    if (globalKeyIndex[hexKey]) {\n      throw new Error(\n        'Format Error: Keys must be unique for global keymap: key ' + hexKey,\n      );\n    }\n    globalKeyIndex[hexKey] = 1;\n    globalMapKeyVals.push(keyVal);\n  }\n  const unsignedTxMaps = globalMapKeyVals.filter(\n    keyVal => keyVal.key[0] === typeFields_1.GlobalTypes.UNSIGNED_TX,\n  );\n  if (unsignedTxMaps.length !== 1) {\n    throw new Error('Format Error: Only one UNSIGNED_TX allowed');\n  }\n  const unsignedTx = txGetter(unsignedTxMaps[0].value);\n  // Get input and output counts to loop the respective fields\n  const { inputCount, outputCount } = unsignedTx.getInputOutputCounts();\n  const inputKeyVals = [];\n  const outputKeyVals = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const inputKeyIndex = {};\n    const input = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (inputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each input: ' +\n            'input index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      inputKeyIndex[hexKey] = 1;\n      input.push(keyVal);\n    }\n    inputKeyVals.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const outputKeyIndex = {};\n    const output = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (outputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each output: ' +\n            'output index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      outputKeyIndex[hexKey] = 1;\n      output.push(keyVal);\n    }\n    outputKeyVals.push(output);\n  }\n  return psbtFromKeyVals(unsignedTx, {\n    globalMapKeyVals,\n    inputKeyVals,\n    outputKeyVals,\n  });\n}\nexports.psbtFromBuffer = psbtFromBuffer;\nfunction checkKeyBuffer(type, keyBuf, keyNum) {\n  if (!keyBuf.equals(Buffer.from([keyNum]))) {\n    throw new Error(\n      `Format Error: Invalid ${type} key: ${keyBuf.toString('hex')}`,\n    );\n  }\n}\nexports.checkKeyBuffer = checkKeyBuffer;\nfunction psbtFromKeyVals(\n  unsignedTx,\n  { globalMapKeyVals, inputKeyVals, outputKeyVals },\n) {\n  // That was easy :-)\n  const globalMap = {\n    unsignedTx,\n  };\n  let txCount = 0;\n  for (const keyVal of globalMapKeyVals) {\n    // If a globalMap item needs pubkey, uncomment\n    // const pubkey = convert.globals.checkPubkey(keyVal);\n    switch (keyVal.key[0]) {\n      case typeFields_1.GlobalTypes.UNSIGNED_TX:\n        checkKeyBuffer(\n          'global',\n          keyVal.key,\n          typeFields_1.GlobalTypes.UNSIGNED_TX,\n        );\n        if (txCount > 0) {\n          throw new Error('Format Error: GlobalMap has multiple UNSIGNED_TX');\n        }\n        txCount++;\n        break;\n      case typeFields_1.GlobalTypes.GLOBAL_XPUB:\n        if (globalMap.globalXpub === undefined) {\n          globalMap.globalXpub = [];\n        }\n        globalMap.globalXpub.push(convert.globals.globalXpub.decode(keyVal));\n        break;\n      default:\n        // This will allow inclusion during serialization.\n        if (!globalMap.unknownKeyVals) globalMap.unknownKeyVals = [];\n        globalMap.unknownKeyVals.push(keyVal);\n    }\n  }\n  // Get input and output counts to loop the respective fields\n  const inputCount = inputKeyVals.length;\n  const outputCount = outputKeyVals.length;\n  const inputs = [];\n  const outputs = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const input = {};\n    for (const keyVal of inputKeyVals[index]) {\n      convert.inputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.InputTypes.NON_WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.NON_WITNESS_UTXO,\n          );\n          if (input.nonWitnessUtxo !== undefined) {\n            throw new Error(\n              'Format Error: Input has multiple NON_WITNESS_UTXO',\n            );\n          }\n          input.nonWitnessUtxo = convert.inputs.nonWitnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_UTXO,\n          );\n          if (input.witnessUtxo !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_UTXO');\n          }\n          input.witnessUtxo = convert.inputs.witnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.PARTIAL_SIG:\n          if (input.partialSig === undefined) {\n            input.partialSig = [];\n          }\n          input.partialSig.push(convert.inputs.partialSig.decode(keyVal));\n          break;\n        case typeFields_1.InputTypes.SIGHASH_TYPE:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.SIGHASH_TYPE,\n          );\n          if (input.sighashType !== undefined) {\n            throw new Error('Format Error: Input has multiple SIGHASH_TYPE');\n          }\n          input.sighashType = convert.inputs.sighashType.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.REDEEM_SCRIPT,\n          );\n          if (input.redeemScript !== undefined) {\n            throw new Error('Format Error: Input has multiple REDEEM_SCRIPT');\n          }\n          input.redeemScript = convert.inputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_SCRIPT,\n          );\n          if (input.witnessScript !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_SCRIPT');\n          }\n          input.witnessScript = convert.inputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.BIP32_DERIVATION:\n          if (input.bip32Derivation === undefined) {\n            input.bip32Derivation = [];\n          }\n          input.bip32Derivation.push(\n            convert.inputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTSIG:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTSIG,\n          );\n          input.finalScriptSig = convert.inputs.finalScriptSig.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTWITNESS:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTWITNESS,\n          );\n          input.finalScriptWitness = convert.inputs.finalScriptWitness.decode(\n            keyVal,\n          );\n          break;\n        case typeFields_1.InputTypes.POR_COMMITMENT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.POR_COMMITMENT,\n          );\n          input.porCommitment = convert.inputs.porCommitment.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.TAP_KEY_SIG:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.TAP_KEY_SIG,\n          );\n          input.tapKeySig = convert.inputs.tapKeySig.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.TAP_SCRIPT_SIG:\n          if (input.tapScriptSig === undefined) {\n            input.tapScriptSig = [];\n          }\n          input.tapScriptSig.push(convert.inputs.tapScriptSig.decode(keyVal));\n          break;\n        case typeFields_1.InputTypes.TAP_LEAF_SCRIPT:\n          if (input.tapLeafScript === undefined) {\n            input.tapLeafScript = [];\n          }\n          input.tapLeafScript.push(convert.inputs.tapLeafScript.decode(keyVal));\n          break;\n        case typeFields_1.InputTypes.TAP_BIP32_DERIVATION:\n          if (input.tapBip32Derivation === undefined) {\n            input.tapBip32Derivation = [];\n          }\n          input.tapBip32Derivation.push(\n            convert.inputs.tapBip32Derivation.decode(keyVal),\n          );\n          break;\n        case typeFields_1.InputTypes.TAP_INTERNAL_KEY:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.TAP_INTERNAL_KEY,\n          );\n          input.tapInternalKey = convert.inputs.tapInternalKey.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.TAP_MERKLE_ROOT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.TAP_MERKLE_ROOT,\n          );\n          input.tapMerkleRoot = convert.inputs.tapMerkleRoot.decode(keyVal);\n          break;\n        default:\n          // This will allow inclusion during serialization.\n          if (!input.unknownKeyVals) input.unknownKeyVals = [];\n          input.unknownKeyVals.push(keyVal);\n      }\n    }\n    inputs.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const output = {};\n    for (const keyVal of outputKeyVals[index]) {\n      convert.outputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.OutputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.REDEEM_SCRIPT,\n          );\n          if (output.redeemScript !== undefined) {\n            throw new Error('Format Error: Output has multiple REDEEM_SCRIPT');\n          }\n          output.redeemScript = convert.outputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.WITNESS_SCRIPT,\n          );\n          if (output.witnessScript !== undefined) {\n            throw new Error('Format Error: Output has multiple WITNESS_SCRIPT');\n          }\n          output.witnessScript = convert.outputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.BIP32_DERIVATION:\n          if (output.bip32Derivation === undefined) {\n            output.bip32Derivation = [];\n          }\n          output.bip32Derivation.push(\n            convert.outputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        case typeFields_1.OutputTypes.TAP_INTERNAL_KEY:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.TAP_INTERNAL_KEY,\n          );\n          output.tapInternalKey = convert.outputs.tapInternalKey.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.TAP_TREE:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.TAP_TREE,\n          );\n          output.tapTree = convert.outputs.tapTree.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.TAP_BIP32_DERIVATION:\n          if (output.tapBip32Derivation === undefined) {\n            output.tapBip32Derivation = [];\n          }\n          output.tapBip32Derivation.push(\n            convert.outputs.tapBip32Derivation.decode(keyVal),\n          );\n          break;\n        default:\n          if (!output.unknownKeyVals) output.unknownKeyVals = [];\n          output.unknownKeyVals.push(keyVal);\n      }\n    }\n    outputs.push(output);\n  }\n  return { globalMap, inputs, outputs };\n}\nexports.psbtFromKeyVals = psbtFromKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nfunction psbtToBuffer({ globalMap, inputs, outputs }) {\n  const { globalKeyVals, inputKeyVals, outputKeyVals } = psbtToKeyVals({\n    globalMap,\n    inputs,\n    outputs,\n  });\n  const globalBuffer = tools_1.keyValsToBuffer(globalKeyVals);\n  const keyValsOrEmptyToBuffer = keyVals =>\n    keyVals.length === 0\n      ? [Buffer.from([0])]\n      : keyVals.map(tools_1.keyValsToBuffer);\n  const inputBuffers = keyValsOrEmptyToBuffer(inputKeyVals);\n  const outputBuffers = keyValsOrEmptyToBuffer(outputKeyVals);\n  const header = Buffer.allocUnsafe(5);\n  header.writeUIntBE(0x70736274ff, 0, 5);\n  return Buffer.concat(\n    [header, globalBuffer].concat(inputBuffers, outputBuffers),\n  );\n}\nexports.psbtToBuffer = psbtToBuffer;\nconst sortKeyVals = (a, b) => {\n  return a.key.compare(b.key);\n};\nfunction keyValsFromMap(keyValMap, converterFactory) {\n  const keyHexSet = new Set();\n  const keyVals = Object.entries(keyValMap).reduce((result, [key, value]) => {\n    if (key === 'unknownKeyVals') return result;\n    // We are checking for undefined anyways. So ignore TS error\n    // @ts-ignore\n    const converter = converterFactory[key];\n    if (converter === undefined) return result;\n    const encodedKeyVals = (Array.isArray(value) ? value : [value]).map(\n      converter.encode,\n    );\n    const keyHexes = encodedKeyVals.map(kv => kv.key.toString('hex'));\n    keyHexes.forEach(hex => {\n      if (keyHexSet.has(hex))\n        throw new Error('Serialize Error: Duplicate key: ' + hex);\n      keyHexSet.add(hex);\n    });\n    return result.concat(encodedKeyVals);\n  }, []);\n  // Get other keyVals that have not yet been gotten\n  const otherKeyVals = keyValMap.unknownKeyVals\n    ? keyValMap.unknownKeyVals.filter(keyVal => {\n        return !keyHexSet.has(keyVal.key.toString('hex'));\n      })\n    : [];\n  return keyVals.concat(otherKeyVals).sort(sortKeyVals);\n}\nfunction psbtToKeyVals({ globalMap, inputs, outputs }) {\n  // First parse the global keyVals\n  // Get any extra keyvals to pass along\n  return {\n    globalKeyVals: keyValsFromMap(globalMap, convert.globals),\n    inputKeyVals: inputs.map(i => keyValsFromMap(i, convert.inputs)),\n    outputKeyVals: outputs.map(o => keyValsFromMap(o, convert.outputs)),\n  };\n}\nexports.psbtToKeyVals = psbtToKeyVals;\n","'use strict';\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, '__esModule', { value: true });\n__export(require('./fromBuffer'));\n__export(require('./toBuffer'));\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst parser_1 = require('../parser');\nfunction combine(psbts) {\n  const self = psbts[0];\n  const selfKeyVals = parser_1.psbtToKeyVals(self);\n  const others = psbts.slice(1);\n  if (others.length === 0) throw new Error('Combine: Nothing to combine');\n  const selfTx = getTx(self);\n  if (selfTx === undefined) {\n    throw new Error('Combine: Self missing transaction');\n  }\n  const selfGlobalSet = getKeySet(selfKeyVals.globalKeyVals);\n  const selfInputSets = selfKeyVals.inputKeyVals.map(getKeySet);\n  const selfOutputSets = selfKeyVals.outputKeyVals.map(getKeySet);\n  for (const other of others) {\n    const otherTx = getTx(other);\n    if (\n      otherTx === undefined ||\n      !otherTx.toBuffer().equals(selfTx.toBuffer())\n    ) {\n      throw new Error(\n        'Combine: One of the Psbts does not have the same transaction.',\n      );\n    }\n    const otherKeyVals = parser_1.psbtToKeyVals(other);\n    const otherGlobalSet = getKeySet(otherKeyVals.globalKeyVals);\n    otherGlobalSet.forEach(\n      keyPusher(\n        selfGlobalSet,\n        selfKeyVals.globalKeyVals,\n        otherKeyVals.globalKeyVals,\n      ),\n    );\n    const otherInputSets = otherKeyVals.inputKeyVals.map(getKeySet);\n    otherInputSets.forEach((inputSet, idx) =>\n      inputSet.forEach(\n        keyPusher(\n          selfInputSets[idx],\n          selfKeyVals.inputKeyVals[idx],\n          otherKeyVals.inputKeyVals[idx],\n        ),\n      ),\n    );\n    const otherOutputSets = otherKeyVals.outputKeyVals.map(getKeySet);\n    otherOutputSets.forEach((outputSet, idx) =>\n      outputSet.forEach(\n        keyPusher(\n          selfOutputSets[idx],\n          selfKeyVals.outputKeyVals[idx],\n          otherKeyVals.outputKeyVals[idx],\n        ),\n      ),\n    );\n  }\n  return parser_1.psbtFromKeyVals(selfTx, {\n    globalMapKeyVals: selfKeyVals.globalKeyVals,\n    inputKeyVals: selfKeyVals.inputKeyVals,\n    outputKeyVals: selfKeyVals.outputKeyVals,\n  });\n}\nexports.combine = combine;\nfunction keyPusher(selfSet, selfKeyVals, otherKeyVals) {\n  return key => {\n    if (selfSet.has(key)) return;\n    const newKv = otherKeyVals.filter(kv => kv.key.toString('hex') === key)[0];\n    selfKeyVals.push(newKv);\n    selfSet.add(key);\n  };\n}\nfunction getTx(psbt) {\n  return psbt.globalMap.unsignedTx;\n}\nfunction getKeySet(keyVals) {\n  const set = new Set();\n  keyVals.forEach(keyVal => {\n    const hex = keyVal.key.toString('hex');\n    if (set.has(hex))\n      throw new Error('Combine: KeyValue Map keys should be unique');\n    set.add(hex);\n  });\n  return set;\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst converter = require('./converter');\nfunction checkForInput(inputs, inputIndex) {\n  const input = inputs[inputIndex];\n  if (input === undefined) throw new Error(`No input #${inputIndex}`);\n  return input;\n}\nexports.checkForInput = checkForInput;\nfunction checkForOutput(outputs, outputIndex) {\n  const output = outputs[outputIndex];\n  if (output === undefined) throw new Error(`No output #${outputIndex}`);\n  return output;\n}\nexports.checkForOutput = checkForOutput;\nfunction checkHasKey(checkKeyVal, keyVals, enumLength) {\n  if (checkKeyVal.key[0] < enumLength) {\n    throw new Error(\n      `Use the method for your specific key instead of addUnknownKeyVal*`,\n    );\n  }\n  if (\n    keyVals &&\n    keyVals.filter(kv => kv.key.equals(checkKeyVal.key)).length !== 0\n  ) {\n    throw new Error(`Duplicate Key: ${checkKeyVal.key.toString('hex')}`);\n  }\n}\nexports.checkHasKey = checkHasKey;\nfunction getEnumLength(myenum) {\n  let count = 0;\n  Object.keys(myenum).forEach(val => {\n    if (Number(isNaN(Number(val)))) {\n      count++;\n    }\n  });\n  return count;\n}\nexports.getEnumLength = getEnumLength;\nfunction inputCheckUncleanFinalized(inputIndex, input) {\n  let result = false;\n  if (input.nonWitnessUtxo || input.witnessUtxo) {\n    const needScriptSig = !!input.redeemScript;\n    const needWitnessScript = !!input.witnessScript;\n    const scriptSigOK = !needScriptSig || !!input.finalScriptSig;\n    const witnessScriptOK = !needWitnessScript || !!input.finalScriptWitness;\n    const hasOneFinal = !!input.finalScriptSig || !!input.finalScriptWitness;\n    result = scriptSigOK && witnessScriptOK && hasOneFinal;\n  }\n  if (result === false) {\n    throw new Error(\n      `Input #${inputIndex} has too much or too little data to clean`,\n    );\n  }\n}\nexports.inputCheckUncleanFinalized = inputCheckUncleanFinalized;\nfunction throwForUpdateMaker(typeName, name, expected, data) {\n  throw new Error(\n    `Data for ${typeName} key ${name} is incorrect: Expected ` +\n      `${expected} and got ${JSON.stringify(data)}`,\n  );\n}\nfunction updateMaker(typeName) {\n  return (updateData, mainData) => {\n    for (const name of Object.keys(updateData)) {\n      // @ts-ignore\n      const data = updateData[name];\n      // @ts-ignore\n      const { canAdd, canAddToArray, check, expected } =\n        // @ts-ignore\n        converter[typeName + 's'][name] || {};\n      const isArray = !!canAddToArray;\n      // If unknown data. ignore and do not add\n      if (check) {\n        if (isArray) {\n          if (\n            !Array.isArray(data) ||\n            // @ts-ignore\n            (mainData[name] && !Array.isArray(mainData[name]))\n          ) {\n            throw new Error(`Key type ${name} must be an array`);\n          }\n          if (!data.every(check)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          // @ts-ignore\n          const arr = mainData[name] || [];\n          const dupeCheckSet = new Set();\n          if (!data.every(v => canAddToArray(arr, v, dupeCheckSet))) {\n            throw new Error('Can not add duplicate data to array');\n          }\n          // @ts-ignore\n          mainData[name] = arr.concat(data);\n        } else {\n          if (!check(data)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          if (!canAdd(mainData, data)) {\n            throw new Error(`Can not add duplicate data to ${typeName}`);\n          }\n          // @ts-ignore\n          mainData[name] = data;\n        }\n      }\n    }\n  };\n}\nexports.updateGlobal = updateMaker('global');\nexports.updateInput = updateMaker('input');\nexports.updateOutput = updateMaker('output');\nfunction addInputAttributes(inputs, data) {\n  const index = inputs.length - 1;\n  const input = checkForInput(inputs, index);\n  exports.updateInput(data, input);\n}\nexports.addInputAttributes = addInputAttributes;\nfunction addOutputAttributes(outputs, data) {\n  const index = outputs.length - 1;\n  const output = checkForOutput(outputs, index);\n  exports.updateOutput(data, output);\n}\nexports.addOutputAttributes = addOutputAttributes;\nfunction defaultVersionSetter(version, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Version: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(version, 0);\n  return txBuf;\n}\nexports.defaultVersionSetter = defaultVersionSetter;\nfunction defaultLocktimeSetter(locktime, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Locktime: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(locktime, txBuf.length - 4);\n  return txBuf;\n}\nexports.defaultLocktimeSetter = defaultLocktimeSetter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst combiner_1 = require('./combiner');\nconst parser_1 = require('./parser');\nconst typeFields_1 = require('./typeFields');\nconst utils_1 = require('./utils');\nclass Psbt {\n  constructor(tx) {\n    this.inputs = [];\n    this.outputs = [];\n    this.globalMap = {\n      unsignedTx: tx,\n    };\n  }\n  static fromBase64(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromHex(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromBuffer(buffer, txFromBuffer) {\n    const results = parser_1.psbtFromBuffer(buffer, txFromBuffer);\n    const psbt = new this(results.globalMap.unsignedTx);\n    Object.assign(psbt, results);\n    return psbt;\n  }\n  toBase64() {\n    const buffer = this.toBuffer();\n    return buffer.toString('base64');\n  }\n  toHex() {\n    const buffer = this.toBuffer();\n    return buffer.toString('hex');\n  }\n  toBuffer() {\n    return parser_1.psbtToBuffer(this);\n  }\n  updateGlobal(updateData) {\n    utils_1.updateGlobal(updateData, this.globalMap);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.updateInput(updateData, input);\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.updateOutput(updateData, output);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    utils_1.checkHasKey(\n      keyVal,\n      this.globalMap.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.GlobalTypes),\n    );\n    if (!this.globalMap.unknownKeyVals) this.globalMap.unknownKeyVals = [];\n    this.globalMap.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      input.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.InputTypes),\n    );\n    if (!input.unknownKeyVals) input.unknownKeyVals = [];\n    input.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      output.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.OutputTypes),\n    );\n    if (!output.unknownKeyVals) output.unknownKeyVals = [];\n    output.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addInput(inputData) {\n    this.globalMap.unsignedTx.addInput(inputData);\n    this.inputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = inputData.unknownKeyVals || [];\n    const inputIndex = this.inputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(inputIndex, keyVal),\n    );\n    utils_1.addInputAttributes(this.inputs, inputData);\n    return this;\n  }\n  addOutput(outputData) {\n    this.globalMap.unsignedTx.addOutput(outputData);\n    this.outputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = outputData.unknownKeyVals || [];\n    const outputIndex = this.outputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToOutput(outputIndex, keyVal),\n    );\n    utils_1.addOutputAttributes(this.outputs, outputData);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.inputCheckUncleanFinalized(inputIndex, input);\n    for (const key of Object.keys(input)) {\n      if (\n        ![\n          'witnessUtxo',\n          'nonWitnessUtxo',\n          'finalScriptSig',\n          'finalScriptWitness',\n          'unknownKeyVals',\n        ].includes(key)\n      ) {\n        // @ts-ignore\n        delete input[key];\n      }\n    }\n    return this;\n  }\n  combine(...those) {\n    // Combine this with those.\n    // Return self for chaining.\n    const result = combiner_1.combine([this].concat(those));\n    Object.assign(this, result);\n    return this;\n  }\n  getTransaction() {\n    return this.globalMap.unsignedTx.toBuffer();\n  }\n}\nexports.Psbt = Psbt;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.signatureBlocksAction =\n  exports.checkInputForSig =\n  exports.pubkeyInScript =\n  exports.pubkeyPositionInScript =\n  exports.witnessStackToScriptWitness =\n  exports.isP2TR =\n  exports.isP2SHScript =\n  exports.isP2WSHScript =\n  exports.isP2WPKH =\n  exports.isP2PKH =\n  exports.isP2PK =\n  exports.isP2MS =\n    void 0;\nconst varuint = require('bip174/src/lib/converter/varint');\nconst bscript = require('../script');\nconst transaction_1 = require('../transaction');\nconst crypto_1 = require('../crypto');\nconst payments = require('../payments');\nfunction isPaymentFactory(payment) {\n  return script => {\n    try {\n      payment({ output: script });\n      return true;\n    } catch (err) {\n      return false;\n    }\n  };\n}\nexports.isP2MS = isPaymentFactory(payments.p2ms);\nexports.isP2PK = isPaymentFactory(payments.p2pk);\nexports.isP2PKH = isPaymentFactory(payments.p2pkh);\nexports.isP2WPKH = isPaymentFactory(payments.p2wpkh);\nexports.isP2WSHScript = isPaymentFactory(payments.p2wsh);\nexports.isP2SHScript = isPaymentFactory(payments.p2sh);\nexports.isP2TR = isPaymentFactory(payments.p2tr);\n/**\n * Converts a witness stack to a script witness.\n * @param witness The witness stack to convert.\n * @returns The script witness as a Buffer.\n */\n/**\n * Converts a witness stack to a script witness.\n * @param witness The witness stack to convert.\n * @returns The converted script witness.\n */\nfunction witnessStackToScriptWitness(witness) {\n  let buffer = Buffer.allocUnsafe(0);\n  function writeSlice(slice) {\n    buffer = Buffer.concat([buffer, Buffer.from(slice)]);\n  }\n  function writeVarInt(i) {\n    const currentLen = buffer.length;\n    const varintLen = varuint.encodingLength(i);\n    buffer = Buffer.concat([buffer, Buffer.allocUnsafe(varintLen)]);\n    varuint.encode(i, buffer, currentLen);\n  }\n  function writeVarSlice(slice) {\n    writeVarInt(slice.length);\n    writeSlice(slice);\n  }\n  function writeVector(vector) {\n    writeVarInt(vector.length);\n    vector.forEach(writeVarSlice);\n  }\n  writeVector(witness);\n  return buffer;\n}\nexports.witnessStackToScriptWitness = witnessStackToScriptWitness;\n/**\n * Finds the position of a public key in a script.\n * @param pubkey The public key to search for.\n * @param script The script to search in.\n * @returns The index of the public key in the script, or -1 if not found.\n * @throws {Error} If there is an unknown script error.\n */\nfunction pubkeyPositionInScript(pubkey, script) {\n  const pubkeyHash = (0, crypto_1.hash160)(pubkey);\n  const pubkeyXOnly = pubkey.slice(1, 33); // slice before calling?\n  const decompiled = bscript.decompile(script);\n  if (decompiled === null) throw new Error('Unknown script error');\n  return decompiled.findIndex(element => {\n    if (typeof element === 'number') return false;\n    return (\n      element.equals(pubkey) ||\n      element.equals(pubkeyHash) ||\n      element.equals(pubkeyXOnly)\n    );\n  });\n}\nexports.pubkeyPositionInScript = pubkeyPositionInScript;\n/**\n * Checks if a public key is present in a script.\n * @param pubkey The public key to check.\n * @param script The script to search in.\n * @returns A boolean indicating whether the public key is present in the script.\n */\nfunction pubkeyInScript(pubkey, script) {\n  return pubkeyPositionInScript(pubkey, script) !== -1;\n}\nexports.pubkeyInScript = pubkeyInScript;\n/**\n * Checks if an input contains a signature for a specific action.\n * @param input - The input to check.\n * @param action - The action to check for.\n * @returns A boolean indicating whether the input contains a signature for the specified action.\n */\nfunction checkInputForSig(input, action) {\n  const pSigs = extractPartialSigs(input);\n  return pSigs.some(pSig =>\n    signatureBlocksAction(pSig, bscript.signature.decode, action),\n  );\n}\nexports.checkInputForSig = checkInputForSig;\n/**\n * Determines if a given action is allowed for a signature block.\n * @param signature - The signature block.\n * @param signatureDecodeFn - The function used to decode the signature.\n * @param action - The action to be checked.\n * @returns True if the action is allowed, false otherwise.\n */\nfunction signatureBlocksAction(signature, signatureDecodeFn, action) {\n  const { hashType } = signatureDecodeFn(signature);\n  const whitelist = [];\n  const isAnyoneCanPay =\n    hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY;\n  if (isAnyoneCanPay) whitelist.push('addInput');\n  const hashMod = hashType & 0x1f;\n  switch (hashMod) {\n    case transaction_1.Transaction.SIGHASH_ALL:\n      break;\n    case transaction_1.Transaction.SIGHASH_SINGLE:\n    case transaction_1.Transaction.SIGHASH_NONE:\n      whitelist.push('addOutput');\n      whitelist.push('setInputSequence');\n      break;\n  }\n  if (whitelist.indexOf(action) === -1) {\n    return true;\n  }\n  return false;\n}\nexports.signatureBlocksAction = signatureBlocksAction;\n/**\n * Extracts the signatures from a PsbtInput object.\n * If the input has partial signatures, it returns an array of the signatures.\n * If the input does not have partial signatures, it checks if it has a finalScriptSig or finalScriptWitness.\n * If it does, it extracts the signatures from the final scripts and returns them.\n * If none of the above conditions are met, it returns an empty array.\n *\n * @param input - The PsbtInput object from which to extract the signatures.\n * @returns An array of signatures extracted from the PsbtInput object.\n */\nfunction extractPartialSigs(input) {\n  let pSigs = [];\n  if ((input.partialSig || []).length === 0) {\n    if (!input.finalScriptSig && !input.finalScriptWitness) return [];\n    pSigs = getPsigsFromInputFinalScripts(input);\n  } else {\n    pSigs = input.partialSig;\n  }\n  return pSigs.map(p => p.signature);\n}\n/**\n * Retrieves the partial signatures (Psigs) from the input's final scripts.\n * Psigs are extracted from both the final scriptSig and final scriptWitness of the input.\n * Only canonical script signatures are considered.\n *\n * @param input - The PsbtInput object representing the input.\n * @returns An array of PartialSig objects containing the extracted Psigs.\n */\nfunction getPsigsFromInputFinalScripts(input) {\n  const scriptItems = !input.finalScriptSig\n    ? []\n    : bscript.decompile(input.finalScriptSig) || [];\n  const witnessItems = !input.finalScriptWitness\n    ? []\n    : bscript.decompile(input.finalScriptWitness) || [];\n  return scriptItems\n    .concat(witnessItems)\n    .filter(item => {\n      return Buffer.isBuffer(item) && bscript.isCanonicalScriptSignature(item);\n    })\n    .map(sig => ({ signature: sig }));\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.checkTaprootInputForSigs =\n  exports.tapTreeFromList =\n  exports.tapTreeToList =\n  exports.tweakInternalPubKey =\n  exports.checkTaprootOutputFields =\n  exports.checkTaprootInputFields =\n  exports.isTaprootOutput =\n  exports.isTaprootInput =\n  exports.serializeTaprootSignature =\n  exports.tapScriptFinalizer =\n  exports.toXOnly =\n    void 0;\nconst types_1 = require('../types');\nconst transaction_1 = require('../transaction');\nconst psbtutils_1 = require('./psbtutils');\nconst bip341_1 = require('../payments/bip341');\nconst payments_1 = require('../payments');\nconst psbtutils_2 = require('./psbtutils');\nconst toXOnly = pubKey => (pubKey.length === 32 ? pubKey : pubKey.slice(1, 33));\nexports.toXOnly = toXOnly;\n/**\n * Default tapscript finalizer. It searches for the `tapLeafHashToFinalize` if provided.\n * Otherwise it will search for the tapleaf that has at least one signature and has the shortest path.\n * @param inputIndex the position of the PSBT input.\n * @param input the PSBT input.\n * @param tapLeafHashToFinalize optional, if provided the finalizer will search for a tapleaf that has this hash\n *                              and will try to build the finalScriptWitness.\n * @returns the finalScriptWitness or throws an exception if no tapleaf found.\n */\nfunction tapScriptFinalizer(inputIndex, input, tapLeafHashToFinalize) {\n  const tapLeaf = findTapLeafToFinalize(\n    input,\n    inputIndex,\n    tapLeafHashToFinalize,\n  );\n  try {\n    const sigs = sortSignatures(input, tapLeaf);\n    const witness = sigs.concat(tapLeaf.script).concat(tapLeaf.controlBlock);\n    return {\n      finalScriptWitness: (0, psbtutils_1.witnessStackToScriptWitness)(witness),\n    };\n  } catch (err) {\n    throw new Error(`Can not finalize taproot input #${inputIndex}: ${err}`);\n  }\n}\nexports.tapScriptFinalizer = tapScriptFinalizer;\nfunction serializeTaprootSignature(sig, sighashType) {\n  const sighashTypeByte = sighashType\n    ? Buffer.from([sighashType])\n    : Buffer.from([]);\n  return Buffer.concat([sig, sighashTypeByte]);\n}\nexports.serializeTaprootSignature = serializeTaprootSignature;\nfunction isTaprootInput(input) {\n  return (\n    input &&\n    !!(\n      input.tapInternalKey ||\n      input.tapMerkleRoot ||\n      (input.tapLeafScript && input.tapLeafScript.length) ||\n      (input.tapBip32Derivation && input.tapBip32Derivation.length) ||\n      (input.witnessUtxo && (0, psbtutils_1.isP2TR)(input.witnessUtxo.script))\n    )\n  );\n}\nexports.isTaprootInput = isTaprootInput;\nfunction isTaprootOutput(output, script) {\n  return (\n    output &&\n    !!(\n      output.tapInternalKey ||\n      output.tapTree ||\n      (output.tapBip32Derivation && output.tapBip32Derivation.length) ||\n      (script && (0, psbtutils_1.isP2TR)(script))\n    )\n  );\n}\nexports.isTaprootOutput = isTaprootOutput;\nfunction checkTaprootInputFields(inputData, newInputData, action) {\n  checkMixedTaprootAndNonTaprootInputFields(inputData, newInputData, action);\n  checkIfTapLeafInTree(inputData, newInputData, action);\n}\nexports.checkTaprootInputFields = checkTaprootInputFields;\nfunction checkTaprootOutputFields(outputData, newOutputData, action) {\n  checkMixedTaprootAndNonTaprootOutputFields(outputData, newOutputData, action);\n  checkTaprootScriptPubkey(outputData, newOutputData);\n}\nexports.checkTaprootOutputFields = checkTaprootOutputFields;\nfunction checkTaprootScriptPubkey(outputData, newOutputData) {\n  if (!newOutputData.tapTree && !newOutputData.tapInternalKey) return;\n  const tapInternalKey =\n    newOutputData.tapInternalKey || outputData.tapInternalKey;\n  const tapTree = newOutputData.tapTree || outputData.tapTree;\n  if (tapInternalKey) {\n    const { script: scriptPubkey } = outputData;\n    const script = getTaprootScripPubkey(tapInternalKey, tapTree);\n    if (scriptPubkey && !scriptPubkey.equals(script))\n      throw new Error('Error adding output. Script or address missmatch.');\n  }\n}\nfunction getTaprootScripPubkey(tapInternalKey, tapTree) {\n  const scriptTree = tapTree && tapTreeFromList(tapTree.leaves);\n  const { output } = (0, payments_1.p2tr)({\n    internalPubkey: tapInternalKey,\n    scriptTree,\n  });\n  return output;\n}\nfunction tweakInternalPubKey(inputIndex, input) {\n  const tapInternalKey = input.tapInternalKey;\n  const outputKey =\n    tapInternalKey &&\n    (0, bip341_1.tweakKey)(tapInternalKey, input.tapMerkleRoot);\n  if (!outputKey)\n    throw new Error(\n      `Cannot tweak tap internal key for input #${inputIndex}. Public key: ${\n        tapInternalKey && tapInternalKey.toString('hex')\n      }`,\n    );\n  return outputKey.x;\n}\nexports.tweakInternalPubKey = tweakInternalPubKey;\n/**\n * Convert a binary tree to a BIP371 type list. Each element of the list is (according to BIP371):\n * One or more tuples representing the depth, leaf version, and script for a leaf in the Taproot tree,\n * allowing the entire tree to be reconstructed. The tuples must be in depth first search order so that\n * the tree is correctly reconstructed.\n * @param tree the binary tap tree\n * @returns a list of BIP 371 tapleaves\n */\nfunction tapTreeToList(tree) {\n  if (!(0, types_1.isTaptree)(tree))\n    throw new Error(\n      'Cannot convert taptree to tapleaf list. Expecting a tapree structure.',\n    );\n  return _tapTreeToList(tree);\n}\nexports.tapTreeToList = tapTreeToList;\n/**\n * Convert a BIP371 TapLeaf list to a TapTree (binary).\n * @param leaves a list of tapleaves where each element of the list is (according to BIP371):\n * One or more tuples representing the depth, leaf version, and script for a leaf in the Taproot tree,\n * allowing the entire tree to be reconstructed. The tuples must be in depth first search order so that\n * the tree is correctly reconstructed.\n * @returns the corresponding taptree, or throws an exception if the tree cannot be reconstructed\n */\nfunction tapTreeFromList(leaves = []) {\n  if (leaves.length === 1 && leaves[0].depth === 0)\n    return {\n      output: leaves[0].script,\n      version: leaves[0].leafVersion,\n    };\n  return instertLeavesInTree(leaves);\n}\nexports.tapTreeFromList = tapTreeFromList;\nfunction checkTaprootInputForSigs(input, action) {\n  const sigs = extractTaprootSigs(input);\n  return sigs.some(sig =>\n    (0, psbtutils_2.signatureBlocksAction)(sig, decodeSchnorrSignature, action),\n  );\n}\nexports.checkTaprootInputForSigs = checkTaprootInputForSigs;\nfunction decodeSchnorrSignature(signature) {\n  return {\n    signature: signature.slice(0, 64),\n    hashType:\n      signature.slice(64)[0] || transaction_1.Transaction.SIGHASH_DEFAULT,\n  };\n}\nfunction extractTaprootSigs(input) {\n  const sigs = [];\n  if (input.tapKeySig) sigs.push(input.tapKeySig);\n  if (input.tapScriptSig)\n    sigs.push(...input.tapScriptSig.map(s => s.signature));\n  if (!sigs.length) {\n    const finalTapKeySig = getTapKeySigFromWithness(input.finalScriptWitness);\n    if (finalTapKeySig) sigs.push(finalTapKeySig);\n  }\n  return sigs;\n}\nfunction getTapKeySigFromWithness(finalScriptWitness) {\n  if (!finalScriptWitness) return;\n  const witness = finalScriptWitness.slice(2);\n  // todo: add schnorr signature validation\n  if (witness.length === 64 || witness.length === 65) return witness;\n}\nfunction _tapTreeToList(tree, leaves = [], depth = 0) {\n  if (depth > bip341_1.MAX_TAPTREE_DEPTH)\n    throw new Error('Max taptree depth exceeded.');\n  if (!tree) return [];\n  if ((0, types_1.isTapleaf)(tree)) {\n    leaves.push({\n      depth,\n      leafVersion: tree.version || bip341_1.LEAF_VERSION_TAPSCRIPT,\n      script: tree.output,\n    });\n    return leaves;\n  }\n  if (tree[0]) _tapTreeToList(tree[0], leaves, depth + 1);\n  if (tree[1]) _tapTreeToList(tree[1], leaves, depth + 1);\n  return leaves;\n}\nfunction instertLeavesInTree(leaves) {\n  let tree;\n  for (const leaf of leaves) {\n    tree = instertLeafInTree(leaf, tree);\n    if (!tree) throw new Error(`No room left to insert tapleaf in tree`);\n  }\n  return tree;\n}\nfunction instertLeafInTree(leaf, tree, depth = 0) {\n  if (depth > bip341_1.MAX_TAPTREE_DEPTH)\n    throw new Error('Max taptree depth exceeded.');\n  if (leaf.depth === depth) {\n    if (!tree)\n      return {\n        output: leaf.script,\n        version: leaf.leafVersion,\n      };\n    return;\n  }\n  if ((0, types_1.isTapleaf)(tree)) return;\n  const leftSide = instertLeafInTree(leaf, tree && tree[0], depth + 1);\n  if (leftSide) return [leftSide, tree && tree[1]];\n  const rightSide = instertLeafInTree(leaf, tree && tree[1], depth + 1);\n  if (rightSide) return [tree && tree[0], rightSide];\n}\nfunction checkMixedTaprootAndNonTaprootInputFields(\n  inputData,\n  newInputData,\n  action,\n) {\n  const isBadTaprootUpdate =\n    isTaprootInput(inputData) && hasNonTaprootFields(newInputData);\n  const isBadNonTaprootUpdate =\n    hasNonTaprootFields(inputData) && isTaprootInput(newInputData);\n  const hasMixedFields =\n    inputData === newInputData &&\n    isTaprootInput(newInputData) &&\n    hasNonTaprootFields(newInputData); // todo: bad? use !===\n  if (isBadTaprootUpdate || isBadNonTaprootUpdate || hasMixedFields)\n    throw new Error(\n      `Invalid arguments for Psbt.${action}. ` +\n        `Cannot use both taproot and non-taproot fields.`,\n    );\n}\nfunction checkMixedTaprootAndNonTaprootOutputFields(\n  inputData,\n  newInputData,\n  action,\n) {\n  const isBadTaprootUpdate =\n    isTaprootOutput(inputData) && hasNonTaprootFields(newInputData);\n  const isBadNonTaprootUpdate =\n    hasNonTaprootFields(inputData) && isTaprootOutput(newInputData);\n  const hasMixedFields =\n    inputData === newInputData &&\n    isTaprootOutput(newInputData) &&\n    hasNonTaprootFields(newInputData);\n  if (isBadTaprootUpdate || isBadNonTaprootUpdate || hasMixedFields)\n    throw new Error(\n      `Invalid arguments for Psbt.${action}. ` +\n        `Cannot use both taproot and non-taproot fields.`,\n    );\n}\n/**\n * Checks if the tap leaf is part of the tap tree for the given input data.\n * Throws an error if the tap leaf is not part of the tap tree.\n * @param inputData - The original PsbtInput data.\n * @param newInputData - The new PsbtInput data.\n * @param action - The action being performed.\n * @throws {Error} - If the tap leaf is not part of the tap tree.\n */\nfunction checkIfTapLeafInTree(inputData, newInputData, action) {\n  if (newInputData.tapMerkleRoot) {\n    const newLeafsInTree = (newInputData.tapLeafScript || []).every(l =>\n      isTapLeafInTree(l, newInputData.tapMerkleRoot),\n    );\n    const oldLeafsInTree = (inputData.tapLeafScript || []).every(l =>\n      isTapLeafInTree(l, newInputData.tapMerkleRoot),\n    );\n    if (!newLeafsInTree || !oldLeafsInTree)\n      throw new Error(\n        `Invalid arguments for Psbt.${action}. Tapleaf not part of taptree.`,\n      );\n  } else if (inputData.tapMerkleRoot) {\n    const newLeafsInTree = (newInputData.tapLeafScript || []).every(l =>\n      isTapLeafInTree(l, inputData.tapMerkleRoot),\n    );\n    if (!newLeafsInTree)\n      throw new Error(\n        `Invalid arguments for Psbt.${action}. Tapleaf not part of taptree.`,\n      );\n  }\n}\n/**\n * Checks if a TapLeafScript is present in a Merkle tree.\n * @param tapLeaf The TapLeafScript to check.\n * @param merkleRoot The Merkle root of the tree. If not provided, the function assumes the TapLeafScript is present.\n * @returns A boolean indicating whether the TapLeafScript is present in the tree.\n */\nfunction isTapLeafInTree(tapLeaf, merkleRoot) {\n  if (!merkleRoot) return true;\n  const leafHash = (0, bip341_1.tapleafHash)({\n    output: tapLeaf.script,\n    version: tapLeaf.leafVersion,\n  });\n  const rootHash = (0, bip341_1.rootHashFromPath)(\n    tapLeaf.controlBlock,\n    leafHash,\n  );\n  return rootHash.equals(merkleRoot);\n}\n/**\n * Sorts the signatures in the input's tapScriptSig array based on their position in the tapLeaf script.\n *\n * @param input - The PsbtInput object.\n * @param tapLeaf - The TapLeafScript object.\n * @returns An array of sorted signatures as Buffers.\n */\nfunction sortSignatures(input, tapLeaf) {\n  const leafHash = (0, bip341_1.tapleafHash)({\n    output: tapLeaf.script,\n    version: tapLeaf.leafVersion,\n  });\n  return (input.tapScriptSig || [])\n    .filter(tss => tss.leafHash.equals(leafHash))\n    .map(tss => addPubkeyPositionInScript(tapLeaf.script, tss))\n    .sort((t1, t2) => t2.positionInScript - t1.positionInScript)\n    .map(t => t.signature);\n}\n/**\n * Adds the position of a public key in a script to a TapScriptSig object.\n * @param script The script in which to find the position of the public key.\n * @param tss The TapScriptSig object to add the position to.\n * @returns A TapScriptSigWitPosition object with the added position.\n */\nfunction addPubkeyPositionInScript(script, tss) {\n  return Object.assign(\n    {\n      positionInScript: (0, psbtutils_1.pubkeyPositionInScript)(\n        tss.pubkey,\n        script,\n      ),\n    },\n    tss,\n  );\n}\n/**\n * Find tapleaf by hash, or get the signed tapleaf with the shortest path.\n */\nfunction findTapLeafToFinalize(input, inputIndex, leafHashToFinalize) {\n  if (!input.tapScriptSig || !input.tapScriptSig.length)\n    throw new Error(\n      `Can not finalize taproot input #${inputIndex}. No tapleaf script signature provided.`,\n    );\n  const tapLeaf = (input.tapLeafScript || [])\n    .sort((a, b) => a.controlBlock.length - b.controlBlock.length)\n    .find(leaf =>\n      canFinalizeLeaf(leaf, input.tapScriptSig, leafHashToFinalize),\n    );\n  if (!tapLeaf)\n    throw new Error(\n      `Can not finalize taproot input #${inputIndex}. Signature for tapleaf script not found.`,\n    );\n  return tapLeaf;\n}\n/**\n * Determines whether a TapLeafScript can be finalized.\n *\n * @param leaf - The TapLeafScript to check.\n * @param tapScriptSig - The array of TapScriptSig objects.\n * @param hash - The optional hash to compare with the leaf hash.\n * @returns A boolean indicating whether the TapLeafScript can be finalized.\n */\nfunction canFinalizeLeaf(leaf, tapScriptSig, hash) {\n  const leafHash = (0, bip341_1.tapleafHash)({\n    output: leaf.script,\n    version: leaf.leafVersion,\n  });\n  const whiteListedHash = !hash || hash.equals(leafHash);\n  return (\n    whiteListedHash &&\n    tapScriptSig.find(tss => tss.leafHash.equals(leafHash)) !== undefined\n  );\n}\n/**\n * Checks if the given PsbtInput or PsbtOutput has non-taproot fields.\n * Non-taproot fields include redeemScript, witnessScript, and bip32Derivation.\n * @param io The PsbtInput or PsbtOutput to check.\n * @returns A boolean indicating whether the given input or output has non-taproot fields.\n */\nfunction hasNonTaprootFields(io) {\n  return (\n    io &&\n    !!(\n      io.redeemScript ||\n      io.witnessScript ||\n      (io.bip32Derivation && io.bip32Derivation.length)\n    )\n  );\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.Psbt = void 0;\nconst bip174_1 = require('bip174');\nconst varuint = require('bip174/src/lib/converter/varint');\nconst utils_1 = require('bip174/src/lib/utils');\nconst address_1 = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst networks_1 = require('./networks');\nconst payments = require('./payments');\nconst bip341_1 = require('./payments/bip341');\nconst bscript = require('./script');\nconst transaction_1 = require('./transaction');\nconst bip371_1 = require('./psbt/bip371');\nconst psbtutils_1 = require('./psbt/psbtutils');\n/**\n * These are the default arguments for a Psbt instance.\n */\nconst DEFAULT_OPTS = {\n  /**\n   * A bitcoinjs Network object. This is only used if you pass an `address`\n   * parameter to addOutput. Otherwise it is not needed and can be left default.\n   */\n  network: networks_1.bitcoin,\n  /**\n   * When extractTransaction is called, the fee rate is checked.\n   * THIS IS NOT TO BE RELIED ON.\n   * It is only here as a last ditch effort to prevent sending a 500 BTC fee etc.\n   */\n  maximumFeeRate: 5000, // satoshi per byte\n};\n/**\n * Psbt class can parse and generate a PSBT binary based off of the BIP174.\n * There are 6 roles that this class fulfills. (Explained in BIP174)\n *\n * Creator: This can be done with `new Psbt()`\n *\n * Updater: This can be done with `psbt.addInput(input)`, `psbt.addInputs(inputs)`,\n *   `psbt.addOutput(output)`, `psbt.addOutputs(outputs)` when you are looking to\n *   add new inputs and outputs to the PSBT, and `psbt.updateGlobal(itemObject)`,\n *   `psbt.updateInput(itemObject)`, `psbt.updateOutput(itemObject)`\n *   addInput requires hash: Buffer | string; and index: number; as attributes\n *   and can also include any attributes that are used in updateInput method.\n *   addOutput requires script: Buffer; and value: number; and likewise can include\n *   data for updateOutput.\n *   For a list of what attributes should be what types. Check the bip174 library.\n *   Also, check the integration tests for some examples of usage.\n *\n * Signer: There are a few methods. signAllInputs and signAllInputsAsync, which will search all input\n *   information for your pubkey or pubkeyhash, and only sign inputs where it finds\n *   your info. Or you can explicitly sign a specific input with signInput and\n *   signInputAsync. For the async methods you can create a SignerAsync object\n *   and use something like a hardware wallet to sign with. (You must implement this)\n *\n * Combiner: psbts can be combined easily with `psbt.combine(psbt2, psbt3, psbt4 ...)`\n *   the psbt calling combine will always have precedence when a conflict occurs.\n *   Combine checks if the internal bitcoin transaction is the same, so be sure that\n *   all sequences, version, locktime, etc. are the same before combining.\n *\n * Input Finalizer: This role is fairly important. Not only does it need to construct\n *   the input scriptSigs and witnesses, but it SHOULD verify the signatures etc.\n *   Before running `psbt.finalizeAllInputs()` please run `psbt.validateSignaturesOfAllInputs()`\n *   Running any finalize method will delete any data in the input(s) that are no longer\n *   needed due to the finalized scripts containing the information.\n *\n * Transaction Extractor: This role will perform some checks before returning a\n *   Transaction object. Such as fee rate not being larger than maximumFeeRate etc.\n */\nclass Psbt {\n  static fromBase64(data, opts = {}) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromHex(data, opts = {}) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromBuffer(buffer, opts = {}) {\n    const psbtBase = bip174_1.Psbt.fromBuffer(buffer, transactionFromBuffer);\n    const psbt = new Psbt(opts, psbtBase);\n    checkTxForDupeIns(psbt.__CACHE.__TX, psbt.__CACHE);\n    return psbt;\n  }\n  constructor(opts = {}, data = new bip174_1.Psbt(new PsbtTransaction())) {\n    this.data = data;\n    // set defaults\n    this.opts = Object.assign({}, DEFAULT_OPTS, opts);\n    this.__CACHE = {\n      __NON_WITNESS_UTXO_TX_CACHE: [],\n      __NON_WITNESS_UTXO_BUF_CACHE: [],\n      __TX_IN_CACHE: {},\n      __TX: this.data.globalMap.unsignedTx.tx,\n      // Psbt's predecessor (TransactionBuilder - now removed) behavior\n      // was to not confirm input values  before signing.\n      // Even though we highly encourage people to get\n      // the full parent transaction to verify values, the ability to\n      // sign non-segwit inputs without the full transaction was often\n      // requested. So the only way to activate is to use @ts-ignore.\n      // We will disable exporting the Psbt when unsafe sign is active.\n      // because it is not BIP174 compliant.\n      __UNSAFE_SIGN_NONSEGWIT: false,\n    };\n    if (this.data.inputs.length === 0) this.setVersion(2);\n    // Make data hidden when enumerating\n    const dpew = (obj, attr, enumerable, writable) =>\n      Object.defineProperty(obj, attr, {\n        enumerable,\n        writable,\n      });\n    dpew(this, '__CACHE', false, true);\n    dpew(this, 'opts', false, true);\n  }\n  get inputCount() {\n    return this.data.inputs.length;\n  }\n  get version() {\n    return this.__CACHE.__TX.version;\n  }\n  set version(version) {\n    this.setVersion(version);\n  }\n  get locktime() {\n    return this.__CACHE.__TX.locktime;\n  }\n  set locktime(locktime) {\n    this.setLocktime(locktime);\n  }\n  get txInputs() {\n    return this.__CACHE.__TX.ins.map(input => ({\n      hash: (0, bufferutils_1.cloneBuffer)(input.hash),\n      index: input.index,\n      sequence: input.sequence,\n    }));\n  }\n  get txOutputs() {\n    return this.__CACHE.__TX.outs.map(output => {\n      let address;\n      try {\n        address = (0, address_1.fromOutputScript)(\n          output.script,\n          this.opts.network,\n        );\n      } catch (_) {}\n      return {\n        script: (0, bufferutils_1.cloneBuffer)(output.script),\n        value: output.value,\n        address,\n      };\n    });\n  }\n  combine(...those) {\n    this.data.combine(...those.map(o => o.data));\n    return this;\n  }\n  clone() {\n    // TODO: more efficient cloning\n    const res = Psbt.fromBuffer(this.data.toBuffer());\n    res.opts = JSON.parse(JSON.stringify(this.opts));\n    return res;\n  }\n  setMaximumFeeRate(satoshiPerByte) {\n    check32Bit(satoshiPerByte); // 42.9 BTC per byte IS excessive... so throw\n    this.opts.maximumFeeRate = satoshiPerByte;\n  }\n  setVersion(version) {\n    check32Bit(version);\n    checkInputsForPartialSig(this.data.inputs, 'setVersion');\n    const c = this.__CACHE;\n    c.__TX.version = version;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setLocktime(locktime) {\n    check32Bit(locktime);\n    checkInputsForPartialSig(this.data.inputs, 'setLocktime');\n    const c = this.__CACHE;\n    c.__TX.locktime = locktime;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setInputSequence(inputIndex, sequence) {\n    check32Bit(sequence);\n    checkInputsForPartialSig(this.data.inputs, 'setInputSequence');\n    const c = this.__CACHE;\n    if (c.__TX.ins.length <= inputIndex) {\n      throw new Error('Input index too high');\n    }\n    c.__TX.ins[inputIndex].sequence = sequence;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addInputs(inputDatas) {\n    inputDatas.forEach(inputData => this.addInput(inputData));\n    return this;\n  }\n  addInput(inputData) {\n    if (\n      arguments.length > 1 ||\n      !inputData ||\n      inputData.hash === undefined ||\n      inputData.index === undefined\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addInput. ` +\n          `Requires single object with at least [hash] and [index]`,\n      );\n    }\n    (0, bip371_1.checkTaprootInputFields)(inputData, inputData, 'addInput');\n    checkInputsForPartialSig(this.data.inputs, 'addInput');\n    if (inputData.witnessScript) checkInvalidP2WSH(inputData.witnessScript);\n    const c = this.__CACHE;\n    this.data.addInput(inputData);\n    const txIn = c.__TX.ins[c.__TX.ins.length - 1];\n    checkTxInputCache(c, txIn);\n    const inputIndex = this.data.inputs.length - 1;\n    const input = this.data.inputs[inputIndex];\n    if (input.nonWitnessUtxo) {\n      addNonWitnessTxCache(this.__CACHE, input, inputIndex);\n    }\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addOutputs(outputDatas) {\n    outputDatas.forEach(outputData => this.addOutput(outputData));\n    return this;\n  }\n  addOutput(outputData) {\n    if (\n      arguments.length > 1 ||\n      !outputData ||\n      outputData.value === undefined ||\n      (outputData.address === undefined && outputData.script === undefined)\n    ) {\n      throw new Error(\n        `Invalid arguments for Psbt.addOutput. ` +\n          `Requires single object with at least [script or address] and [value]`,\n      );\n    }\n    checkInputsForPartialSig(this.data.inputs, 'addOutput');\n    const { address } = outputData;\n    if (typeof address === 'string') {\n      const { network } = this.opts;\n      const script = (0, address_1.toOutputScript)(address, network);\n      outputData = Object.assign({}, outputData, { script });\n    }\n    (0, bip371_1.checkTaprootOutputFields)(outputData, outputData, 'addOutput');\n    const c = this.__CACHE;\n    this.data.addOutput(outputData);\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  extractTransaction(disableFeeCheck) {\n    if (!this.data.inputs.every(isFinalized)) throw new Error('Not finalized');\n    const c = this.__CACHE;\n    if (!disableFeeCheck) {\n      checkFees(this, c, this.opts);\n    }\n    if (c.__EXTRACTED_TX) return c.__EXTRACTED_TX;\n    const tx = c.__TX.clone();\n    inputFinalizeGetAmts(this.data.inputs, tx, c, true);\n    return tx;\n  }\n  getFeeRate() {\n    return getTxCacheValue(\n      '__FEE_RATE',\n      'fee rate',\n      this.data.inputs,\n      this.__CACHE,\n    );\n  }\n  getFee() {\n    return getTxCacheValue('__FEE', 'fee', this.data.inputs, this.__CACHE);\n  }\n  finalizeAllInputs() {\n    (0, utils_1.checkForInput)(this.data.inputs, 0); // making sure we have at least one\n    range(this.data.inputs.length).forEach(idx => this.finalizeInput(idx));\n    return this;\n  }\n  finalizeInput(inputIndex, finalScriptsFunc) {\n    const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n    if ((0, bip371_1.isTaprootInput)(input))\n      return this._finalizeTaprootInput(\n        inputIndex,\n        input,\n        undefined,\n        finalScriptsFunc,\n      );\n    return this._finalizeInput(inputIndex, input, finalScriptsFunc);\n  }\n  finalizeTaprootInput(\n    inputIndex,\n    tapLeafHashToFinalize,\n    finalScriptsFunc = bip371_1.tapScriptFinalizer,\n  ) {\n    const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n    if ((0, bip371_1.isTaprootInput)(input))\n      return this._finalizeTaprootInput(\n        inputIndex,\n        input,\n        tapLeafHashToFinalize,\n        finalScriptsFunc,\n      );\n    throw new Error(`Cannot finalize input #${inputIndex}. Not Taproot.`);\n  }\n  _finalizeInput(inputIndex, input, finalScriptsFunc = getFinalScripts) {\n    const { script, isP2SH, isP2WSH, isSegwit } = getScriptFromInput(\n      inputIndex,\n      input,\n      this.__CACHE,\n    );\n    if (!script) throw new Error(`No script found for input #${inputIndex}`);\n    checkPartialSigSighashes(input);\n    const { finalScriptSig, finalScriptWitness } = finalScriptsFunc(\n      inputIndex,\n      input,\n      script,\n      isSegwit,\n      isP2SH,\n      isP2WSH,\n    );\n    if (finalScriptSig) this.data.updateInput(inputIndex, { finalScriptSig });\n    if (finalScriptWitness)\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    if (!finalScriptSig && !finalScriptWitness)\n      throw new Error(`Unknown error finalizing input #${inputIndex}`);\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  _finalizeTaprootInput(\n    inputIndex,\n    input,\n    tapLeafHashToFinalize,\n    finalScriptsFunc = bip371_1.tapScriptFinalizer,\n  ) {\n    if (!input.witnessUtxo)\n      throw new Error(\n        `Cannot finalize input #${inputIndex}. Missing withness utxo.`,\n      );\n    // Check key spend first. Increased privacy and reduced block space.\n    if (input.tapKeySig) {\n      const payment = payments.p2tr({\n        output: input.witnessUtxo.script,\n        signature: input.tapKeySig,\n      });\n      const finalScriptWitness = (0, psbtutils_1.witnessStackToScriptWitness)(\n        payment.witness,\n      );\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    } else {\n      const { finalScriptWitness } = finalScriptsFunc(\n        inputIndex,\n        input,\n        tapLeafHashToFinalize,\n      );\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    }\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  getInputType(inputIndex) {\n    const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n    const script = getScriptFromUtxo(inputIndex, input, this.__CACHE);\n    const result = getMeaningfulScript(\n      script,\n      inputIndex,\n      'input',\n      input.redeemScript || redeemFromFinalScriptSig(input.finalScriptSig),\n      input.witnessScript ||\n        redeemFromFinalWitnessScript(input.finalScriptWitness),\n    );\n    const type = result.type === 'raw' ? '' : result.type + '-';\n    const mainType = classifyScript(result.meaningfulScript);\n    return type + mainType;\n  }\n  inputHasPubkey(inputIndex, pubkey) {\n    const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n    return pubkeyInInput(pubkey, input, inputIndex, this.__CACHE);\n  }\n  inputHasHDKey(inputIndex, root) {\n    const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!input.bip32Derivation && input.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  outputHasPubkey(outputIndex, pubkey) {\n    const output = (0, utils_1.checkForOutput)(this.data.outputs, outputIndex);\n    return pubkeyInOutput(pubkey, output, outputIndex, this.__CACHE);\n  }\n  outputHasHDKey(outputIndex, root) {\n    const output = (0, utils_1.checkForOutput)(this.data.outputs, outputIndex);\n    const derivationIsMine = bip32DerivationIsMine(root);\n    return (\n      !!output.bip32Derivation && output.bip32Derivation.some(derivationIsMine)\n    );\n  }\n  validateSignaturesOfAllInputs(validator) {\n    (0, utils_1.checkForInput)(this.data.inputs, 0); // making sure we have at least one\n    const results = range(this.data.inputs.length).map(idx =>\n      this.validateSignaturesOfInput(idx, validator),\n    );\n    return results.reduce((final, res) => res === true && final, true);\n  }\n  validateSignaturesOfInput(inputIndex, validator, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    if ((0, bip371_1.isTaprootInput)(input))\n      return this.validateSignaturesOfTaprootInput(\n        inputIndex,\n        validator,\n        pubkey,\n      );\n    return this._validateSignaturesOfInput(inputIndex, validator, pubkey);\n  }\n  _validateSignaturesOfInput(inputIndex, validator, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const partialSig = (input || {}).partialSig;\n    if (!input || !partialSig || partialSig.length < 1)\n      throw new Error('No signatures to validate');\n    if (typeof validator !== 'function')\n      throw new Error('Need validator function to validate signatures');\n    const mySigs = pubkey\n      ? partialSig.filter(sig => sig.pubkey.equals(pubkey))\n      : partialSig;\n    if (mySigs.length < 1) throw new Error('No signatures for this pubkey');\n    const results = [];\n    let hashCache;\n    let scriptCache;\n    let sighashCache;\n    for (const pSig of mySigs) {\n      const sig = bscript.signature.decode(pSig.signature);\n      const { hash, script } =\n        sighashCache !== sig.hashType\n          ? getHashForSig(\n              inputIndex,\n              Object.assign({}, input, { sighashType: sig.hashType }),\n              this.__CACHE,\n              true,\n            )\n          : { hash: hashCache, script: scriptCache };\n      sighashCache = sig.hashType;\n      hashCache = hash;\n      scriptCache = script;\n      checkScriptForPubkey(pSig.pubkey, script, 'verify');\n      results.push(validator(pSig.pubkey, hash, sig.signature));\n    }\n    return results.every(res => res === true);\n  }\n  validateSignaturesOfTaprootInput(inputIndex, validator, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const tapKeySig = (input || {}).tapKeySig;\n    const tapScriptSig = (input || {}).tapScriptSig;\n    if (!input && !tapKeySig && !(tapScriptSig && !tapScriptSig.length))\n      throw new Error('No signatures to validate');\n    if (typeof validator !== 'function')\n      throw new Error('Need validator function to validate signatures');\n    pubkey = pubkey && (0, bip371_1.toXOnly)(pubkey);\n    const allHashses = pubkey\n      ? getTaprootHashesForSig(\n          inputIndex,\n          input,\n          this.data.inputs,\n          pubkey,\n          this.__CACHE,\n        )\n      : getAllTaprootHashesForSig(\n          inputIndex,\n          input,\n          this.data.inputs,\n          this.__CACHE,\n        );\n    if (!allHashses.length) throw new Error('No signatures for this pubkey');\n    const tapKeyHash = allHashses.find(h => !h.leafHash);\n    let validationResultCount = 0;\n    if (tapKeySig && tapKeyHash) {\n      const isValidTapkeySig = validator(\n        tapKeyHash.pubkey,\n        tapKeyHash.hash,\n        trimTaprootSig(tapKeySig),\n      );\n      if (!isValidTapkeySig) return false;\n      validationResultCount++;\n    }\n    if (tapScriptSig) {\n      for (const tapSig of tapScriptSig) {\n        const tapSigHash = allHashses.find(h => tapSig.pubkey.equals(h.pubkey));\n        if (tapSigHash) {\n          const isValidTapScriptSig = validator(\n            tapSig.pubkey,\n            tapSigHash.hash,\n            trimTaprootSig(tapSig.signature),\n          );\n          if (!isValidTapScriptSig) return false;\n          validationResultCount++;\n        }\n      }\n    }\n    return validationResultCount > 0;\n  }\n  signAllInputsHD(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInputHD(i, hdKeyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsHDAsync(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const results = [];\n      const promises = [];\n      for (const i of range(this.data.inputs.length)) {\n        promises.push(\n          this.signInputHDAsync(i, hdKeyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInputHD(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n    signers.forEach(signer => this.signInput(inputIndex, signer, sighashTypes));\n    return this;\n  }\n  signInputHDAsync(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n      const promises = signers.map(signer =>\n        this.signInputAsync(inputIndex, signer, sighashTypes),\n      );\n      return Promise.all(promises)\n        .then(() => {\n          resolve();\n        })\n        .catch(reject);\n    });\n  }\n  signAllInputs(keyPair, sighashTypes) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    // TODO: Add a pubkey/pubkeyhash cache to each input\n    // as input information is added, then eventually\n    // optimize this method.\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInput(i, keyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsAsync(keyPair, sighashTypes) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      // TODO: Add a pubkey/pubkeyhash cache to each input\n      // as input information is added, then eventually\n      // optimize this method.\n      const results = [];\n      const promises = [];\n      for (const [i] of this.data.inputs.entries()) {\n        promises.push(\n          this.signInputAsync(i, keyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInput(inputIndex, keyPair, sighashTypes) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n    if ((0, bip371_1.isTaprootInput)(input)) {\n      return this._signTaprootInput(\n        inputIndex,\n        input,\n        keyPair,\n        undefined,\n        sighashTypes,\n      );\n    }\n    return this._signInput(inputIndex, keyPair, sighashTypes);\n  }\n  signTaprootInput(inputIndex, keyPair, tapLeafHashToSign, sighashTypes) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n    if ((0, bip371_1.isTaprootInput)(input))\n      return this._signTaprootInput(\n        inputIndex,\n        input,\n        keyPair,\n        tapLeafHashToSign,\n        sighashTypes,\n      );\n    throw new Error(`Input #${inputIndex} is not of type Taproot.`);\n  }\n  _signInput(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    const partialSig = [\n      {\n        pubkey: keyPair.publicKey,\n        signature: bscript.signature.encode(keyPair.sign(hash), sighashType),\n      },\n    ];\n    this.data.updateInput(inputIndex, { partialSig });\n    return this;\n  }\n  _signTaprootInput(\n    inputIndex,\n    input,\n    keyPair,\n    tapLeafHashToSign,\n    allowedSighashTypes = [transaction_1.Transaction.SIGHASH_DEFAULT],\n  ) {\n    const hashesForSig = this.checkTaprootHashesForSig(\n      inputIndex,\n      input,\n      keyPair,\n      tapLeafHashToSign,\n      allowedSighashTypes,\n    );\n    const tapKeySig = hashesForSig\n      .filter(h => !h.leafHash)\n      .map(h =>\n        (0, bip371_1.serializeTaprootSignature)(\n          keyPair.signSchnorr(h.hash),\n          input.sighashType,\n        ),\n      )[0];\n    const tapScriptSig = hashesForSig\n      .filter(h => !!h.leafHash)\n      .map(h => ({\n        pubkey: (0, bip371_1.toXOnly)(keyPair.publicKey),\n        signature: (0, bip371_1.serializeTaprootSignature)(\n          keyPair.signSchnorr(h.hash),\n          input.sighashType,\n        ),\n        leafHash: h.leafHash,\n      }));\n    if (tapKeySig) {\n      this.data.updateInput(inputIndex, { tapKeySig });\n    }\n    if (tapScriptSig.length) {\n      this.data.updateInput(inputIndex, { tapScriptSig });\n    }\n    return this;\n  }\n  signInputAsync(inputIndex, keyPair, sighashTypes) {\n    return Promise.resolve().then(() => {\n      if (!keyPair || !keyPair.publicKey)\n        throw new Error('Need Signer to sign input');\n      const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n      if ((0, bip371_1.isTaprootInput)(input))\n        return this._signTaprootInputAsync(\n          inputIndex,\n          input,\n          keyPair,\n          undefined,\n          sighashTypes,\n        );\n      return this._signInputAsync(inputIndex, keyPair, sighashTypes);\n    });\n  }\n  signTaprootInputAsync(inputIndex, keyPair, tapLeafHash, sighashTypes) {\n    return Promise.resolve().then(() => {\n      if (!keyPair || !keyPair.publicKey)\n        throw new Error('Need Signer to sign input');\n      const input = (0, utils_1.checkForInput)(this.data.inputs, inputIndex);\n      if ((0, bip371_1.isTaprootInput)(input))\n        return this._signTaprootInputAsync(\n          inputIndex,\n          input,\n          keyPair,\n          tapLeafHash,\n          sighashTypes,\n        );\n      throw new Error(`Input #${inputIndex} is not of type Taproot.`);\n    });\n  }\n  _signInputAsync(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    return Promise.resolve(keyPair.sign(hash)).then(signature => {\n      const partialSig = [\n        {\n          pubkey: keyPair.publicKey,\n          signature: bscript.signature.encode(signature, sighashType),\n        },\n      ];\n      this.data.updateInput(inputIndex, { partialSig });\n    });\n  }\n  async _signTaprootInputAsync(\n    inputIndex,\n    input,\n    keyPair,\n    tapLeafHash,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_DEFAULT],\n  ) {\n    const hashesForSig = this.checkTaprootHashesForSig(\n      inputIndex,\n      input,\n      keyPair,\n      tapLeafHash,\n      sighashTypes,\n    );\n    const signaturePromises = [];\n    const tapKeyHash = hashesForSig.filter(h => !h.leafHash)[0];\n    if (tapKeyHash) {\n      const tapKeySigPromise = Promise.resolve(\n        keyPair.signSchnorr(tapKeyHash.hash),\n      ).then(sig => {\n        return {\n          tapKeySig: (0, bip371_1.serializeTaprootSignature)(\n            sig,\n            input.sighashType,\n          ),\n        };\n      });\n      signaturePromises.push(tapKeySigPromise);\n    }\n    const tapScriptHashes = hashesForSig.filter(h => !!h.leafHash);\n    if (tapScriptHashes.length) {\n      const tapScriptSigPromises = tapScriptHashes.map(tsh => {\n        return Promise.resolve(keyPair.signSchnorr(tsh.hash)).then(\n          signature => {\n            const tapScriptSig = [\n              {\n                pubkey: (0, bip371_1.toXOnly)(keyPair.publicKey),\n                signature: (0, bip371_1.serializeTaprootSignature)(\n                  signature,\n                  input.sighashType,\n                ),\n                leafHash: tsh.leafHash,\n              },\n            ];\n            return { tapScriptSig };\n          },\n        );\n      });\n      signaturePromises.push(...tapScriptSigPromises);\n    }\n    return Promise.all(signaturePromises).then(results => {\n      results.forEach(v => this.data.updateInput(inputIndex, v));\n    });\n  }\n  checkTaprootHashesForSig(\n    inputIndex,\n    input,\n    keyPair,\n    tapLeafHashToSign,\n    allowedSighashTypes,\n  ) {\n    if (typeof keyPair.signSchnorr !== 'function')\n      throw new Error(\n        `Need Schnorr Signer to sign taproot input #${inputIndex}.`,\n      );\n    const hashesForSig = getTaprootHashesForSig(\n      inputIndex,\n      input,\n      this.data.inputs,\n      keyPair.publicKey,\n      this.__CACHE,\n      tapLeafHashToSign,\n      allowedSighashTypes,\n    );\n    if (!hashesForSig || !hashesForSig.length)\n      throw new Error(\n        `Can not sign for input #${inputIndex} with the key ${keyPair.publicKey.toString(\n          'hex',\n        )}`,\n      );\n    return hashesForSig;\n  }\n  toBuffer() {\n    checkCache(this.__CACHE);\n    return this.data.toBuffer();\n  }\n  toHex() {\n    checkCache(this.__CACHE);\n    return this.data.toHex();\n  }\n  toBase64() {\n    checkCache(this.__CACHE);\n    return this.data.toBase64();\n  }\n  updateGlobal(updateData) {\n    this.data.updateGlobal(updateData);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    if (updateData.witnessScript) checkInvalidP2WSH(updateData.witnessScript);\n    (0, bip371_1.checkTaprootInputFields)(\n      this.data.inputs[inputIndex],\n      updateData,\n      'updateInput',\n    );\n    this.data.updateInput(inputIndex, updateData);\n    if (updateData.nonWitnessUtxo) {\n      addNonWitnessTxCache(\n        this.__CACHE,\n        this.data.inputs[inputIndex],\n        inputIndex,\n      );\n    }\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    const outputData = this.data.outputs[outputIndex];\n    (0, bip371_1.checkTaprootOutputFields)(\n      outputData,\n      updateData,\n      'updateOutput',\n    );\n    this.data.updateOutput(outputIndex, updateData);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    this.data.addUnknownKeyValToGlobal(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    this.data.addUnknownKeyValToInput(inputIndex, keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    this.data.addUnknownKeyValToOutput(outputIndex, keyVal);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n}\nexports.Psbt = Psbt;\n/**\n * This function is needed to pass to the bip174 base class's fromBuffer.\n * It takes the \"transaction buffer\" portion of the psbt buffer and returns a\n * Transaction (From the bip174 library) interface.\n */\nconst transactionFromBuffer = buffer => new PsbtTransaction(buffer);\n/**\n * This class implements the Transaction interface from bip174 library.\n * It contains a bitcoinjs-lib Transaction object.\n */\nclass PsbtTransaction {\n  constructor(buffer = Buffer.from([2, 0, 0, 0, 0, 0, 0, 0, 0, 0])) {\n    this.tx = transaction_1.Transaction.fromBuffer(buffer);\n    checkTxEmpty(this.tx);\n    Object.defineProperty(this, 'tx', {\n      enumerable: false,\n      writable: true,\n    });\n  }\n  getInputOutputCounts() {\n    return {\n      inputCount: this.tx.ins.length,\n      outputCount: this.tx.outs.length,\n    };\n  }\n  addInput(input) {\n    if (\n      input.hash === undefined ||\n      input.index === undefined ||\n      (!Buffer.isBuffer(input.hash) && typeof input.hash !== 'string') ||\n      typeof input.index !== 'number'\n    ) {\n      throw new Error('Error adding input.');\n    }\n    const hash =\n      typeof input.hash === 'string'\n        ? (0, bufferutils_1.reverseBuffer)(Buffer.from(input.hash, 'hex'))\n        : input.hash;\n    this.tx.addInput(hash, input.index, input.sequence);\n  }\n  addOutput(output) {\n    if (\n      output.script === undefined ||\n      output.value === undefined ||\n      !Buffer.isBuffer(output.script) ||\n      typeof output.value !== 'number'\n    ) {\n      throw new Error('Error adding output.');\n    }\n    this.tx.addOutput(output.script, output.value);\n  }\n  toBuffer() {\n    return this.tx.toBuffer();\n  }\n}\nfunction canFinalize(input, script, scriptType) {\n  switch (scriptType) {\n    case 'pubkey':\n    case 'pubkeyhash':\n    case 'witnesspubkeyhash':\n      return hasSigs(1, input.partialSig);\n    case 'multisig':\n      const p2ms = payments.p2ms({ output: script });\n      return hasSigs(p2ms.m, input.partialSig, p2ms.pubkeys);\n    default:\n      return false;\n  }\n}\nfunction checkCache(cache) {\n  if (cache.__UNSAFE_SIGN_NONSEGWIT !== false) {\n    throw new Error('Not BIP174 compliant, can not export');\n  }\n}\nfunction hasSigs(neededSigs, partialSig, pubkeys) {\n  if (!partialSig) return false;\n  let sigs;\n  if (pubkeys) {\n    sigs = pubkeys\n      .map(pkey => {\n        const pubkey = compressPubkey(pkey);\n        return partialSig.find(pSig => pSig.pubkey.equals(pubkey));\n      })\n      .filter(v => !!v);\n  } else {\n    sigs = partialSig;\n  }\n  if (sigs.length > neededSigs) throw new Error('Too many signatures');\n  return sigs.length === neededSigs;\n}\nfunction isFinalized(input) {\n  return !!input.finalScriptSig || !!input.finalScriptWitness;\n}\nfunction bip32DerivationIsMine(root) {\n  return d => {\n    if (!d.masterFingerprint.equals(root.fingerprint)) return false;\n    if (!root.derivePath(d.path).publicKey.equals(d.pubkey)) return false;\n    return true;\n  };\n}\nfunction check32Bit(num) {\n  if (\n    typeof num !== 'number' ||\n    num !== Math.floor(num) ||\n    num > 0xffffffff ||\n    num < 0\n  ) {\n    throw new Error('Invalid 32 bit integer');\n  }\n}\nfunction checkFees(psbt, cache, opts) {\n  const feeRate = cache.__FEE_RATE || psbt.getFeeRate();\n  const vsize = cache.__EXTRACTED_TX.virtualSize();\n  const satoshis = feeRate * vsize;\n  if (feeRate >= opts.maximumFeeRate) {\n    throw new Error(\n      `Warning: You are paying around ${(satoshis / 1e8).toFixed(8)} in ` +\n        `fees, which is ${feeRate} satoshi per byte for a transaction ` +\n        `with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per ` +\n        `byte). Use setMaximumFeeRate method to raise your threshold, or ` +\n        `pass true to the first arg of extractTransaction.`,\n    );\n  }\n}\nfunction checkInputsForPartialSig(inputs, action) {\n  inputs.forEach(input => {\n    const throws = (0, bip371_1.isTaprootInput)(input)\n      ? (0, bip371_1.checkTaprootInputForSigs)(input, action)\n      : (0, psbtutils_1.checkInputForSig)(input, action);\n    if (throws)\n      throw new Error('Can not modify transaction, signatures exist.');\n  });\n}\nfunction checkPartialSigSighashes(input) {\n  if (!input.sighashType || !input.partialSig) return;\n  const { partialSig, sighashType } = input;\n  partialSig.forEach(pSig => {\n    const { hashType } = bscript.signature.decode(pSig.signature);\n    if (sighashType !== hashType) {\n      throw new Error('Signature sighash does not match input sighash type');\n    }\n  });\n}\nfunction checkScriptForPubkey(pubkey, script, action) {\n  if (!(0, psbtutils_1.pubkeyInScript)(pubkey, script)) {\n    throw new Error(\n      `Can not ${action} for this input with the key ${pubkey.toString('hex')}`,\n    );\n  }\n}\nfunction checkTxEmpty(tx) {\n  const isEmpty = tx.ins.every(\n    input =>\n      input.script &&\n      input.script.length === 0 &&\n      input.witness &&\n      input.witness.length === 0,\n  );\n  if (!isEmpty) {\n    throw new Error('Format Error: Transaction ScriptSigs are not empty');\n  }\n}\nfunction checkTxForDupeIns(tx, cache) {\n  tx.ins.forEach(input => {\n    checkTxInputCache(cache, input);\n  });\n}\nfunction checkTxInputCache(cache, input) {\n  const key =\n    (0, bufferutils_1.reverseBuffer)(Buffer.from(input.hash)).toString('hex') +\n    ':' +\n    input.index;\n  if (cache.__TX_IN_CACHE[key]) throw new Error('Duplicate input detected.');\n  cache.__TX_IN_CACHE[key] = 1;\n}\nfunction scriptCheckerFactory(payment, paymentScriptName) {\n  return (inputIndex, scriptPubKey, redeemScript, ioType) => {\n    const redeemScriptOutput = payment({\n      redeem: { output: redeemScript },\n    }).output;\n    if (!scriptPubKey.equals(redeemScriptOutput)) {\n      throw new Error(\n        `${paymentScriptName} for ${ioType} #${inputIndex} doesn't match the scriptPubKey in the prevout`,\n      );\n    }\n  };\n}\nconst checkRedeemScript = scriptCheckerFactory(payments.p2sh, 'Redeem script');\nconst checkWitnessScript = scriptCheckerFactory(\n  payments.p2wsh,\n  'Witness script',\n);\nfunction getTxCacheValue(key, name, inputs, c) {\n  if (!inputs.every(isFinalized))\n    throw new Error(`PSBT must be finalized to calculate ${name}`);\n  if (key === '__FEE_RATE' && c.__FEE_RATE) return c.__FEE_RATE;\n  if (key === '__FEE' && c.__FEE) return c.__FEE;\n  let tx;\n  let mustFinalize = true;\n  if (c.__EXTRACTED_TX) {\n    tx = c.__EXTRACTED_TX;\n    mustFinalize = false;\n  } else {\n    tx = c.__TX.clone();\n  }\n  inputFinalizeGetAmts(inputs, tx, c, mustFinalize);\n  if (key === '__FEE_RATE') return c.__FEE_RATE;\n  else if (key === '__FEE') return c.__FEE;\n}\nfunction getFinalScripts(inputIndex, input, script, isSegwit, isP2SH, isP2WSH) {\n  const scriptType = classifyScript(script);\n  if (!canFinalize(input, script, scriptType))\n    throw new Error(`Can not finalize input #${inputIndex}`);\n  return prepareFinalScripts(\n    script,\n    scriptType,\n    input.partialSig,\n    isSegwit,\n    isP2SH,\n    isP2WSH,\n  );\n}\nfunction prepareFinalScripts(\n  script,\n  scriptType,\n  partialSig,\n  isSegwit,\n  isP2SH,\n  isP2WSH,\n) {\n  let finalScriptSig;\n  let finalScriptWitness;\n  // Wow, the payments API is very handy\n  const payment = getPayment(script, scriptType, partialSig);\n  const p2wsh = !isP2WSH ? null : payments.p2wsh({ redeem: payment });\n  const p2sh = !isP2SH ? null : payments.p2sh({ redeem: p2wsh || payment });\n  if (isSegwit) {\n    if (p2wsh) {\n      finalScriptWitness = (0, psbtutils_1.witnessStackToScriptWitness)(\n        p2wsh.witness,\n      );\n    } else {\n      finalScriptWitness = (0, psbtutils_1.witnessStackToScriptWitness)(\n        payment.witness,\n      );\n    }\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    }\n  } else {\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    } else {\n      finalScriptSig = payment.input;\n    }\n  }\n  return {\n    finalScriptSig,\n    finalScriptWitness,\n  };\n}\nfunction getHashAndSighashType(\n  inputs,\n  inputIndex,\n  pubkey,\n  cache,\n  sighashTypes,\n) {\n  const input = (0, utils_1.checkForInput)(inputs, inputIndex);\n  const { hash, sighashType, script } = getHashForSig(\n    inputIndex,\n    input,\n    cache,\n    false,\n    sighashTypes,\n  );\n  checkScriptForPubkey(pubkey, script, 'sign');\n  return {\n    hash,\n    sighashType,\n  };\n}\nfunction getHashForSig(inputIndex, input, cache, forValidate, sighashTypes) {\n  const unsignedTx = cache.__TX;\n  const sighashType =\n    input.sighashType || transaction_1.Transaction.SIGHASH_ALL;\n  checkSighashTypeAllowed(sighashType, sighashTypes);\n  let hash;\n  let prevout;\n  if (input.nonWitnessUtxo) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const prevoutHash = unsignedTx.ins[inputIndex].hash;\n    const utxoHash = nonWitnessUtxoTx.getHash();\n    // If a non-witness UTXO is provided, its hash must match the hash specified in the prevout\n    if (!prevoutHash.equals(utxoHash)) {\n      throw new Error(\n        `Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`,\n      );\n    }\n    const prevoutIndex = unsignedTx.ins[inputIndex].index;\n    prevout = nonWitnessUtxoTx.outs[prevoutIndex];\n  } else if (input.witnessUtxo) {\n    prevout = input.witnessUtxo;\n  } else {\n    throw new Error('Need a Utxo input item for signing');\n  }\n  const { meaningfulScript, type } = getMeaningfulScript(\n    prevout.script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  if (['p2sh-p2wsh', 'p2wsh'].indexOf(type) >= 0) {\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      meaningfulScript,\n      prevout.value,\n      sighashType,\n    );\n  } else if ((0, psbtutils_1.isP2WPKH)(meaningfulScript)) {\n    // P2WPKH uses the P2PKH template for prevoutScript when signing\n    const signingScript = payments.p2pkh({\n      hash: meaningfulScript.slice(2),\n    }).output;\n    hash = unsignedTx.hashForWitnessV0(\n      inputIndex,\n      signingScript,\n      prevout.value,\n      sighashType,\n    );\n  } else {\n    // non-segwit\n    if (\n      input.nonWitnessUtxo === undefined &&\n      cache.__UNSAFE_SIGN_NONSEGWIT === false\n    )\n      throw new Error(\n        `Input #${inputIndex} has witnessUtxo but non-segwit script: ` +\n          `${meaningfulScript.toString('hex')}`,\n      );\n    if (!forValidate && cache.__UNSAFE_SIGN_NONSEGWIT !== false)\n      console.warn(\n        'Warning: Signing non-segwit inputs without the full parent transaction ' +\n          'means there is a chance that a miner could feed you incorrect information ' +\n          \"to trick you into paying large fees. This behavior is the same as Psbt's predecessor \" +\n          '(TransactionBuilder - now removed) when signing non-segwit scripts. You are not ' +\n          'able to export this Psbt with toBuffer|toBase64|toHex since it is not ' +\n          'BIP174 compliant.\\n*********************\\nPROCEED WITH CAUTION!\\n' +\n          '*********************',\n      );\n    hash = unsignedTx.hashForSignature(\n      inputIndex,\n      meaningfulScript,\n      sighashType,\n    );\n  }\n  return {\n    script: meaningfulScript,\n    sighashType,\n    hash,\n  };\n}\nfunction getAllTaprootHashesForSig(inputIndex, input, inputs, cache) {\n  const allPublicKeys = [];\n  if (input.tapInternalKey) {\n    const key = getPrevoutTaprootKey(inputIndex, input, cache);\n    if (key) {\n      allPublicKeys.push(key);\n    }\n  }\n  if (input.tapScriptSig) {\n    const tapScriptPubkeys = input.tapScriptSig.map(tss => tss.pubkey);\n    allPublicKeys.push(...tapScriptPubkeys);\n  }\n  const allHashes = allPublicKeys.map(pubicKey =>\n    getTaprootHashesForSig(inputIndex, input, inputs, pubicKey, cache),\n  );\n  return allHashes.flat();\n}\nfunction getPrevoutTaprootKey(inputIndex, input, cache) {\n  const { script } = getScriptAndAmountFromUtxo(inputIndex, input, cache);\n  return (0, psbtutils_1.isP2TR)(script) ? script.subarray(2, 34) : null;\n}\nfunction trimTaprootSig(signature) {\n  return signature.length === 64 ? signature : signature.subarray(0, 64);\n}\nfunction getTaprootHashesForSig(\n  inputIndex,\n  input,\n  inputs,\n  pubkey,\n  cache,\n  tapLeafHashToSign,\n  allowedSighashTypes,\n) {\n  const unsignedTx = cache.__TX;\n  const sighashType =\n    input.sighashType || transaction_1.Transaction.SIGHASH_DEFAULT;\n  checkSighashTypeAllowed(sighashType, allowedSighashTypes);\n  const prevOuts = inputs.map((i, index) =>\n    getScriptAndAmountFromUtxo(index, i, cache),\n  );\n  const signingScripts = prevOuts.map(o => o.script);\n  const values = prevOuts.map(o => o.value);\n  const hashes = [];\n  if (input.tapInternalKey && !tapLeafHashToSign) {\n    const outputKey =\n      getPrevoutTaprootKey(inputIndex, input, cache) || Buffer.from([]);\n    if ((0, bip371_1.toXOnly)(pubkey).equals(outputKey)) {\n      const tapKeyHash = unsignedTx.hashForWitnessV1(\n        inputIndex,\n        signingScripts,\n        values,\n        sighashType,\n      );\n      hashes.push({ pubkey, hash: tapKeyHash });\n    }\n  }\n  const tapLeafHashes = (input.tapLeafScript || [])\n    .filter(tapLeaf => (0, psbtutils_1.pubkeyInScript)(pubkey, tapLeaf.script))\n    .map(tapLeaf => {\n      const hash = (0, bip341_1.tapleafHash)({\n        output: tapLeaf.script,\n        version: tapLeaf.leafVersion,\n      });\n      return Object.assign({ hash }, tapLeaf);\n    })\n    .filter(\n      tapLeaf => !tapLeafHashToSign || tapLeafHashToSign.equals(tapLeaf.hash),\n    )\n    .map(tapLeaf => {\n      const tapScriptHash = unsignedTx.hashForWitnessV1(\n        inputIndex,\n        signingScripts,\n        values,\n        sighashType,\n        tapLeaf.hash,\n      );\n      return {\n        pubkey,\n        hash: tapScriptHash,\n        leafHash: tapLeaf.hash,\n      };\n    });\n  return hashes.concat(tapLeafHashes);\n}\nfunction checkSighashTypeAllowed(sighashType, sighashTypes) {\n  if (sighashTypes && sighashTypes.indexOf(sighashType) < 0) {\n    const str = sighashTypeToString(sighashType);\n    throw new Error(\n      `Sighash type is not allowed. Retry the sign method passing the ` +\n        `sighashTypes array of whitelisted types. Sighash type: ${str}`,\n    );\n  }\n}\nfunction getPayment(script, scriptType, partialSig) {\n  let payment;\n  switch (scriptType) {\n    case 'multisig':\n      const sigs = getSortedSigs(script, partialSig);\n      payment = payments.p2ms({\n        output: script,\n        signatures: sigs,\n      });\n      break;\n    case 'pubkey':\n      payment = payments.p2pk({\n        output: script,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'pubkeyhash':\n      payment = payments.p2pkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'witnesspubkeyhash':\n      payment = payments.p2wpkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n  }\n  return payment;\n}\nfunction getScriptFromInput(inputIndex, input, cache) {\n  const unsignedTx = cache.__TX;\n  const res = {\n    script: null,\n    isSegwit: false,\n    isP2SH: false,\n    isP2WSH: false,\n  };\n  res.isP2SH = !!input.redeemScript;\n  res.isP2WSH = !!input.witnessScript;\n  if (input.witnessScript) {\n    res.script = input.witnessScript;\n  } else if (input.redeemScript) {\n    res.script = input.redeemScript;\n  } else {\n    if (input.nonWitnessUtxo) {\n      const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n        cache,\n        input,\n        inputIndex,\n      );\n      const prevoutIndex = unsignedTx.ins[inputIndex].index;\n      res.script = nonWitnessUtxoTx.outs[prevoutIndex].script;\n    } else if (input.witnessUtxo) {\n      res.script = input.witnessUtxo.script;\n    }\n  }\n  if (input.witnessScript || (0, psbtutils_1.isP2WPKH)(res.script)) {\n    res.isSegwit = true;\n  }\n  return res;\n}\nfunction getSignersFromHD(inputIndex, inputs, hdKeyPair) {\n  const input = (0, utils_1.checkForInput)(inputs, inputIndex);\n  if (!input.bip32Derivation || input.bip32Derivation.length === 0) {\n    throw new Error('Need bip32Derivation to sign with HD');\n  }\n  const myDerivations = input.bip32Derivation\n    .map(bipDv => {\n      if (bipDv.masterFingerprint.equals(hdKeyPair.fingerprint)) {\n        return bipDv;\n      } else {\n        return;\n      }\n    })\n    .filter(v => !!v);\n  if (myDerivations.length === 0) {\n    throw new Error(\n      'Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint',\n    );\n  }\n  const signers = myDerivations.map(bipDv => {\n    const node = hdKeyPair.derivePath(bipDv.path);\n    if (!bipDv.pubkey.equals(node.publicKey)) {\n      throw new Error('pubkey did not match bip32Derivation');\n    }\n    return node;\n  });\n  return signers;\n}\nfunction getSortedSigs(script, partialSig) {\n  const p2ms = payments.p2ms({ output: script });\n  // for each pubkey in order of p2ms script\n  return p2ms.pubkeys\n    .map(pk => {\n      // filter partialSig array by pubkey being equal\n      return (\n        partialSig.filter(ps => {\n          return ps.pubkey.equals(pk);\n        })[0] || {}\n      ).signature;\n      // Any pubkey without a match will return undefined\n      // this last filter removes all the undefined items in the array.\n    })\n    .filter(v => !!v);\n}\nfunction scriptWitnessToWitnessStack(buffer) {\n  let offset = 0;\n  function readSlice(n) {\n    offset += n;\n    return buffer.slice(offset - n, offset);\n  }\n  function readVarInt() {\n    const vi = varuint.decode(buffer, offset);\n    offset += varuint.decode.bytes;\n    return vi;\n  }\n  function readVarSlice() {\n    return readSlice(readVarInt());\n  }\n  function readVector() {\n    const count = readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(readVarSlice());\n    return vector;\n  }\n  return readVector();\n}\nfunction sighashTypeToString(sighashType) {\n  let text =\n    sighashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY\n      ? 'SIGHASH_ANYONECANPAY | '\n      : '';\n  const sigMod = sighashType & 0x1f;\n  switch (sigMod) {\n    case transaction_1.Transaction.SIGHASH_ALL:\n      text += 'SIGHASH_ALL';\n      break;\n    case transaction_1.Transaction.SIGHASH_SINGLE:\n      text += 'SIGHASH_SINGLE';\n      break;\n    case transaction_1.Transaction.SIGHASH_NONE:\n      text += 'SIGHASH_NONE';\n      break;\n  }\n  return text;\n}\nfunction addNonWitnessTxCache(cache, input, inputIndex) {\n  cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex] = input.nonWitnessUtxo;\n  const tx = transaction_1.Transaction.fromBuffer(input.nonWitnessUtxo);\n  cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex] = tx;\n  const self = cache;\n  const selfIndex = inputIndex;\n  delete input.nonWitnessUtxo;\n  Object.defineProperty(input, 'nonWitnessUtxo', {\n    enumerable: true,\n    get() {\n      const buf = self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex];\n      const txCache = self.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];\n      if (buf !== undefined) {\n        return buf;\n      } else {\n        const newBuf = txCache.toBuffer();\n        self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = newBuf;\n        return newBuf;\n      }\n    },\n    set(data) {\n      self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = data;\n    },\n  });\n}\nfunction inputFinalizeGetAmts(inputs, tx, cache, mustFinalize) {\n  let inputAmount = 0;\n  inputs.forEach((input, idx) => {\n    if (mustFinalize && input.finalScriptSig)\n      tx.ins[idx].script = input.finalScriptSig;\n    if (mustFinalize && input.finalScriptWitness) {\n      tx.ins[idx].witness = scriptWitnessToWitnessStack(\n        input.finalScriptWitness,\n      );\n    }\n    if (input.witnessUtxo) {\n      inputAmount += input.witnessUtxo.value;\n    } else if (input.nonWitnessUtxo) {\n      const nwTx = nonWitnessUtxoTxFromCache(cache, input, idx);\n      const vout = tx.ins[idx].index;\n      const out = nwTx.outs[vout];\n      inputAmount += out.value;\n    }\n  });\n  const outputAmount = tx.outs.reduce((total, o) => total + o.value, 0);\n  const fee = inputAmount - outputAmount;\n  if (fee < 0) {\n    throw new Error('Outputs are spending more than Inputs');\n  }\n  const bytes = tx.virtualSize();\n  cache.__FEE = fee;\n  cache.__EXTRACTED_TX = tx;\n  cache.__FEE_RATE = Math.floor(fee / bytes);\n}\nfunction nonWitnessUtxoTxFromCache(cache, input, inputIndex) {\n  const c = cache.__NON_WITNESS_UTXO_TX_CACHE;\n  if (!c[inputIndex]) {\n    addNonWitnessTxCache(cache, input, inputIndex);\n  }\n  return c[inputIndex];\n}\nfunction getScriptFromUtxo(inputIndex, input, cache) {\n  const { script } = getScriptAndAmountFromUtxo(inputIndex, input, cache);\n  return script;\n}\nfunction getScriptAndAmountFromUtxo(inputIndex, input, cache) {\n  if (input.witnessUtxo !== undefined) {\n    return {\n      script: input.witnessUtxo.script,\n      value: input.witnessUtxo.value,\n    };\n  } else if (input.nonWitnessUtxo !== undefined) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const o = nonWitnessUtxoTx.outs[cache.__TX.ins[inputIndex].index];\n    return { script: o.script, value: o.value };\n  } else {\n    throw new Error(\"Can't find pubkey in input without Utxo data\");\n  }\n}\nfunction pubkeyInInput(pubkey, input, inputIndex, cache) {\n  const script = getScriptFromUtxo(inputIndex, input, cache);\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    inputIndex,\n    'input',\n    input.redeemScript,\n    input.witnessScript,\n  );\n  return (0, psbtutils_1.pubkeyInScript)(pubkey, meaningfulScript);\n}\nfunction pubkeyInOutput(pubkey, output, outputIndex, cache) {\n  const script = cache.__TX.outs[outputIndex].script;\n  const { meaningfulScript } = getMeaningfulScript(\n    script,\n    outputIndex,\n    'output',\n    output.redeemScript,\n    output.witnessScript,\n  );\n  return (0, psbtutils_1.pubkeyInScript)(pubkey, meaningfulScript);\n}\nfunction redeemFromFinalScriptSig(finalScript) {\n  if (!finalScript) return;\n  const decomp = bscript.decompile(finalScript);\n  if (!decomp) return;\n  const lastItem = decomp[decomp.length - 1];\n  if (\n    !Buffer.isBuffer(lastItem) ||\n    isPubkeyLike(lastItem) ||\n    isSigLike(lastItem)\n  )\n    return;\n  const sDecomp = bscript.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction redeemFromFinalWitnessScript(finalScript) {\n  if (!finalScript) return;\n  const decomp = scriptWitnessToWitnessStack(finalScript);\n  const lastItem = decomp[decomp.length - 1];\n  if (isPubkeyLike(lastItem)) return;\n  const sDecomp = bscript.decompile(lastItem);\n  if (!sDecomp) return;\n  return lastItem;\n}\nfunction compressPubkey(pubkey) {\n  if (pubkey.length === 65) {\n    const parity = pubkey[64] & 1;\n    const newKey = pubkey.slice(0, 33);\n    newKey[0] = 2 | parity;\n    return newKey;\n  }\n  return pubkey.slice();\n}\nfunction isPubkeyLike(buf) {\n  return buf.length === 33 && bscript.isCanonicalPubKey(buf);\n}\nfunction isSigLike(buf) {\n  return bscript.isCanonicalScriptSignature(buf);\n}\nfunction getMeaningfulScript(\n  script,\n  index,\n  ioType,\n  redeemScript,\n  witnessScript,\n) {\n  const isP2SH = (0, psbtutils_1.isP2SHScript)(script);\n  const isP2SHP2WSH =\n    isP2SH && redeemScript && (0, psbtutils_1.isP2WSHScript)(redeemScript);\n  const isP2WSH = (0, psbtutils_1.isP2WSHScript)(script);\n  if (isP2SH && redeemScript === undefined)\n    throw new Error('scriptPubkey is P2SH but redeemScript missing');\n  if ((isP2WSH || isP2SHP2WSH) && witnessScript === undefined)\n    throw new Error(\n      'scriptPubkey or redeemScript is P2WSH but witnessScript missing',\n    );\n  let meaningfulScript;\n  if (isP2SHP2WSH) {\n    meaningfulScript = witnessScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n    checkWitnessScript(index, redeemScript, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2WSH) {\n    meaningfulScript = witnessScript;\n    checkWitnessScript(index, script, witnessScript, ioType);\n    checkInvalidP2WSH(meaningfulScript);\n  } else if (isP2SH) {\n    meaningfulScript = redeemScript;\n    checkRedeemScript(index, script, redeemScript, ioType);\n  } else {\n    meaningfulScript = script;\n  }\n  return {\n    meaningfulScript,\n    type: isP2SHP2WSH\n      ? 'p2sh-p2wsh'\n      : isP2SH\n      ? 'p2sh'\n      : isP2WSH\n      ? 'p2wsh'\n      : 'raw',\n  };\n}\nfunction checkInvalidP2WSH(script) {\n  if (\n    (0, psbtutils_1.isP2WPKH)(script) ||\n    (0, psbtutils_1.isP2SHScript)(script)\n  ) {\n    throw new Error('P2WPKH or P2SH can not be contained within P2WSH');\n  }\n}\nfunction classifyScript(script) {\n  if ((0, psbtutils_1.isP2WPKH)(script)) return 'witnesspubkeyhash';\n  if ((0, psbtutils_1.isP2PKH)(script)) return 'pubkeyhash';\n  if ((0, psbtutils_1.isP2MS)(script)) return 'multisig';\n  if ((0, psbtutils_1.isP2PK)(script)) return 'pubkey';\n  return 'nonstandard';\n}\nfunction range(n) {\n  return [...Array(n).keys()];\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.initEccLib =\n  exports.Transaction =\n  exports.opcodes =\n  exports.Psbt =\n  exports.Block =\n  exports.script =\n  exports.payments =\n  exports.networks =\n  exports.crypto =\n  exports.address =\n    void 0;\nconst address = require('./address');\nexports.address = address;\nconst crypto = require('./crypto');\nexports.crypto = crypto;\nconst networks = require('./networks');\nexports.networks = networks;\nconst payments = require('./payments');\nexports.payments = payments;\nconst script = require('./script');\nexports.script = script;\nvar block_1 = require('./block');\nObject.defineProperty(exports, 'Block', {\n  enumerable: true,\n  get: function () {\n    return block_1.Block;\n  },\n});\nvar psbt_1 = require('./psbt');\nObject.defineProperty(exports, 'Psbt', {\n  enumerable: true,\n  get: function () {\n    return psbt_1.Psbt;\n  },\n});\n/** @hidden */\nvar ops_1 = require('./ops');\nObject.defineProperty(exports, 'opcodes', {\n  enumerable: true,\n  get: function () {\n    return ops_1.OPS;\n  },\n});\nvar transaction_1 = require('./transaction');\nObject.defineProperty(exports, 'Transaction', {\n  enumerable: true,\n  get: function () {\n    return transaction_1.Transaction;\n  },\n});\nvar ecc_lib_1 = require('./ecc_lib');\nObject.defineProperty(exports, 'initEccLib', {\n  enumerable: true,\n  get: function () {\n    return ecc_lib_1.initEccLib;\n  },\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEsploraClient = exports.REGTEST_ESPLORA_BASE_PATH = exports.TESTNET_ESPLORA_BASE_PATH = exports.MAINNET_ESPLORA_BASE_PATH = void 0;\nexports.MAINNET_ESPLORA_BASE_PATH = \"https://btc-mainnet.gobob.xyz\";\nexports.TESTNET_ESPLORA_BASE_PATH = \"https://btc-testnet.gobob.xyz\";\nexports.REGTEST_ESPLORA_BASE_PATH = \"http://localhost:3003\";\nfunction encodeEsploraMerkleProof(merkle) {\n    return merkle.map(item => Buffer.from(item, \"hex\").reverse().toString(\"hex\")).join('');\n}\nclass DefaultEsploraClient {\n    constructor(networkOrUrl = \"mainnet\") {\n        switch (networkOrUrl) {\n            case \"mainnet\":\n                this.basePath = exports.MAINNET_ESPLORA_BASE_PATH;\n                break;\n            case \"testnet\":\n                this.basePath = exports.TESTNET_ESPLORA_BASE_PATH;\n                break;\n            case \"regtest\":\n                this.basePath = exports.REGTEST_ESPLORA_BASE_PATH;\n                break;\n            default:\n                this.basePath = networkOrUrl;\n        }\n    }\n    async getLatestHeight() {\n        return parseInt(await this.getText(`${this.basePath}/blocks/tip/height`), 10);\n    }\n    async getBlock(blockHash) {\n        return this.getJson(`${this.basePath}/block/${blockHash}`);\n    }\n    async getBlockHash(height) {\n        return this.getText(`${this.basePath}/block-height/${height}`);\n    }\n    async getBlockHeader(hash) {\n        return this.getText(`${this.basePath}/block/${hash}/header`);\n    }\n    async getBlockHeaderAt(height) {\n        const blockHash = await this.getBlockHash(height);\n        return await this.getBlockHeader(blockHash);\n    }\n    async getTransaction(txId) {\n        return this.getJson(`${this.basePath}/tx/${txId}`);\n    }\n    async getTransactionHex(txId) {\n        return this.getText(`${this.basePath}/tx/${txId}/hex`);\n    }\n    async getMerkleProof(txId) {\n        const response = await this.getJson(`${this.basePath}/tx/${txId}/merkle-proof`);\n        return {\n            blockHeight: response.block_height,\n            merkle: encodeEsploraMerkleProof(response.merkle),\n            pos: response.pos,\n        };\n    }\n    async getFeeEstimate(confirmationTarget) {\n        const response = await this.getJson(`${this.basePath}/fee-estimates`);\n        return response[confirmationTarget];\n    }\n    async getAddressUtxos(address, confirmed) {\n        const response = await this.getJson(`${this.basePath}/address/${address}/utxo`);\n        return response\n            .filter(utxo => (typeof confirmed !== \"undefined\") ? confirmed === utxo.status.confirmed : true)\n            .map(utxo => {\n            return {\n                txid: utxo.txid,\n                vout: utxo.vout,\n                value: utxo.value,\n                confirmed: utxo.status.confirmed,\n                height: utxo.status.block_height\n            };\n        });\n    }\n    async broadcastTx(txHex) {\n        const res = await fetch(`${this.basePath}/tx`, {\n            method: 'POST',\n            body: txHex\n        });\n        return await res.text();\n    }\n    async getJson(url) {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(response.statusText);\n        }\n        return await response.json();\n    }\n    async getText(url) {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(response.statusText);\n        }\n        return await response.text();\n    }\n}\nexports.DefaultEsploraClient = DefaultEsploraClient;\n//# sourceMappingURL=esplora.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encodeRawInput = encodeRawInput;\nexports.encodeRawOutput = encodeRawOutput;\nexports.encodeRawWitness = encodeRawWitness;\nexports.getMerkleProof = getMerkleProof;\nexports.estimateTxFee = estimateTxFee;\nconst bufferutils_1 = require(\"bitcoinjs-lib/src/bufferutils\");\nconst crypto_1 = require(\"bitcoinjs-lib/src/crypto\");\nconst bitcoin = __importStar(require(\"bitcoinjs-lib\"));\nfunction varSliceSize(someScript) {\n    const length = someScript.length;\n    return bufferutils_1.varuint.encodingLength(length) + length;\n}\nfunction encodeRawInput(tx) {\n    const inputSize = bufferutils_1.varuint.encodingLength(tx.ins.length) + tx.ins.reduce((sum, input) => {\n        return sum + 40 + varSliceSize(input.script);\n    }, 0);\n    const inputBuffer = Buffer.allocUnsafe(inputSize);\n    const inputBufferWriter = new bufferutils_1.BufferWriter(inputBuffer, 0);\n    inputBufferWriter.writeVarInt(tx.ins.length);\n    tx.ins.forEach(txIn => {\n        inputBufferWriter.writeSlice(txIn.hash);\n        inputBufferWriter.writeUInt32(txIn.index);\n        inputBufferWriter.writeVarSlice(txIn.script);\n        inputBufferWriter.writeUInt32(txIn.sequence);\n    });\n    return inputBuffer;\n}\nfunction isOutput(out) {\n    return out.value !== undefined;\n}\nfunction encodeRawOutput(tx) {\n    const outputSize = bufferutils_1.varuint.encodingLength(tx.outs.length) + tx.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n    }, 0);\n    const outputBuffer = Buffer.allocUnsafe(outputSize);\n    const outputBufferWriter = new bufferutils_1.BufferWriter(outputBuffer, 0);\n    outputBufferWriter.writeVarInt(tx.outs.length);\n    tx.outs.forEach(txOut => {\n        if (isOutput(txOut)) {\n            outputBufferWriter.writeUInt64(txOut.value);\n        }\n        else {\n            outputBufferWriter.writeSlice(txOut.valueBuffer);\n        }\n        outputBufferWriter.writeVarSlice(txOut.script);\n    });\n    return outputBuffer;\n}\nfunction vectorSize(someVector) {\n    const length = someVector.length;\n    return (bufferutils_1.varuint.encodingLength(length) +\n        someVector.reduce((sum, witness) => {\n            return sum + varSliceSize(witness);\n        }, 0));\n}\nfunction encodeRawWitness(tx) {\n    const witnessSize = tx.ins.reduce((sum, input) => {\n        return sum + vectorSize(input.witness);\n    }, 0);\n    const witnessBuffer = Buffer.allocUnsafe(witnessSize);\n    const witnessBufferWriter = new bufferutils_1.BufferWriter(witnessBuffer, 0);\n    tx.ins.forEach(input => {\n        witnessBufferWriter.writeVector(input.witness);\n    });\n    return witnessBuffer;\n}\nfunction chunkArray(array, chunkSize) {\n    const chunkedArray = [];\n    let index = 0;\n    while (index < array.length) {\n        chunkedArray.push(array.slice(index, index + chunkSize));\n        index += chunkSize;\n    }\n    return chunkedArray;\n}\nfunction createMerkleBranchAndRoot(hashes, index) {\n    let merkle = [];\n    while (hashes.length > 1) {\n        if (hashes.length % 2 != 0) {\n            let last = hashes[hashes.length - 1];\n            hashes.push(last);\n        }\n        if (index % 2 == 0) {\n            index++;\n        }\n        else {\n            index--;\n        }\n        merkle.push(hashes[index]);\n        index = Math.floor(index / 2);\n        hashes = chunkArray(hashes, 2).map(pair => (0, crypto_1.hash256)(Buffer.concat([pair[0], pair[1]])));\n    }\n    return {\n        merkle,\n        root: hashes[0],\n    };\n}\nfunction getMerkleProof(block, txHash, forWitness) {\n    const txIds = block.transactions.map(tx => tx.getHash(forWitness));\n    const pos = txIds.map(value => value.toString(\"hex\")).indexOf(txHash);\n    const merkleAndRoot = createMerkleBranchAndRoot(txIds, pos);\n    return {\n        pos: pos,\n        proof: merkleAndRoot.merkle.map(value => value.toString(\"hex\")).join(''),\n        root: merkleAndRoot.root.toString(\"hex\"),\n    };\n}\nfunction estimateTxFee(feeRate, numInputs = 1) {\n    const tx = new bitcoin.Transaction();\n    for (let i = 0; i < numInputs; i++) {\n        tx.addInput(Buffer.alloc(32, 0), 0, 0xfffffffd, Buffer.alloc(0));\n    }\n    tx.ins.map(tx_input => (tx_input.witness = [Buffer.alloc(33 + 32 + 7, 0), Buffer.alloc(33, 0)]));\n    tx.addOutput(Buffer.alloc(22, 0), 1000);\n    tx.addOutput(Buffer.alloc(22, 0), 1000);\n    tx.addOutput(bitcoin.script.compile([bitcoin.opcodes.OP_RETURN, Buffer.alloc(20, 0)]), 0);\n    const vsize = tx.virtualSize();\n    const satoshis = feeRate * vsize;\n    return satoshis;\n}\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBitcoinTxInfo = getBitcoinTxInfo;\nexports.getBitcoinTxProof = getBitcoinTxProof;\nexports.getBitcoinHeaders = getBitcoinHeaders;\nconst bitcoinjs_lib_1 = require(\"bitcoinjs-lib\");\nconst utils_1 = require(\"./utils\");\nasync function getBitcoinTxInfo(esploraClient, txId, forWitness) {\n    const txHex = await esploraClient.getTransactionHex(txId);\n    const tx = bitcoinjs_lib_1.Transaction.fromHex(txHex);\n    const versionBuffer = Buffer.allocUnsafe(4);\n    versionBuffer.writeInt32LE(tx.version);\n    const locktimeBuffer = Buffer.allocUnsafe(4);\n    locktimeBuffer.writeInt32LE(tx.locktime);\n    return {\n        version: versionBuffer.toString(\"hex\"),\n        inputVector: (0, utils_1.encodeRawInput)(tx).toString(\"hex\"),\n        outputVector: (0, utils_1.encodeRawOutput)(tx).toString(\"hex\"),\n        locktime: locktimeBuffer.toString(\"hex\"),\n        witnessVector: forWitness ? (0, utils_1.encodeRawWitness)(tx).toString(\"hex\") : undefined,\n        witnessVector: forWitness ? (0, utils_1.encodeRawWitness)(tx).toString(\"hex\") : undefined,\n    };\n}\nasync function getBitcoinTxProof(esploraClient, txId, txProofDifficultyFactor) {\n    const merkleProof = await esploraClient.getMerkleProof(txId);\n    const bitcoinHeaders = await getBitcoinHeaders(esploraClient, merkleProof.blockHeight, txProofDifficultyFactor);\n    return {\n        merkleProof: merkleProof.merkle,\n        txIndexInBlock: merkleProof.pos,\n        bitcoinHeaders: bitcoinHeaders,\n    };\n}\nasync function getBitcoinHeaders(esploraClient, startHeight, numBlocks) {\n    const range = (start, end) => Array.from({ length: end - start }, (_element, index) => index + start);\n    const blockHeights = range(startHeight, startHeight + numBlocks);\n    const bitcoinHeaders = await Promise.all(blockHeights.map(async (height) => {\n        const hash = await esploraClient.getBlockHash(height);\n        return esploraClient.getBlockHeader(hash);\n    }));\n    return bitcoinHeaders.join('');\n}\n//# sourceMappingURL=relay.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DummySigner = void 0;\nclass DummySigner {\n    constructor(publicKey) {\n        this.publicKey = publicKey;\n    }\n    sign(_hash, _lowR) {\n        return Buffer.alloc(64, 0);\n    }\n    signSchnorr(hash) {\n        return Buffer.alloc(64, 0);\n    }\n}\nexports.DummySigner = DummySigner;\n;\n//# sourceMappingURL=signer.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createCommitTxData = createCommitTxData;\nconst bitcoin = __importStar(require(\"bitcoinjs-lib\"));\nfunction toXOnly(pubkey) {\n    return pubkey.subarray(1, 33);\n}\nfunction createCommitTxData(network, publicKey, inscription) {\n    const xOnlyPublicKey = toXOnly(publicKey);\n    const script = inscription.toScript(xOnlyPublicKey);\n    const outputScript = bitcoin.script.compile(script);\n    const scriptTree = {\n        output: outputScript,\n        redeemVersion: 192,\n    };\n    const scriptTaproot = bitcoin.payments.p2tr({\n        internalPubkey: xOnlyPublicKey,\n        scriptTree,\n        redeem: scriptTree,\n        network,\n    });\n    const cblock = scriptTaproot.witness?.[scriptTaproot.witness.length - 1];\n    const tapLeafScript = {\n        leafVersion: scriptTaproot.redeemVersion,\n        script: outputScript,\n        controlBlock: cblock,\n    };\n    return {\n        scriptTaproot,\n        tapLeafScript,\n    };\n}\n//# sourceMappingURL=commit.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.customFinalizer = void 0;\nexports.createRevealTx = createRevealTx;\nexports.signRevealTx = signRevealTx;\nconst bitcoin = __importStar(require(\"bitcoinjs-lib\"));\nconst psbtUtils = __importStar(require(\"bitcoinjs-lib/src/psbt/psbtutils\"));\nconst { witnessStackToScriptWitness } = psbtUtils;\nfunction createRevealTx(network, commitTxData, commitTxResult, toAddress, amount) {\n    const { scriptTaproot, tapLeafScript } = commitTxData;\n    const psbt = new bitcoin.Psbt({ network });\n    psbt.addInput({\n        hash: commitTxResult.tx.getId(),\n        index: commitTxResult.outputIndex,\n        witnessUtxo: {\n            value: commitTxResult.outputAmount,\n            script: scriptTaproot.output,\n        },\n        nonWitnessUtxo: commitTxResult.tx.toBuffer(),\n        tapLeafScript: [tapLeafScript],\n    });\n    psbt.addOutput({\n        value: amount,\n        address: toAddress,\n    });\n    return psbt;\n}\nconst customFinalizer = (commitTxData) => {\n    const { tapLeafScript } = commitTxData;\n    return (inputIndex, input) => {\n        const witness = [input.tapScriptSig[inputIndex].signature]\n            .concat(tapLeafScript.script)\n            .concat(tapLeafScript.controlBlock);\n        return {\n            finalScriptWitness: witnessStackToScriptWitness(witness),\n        };\n    };\n};\nexports.customFinalizer = customFinalizer;\nasync function signRevealTx(signer, commitTxData, psbt) {\n    psbt = await signer.signInput(0, psbt);\n    psbt.finalizeInput(0, (0, exports.customFinalizer)(commitTxData));\n    return psbt.extractTransaction();\n}\n//# sourceMappingURL=reveal.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inscribeData = inscribeData;\nconst bitcoin = __importStar(require(\"bitcoinjs-lib\"));\nconst signer_1 = require(\"./signer\");\nconst commit_1 = require(\"./commit\");\nconst reveal_1 = require(\"./reveal\");\nfunction estimateTxSize(network, publicKey, commitTxData, toAddress, amount) {\n    const psbt = new bitcoin.Psbt({ network });\n    const { scriptTaproot, tapLeafScript } = commitTxData;\n    psbt.addInput({\n        hash: Buffer.alloc(32, 0),\n        index: 0,\n        witnessUtxo: {\n            value: amount,\n            script: scriptTaproot.output,\n        },\n        tapLeafScript: [tapLeafScript],\n    });\n    psbt.addOutput({\n        value: amount,\n        address: toAddress,\n    });\n    psbt.signInput(0, new signer_1.DummySigner(publicKey));\n    psbt.finalizeInput(0, (0, reveal_1.customFinalizer)(commitTxData));\n    const tx = psbt.extractTransaction();\n    return tx.virtualSize();\n}\nasync function inscribeData(signer, toAddress, feeRate, inscription, postage = 10000) {\n    const bitcoinNetwork = await signer.getNetwork();\n    const publicKey = Buffer.from(await signer.getPublicKey(), \"hex\");\n    const commitTxData = (0, commit_1.createCommitTxData)(bitcoinNetwork, publicKey, inscription);\n    const revealTxSize = estimateTxSize(bitcoinNetwork, publicKey, commitTxData, toAddress, postage);\n    const revealFee = revealTxSize * feeRate;\n    const commitTxAmount = revealFee + postage;\n    const commitAddress = commitTxData.scriptTaproot.address;\n    const commitTxId = await signer.sendToAddress(commitAddress, commitTxAmount);\n    const commitTx = await signer.getTransaction(commitTxId);\n    const scriptPubKey = bitcoin.address.toOutputScript(commitAddress, bitcoinNetwork);\n    const commitUtxoIndex = commitTx.outs.findIndex(out => out.script.equals(scriptPubKey));\n    const commitTxResult = {\n        tx: commitTx,\n        outputIndex: commitUtxoIndex,\n        outputAmount: commitTxAmount,\n    };\n    const revealPsbt = (0, reveal_1.createRevealTx)(bitcoinNetwork, commitTxData, commitTxResult, toAddress, postage);\n    const revealTx = await (0, reveal_1.signRevealTx)(signer, commitTxData, revealPsbt);\n    return revealTx;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultOrdinalsClient = exports.SatPoint = exports.OutPoint = exports.InscriptionId = exports.TESTNET_ORD_BASE_PATH = exports.MAINNET_ORD_BASE_PATH = exports.REGTEST_ORD_BASE_PATH = void 0;\nexports.REGTEST_ORD_BASE_PATH = \"http://0.0.0.0:3003\";\nexports.MAINNET_ORD_BASE_PATH = \"https://ordinals-mainnet.gobob.xyz\";\nexports.TESTNET_ORD_BASE_PATH = \"https://ordinals-testnet.gobob.xyz\";\nvar InscriptionId;\n(function (InscriptionId) {\n    function toString(id) {\n        return `${id.txid}i${id.index}`;\n    }\n    InscriptionId.toString = toString;\n    function fromString(id) {\n        const [txid, index] = id.split(\"i\");\n        return {\n            txid,\n            index: parseInt(index, 10),\n        };\n    }\n    InscriptionId.fromString = fromString;\n})(InscriptionId || (exports.InscriptionId = InscriptionId = {}));\nvar OutPoint;\n(function (OutPoint) {\n    function toString(id) {\n        return `${id.txid}:${id.vout}`;\n    }\n    OutPoint.toString = toString;\n    function fromString(id) {\n        const [txid, vout] = id.split(\":\");\n        return {\n            txid,\n            vout: parseInt(vout, 10),\n        };\n    }\n    OutPoint.fromString = fromString;\n})(OutPoint || (exports.OutPoint = OutPoint = {}));\nvar SatPoint;\n(function (SatPoint) {\n    function toString(id) {\n        return `${OutPoint.toString(id.outpoint)}:${id.offset}`;\n    }\n    SatPoint.toString = toString;\n    function fromString(id) {\n        const [txid, vout, offset] = id.split(\":\");\n        return {\n            outpoint: {\n                txid,\n                vout: parseInt(vout, 10),\n            },\n            offset: parseInt(offset, 10),\n        };\n    }\n    SatPoint.fromString = fromString;\n})(SatPoint || (exports.SatPoint = SatPoint = {}));\nclass DefaultOrdinalsClient {\n    constructor(networkOrUrl = \"mainnet\") {\n        switch (networkOrUrl) {\n            case \"mainnet\":\n                this.basePath = exports.MAINNET_ORD_BASE_PATH;\n                break;\n            case \"testnet\":\n                this.basePath = exports.TESTNET_ORD_BASE_PATH;\n                break;\n            case \"regtest\":\n                this.basePath = exports.REGTEST_ORD_BASE_PATH;\n                break;\n            default:\n                this.basePath = networkOrUrl;\n        }\n    }\n    async getInscriptionFromId(id) {\n        console.log(`${this.basePath}/inscription/${InscriptionId.toString(id)}`);\n        const inscriptionJson = await this.getJson(`${this.basePath}/inscription/${InscriptionId.toString(id)}`);\n        return {\n            ...inscriptionJson,\n            children: inscriptionJson.children.map(InscriptionId.fromString),\n            id: InscriptionId.fromString(inscriptionJson.id),\n            next: (inscriptionJson.next != null) ? InscriptionId.fromString(inscriptionJson.next) : null,\n            parent: (inscriptionJson.parent != null) ? InscriptionId.fromString(inscriptionJson.parent) : null,\n            previous: (inscriptionJson.previous != null) ? InscriptionId.fromString(inscriptionJson.previous) : null,\n            satpoint: SatPoint.fromString(inscriptionJson.satpoint),\n        };\n    }\n    async getInscriptions() {\n        const inscriptionsJson = await this.getJson(`${this.basePath}/inscriptions`);\n        return this.parseInscriptionsJson(inscriptionsJson);\n    }\n    async getInscriptionsFromBlock(height) {\n        const inscriptionsJson = await this.getJson(`${this.basePath}/inscriptions/block/${height}`);\n        return this.parseInscriptionsJson(inscriptionsJson);\n    }\n    async getInscriptionsFromOutPoint(outPoint) {\n        return await this.getJson(`${this.basePath}/output/${OutPoint.toString(outPoint)}`);\n    }\n    async getInscriptionsFromSat(sat) {\n        const satJson = await this.getJson(`${this.basePath}/sat/${sat}`);\n        return {\n            ...satJson,\n            inscriptions: satJson.inscriptions.map(id => InscriptionId.fromString(id)),\n        };\n    }\n    async getInscriptionsFromStartBlock(startHeight) {\n        const inscriptionsJson = await this.getJson(`${this.basePath}/inscriptions/${startHeight}`);\n        return this.parseInscriptionsJson(inscriptionsJson);\n    }\n    async getJson(url) {\n        const response = await fetch(url, {\n            headers: {\n                'Accept': 'application/json',\n            },\n        });\n        if (!response.ok) {\n            throw new Error(response.statusText);\n        }\n        return await response.json();\n    }\n    parseInscriptionsJson(inscriptionsJson) {\n        const ids = inscriptionsJson.ids.map(id => InscriptionId.fromString(id));\n        return {\n            ...inscriptionsJson,\n            ids,\n        };\n    }\n}\nexports.DefaultOrdinalsClient = DefaultOrdinalsClient;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Inscription = exports.MAX_CHUNK_SIZE = exports.PROTOCOL_ID = void 0;\nexports.chunkContent = chunkContent;\nexports.parseInscriptions = parseInscriptions;\nexports.getTxInscriptions = getTxInscriptions;\nexports.getInscriptionFromId = getInscriptionFromId;\nconst bitcoin = __importStar(require(\"bitcoinjs-lib\"));\nconst ordinal_api_1 = require(\"./ordinal-api\");\nconst textEncoder = new TextEncoder();\nconst OP_INT_BASE = bitcoin.opcodes.OP_RESERVED;\nconst TAPROOT_ANNEX_PREFIX = 0x50;\nexports.PROTOCOL_ID = Buffer.from(\"6f7264\", \"hex\");\nconst CONTENT_TYPE_TAG = bitcoin.opcodes.OP_1;\nconst CONTENT_ENCODING_TAG = bitcoin.opcodes.OP_9;\nexports.MAX_CHUNK_SIZE = 520;\nfunction chunkContent(data) {\n    const body = [];\n    let start = 0;\n    while (start < data.length) {\n        body.push(data.subarray(start, start + exports.MAX_CHUNK_SIZE));\n        start += exports.MAX_CHUNK_SIZE;\n    }\n    return body;\n}\nfunction convertOpInt(value) {\n    if (value >= bitcoin.opcodes.OP_1 && value <= bitcoin.opcodes.OP_16) {\n        return value - OP_INT_BASE;\n    }\n    return value;\n}\nclass Inscription {\n    constructor(tags, body) {\n        this.tags = tags ?? new Map();\n        this.body = body;\n    }\n    getContentType() {\n        const data = this.tags[CONTENT_TYPE_TAG];\n        if (Buffer.isBuffer(data)) {\n            return data.toString(\"utf-8\");\n        }\n        return null;\n    }\n    getContentEncoding() {\n        const data = this.tags[CONTENT_ENCODING_TAG];\n        if (Buffer.isBuffer(data)) {\n            return data.toString(\"utf-8\");\n        }\n        return null;\n    }\n    setContentType(contentType) {\n        this.tags[CONTENT_TYPE_TAG] = Buffer.from(textEncoder.encode(contentType));\n    }\n    setContentEncoding(contentEncoding) {\n        this.tags[CONTENT_ENCODING_TAG] = Buffer.from(textEncoder.encode(contentEncoding));\n    }\n    getTags() {\n        const tags = this.tags;\n        return Object.keys(this.tags).map(function (key) {\n            return [convertOpInt(Number(key)), tags[key]];\n        });\n    }\n    toScript(xOnlyPublicKey) {\n        return [\n            xOnlyPublicKey,\n            bitcoin.opcodes.OP_CHECKSIG,\n            bitcoin.opcodes.OP_0,\n            bitcoin.opcodes.OP_IF,\n            exports.PROTOCOL_ID,\n            ...this.getTags().map(([key, value]) => [\n                1,\n                key,\n                value,\n            ]).flat(),\n            bitcoin.opcodes.OP_0,\n            ...chunkContent(this.body),\n            bitcoin.opcodes.OP_ENDIF,\n        ];\n    }\n}\nexports.Inscription = Inscription;\n(function (Inscription) {\n    function createTextInscription(text) {\n        return Inscription.createInscription(\"text/plain;charset=utf-8\", Buffer.from(textEncoder.encode(text)));\n    }\n    Inscription.createTextInscription = createTextInscription;\n    function createInscription(contentType, content) {\n        const inscription = new Inscription;\n        inscription.setContentType(contentType);\n        inscription.body = content;\n        return inscription;\n    }\n    Inscription.createInscription = createInscription;\n})(Inscription || (exports.Inscription = Inscription = {}));\nfunction getTapscript(witness) {\n    const len = witness.length;\n    const last = witness[len - 1];\n    if (typeof last === 'undefined') {\n        return null;\n    }\n    let scriptPosFromLast = 2;\n    if (len >= 2 && last[0] == TAPROOT_ANNEX_PREFIX) {\n        scriptPosFromLast = 3;\n    }\n    if (typeof witness[len - scriptPosFromLast] === 'undefined') {\n        return null;\n    }\n    return bitcoin.script.decompile(witness[len - scriptPosFromLast]);\n}\nfunction parseInscriptions(tx) {\n    let inscriptions = [];\n    for (const txInput of tx.ins) {\n        const tapscript = getTapscript(txInput.witness);\n        if (tapscript == null) {\n            continue;\n        }\n        const chunks = tapscript.values();\n        for (let chunk = chunks.next(); !chunk.done; chunk = chunks.next()) {\n            if (chunk.value != bitcoin.opcodes.OP_FALSE) {\n                continue;\n            }\n            if (chunks.next().value != bitcoin.opcodes.OP_IF) {\n                continue;\n            }\n            const data = chunks.next().value;\n            if (!Buffer.isBuffer(data) && !data.equals(exports.PROTOCOL_ID)) {\n                continue;\n            }\n            let tags = new Map();\n            let body = [];\n            let isBody = false;\n            for (let chunk = chunks.next(); !chunk.done; chunk = chunks.next()) {\n                if (chunk.value == bitcoin.opcodes.OP_ENDIF) {\n                    inscriptions.push(new Inscription(tags, Buffer.concat(body)));\n                    break;\n                }\n                else if (chunk.value == bitcoin.opcodes.OP_0) {\n                    isBody = true;\n                    continue;\n                }\n                if (!isBody) {\n                    const data = chunks.next().value;\n                    if (typeof chunk.value == 'number' && Buffer.isBuffer(data)) {\n                        tags[chunk.value] = data;\n                    }\n                }\n                else if (Buffer.isBuffer(chunk.value)) {\n                    body.push(chunk.value);\n                }\n            }\n        }\n    }\n    return inscriptions;\n}\nasync function getTxInscriptions(esploraClient, txid) {\n    const txHex = await esploraClient.getTransactionHex(txid);\n    const tx = bitcoin.Transaction.fromHex(txHex);\n    return parseInscriptions(tx);\n}\nasync function getInscriptionFromId(esploraClient, inscriptionId) {\n    const { txid, index } = ordinal_api_1.InscriptionId.fromString(inscriptionId);\n    const inscriptions = await getTxInscriptions(esploraClient, txid);\n    return inscriptions[index];\n}\n//# sourceMappingURL=inscription.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getInscriptionIds = getInscriptionIds;\nconst inscription_1 = require(\"./inscription\");\nconst ordinal_api_1 = require(\"./ordinal-api\");\nconst bitcoin = __importStar(require(\"bitcoinjs-lib\"));\nasync function getInscriptionIds(esploraClient, ordinalsClient, bitcoinAddress) {\n    const utxos = await esploraClient.getAddressUtxos(bitcoinAddress);\n    const inscriptionIds = await Promise.all(utxos.sort((a, b) => {\n        const heightA = a.height || Number.MAX_SAFE_INTEGER;\n        const heightB = b.height || Number.MAX_SAFE_INTEGER;\n        return heightA - heightB;\n    }).map(utxo => getInscriptionIdsForUtxo(esploraClient, ordinalsClient, utxo)));\n    return inscriptionIds.flat();\n}\nasync function getInscriptionIdsForUtxo(esploraClient, ordinalsClient, utxo) {\n    if (utxo.confirmed) {\n        const outputJson = await ordinalsClient.getInscriptionsFromOutPoint(utxo);\n        return outputJson.inscriptions;\n    }\n    const txHex = await esploraClient.getTransactionHex(utxo.txid);\n    const tx = bitcoin.Transaction.fromHex(txHex);\n    if (utxo.vout == 0) {\n        const parentInscriptions = await Promise.all(tx.ins.map(async (txInput) => {\n            const txid = txInput.hash.reverse().toString(\"hex\");\n            const outputJson = await ordinalsClient.getInscriptionsFromOutPoint({ txid, vout: txInput.index });\n            return outputJson.inscriptions;\n        }));\n        const inscriptionIds = parentInscriptions.flat();\n        if (inscriptionIds.length > 0) {\n            return inscriptionIds;\n        }\n    }\n    const inscriptions = (0, inscription_1.parseInscriptions)(tx);\n    if (utxo.vout != 0) {\n        return [];\n    }\n    else {\n        return inscriptions.map((_, index) => ordinal_api_1.InscriptionId.toString({ txid: utxo.txid, index }));\n    }\n}\n//# sourceMappingURL=helpers.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isValidBtcAddress = void 0;\nconst BTC_MAINNET_REGEX = /\\b([13][a-km-zA-HJ-NP-Z1-9]{25,34}|bc1[ac-hj-np-zAC-HJ-NP-Z02-9]{11,71})\\b/;\nconst BTC_TESTNET_REGEX = /\\b([2mn][a-km-zA-HJ-NP-Z1-9]{25,34}|tb1[ac-hj-np-zAC-HJ-NP-Z02-9]{11,71})\\b/;\nconst mainnetRegex = new RegExp(BTC_MAINNET_REGEX);\nconst testnetRegex = new RegExp(BTC_TESTNET_REGEX);\nconst isValidBtcAddress = (network, address) => {\n    switch (network) {\n        case 'mainnet':\n            return mainnetRegex.test(address);\n        case 'testnet':\n            return testnetRegex.test(address);\n        default:\n            throw new Error(`Invalid bitcoin network configured: ${network}. Valid values are: mainnet | testnet.`);\n    }\n};\nexports.isValidBtcAddress = isValidBtcAddress;\n//# sourceMappingURL=address.js.map","\"use strict\";\n/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bytes = exports.stringToBytes = exports.str = exports.bytesToString = exports.hex = exports.utf8 = exports.bech32m = exports.bech32 = exports.base58check = exports.createBase58check = exports.base58xmr = exports.base58xrp = exports.base58flickr = exports.base58 = exports.base64urlnopad = exports.base64url = exports.base64nopad = exports.base64 = exports.base32crockford = exports.base32hexnopad = exports.base32hex = exports.base32nopad = exports.base32 = exports.base16 = exports.utils = exports.assertNumber = void 0;\n// Utilities\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nexports.assertNumber = assertNumber;\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction chain(...args) {\n    const id = (a) => a;\n    // Wrap call in closure so JIT can inline calls\n    const wrap = (a, b) => (c) => a(b(c));\n    // Construct chain of args[-1].encode(args[-2].encode([...]))\n    const encode = args.map((x) => x.encode).reduceRight(wrap, id);\n    // Construct chain of args[0].decode(args[1].decode(...))\n    const decode = args.map((x) => x.decode).reduce(wrap, id);\n    return { encode, decode };\n}\n/**\n * Encodes integer radix representation to array of strings using alphabet and back\n * @__NO_SIDE_EFFECTS__\n */\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\n/**\n * Pad strings array so it has integer number of bits\n * @__NO_SIDE_EFFECTS__\n */\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\n/**\n * Slow: O(n^2) time complexity\n * @__NO_SIDE_EFFECTS__\n */\nfunction convertRadix(data, from, to) {\n    // base 1 is impossible\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            const rounded = Math.floor(digitBase / to);\n            digits[i] = rounded;\n            if (!Number.isSafeInteger(rounded) || rounded * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!rounded)\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = /* @__NO_SIDE_EFFECTS__ */ (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = /*@__NO_SIDE_EFFECTS__ */ (from, to) => from + (to - gcd(from, to));\n/**\n * Implemented with numbers, because BigInt is 5x slower\n * @__NO_SIDE_EFFECTS__\n */\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0; // bitwise position in current element\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1; // clean carry, otherwise it will cause overflow\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!isBytes(bytes))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of numbers');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\n/**\n * If both bases are power of same number (like `2**8 <-> 2**64`),\n * there is a linear algorithm. For now we have implementation for power-of-two bases only.\n * @__NO_SIDE_EFFECTS__\n */\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!isBytes(bytes))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of numbers');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!isBytes(data))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!isBytes(data))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\n// prettier-ignore\nexports.utils = {\n    alphabet, chain, checksum, convertRadix, convertRadix2, radix, radix2, join, padding,\n};\n// RFC 4648 aka RFC 3548\n// ---------------------\nexports.base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexports.base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexports.base32nopad = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), join(''));\nexports.base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexports.base32hexnopad = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), join(''));\nexports.base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexports.base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexports.base64nopad = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), join(''));\nexports.base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nexports.base64urlnopad = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), join(''));\n// base58 code\n// -----------\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexports.base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexports.base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexports.base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\n// xmr ver is done in 8-byte blocks (which equals 11 chars in decoding). Last (non-full) block padded with '1' to size in XMR_BLOCK_LEN.\n// Block encoding significantly reduces quadratic complexity of base58.\n// Data len (index) -> encoded block len\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexports.base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += exports.base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = exports.base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nconst createBase58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), exports.base58);\nexports.createBase58check = createBase58check;\n// legacy export, bad name\nexports.base58check = exports.createBase58check;\nconst BECH_ALPHABET = /* @__PURE__ */ chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\n/**\n * @__NO_SIDE_EFFECTS__\n */\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        if (prefix.length === 0)\n            throw new TypeError(`Invalid prefix length ${prefix.length}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        const lowered = prefix.toLowerCase();\n        const sum = bechChecksum(lowered, words, ENCODING_CONST);\n        return `${lowered}1${BECH_ALPHABET.encode(words)}${sum}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        // don't allow mixed case\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        const sepIndex = lowered.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = lowered.slice(0, sepIndex);\n        const data = lowered.slice(sepIndex + 1);\n        if (data.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(data).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!data.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexports.bech32 = genBech32('bech32');\nexports.bech32m = genBech32('bech32m');\nexports.utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexports.hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\n// prettier-ignore\nconst CODERS = {\n    utf8: exports.utf8, hex: exports.hex, base16: exports.base16, base32: exports.base32, base64: exports.base64, base64url: exports.base64url, base58: exports.base58, base58xmr: exports.base58xmr\n};\nconst coderTypeError = 'Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr';\nconst bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!isBytes(bytes))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexports.bytesToString = bytesToString;\nexports.str = exports.bytesToString; // as in python, but for bytes only\nconst stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexports.stringToBytes = stringToBytes;\nexports.bytes = exports.stringToBytes;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.constant = exports.magicBytes = exports.magic = exports.optional = exports.flagged = exports.flag = exports.lazy = exports.apply = exports.hex = exports.cstring = exports.string = exports.prefix = exports.bytes = exports.bool = exports.F64LE = exports.F64BE = exports.F32LE = exports.F32BE = exports.I8 = exports.U8 = exports.I16BE = exports.I16LE = exports.U16BE = exports.U16LE = exports.I32BE = exports.I32LE = exports.U32BE = exports.U32LE = exports.int = exports.I64BE = exports.I64LE = exports.U64BE = exports.U64LE = exports.I128BE = exports.I128LE = exports.U128BE = exports.U128LE = exports.I256BE = exports.I256LE = exports.U256BE = exports.U256LE = exports.bigint = exports.bits = exports.coders = exports.isCoder = exports.wrap = exports.validate = exports.utils = exports.NULL = exports.EMPTY = void 0;\nexports._TEST = exports.pointer = exports.padRight = exports.padLeft = exports.ZeroPad = exports.bitset = exports.mappedTag = exports.tag = exports.map = exports.array = exports.tuple = exports.struct = void 0;\nconst base_1 = require(\"@scure/base\");\n/**\n * Define complex binary structures using composable primitives.\n * Main ideas:\n * - Encode / decode can be chained, same as in `scure-base`\n * - A complex structure can be created from an array and struct of primitive types\n * - Strings / bytes are arrays with specific optimizations: we can just read bytes directly\n *   without creating plain array first and reading each byte separately.\n * - Types are inferred from definition\n * @module\n * @example\n * import * as P from 'micro-packed';\n * const s = P.struct({\n *   field1: P.U32BE, // 32-bit unsigned big-endian integer\n *   field2: P.string(P.U8), // String with U8 length prefix\n *   field3: P.bytes(32), // 32 bytes\n *   field4: P.array(P.U16BE, P.struct({ // Array of structs with U16BE length\n *     subField1: P.U64BE, // 64-bit unsigned big-endian integer\n *     subField2: P.string(10) // 10-byte string\n *   }))\n * });\n */\n// TODO: remove dependency on scure-base & inline?\n/*\nExports can be groupped like this:\n\n- Primitive types: P.bytes, P.string, P.hex, P.constant, P.pointer\n- Complex types: P.array, P.struct, P.tuple, P.map, P.tag, P.mappedTag\n- Padding, prefix, magic: P.padLeft, P.padRight, P.prefix, P.magic, P.magicBytes\n- Flags: P.flag, P.flagged, P.optional\n- Wrappers: P.apply, P.wrap, P.lazy\n- Bit fiddling: P.bits, P.bitset\n- utils: P.validate, coders.decimal\n- Debugger\n*/\n/**\n * Shortcut to zero-length (empty) byte array\n */\nexports.EMPTY = new Uint8Array();\n/**\n * Shortcut to one-element (element is 0) byte array\n */\nexports.NULL = new Uint8Array([0]);\n/**\n * Checks if two Uint8Arrays are equal. Not constant-time.\n */\nfunction equalBytes(a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (a[i] !== b[i])\n            return false;\n    return true;\n}\n/**\n * Checks if the given value is a Uint8Array.\n */\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\n/**\n * Concatenates multiple Uint8Arrays.\n * Engines limit functions to 65K+ arguments.\n * @param arrays Array of Uint8Array elements\n * @returns Concatenated Uint8Array\n */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        if (!isBytes(a))\n            throw new Error('Uint8Array expected');\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\n/**\n * Creates DataView from Uint8Array\n * @param arr - bytes\n * @returns DataView\n */\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n/**\n * Checks if the provided value is a plain object, not created from any class or special constructor.\n * Array, Uint8Array and others are not plain objects.\n * @param obj - The value to be checked.\n */\nfunction isPlainObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\nfunction isNum(num) {\n    return Number.isSafeInteger(num);\n}\nexports.utils = {\n    equalBytes,\n    isBytes,\n    isCoder,\n    checkBounds,\n    concatBytes,\n    createView,\n    isPlainObject,\n};\n// NOTE: we can't have terminator separate function, since it won't know about boundaries\n// E.g. array of U16LE ([1,2,3]) would be [1, 0, 2, 0, 3, 0]\n// But terminator will find array at index '1', which happens to be inside of an element itself\n/**\n * Can be:\n * - Dynamic (CoderType)\n * - Fixed (number)\n * - Terminated (usually zero): Uint8Array with terminator\n * - Field path to field with length (string)\n * - Infinity (null) - decodes until end of buffer\n * Used in:\n * - bytes (string, prefix is implementation of bytes)\n * - array\n */\nconst lengthCoder = (len) => {\n    if (len !== null && typeof len !== 'string' && !isCoder(len) && !isBytes(len) && !isNum(len)) {\n        throw new Error(`lengthCoder: expected null | number | Uint8Array | CoderType, got ${len} (${typeof len})`);\n    }\n    return {\n        encodeStream(w, value) {\n            if (len === null)\n                return;\n            if (isCoder(len))\n                return len.encodeStream(w, value);\n            let byteLen;\n            if (typeof len === 'number')\n                byteLen = len;\n            else if (typeof len === 'string')\n                byteLen = Path.resolve(w.stack, len);\n            if (typeof byteLen === 'bigint')\n                byteLen = Number(byteLen);\n            if (byteLen === undefined || byteLen !== value)\n                throw w.err(`Wrong length: ${byteLen} len=${len} exp=${value} (${typeof value})`);\n        },\n        decodeStream(r) {\n            let byteLen;\n            if (isCoder(len))\n                byteLen = Number(len.decodeStream(r));\n            else if (typeof len === 'number')\n                byteLen = len;\n            else if (typeof len === 'string')\n                byteLen = Path.resolve(r.stack, len);\n            if (typeof byteLen === 'bigint')\n                byteLen = Number(byteLen);\n            if (typeof byteLen !== 'number')\n                throw r.err(`Wrong length: ${byteLen}`);\n            return byteLen;\n        },\n    };\n};\n/**\n * Small bitset structure to store position of ranges that have been read.\n * Can be more efficient when internal trees are utilized at the cost of complexity.\n * Needs `O(N/8)` memory for parsing.\n * Purpose: if there are pointers in parsed structure,\n * they can cause read of two distinct ranges:\n * [0-32, 64-128], which means 'pos' is not enough to handle them\n */\nconst Bitset = {\n    BITS: 32,\n    FULL_MASK: -1 >>> 0, // 1<<32 will overflow\n    len: (len) => Math.ceil(len / 32),\n    create: (len) => new Uint32Array(Bitset.len(len)),\n    clean: (bs) => bs.fill(0),\n    debug: (bs) => Array.from(bs).map((i) => (i >>> 0).toString(2).padStart(32, '0')),\n    checkLen: (bs, len) => {\n        if (Bitset.len(len) === bs.length)\n            return;\n        throw new Error(`wrong length=${bs.length}. Expected: ${Bitset.len(len)}`);\n    },\n    chunkLen: (bsLen, pos, len) => {\n        if (pos < 0)\n            throw new Error(`wrong pos=${pos}`);\n        if (pos + len > bsLen)\n            throw new Error(`wrong range=${pos}/${len} of ${bsLen}`);\n    },\n    set: (bs, chunk, value, allowRewrite = true) => {\n        if (!allowRewrite && (bs[chunk] & value) !== 0)\n            return false;\n        bs[chunk] |= value;\n        return true;\n    },\n    pos: (pos, i) => ({\n        chunk: Math.floor((pos + i) / 32),\n        mask: 1 << (32 - ((pos + i) % 32) - 1),\n    }),\n    indices: (bs, len, invert = false) => {\n        Bitset.checkLen(bs, len);\n        const { FULL_MASK, BITS } = Bitset;\n        const left = BITS - (len % BITS);\n        const lastMask = left ? (FULL_MASK >>> left) << left : FULL_MASK;\n        const res = [];\n        for (let i = 0; i < bs.length; i++) {\n            let c = bs[i];\n            if (invert)\n                c = ~c; // allows to gen unset elements\n            // apply mask to last element, so we won't iterate non-existent items\n            if (i === bs.length - 1)\n                c &= lastMask;\n            if (c === 0)\n                continue; // fast-path\n            for (let j = 0; j < BITS; j++) {\n                const m = 1 << (BITS - j - 1);\n                if (c & m)\n                    res.push(i * BITS + j);\n            }\n        }\n        return res;\n    },\n    range: (arr) => {\n        const res = [];\n        let cur;\n        for (const i of arr) {\n            if (cur === undefined || i !== cur.pos + cur.length)\n                res.push((cur = { pos: i, length: 1 }));\n            else\n                cur.length += 1;\n        }\n        return res;\n    },\n    rangeDebug: (bs, len, invert = false) => `[${Bitset.range(Bitset.indices(bs, len, invert))\n        .map((i) => `(${i.pos}/${i.length})`)\n        .join(', ')}]`,\n    setRange: (bs, bsLen, pos, len, allowRewrite = true) => {\n        Bitset.chunkLen(bsLen, pos, len);\n        const { FULL_MASK, BITS } = Bitset;\n        // Try to set range with maximum efficiency:\n        // - first chunk is always    '0000[1111]' (only right ones)\n        // - middle chunks are set to '[1111 1111]' (all ones)\n        // - last chunk is always     '[1111]0000' (only left ones)\n        // - max operations:          (N/32) + 2 (first and last)\n        const first = pos % BITS ? Math.floor(pos / BITS) : undefined;\n        const lastPos = pos + len;\n        const last = lastPos % BITS ? Math.floor(lastPos / BITS) : undefined;\n        // special case, whole range inside single chunk\n        if (first !== undefined && first === last)\n            return Bitset.set(bs, first, (FULL_MASK >>> (BITS - len)) << (BITS - len - pos), allowRewrite);\n        if (first !== undefined) {\n            if (!Bitset.set(bs, first, FULL_MASK >>> pos % BITS, allowRewrite))\n                return false; // first chunk\n        }\n        // middle chunks\n        const start = first !== undefined ? first + 1 : pos / BITS;\n        const end = last !== undefined ? last : lastPos / BITS;\n        for (let i = start; i < end; i++)\n            if (!Bitset.set(bs, i, FULL_MASK, allowRewrite))\n                return false;\n        if (last !== undefined && first !== last)\n            if (!Bitset.set(bs, last, FULL_MASK << (BITS - (lastPos % BITS)), allowRewrite))\n                return false; // last chunk\n        return true;\n    },\n};\nconst Path = {\n    /**\n     * Internal method for handling stack of paths (debug, errors, dynamic fields via path)\n     * This is looks ugly (callback), but allows us to force stack cleaning by construction (.pop always after function).\n     * Also, this makes impossible:\n     * - pushing field when stack is empty\n     * - pushing field inside of field (real bug)\n     * NOTE: we don't want to do '.pop' on error!\n     */\n    pushObj: (stack, obj, objFn) => {\n        const last = { obj };\n        stack.push(last);\n        objFn((field, fieldFn) => {\n            last.field = field;\n            fieldFn();\n            last.field = undefined;\n        });\n        stack.pop();\n    },\n    path: (stack) => {\n        const res = [];\n        for (const i of stack)\n            if (i.field !== undefined)\n                res.push(i.field);\n        return res.join('/');\n    },\n    err(name, stack, msg) {\n        const err = new Error(`${name}(${Path.path(stack)}): ${typeof msg === 'string' ? msg : msg.message}`);\n        if (msg instanceof Error && msg.stack)\n            err.stack = msg.stack;\n        return err;\n    },\n    resolve: (stack, path) => {\n        const parts = path.split('/');\n        const objPath = stack.map((i) => i.obj);\n        let i = 0;\n        for (; i < parts.length; i++) {\n            if (parts[i] === '..')\n                objPath.pop();\n            else\n                break;\n        }\n        let cur = objPath.pop();\n        for (; i < parts.length; i++) {\n            if (!cur || cur[parts[i]] === undefined)\n                return undefined;\n            cur = cur[parts[i]];\n        }\n        return cur;\n    },\n};\n/**\n * Internal structure. Reader class for reading from a byte array.\n * `stack` is internal: for debugger and logging\n * @class Reader\n */\nclass _Reader {\n    constructor(data, opts = {}, stack = [], parent = undefined, parentOffset = 0) {\n        this.data = data;\n        this.opts = opts;\n        this.stack = stack;\n        this.parent = parent;\n        this.parentOffset = parentOffset;\n        this.pos = 0;\n        this.bitBuf = 0;\n        this.bitPos = 0;\n        this.view = createView(data);\n    }\n    /**\n     * Internal method for pointers.\n     */\n    _enablePointers() {\n        if (this.parent)\n            return this.parent._enablePointers();\n        if (this.bs)\n            return;\n        this.bs = Bitset.create(this.data.length);\n        Bitset.setRange(this.bs, this.data.length, 0, this.pos, this.opts.allowMultipleReads);\n    }\n    markBytesBS(pos, len) {\n        if (this.parent)\n            return this.parent.markBytesBS(this.parentOffset + pos, len);\n        if (!len)\n            return true;\n        if (!this.bs)\n            return true;\n        return Bitset.setRange(this.bs, this.data.length, pos, len, false);\n    }\n    markBytes(len) {\n        const pos = this.pos;\n        this.pos += len;\n        const res = this.markBytesBS(pos, len);\n        if (!this.opts.allowMultipleReads && !res)\n            throw this.err(`multiple read pos=${this.pos} len=${len}`);\n        return res;\n    }\n    pushObj(obj, objFn) {\n        return Path.pushObj(this.stack, obj, objFn);\n    }\n    readView(n, fn) {\n        if (!Number.isFinite(n))\n            throw this.err(`readView: wrong length=${n}`);\n        if (this.pos + n > this.data.length)\n            throw this.err('readView: Unexpected end of buffer');\n        const res = fn(this.view, this.pos);\n        this.markBytes(n);\n        return res;\n    }\n    // read bytes by absolute offset\n    absBytes(n) {\n        if (n > this.data.length)\n            throw new Error('Unexpected end of buffer');\n        return this.data.subarray(n);\n    }\n    finish() {\n        if (this.opts.allowUnreadBytes)\n            return;\n        if (this.bitPos) {\n            throw this.err(`${this.bitPos} bits left after unpack: ${base_1.hex.encode(this.data.slice(this.pos))}`);\n        }\n        if (this.bs && !this.parent) {\n            const notRead = Bitset.indices(this.bs, this.data.length, true);\n            if (notRead.length) {\n                const formatted = Bitset.range(notRead)\n                    .map(({ pos, length }) => `(${pos}/${length})[${base_1.hex.encode(this.data.subarray(pos, pos + length))}]`)\n                    .join(', ');\n                throw this.err(`unread byte ranges: ${formatted} (total=${this.data.length})`);\n            }\n            else\n                return; // all bytes read, everything is ok\n        }\n        // Default: no pointers enabled\n        if (!this.isEnd()) {\n            throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${base_1.hex.encode(this.data.slice(this.pos))}`);\n        }\n    }\n    // User methods\n    err(msg) {\n        return Path.err('Reader', this.stack, msg);\n    }\n    offsetReader(n) {\n        if (n > this.data.length)\n            throw this.err('offsetReader: Unexpected end of buffer');\n        return new _Reader(this.absBytes(n), this.opts, this.stack, this, n);\n    }\n    bytes(n, peek = false) {\n        if (this.bitPos)\n            throw this.err('readBytes: bitPos not empty');\n        if (!Number.isFinite(n))\n            throw this.err(`readBytes: wrong length=${n}`);\n        if (this.pos + n > this.data.length)\n            throw this.err('readBytes: Unexpected end of buffer');\n        const slice = this.data.subarray(this.pos, this.pos + n);\n        if (!peek)\n            this.markBytes(n);\n        return slice;\n    }\n    byte(peek = false) {\n        if (this.bitPos)\n            throw this.err('readByte: bitPos not empty');\n        if (this.pos + 1 > this.data.length)\n            throw this.err('readBytes: Unexpected end of buffer');\n        const data = this.data[this.pos];\n        if (!peek)\n            this.markBytes(1);\n        return data;\n    }\n    get leftBytes() {\n        return this.data.length - this.pos;\n    }\n    get totalBytes() {\n        return this.data.length;\n    }\n    isEnd() {\n        return this.pos >= this.data.length && !this.bitPos;\n    }\n    // bits are read in BE mode (left to right): (0b1000_0000).readBits(1) == 1\n    bits(bits) {\n        if (bits > 32)\n            throw this.err('BitReader: cannot read more than 32 bits in single call');\n        let out = 0;\n        while (bits) {\n            if (!this.bitPos) {\n                this.bitBuf = this.byte();\n                this.bitPos = 8;\n            }\n            const take = Math.min(bits, this.bitPos);\n            this.bitPos -= take;\n            out = (out << take) | ((this.bitBuf >> this.bitPos) & (2 ** take - 1));\n            this.bitBuf &= 2 ** this.bitPos - 1;\n            bits -= take;\n        }\n        // Fix signed integers\n        return out >>> 0;\n    }\n    find(needle, pos = this.pos) {\n        if (!isBytes(needle))\n            throw this.err(`find: needle is not bytes! ${needle}`);\n        if (this.bitPos)\n            throw this.err('findByte: bitPos not empty');\n        if (!needle.length)\n            throw this.err(`find: needle is empty`);\n        // indexOf should be faster than full equalBytes check\n        for (let idx = pos; (idx = this.data.indexOf(needle[0], idx)) !== -1; idx++) {\n            if (idx === -1)\n                return;\n            const leftBytes = this.data.length - idx;\n            if (leftBytes < needle.length)\n                return;\n            if (equalBytes(needle, this.data.subarray(idx, idx + needle.length)))\n                return idx;\n        }\n        return;\n    }\n}\n/**\n * Internal structure. Writer class for writing to a byte array.\n * The `stack` argument of constructor is internal, for debugging and logs.\n * @class Writer\n */\nclass _Writer {\n    constructor(stack = []) {\n        this.stack = stack;\n        this.pos = 0;\n        // We could have a single buffer here and re-alloc it with\n        // x1.5-2 size each time it full, but it will be slower:\n        // basic/encode bench: 395ns -> 560ns\n        this.buffers = [];\n        this.ptrs = [];\n        this.bitBuf = 0;\n        this.bitPos = 0;\n        this.viewBuf = new Uint8Array(8);\n        this.finished = false;\n        this.view = createView(this.viewBuf);\n    }\n    pushObj(obj, objFn) {\n        return Path.pushObj(this.stack, obj, objFn);\n    }\n    writeView(len, fn) {\n        if (this.finished)\n            throw this.err('buffer: finished');\n        if (!isNum(len) || len > 8)\n            throw new Error(`wrong writeView length=${len}`);\n        fn(this.view);\n        this.bytes(this.viewBuf.slice(0, len));\n        this.viewBuf.fill(0);\n    }\n    // User methods\n    err(msg) {\n        if (this.finished)\n            throw this.err('buffer: finished');\n        return Path.err('Reader', this.stack, msg);\n    }\n    bytes(b) {\n        if (this.finished)\n            throw this.err('buffer: finished');\n        if (this.bitPos)\n            throw this.err('writeBytes: ends with non-empty bit buffer');\n        this.buffers.push(b);\n        this.pos += b.length;\n    }\n    byte(b) {\n        if (this.finished)\n            throw this.err('buffer: finished');\n        if (this.bitPos)\n            throw this.err('writeByte: ends with non-empty bit buffer');\n        this.buffers.push(new Uint8Array([b]));\n        this.pos++;\n    }\n    finish(clean = true) {\n        if (this.finished)\n            throw this.err('buffer: finished');\n        if (this.bitPos)\n            throw this.err('buffer: ends with non-empty bit buffer');\n        // Can't use concatBytes, because it limits amount of arguments (65K).\n        const buffers = this.buffers.concat(this.ptrs.map((i) => i.buffer));\n        const sum = buffers.map((b) => b.length).reduce((a, b) => a + b, 0);\n        const buf = new Uint8Array(sum);\n        for (let i = 0, pad = 0; i < buffers.length; i++) {\n            const a = buffers[i];\n            buf.set(a, pad);\n            pad += a.length;\n        }\n        for (let pos = this.pos, i = 0; i < this.ptrs.length; i++) {\n            const ptr = this.ptrs[i];\n            buf.set(ptr.ptr.encode(pos), ptr.pos);\n            pos += ptr.buffer.length;\n        }\n        // Cleanup\n        if (clean) {\n            // We cannot cleanup buffers here, since it can be static user provided buffer.\n            // Only '.byte' and '.bits' create buffer which we can safely clean.\n            // for (const b of this.buffers) b.fill(0);\n            this.buffers = [];\n            for (const p of this.ptrs)\n                p.buffer.fill(0);\n            this.ptrs = [];\n            this.finished = true;\n            this.bitBuf = 0;\n        }\n        return buf;\n    }\n    bits(value, bits) {\n        if (bits > 32)\n            throw this.err('writeBits: cannot write more than 32 bits in single call');\n        if (value >= 2 ** bits)\n            throw this.err(`writeBits: value (${value}) >= 2**bits (${bits})`);\n        while (bits) {\n            const take = Math.min(bits, 8 - this.bitPos);\n            this.bitBuf = (this.bitBuf << take) | (value >> (bits - take));\n            this.bitPos += take;\n            bits -= take;\n            value &= 2 ** bits - 1;\n            if (this.bitPos === 8) {\n                this.bitPos = 0;\n                this.buffers.push(new Uint8Array([this.bitBuf]));\n                this.pos++;\n            }\n        }\n    }\n}\n// Immutable LE<->BE\nconst swapEndianness = (b) => Uint8Array.from(b).reverse();\n/**\n * Internal function for checking bit bounds of bigint in signed/unsinged form\n */\nfunction checkBounds(value, bits, signed) {\n    if (signed) {\n        // [-(2**(32-1)), 2**(32-1)-1]\n        const signBit = 2n ** (bits - 1n);\n        if (value < -signBit || value >= signBit)\n            throw new Error(`value out of signed bounds. Expected ${-signBit} <= ${value} < ${signBit}`);\n    }\n    else {\n        // [0, 2**32-1]\n        if (0n > value || value >= 2n ** bits)\n            throw new Error(`value out of unsigned bounds. Expected 0 <= ${value} < ${2n ** bits}`);\n    }\n}\nfunction _wrap(inner) {\n    return {\n        // NOTE: we cannot export validate here, since it is likely mistake.\n        encodeStream: inner.encodeStream,\n        decodeStream: inner.decodeStream,\n        size: inner.size,\n        encode: (value) => {\n            const w = new _Writer();\n            inner.encodeStream(w, value);\n            return w.finish();\n        },\n        decode: (data, opts = {}) => {\n            const r = new _Reader(data, opts);\n            const res = inner.decodeStream(r);\n            r.finish();\n            return res;\n        },\n    };\n}\n/**\n * Validates a value before encoding and after decoding using a provided function.\n * @param inner - The inner CoderType.\n * @param fn - The validation function.\n * @returns CoderType which check value with validation function.\n * @example\n * const val = (n: number) => {\n *   if (n > 10) throw new Error(`${n} > 10`);\n *   return n;\n * };\n *\n * const RangedInt = P.validate(P.U32LE, val); // Will check if value is <= 10 during encoding and decoding\n */\nfunction validate(inner, fn) {\n    if (!isCoder(inner))\n        throw new Error(`validate: invalid inner value ${inner}`);\n    if (typeof fn !== 'function')\n        throw new Error('validate: fn should be function');\n    return _wrap({\n        size: inner.size,\n        encodeStream: (w, value) => {\n            let res;\n            try {\n                res = fn(value);\n            }\n            catch (e) {\n                throw w.err(e);\n            }\n            inner.encodeStream(w, res);\n        },\n        decodeStream: (r) => {\n            const res = inner.decodeStream(r);\n            try {\n                return fn(res);\n            }\n            catch (e) {\n                throw r.err(e);\n            }\n        },\n    });\n}\nexports.validate = validate;\n/**\n * Wraps a stream encoder into a generic encoder and optionally validation function\n * @param {inner} inner BytesCoderStream & { validate?: Validate<T> }.\n * @returns The wrapped CoderType.\n * @example\n * const U8 = P.wrap({\n *   encodeStream: (w: Writer, value: number) => w.byte(value),\n *   decodeStream: (r: Reader): number => r.byte()\n * });\n * const checkedU8 = P.wrap({\n *   encodeStream: (w: Writer, value: number) => w.byte(value),\n *   decodeStream: (r: Reader): number => r.byte()\n *   validate: (n: number) => {\n *    if (n > 10) throw new Error(`${n} > 10`);\n *    return n;\n *   }\n * });\n */\nconst wrap = (inner) => {\n    const res = _wrap(inner);\n    return inner.validate ? validate(res, inner.validate) : res;\n};\nexports.wrap = wrap;\nconst isBaseCoder = (elm) => isPlainObject(elm) && typeof elm.decode === 'function' && typeof elm.encode === 'function';\n/**\n * Checks if the given value is a CoderType.\n * @param elm - The value to check.\n * @returns True if the value is a CoderType, false otherwise.\n */\nfunction isCoder(elm) {\n    return (isPlainObject(elm) &&\n        isBaseCoder(elm) &&\n        typeof elm.encodeStream === 'function' &&\n        typeof elm.decodeStream === 'function' &&\n        (elm.size === undefined || isNum(elm.size)));\n}\nexports.isCoder = isCoder;\n// Coders (like in @scure/base) for common operations\n/**\n * Base coder for working with dictionaries (records, objects, key-value map)\n * Dictionary is dynamic type like: `[key: string, value: any][]`\n * @returns base coder that encodes/decodes between arrays of key-value tuples and dictionaries.\n * @example\n * const dict: P.CoderType<Record<string, number>> = P.apply(\n *  P.array(P.U16BE, P.tuple([P.cstring, P.U32LE] as const)),\n *  P.coders.dict()\n * );\n */\nfunction dict() {\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from))\n                throw new Error('array expected');\n            const to = {};\n            for (const item of from) {\n                if (!Array.isArray(item) || item.length !== 2)\n                    throw new Error(`array of two elements expected`);\n                const name = item[0];\n                const value = item[1];\n                if (to[name] !== undefined)\n                    throw new Error(`key(${name}) appears twice in struct`);\n                to[name] = value;\n            }\n            return to;\n        },\n        decode: (to) => {\n            if (!isPlainObject(to))\n                throw new Error(`expected plain object, got ${to}`);\n            return Object.entries(to);\n        },\n    };\n}\n/**\n * Safely converts bigint to number.\n * Sometimes pointers / tags use u64 or other big numbers which cannot be represented by number,\n * but we still can use them since real value will be smaller than u32\n */\nconst numberBigint = {\n    encode: (from) => {\n        if (typeof from !== 'bigint')\n            throw new Error(`expected bigint, got ${typeof from}`);\n        if (from > BigInt(Number.MAX_SAFE_INTEGER))\n            throw new Error(`element bigger than MAX_SAFE_INTEGER=${from}`);\n        return Number(from);\n    },\n    decode: (to) => {\n        if (!isNum(to))\n            throw new Error('element is not a safe integer');\n        return BigInt(to);\n    },\n};\n/**\n * Base coder for working with TypeScript enums.\n * @param e - TypeScript enum.\n * @returns base coder that encodes/decodes between numbers and enum keys.\n * @example\n * enum Color { Red, Green, Blue }\n * const colorCoder = P.coders.tsEnum(Color);\n * colorCoder.encode(Color.Red); // 'Red'\n * colorCoder.decode('Green'); // 1\n */\nfunction tsEnum(e) {\n    if (!isPlainObject(e))\n        throw new Error('plain object expected');\n    return {\n        encode: (from) => {\n            if (!isNum(from) || !(from in e))\n                throw new Error(`wrong value ${from}`);\n            return e[from];\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error(`wrong value ${typeof to}`);\n            return e[to];\n        },\n    };\n}\n/**\n * Base coder for working with decimal numbers.\n * @param precision - Number of decimal places.\n * @param round - Round fraction part if bigger than precision (throws error by default)\n * @returns base coder that encodes/decodes between bigints and decimal strings.\n * @example\n * const decimal8 = P.coders.decimal(8);\n * decimal8.encode(630880845n); // '6.30880845'\n * decimal8.decode('6.30880845'); // 630880845n\n */\nfunction decimal(precision, round = false) {\n    if (!isNum(precision))\n        throw new Error(`decimal/precision: wrong value ${precision}`);\n    if (typeof round !== 'boolean')\n        throw new Error(`decimal/round: expected boolean, got ${typeof round}`);\n    const decimalMask = 10n ** BigInt(precision);\n    return {\n        encode: (from) => {\n            if (typeof from !== 'bigint')\n                throw new Error(`expected bigint, got ${typeof from}`);\n            let s = (from < 0n ? -from : from).toString(10);\n            let sep = s.length - precision;\n            if (sep < 0) {\n                s = s.padStart(s.length - sep, '0');\n                sep = 0;\n            }\n            let i = s.length - 1;\n            for (; i >= sep && s[i] === '0'; i--)\n                ;\n            let int = s.slice(0, sep);\n            let frac = s.slice(sep, i + 1);\n            if (!int)\n                int = '0';\n            if (from < 0n)\n                int = '-' + int;\n            if (!frac)\n                return int;\n            return `${int}.${frac}`;\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error(`expected string, got ${typeof to}`);\n            if (to === '-0')\n                throw new Error(`negative zero is not allowed`);\n            let neg = false;\n            if (to.startsWith('-')) {\n                neg = true;\n                to = to.slice(1);\n            }\n            if (!/^(0|[1-9]\\d*)(\\.\\d+)?$/.test(to))\n                throw new Error(`wrong string value=${to}`);\n            let sep = to.indexOf('.');\n            sep = sep === -1 ? to.length : sep;\n            // split by separator and strip trailing zeros from fraction. always returns [string, string] (.split doesn't).\n            const intS = to.slice(0, sep);\n            const fracS = to.slice(sep + 1).replace(/0+$/, '');\n            const int = BigInt(intS) * decimalMask;\n            if (!round && fracS.length > precision) {\n                throw new Error(`fractional part cannot be represented with this precision (num=${to}, prec=${precision})`);\n            }\n            const fracLen = Math.min(fracS.length, precision);\n            const frac = BigInt(fracS.slice(0, fracLen)) * 10n ** BigInt(precision - fracLen);\n            const value = int + frac;\n            return neg ? -value : value;\n        },\n    };\n}\n/**\n * Combines multiple coders into a single coder, allowing conditional encoding/decoding based on input.\n * Acts as a parser combinator, splitting complex conditional coders into smaller parts.\n *\n *   `encode = [Ae, Be]; decode = [Ad, Bd]`\n *   ->\n *   `match([{encode: Ae, decode: Ad}, {encode: Be; decode: Bd}])`\n *\n * @param lst - Array of coders to match.\n * @returns Combined coder for conditional encoding/decoding.\n */\nfunction match(lst) {\n    if (!Array.isArray(lst))\n        throw new Error(`expected array, got ${typeof lst}`);\n    for (const i of lst)\n        if (!isBaseCoder(i))\n            throw new Error(`wrong base coder ${i}`);\n    return {\n        encode: (from) => {\n            for (const c of lst) {\n                const elm = c.encode(from);\n                if (elm !== undefined)\n                    return elm;\n            }\n            throw new Error(`match/encode: cannot find match in ${from}`);\n        },\n        decode: (to) => {\n            for (const c of lst) {\n                const elm = c.decode(to);\n                if (elm !== undefined)\n                    return elm;\n            }\n            throw new Error(`match/decode: cannot find match in ${to}`);\n        },\n    };\n}\n/**\n * Reverses direction of coder\n */\nconst reverse = (coder) => {\n    if (!isBaseCoder(coder))\n        throw new Error('BaseCoder expected');\n    return { encode: coder.decode, decode: coder.encode };\n};\nexports.coders = { dict, numberBigint, tsEnum, decimal, match, reverse };\n/**\n * CoderType for parsing individual bits.\n * NOTE: Structure should parse whole amount of bytes before it can start parsing byte-level elements.\n * @param len - Number of bits to parse.\n * @returns CoderType representing the parsed bits.\n * @example\n * const s = P.struct({ magic: P.bits(1), version: P.bits(1), tag: P.bits(4), len: P.bits(2) });\n */\nconst bits = (len) => {\n    if (!isNum(len))\n        throw new Error(`bits: wrong length ${len} (${typeof len})`);\n    return (0, exports.wrap)({\n        encodeStream: (w, value) => w.bits(value, len),\n        decodeStream: (r) => r.bits(len),\n        validate: (value) => {\n            if (!isNum(value))\n                throw new Error(`bits: wrong value ${value}`);\n            return value;\n        },\n    });\n};\nexports.bits = bits;\n/**\n * CoderType for working with bigint values.\n * Unsized bigint values should be wrapped in a container (e.g., bytes or string).\n *\n * `0n = new Uint8Array([])`\n *\n * `1n = new Uint8Array([1n])`\n *\n * Please open issue, if you need different behavior for zero.\n *\n * @param size - Size of the bigint in bytes.\n * @param le - Whether to use little-endian byte order.\n * @param signed - Whether the bigint is signed.\n * @param sized - Whether the bigint should have a fixed size.\n * @returns CoderType representing the bigint value.\n * @example\n * const U512BE = P.bigint(64, false, true, true); // Define a CoderType for a 512-bit unsigned big-endian integer\n */\nconst bigint = (size, le = false, signed = false, sized = true) => {\n    if (!isNum(size))\n        throw new Error(`bigint/size: wrong value ${size}`);\n    if (typeof le !== 'boolean')\n        throw new Error(`bigint/le: expected boolean, got ${typeof le}`);\n    if (typeof signed !== 'boolean')\n        throw new Error(`bigint/signed: expected boolean, got ${typeof signed}`);\n    if (typeof sized !== 'boolean')\n        throw new Error(`bigint/sized: expected boolean, got ${typeof sized}`);\n    const bLen = BigInt(size);\n    const signBit = 2n ** (8n * bLen - 1n);\n    return (0, exports.wrap)({\n        size: sized ? size : undefined,\n        encodeStream: (w, value) => {\n            if (signed && value < 0)\n                value = value | signBit;\n            const b = [];\n            for (let i = 0; i < size; i++) {\n                b.push(Number(value & 255n));\n                value >>= 8n;\n            }\n            let res = new Uint8Array(b).reverse();\n            if (!sized) {\n                let pos = 0;\n                for (pos = 0; pos < res.length; pos++)\n                    if (res[pos] !== 0)\n                        break;\n                res = res.subarray(pos); // remove leading zeros\n            }\n            w.bytes(le ? res.reverse() : res);\n        },\n        decodeStream: (r) => {\n            // TODO: for le we can read until first zero?\n            const value = r.bytes(sized ? size : Math.min(size, r.leftBytes));\n            const b = le ? value : swapEndianness(value);\n            let res = 0n;\n            for (let i = 0; i < b.length; i++)\n                res |= BigInt(b[i]) << (8n * BigInt(i));\n            if (signed && res & signBit)\n                res = (res ^ signBit) - signBit;\n            return res;\n        },\n        validate: (value) => {\n            if (typeof value !== 'bigint')\n                throw new Error(`bigint: invalid value: ${value}`);\n            checkBounds(value, 8n * bLen, !!signed);\n            return value;\n        },\n    });\n};\nexports.bigint = bigint;\n/**\n * Unsigned 256-bit little-endian integer CoderType.\n */\nexports.U256LE = (0, exports.bigint)(32, true);\n/**\n * Unsigned 256-bit big-endian integer CoderType.\n */\nexports.U256BE = (0, exports.bigint)(32, false);\n/**\n * Signed 256-bit little-endian integer CoderType.\n */\nexports.I256LE = (0, exports.bigint)(32, true, true);\n/**\n * Signed 256-bit big-endian integer CoderType.\n */\nexports.I256BE = (0, exports.bigint)(32, false, true);\n/**\n * Unsigned 128-bit little-endian integer CoderType.\n */\nexports.U128LE = (0, exports.bigint)(16, true);\n/**\n * Unsigned 128-bit big-endian integer CoderType.\n */\nexports.U128BE = (0, exports.bigint)(16, false);\n/**\n * Signed 128-bit little-endian integer CoderType.\n */\nexports.I128LE = (0, exports.bigint)(16, true, true);\n/**\n * Signed 128-bit big-endian integer CoderType.\n */\nexports.I128BE = (0, exports.bigint)(16, false, true);\n/**\n * Unsigned 64-bit little-endian integer CoderType.\n */\nexports.U64LE = (0, exports.bigint)(8, true);\n/**\n * Unsigned 64-bit big-endian integer CoderType.\n */\nexports.U64BE = (0, exports.bigint)(8, false);\n/**\n * Signed 64-bit little-endian integer CoderType.\n */\nexports.I64LE = (0, exports.bigint)(8, true, true);\n/**\n * Signed 64-bit big-endian integer CoderType.\n */\nexports.I64BE = (0, exports.bigint)(8, false, true);\n/**\n * CoderType for working with numbber values (up to 6 bytes/48 bits).\n * Unsized int values should be wrapped in a container (e.g., bytes or string).\n *\n * `0 = new Uint8Array([])`\n *\n * `1 = new Uint8Array([1n])`\n *\n * Please open issue, if you need different behavior for zero.\n *\n * @param size - Size of the number in bytes.\n * @param le - Whether to use little-endian byte order.\n * @param signed - Whether the number is signed.\n * @param sized - Whether the number should have a fixed size.\n * @returns CoderType representing the number value.\n * @example\n * const uint64BE = P.bigint(8, false, true); // Define a CoderType for a 64-bit unsigned big-endian integer\n */\nconst int = (size, le = false, signed = false, sized = true) => {\n    if (!isNum(size))\n        throw new Error(`int/size: wrong value ${size}`);\n    if (typeof le !== 'boolean')\n        throw new Error(`int/le: expected boolean, got ${typeof le}`);\n    if (typeof signed !== 'boolean')\n        throw new Error(`int/signed: expected boolean, got ${typeof signed}`);\n    if (typeof sized !== 'boolean')\n        throw new Error(`int/sized: expected boolean, got ${typeof sized}`);\n    if (size > 6)\n        throw new Error('int supports size up to 6 bytes (48 bits): use bigints instead');\n    return apply((0, exports.bigint)(size, le, signed, sized), exports.coders.numberBigint);\n};\nexports.int = int;\nconst view = (len, opts) => (0, exports.wrap)({\n    size: len,\n    encodeStream: (w, value) => w.writeView(len, (view) => opts.write(view, value)),\n    decodeStream: (r) => r.readView(len, opts.read),\n    validate: (value) => {\n        if (typeof value !== 'number')\n            throw new Error(`viewCoder: expected number, got ${typeof value}`);\n        if (opts.validate)\n            opts.validate(value);\n        return value;\n    },\n});\nconst intView = (len, signed, opts) => {\n    const bits = len * 8;\n    const signBit = 2 ** (bits - 1);\n    // Inlined checkBounds for integer\n    const validateSigned = (value) => {\n        if (!isNum(value))\n            throw new Error(`sintView: value is not safe integer: ${value}`);\n        if (value < -signBit || value >= signBit) {\n            throw new Error(`sintView: value out of bounds. Expected ${-signBit} <= ${value} < ${signBit}`);\n        }\n    };\n    const maxVal = 2 ** bits;\n    const validateUnsigned = (value) => {\n        if (!isNum(value))\n            throw new Error(`uintView: value is not safe integer: ${value}`);\n        if (0 > value || value >= maxVal) {\n            throw new Error(`uintView: value out of bounds. Expected 0 <= ${value} < ${maxVal}`);\n        }\n    };\n    return view(len, {\n        write: opts.write,\n        read: opts.read,\n        validate: signed ? validateSigned : validateUnsigned,\n    });\n};\n/**\n * Unsigned 32-bit little-endian integer CoderType.\n */\nexports.U32LE = intView(4, false, {\n    read: (view, pos) => view.getUint32(pos, true),\n    write: (view, value) => view.setUint32(0, value, true),\n});\n/**\n * Unsigned 32-bit big-endian integer CoderType.\n */\nexports.U32BE = intView(4, false, {\n    read: (view, pos) => view.getUint32(pos, false),\n    write: (view, value) => view.setUint32(0, value, false),\n});\n/**\n * Signed 32-bit little-endian integer CoderType.\n */\nexports.I32LE = intView(4, true, {\n    read: (view, pos) => view.getInt32(pos, true),\n    write: (view, value) => view.setInt32(0, value, true),\n});\n/**\n * Signed 32-bit big-endian integer CoderType.\n */\nexports.I32BE = intView(4, true, {\n    read: (view, pos) => view.getInt32(pos, false),\n    write: (view, value) => view.setInt32(0, value, false),\n});\n/**\n * Unsigned 16-bit little-endian integer CoderType.\n */\nexports.U16LE = intView(2, false, {\n    read: (view, pos) => view.getUint16(pos, true),\n    write: (view, value) => view.setUint16(0, value, true),\n});\n/**\n * Unsigned 16-bit big-endian integer CoderType.\n */\nexports.U16BE = intView(2, false, {\n    read: (view, pos) => view.getUint16(pos, false),\n    write: (view, value) => view.setUint16(0, value, false),\n});\n/**\n * Signed 16-bit little-endian integer CoderType.\n */\nexports.I16LE = intView(2, true, {\n    read: (view, pos) => view.getInt16(pos, true),\n    write: (view, value) => view.setInt16(0, value, true),\n});\n/**\n * Signed 16-bit big-endian integer CoderType.\n */\nexports.I16BE = intView(2, true, {\n    read: (view, pos) => view.getInt16(pos, false),\n    write: (view, value) => view.setInt16(0, value, false),\n});\n/**\n * Unsigned 8-bit integer CoderType.\n */\nexports.U8 = intView(1, false, {\n    read: (view, pos) => view.getUint8(pos),\n    write: (view, value) => view.setUint8(0, value),\n});\n/**\n * Signed 8-bit integer CoderType.\n */\nexports.I8 = intView(1, true, {\n    read: (view, pos) => view.getInt8(pos),\n    write: (view, value) => view.setInt8(0, value),\n});\n// Floats\nconst f32 = (le) => view(4, {\n    read: (view, pos) => view.getFloat32(pos, le),\n    write: (view, value) => view.setFloat32(0, value, le),\n    validate: (value) => {\n        if (Math.fround(value) !== value && !Number.isNaN(value))\n            throw new Error(`f32: wrong value=${value}`);\n    },\n});\nconst f64 = (le) => view(8, {\n    read: (view, pos) => view.getFloat64(pos, le),\n    write: (view, value) => view.setFloat64(0, value, le),\n});\n/**\n * 32-bit big-endian floating point CoderType (\"binary32\", IEEE 754-2008).\n */\nexports.F32BE = f32(false);\n/**\n * 32-bit little-endian floating point  CoderType (\"binary32\", IEEE 754-2008).\n */\nexports.F32LE = f32(true);\n/**\n * A 64-bit big-endian floating point type (\"binary64\", IEEE 754-2008). Any JS number can be encoded.\n */\nexports.F64BE = f64(false);\n/**\n * A 64-bit little-endian floating point type (\"binary64\", IEEE 754-2008). Any JS number can be encoded.\n */\nexports.F64LE = f64(true);\n/**\n * Boolean CoderType.\n */\nexports.bool = (0, exports.wrap)({\n    size: 1,\n    encodeStream: (w, value) => w.byte(value ? 1 : 0),\n    decodeStream: (r) => {\n        const value = r.byte();\n        if (value !== 0 && value !== 1)\n            throw r.err(`bool: invalid value ${value}`);\n        return value === 1;\n    },\n    validate: (value) => {\n        if (typeof value !== 'boolean')\n            throw new Error(`bool: invalid value ${value}`);\n        return value;\n    },\n});\n/**\n * Bytes CoderType with a specified length and endianness.\n * The bytes can have:\n * - Dynamic size (prefixed with a length CoderType like U16BE)\n * - Fixed size (specified by a number)\n * - Unknown size (null, will parse until end of buffer)\n * - Zero-terminated (terminator can be any Uint8Array)\n * @param len - CoderType, number, Uint8Array (terminator) or null\n * @param le - Whether to use little-endian byte order.\n * @returns CoderType representing the bytes.\n * @example\n * // Dynamic size bytes (prefixed with P.U16BE number of bytes length)\n * const dynamicBytes = P.bytes(P.U16BE, false);\n * const fixedBytes = P.bytes(32, false); // Fixed size bytes\n * const unknownBytes = P.bytes(null, false); // Unknown size bytes, will parse until end of buffer\n * const zeroTerminatedBytes = P.bytes(new Uint8Array([0]), false); // Zero-terminated bytes\n */\nconst bytes = (len, le = false) => {\n    if (typeof le !== 'boolean')\n        throw new Error(`bytes/le: expected boolean, got ${typeof le}`);\n    const _length = lengthCoder(len);\n    const _isb = isBytes(len);\n    return (0, exports.wrap)({\n        size: typeof len === 'number' ? len : undefined,\n        encodeStream: (w, value) => {\n            if (!_isb)\n                _length.encodeStream(w, value.length);\n            w.bytes(le ? swapEndianness(value) : value);\n            if (_isb)\n                w.bytes(len);\n        },\n        decodeStream: (r) => {\n            let bytes;\n            if (_isb) {\n                const tPos = r.find(len);\n                if (!tPos)\n                    throw r.err(`bytes: cannot find terminator`);\n                bytes = r.bytes(tPos - r.pos);\n                r.bytes(len.length);\n            }\n            else {\n                bytes = r.bytes(len === null ? r.leftBytes : _length.decodeStream(r));\n            }\n            return le ? swapEndianness(bytes) : bytes;\n        },\n        validate: (value) => {\n            if (!isBytes(value))\n                throw new Error(`bytes: invalid value ${value}`);\n            return value;\n        },\n    });\n};\nexports.bytes = bytes;\n/**\n * Prefix-encoded value using a length prefix and an inner CoderType.\n * The prefix can have:\n * - Dynamic size (prefixed with a length CoderType like U16BE)\n * - Fixed size (specified by a number)\n * - Unknown size (null, will parse until end of buffer)\n * - Zero-terminated (terminator can be any Uint8Array)\n * @param len - Length CoderType (dynamic size), number (fixed size), Uint8Array (for terminator), or null (will parse until end of buffer)\n * @param inner - CoderType for the actual value to be prefix-encoded.\n * @returns CoderType representing the prefix-encoded value.\n * @example\n * const dynamicPrefix = P.prefix(P.U16BE, P.bytes(null)); // Dynamic size prefix (prefixed with P.U16BE number of bytes length)\n * const fixedPrefix = P.prefix(10, P.bytes(null)); // Fixed size prefix (always 10 bytes)\n */\nfunction prefix(len, inner) {\n    if (!isCoder(inner))\n        throw new Error(`prefix: invalid inner value ${inner}`);\n    return apply((0, exports.bytes)(len), reverse(inner));\n}\nexports.prefix = prefix;\n/**\n * String CoderType with a specified length and endianness.\n * The string can be:\n * - Dynamic size (prefixed with a length CoderType like U16BE)\n * - Fixed size (specified by a number)\n * - Unknown size (null, will parse until end of buffer)\n * - Zero-terminated (terminator can be any Uint8Array)\n * @param len - Length CoderType (dynamic size), number (fixed size), Uint8Array (for terminator), or null (will parse until end of buffer)\n * @param le - Whether to use little-endian byte order.\n * @returns CoderType representing the string.\n * @example\n * const dynamicString = P.string(P.U16BE, false); // Dynamic size string (prefixed with P.U16BE number of string length)\n * const fixedString = P.string(10, false); // Fixed size string\n * const unknownString = P.string(null, false); // Unknown size string, will parse until end of buffer\n * const nullTerminatedString = P.cstring; // NUL-terminated string\n * const _cstring = P.string(new Uint8Array([0])); // Same thing\n */\nconst string = (len, le = false) => validate(apply((0, exports.bytes)(len, le), base_1.utf8), (value) => {\n    // TextEncoder/TextDecoder will fail on non-string, but we create more readable errors earlier\n    if (typeof value !== 'string')\n        throw new Error(`expected string, got ${typeof value}`);\n    return value;\n});\nexports.string = string;\n/**\n * NUL-terminated string CoderType.\n */\nexports.cstring = (0, exports.string)(exports.NULL);\n/**\n * Hexadecimal string CoderType with a specified length, endianness, and optional 0x prefix.\n * @param len - Length CoderType (dynamic size), number (fixed size), Uint8Array (for terminator), or null (will parse until end of buffer)\n * @param le - Whether to use little-endian byte order.\n * @param withZero - Whether to include the 0x prefix.\n * @returns CoderType representing the hexadecimal string.\n * @example\n * const dynamicHex = P.hex(P.U16BE, {isLE: false, with0x: true}); // Hex string with 0x prefix and U16BE length\n * const fixedHex = P.hex(32, {isLE: false, with0x: false}); // Fixed-length 32-byte hex string without 0x prefix\n */\nconst hex = (len, options = { isLE: false, with0x: false }) => {\n    let inner = apply((0, exports.bytes)(len, options.isLE), base_1.hex);\n    if (typeof options.with0x !== 'boolean')\n        throw new Error(`hex/with0x: expected boolean, got ${typeof options.with0x}`);\n    if (options.with0x) {\n        inner = apply(inner, {\n            encode: (value) => `0x${value}`,\n            decode: (value) => {\n                if (!value.startsWith('0x'))\n                    throw new Error('hex(with0x=true).encode input should start with 0x');\n                return value.slice(2);\n            },\n        });\n    }\n    return inner;\n};\nexports.hex = hex;\n/**\n * Applies a base coder to a CoderType.\n * @param inner - The inner CoderType.\n * @param b - The base coder to apply.\n * @returns CoderType representing the transformed value.\n * @example\n * import { hex } from '@scure/base';\n * const hex = P.apply(P.bytes(32), hex); // will decode bytes into a hex string\n */\nfunction apply(inner, base) {\n    if (!isCoder(inner))\n        throw new Error(`apply: invalid inner value ${inner}`);\n    if (!isBaseCoder(base))\n        throw new Error(`apply: invalid base value ${inner}`);\n    return (0, exports.wrap)({\n        size: inner.size,\n        encodeStream: (w, value) => {\n            let innerValue;\n            try {\n                innerValue = base.decode(value);\n            }\n            catch (e) {\n                throw w.err('' + e);\n            }\n            return inner.encodeStream(w, innerValue);\n        },\n        decodeStream: (r) => {\n            const innerValue = inner.decodeStream(r);\n            try {\n                return base.encode(innerValue);\n            }\n            catch (e) {\n                throw r.err('' + e);\n            }\n        },\n    });\n}\nexports.apply = apply;\n/**\n * Lazy CoderType that is evaluated at runtime.\n * @param fn - A function that returns the CoderType.\n * @returns CoderType representing the lazy value.\n * @example\n * type Tree = { name: string; children: Tree[] };\n * const tree = P.struct({\n *   name: P.cstring,\n *   children: P.array(\n *     P.U16BE,\n *     P.lazy((): P.CoderType<Tree> => tree)\n *   ),\n * });\n */\nfunction lazy(fn) {\n    if (typeof fn !== 'function')\n        throw new Error(`lazy: expected function, got ${typeof fn}`);\n    return (0, exports.wrap)({\n        encodeStream: (w, value) => fn().encodeStream(w, value),\n        decodeStream: (r) => fn().decodeStream(r),\n    });\n}\nexports.lazy = lazy;\n/**\n * Flag CoderType that encodes/decodes a boolean value based on the presence of a marker.\n * @param flagValue - Marker value.\n * @param xor - Whether to invert the flag behavior.\n * @returns CoderType representing the flag value.\n * @example\n * const flag = P.flag(new Uint8Array([0x01, 0x02])); // Encodes true as u8a([0x01, 0x02]), false as u8a([])\n * const flagXor = P.flag(new Uint8Array([0x01, 0x02]), true); // Encodes true as u8a([]), false as u8a([0x01, 0x02])\n * // Conditional encoding with flagged\n * const s = P.struct({ f: P.flag(new Uint8Array([0x0, 0x1])), f2: P.flagged('f', P.U32BE) });\n */\nconst flag = (flagValue, xor = false) => {\n    if (!isBytes(flagValue))\n        throw new Error(`flag/flagValue: expected Uint8Array, got ${typeof flagValue}`);\n    if (typeof xor !== 'boolean')\n        throw new Error(`flag/xor: expected boolean, got ${typeof xor}`);\n    return (0, exports.wrap)({\n        size: flagValue.length,\n        encodeStream: (w, value) => {\n            if (!!value !== xor)\n                w.bytes(flagValue);\n        },\n        decodeStream: (r) => {\n            let hasFlag = r.leftBytes >= flagValue.length;\n            if (hasFlag) {\n                hasFlag = equalBytes(r.bytes(flagValue.length, true), flagValue);\n                // Found flag, advance cursor position\n                if (hasFlag)\n                    r.bytes(flagValue.length);\n            }\n            return hasFlag !== xor; // hasFlag ^ xor\n        },\n        validate: (value) => {\n            if (value !== undefined && typeof value !== 'boolean')\n                throw new Error(`flag: expected boolean value or undefined, got ${typeof value}`);\n            return value;\n        },\n    });\n};\nexports.flag = flag;\n/**\n * Conditional CoderType that encodes/decodes a value only if a flag is present.\n * @param path - Path to the flag value or a CoderType for the flag.\n * @param inner - Inner CoderType for the value.\n * @param def - Optional default value to use if the flag is not present.\n * @returns CoderType representing the conditional value.\n * @example\n * const s = P.struct({\n *   f: P.flag(new Uint8Array([0x0, 0x1])),\n *   f2: P.flagged('f', P.U32BE)\n * });\n *\n * @example\n * const s2 = P.struct({\n *   f: P.flag(new Uint8Array([0x0, 0x1])),\n *   f2: P.flagged('f', P.U32BE, 123)\n * });\n */\nfunction flagged(path, inner, def) {\n    if (!isCoder(inner))\n        throw new Error(`flagged: invalid inner value ${inner}`);\n    if (typeof path !== 'string' && !isCoder(inner))\n        throw new Error(`flagged: wrong path=${path}`);\n    return (0, exports.wrap)({\n        encodeStream: (w, value) => {\n            if (typeof path === 'string') {\n                if (Path.resolve(w.stack, path))\n                    inner.encodeStream(w, value);\n                else if (def)\n                    inner.encodeStream(w, def);\n            }\n            else {\n                path.encodeStream(w, !!value);\n                if (!!value)\n                    inner.encodeStream(w, value);\n                else if (def)\n                    inner.encodeStream(w, def);\n            }\n        },\n        decodeStream: (r) => {\n            let hasFlag = false;\n            if (typeof path === 'string')\n                hasFlag = !!Path.resolve(r.stack, path);\n            else\n                hasFlag = path.decodeStream(r);\n            // If there is a flag -- decode and return value\n            if (hasFlag)\n                return inner.decodeStream(r);\n            else if (def)\n                inner.decodeStream(r);\n            return;\n        },\n    });\n}\nexports.flagged = flagged;\n/**\n * Optional CoderType that encodes/decodes a value based on a flag.\n * @param flag - CoderType for the flag value.\n * @param inner - Inner CoderType for the value.\n * @param def - Optional default value to use if the flag is not present.\n * @returns CoderType representing the optional value.\n * @example\n * // Will decode into P.U32BE only if flag present\n * const optional = P.optional(P.flag(new Uint8Array([0x0, 0x1])), P.U32BE);\n *\n * @example\n * // If no flag present, will decode into default value\n * const optionalWithDefault = P.optional(P.flag(new Uint8Array([0x0, 0x1])), P.U32BE, 123);\n */\nfunction optional(flag, inner, def) {\n    if (!isCoder(flag) || !isCoder(inner))\n        throw new Error(`optional: invalid flag or inner value flag=${flag} inner=${inner}`);\n    return (0, exports.wrap)({\n        size: def !== undefined && flag.size && inner.size ? flag.size + inner.size : undefined,\n        encodeStream: (w, value) => {\n            flag.encodeStream(w, !!value);\n            if (value)\n                inner.encodeStream(w, value);\n            else if (def !== undefined)\n                inner.encodeStream(w, def);\n        },\n        decodeStream: (r) => {\n            if (flag.decodeStream(r))\n                return inner.decodeStream(r);\n            else if (def !== undefined)\n                inner.decodeStream(r);\n            return;\n        },\n    });\n}\nexports.optional = optional;\n/**\n * Magic value CoderType that encodes/decodes a constant value.\n * This can be used to check for a specific magic value or sequence of bytes at the beginning of a data structure.\n * @param inner - Inner CoderType for the value.\n * @param constant - Constant value.\n * @param check - Whether to check the decoded value against the constant.\n * @returns CoderType representing the magic value.\n * @example\n * // Always encodes constant as bytes using inner CoderType, throws if encoded value is not present\n * const magicU8 = P.magic(P.U8, 0x42);\n */\nfunction magic(inner, constant, check = true) {\n    if (!isCoder(inner))\n        throw new Error(`magic: invalid inner value ${inner}`);\n    if (typeof check !== 'boolean')\n        throw new Error(`magic: expected boolean, got ${typeof check}`);\n    return (0, exports.wrap)({\n        size: inner.size,\n        encodeStream: (w, _value) => inner.encodeStream(w, constant),\n        decodeStream: (r) => {\n            const value = inner.decodeStream(r);\n            if ((check && typeof value !== 'object' && value !== constant) ||\n                (isBytes(constant) && !equalBytes(constant, value))) {\n                throw r.err(`magic: invalid value: ${value} !== ${constant}`);\n            }\n            return;\n        },\n        validate: (value) => {\n            if (value !== undefined)\n                throw new Error(`magic: wrong value=${typeof value}`);\n            return value;\n        },\n    });\n}\nexports.magic = magic;\n/**\n * Magic bytes CoderType that encodes/decodes a constant byte array or string.\n * @param constant - Constant byte array or string.\n * @returns CoderType representing the magic bytes.\n * @example\n * // Always encodes undefined into byte representation of string 'MAGIC'\n * const magicBytes = P.magicBytes('MAGIC');\n */\nconst magicBytes = (constant) => {\n    const c = typeof constant === 'string' ? base_1.utf8.decode(constant) : constant;\n    return magic((0, exports.bytes)(c.length), c);\n};\nexports.magicBytes = magicBytes;\n/**\n * Creates a CoderType for a constant value. The function enforces this value during encoding,\n * ensuring it matches the provided constant. During decoding, it always returns the constant value.\n * The actual value is not written to or read from any byte stream; it's used only for validation.\n *\n * @param c - Constant value.\n * @returns CoderType representing the constant value.\n * @example\n * // Always return 123 on decode, throws on encoding anything other than 123\n * const constantU8 = P.constant(123);\n */\nfunction constant(c) {\n    return (0, exports.wrap)({\n        encodeStream: (_w, value) => {\n            if (value !== c)\n                throw new Error(`constant: invalid value ${value} (exp: ${c})`);\n        },\n        decodeStream: (_r) => c,\n    });\n}\nexports.constant = constant;\nfunction sizeof(fields) {\n    let size = 0;\n    for (const f of fields) {\n        if (f.size === undefined)\n            return;\n        if (!isNum(f.size))\n            throw new Error(`sizeof: wrong element size=${size}`);\n        size += f.size;\n    }\n    return size;\n}\n/**\n * Structure of composable primitives (C/Rust struct)\n * @param fields - Object mapping field names to CoderTypes.\n * @returns CoderType representing the structure.\n * @example\n * // Define a structure with a 32-bit big-endian unsigned integer, a string, and a nested structure\n * const myStruct = P.struct({\n *   id: P.U32BE,\n *   name: P.string(P.U8),\n *   nested: P.struct({\n *     flag: P.bool,\n *     value: P.I16LE\n *   })\n * });\n */\nfunction struct(fields) {\n    if (!isPlainObject(fields))\n        throw new Error(`struct: expected plain object, got ${fields}`);\n    for (const name in fields) {\n        if (!isCoder(fields[name]))\n            throw new Error(`struct: field ${name} is not CoderType`);\n    }\n    return (0, exports.wrap)({\n        size: sizeof(Object.values(fields)),\n        encodeStream: (w, value) => {\n            w.pushObj(value, (fieldFn) => {\n                for (const name in fields)\n                    fieldFn(name, () => fields[name].encodeStream(w, value[name]));\n            });\n        },\n        decodeStream: (r) => {\n            const res = {};\n            r.pushObj(res, (fieldFn) => {\n                for (const name in fields)\n                    fieldFn(name, () => (res[name] = fields[name].decodeStream(r)));\n            });\n            return res;\n        },\n        validate: (value) => {\n            if (typeof value !== 'object' || value === null)\n                throw new Error(`struct: invalid value ${value}`);\n            return value;\n        },\n    });\n}\nexports.struct = struct;\n/**\n * Tuple (unnamed structure) of CoderTypes. Same as struct but with unnamed fields.\n * @param fields - Array of CoderTypes.\n * @returns CoderType representing the tuple.\n * @example\n * const myTuple = P.tuple([P.U8, P.U16LE, P.string(P.U8)]);\n */\nfunction tuple(fields) {\n    if (!Array.isArray(fields))\n        throw new Error(`Packed.Tuple: got ${typeof fields} instead of array`);\n    for (let i = 0; i < fields.length; i++) {\n        if (!isCoder(fields[i]))\n            throw new Error(`tuple: field ${i} is not CoderType`);\n    }\n    return (0, exports.wrap)({\n        size: sizeof(fields),\n        encodeStream: (w, value) => {\n            // TODO: fix types\n            if (!Array.isArray(value))\n                throw w.err(`tuple: invalid value ${value}`);\n            w.pushObj(value, (fieldFn) => {\n                for (let i = 0; i < fields.length; i++)\n                    fieldFn(`${i}`, () => fields[i].encodeStream(w, value[i]));\n            });\n        },\n        decodeStream: (r) => {\n            const res = [];\n            r.pushObj(res, (fieldFn) => {\n                for (let i = 0; i < fields.length; i++)\n                    fieldFn(`${i}`, () => res.push(fields[i].decodeStream(r)));\n            });\n            return res;\n        },\n        validate: (value) => {\n            if (!Array.isArray(value))\n                throw new Error(`tuple: invalid value ${value}`);\n            if (value.length !== fields.length)\n                throw new Error(`tuple: wrong length=${value.length}, expected ${fields.length}`);\n            return value;\n        },\n    });\n}\nexports.tuple = tuple;\n/**\n * Array of items (inner type) with a specified length.\n * @param len - Length CoderType (dynamic size), number (fixed size), Uint8Array (for terminator), or null (will parse until end of buffer)\n * @param inner - CoderType for encoding/decoding each array item.\n * @returns CoderType representing the array.\n * @example\n * const a1 = P.array(P.U16BE, child); // Dynamic size array (prefixed with P.U16BE number of array length)\n * const a2 = P.array(4, child); // Fixed size array\n * const a3 = P.array(null, child); // Unknown size array, will parse until end of buffer\n * const a4 = P.array(new Uint8Array([0]), child); // zero-terminated array (NOTE: terminator can be any buffer)\n */\nfunction array(len, inner) {\n    if (!isCoder(inner))\n        throw new Error(`array: invalid inner value ${inner}`);\n    // By construction length is inside array (otherwise there will be various incorrect stack states)\n    // But forcing users always write '..' seems like bad idea. Also, breaking change.\n    const _length = lengthCoder(typeof len === 'string' ? `../${len}` : len);\n    return (0, exports.wrap)({\n        size: typeof len === 'number' && inner.size ? len * inner.size : undefined,\n        encodeStream: (w, value) => {\n            const _w = w;\n            _w.pushObj(value, (fieldFn) => {\n                if (!isBytes(len))\n                    _length.encodeStream(w, value.length);\n                for (let i = 0; i < value.length; i++) {\n                    fieldFn(`${i}`, () => {\n                        const elm = value[i];\n                        const startPos = w.pos;\n                        inner.encodeStream(w, elm);\n                        if (isBytes(len)) {\n                            // Terminator is bigger than elm size, so skip\n                            if (len.length > _w.pos - startPos)\n                                return;\n                            const data = _w.finish(false).subarray(startPos, _w.pos);\n                            // There is still possible case when multiple elements create terminator,\n                            // but it is hard to catch here, will be very slow\n                            if (equalBytes(data.subarray(0, len.length), len))\n                                throw _w.err(`array: inner element encoding same as separator. elm=${elm} data=${data}`);\n                        }\n                    });\n                }\n            });\n            if (isBytes(len))\n                w.bytes(len);\n        },\n        decodeStream: (r) => {\n            const res = [];\n            r.pushObj(res, (fieldFn) => {\n                if (len === null) {\n                    for (let i = 0; !r.isEnd(); i++) {\n                        fieldFn(`${i}`, () => res.push(inner.decodeStream(r)));\n                        if (inner.size && r.leftBytes < inner.size)\n                            break;\n                    }\n                }\n                else if (isBytes(len)) {\n                    for (let i = 0;; i++) {\n                        if (equalBytes(r.bytes(len.length, true), len)) {\n                            // Advance cursor position if terminator found\n                            r.bytes(len.length);\n                            break;\n                        }\n                        fieldFn(`${i}`, () => res.push(inner.decodeStream(r)));\n                    }\n                }\n                else {\n                    let length;\n                    fieldFn('arrayLen', () => (length = _length.decodeStream(r)));\n                    for (let i = 0; i < length; i++)\n                        fieldFn(`${i}`, () => res.push(inner.decodeStream(r)));\n                }\n            });\n            return res;\n        },\n        validate: (value) => {\n            if (!Array.isArray(value))\n                throw new Error(`array: invalid value ${value}`);\n            return value;\n        },\n    });\n}\nexports.array = array;\n/**\n * Mapping between encoded values and string representations.\n * @param inner - CoderType for encoded values.\n * @param variants - Object mapping string representations to encoded values.\n * @returns CoderType representing the mapping.\n * @example\n * // Map between numbers and strings\n * const numberMap = P.map(P.U8, {\n *   'one': 1,\n *   'two': 2,\n *   'three': 3\n * });\n *\n * // Map between byte arrays and strings\n * const byteMap = P.map(P.bytes(2, false), {\n *   'ab': Uint8Array.from([0x61, 0x62]),\n *   'cd': Uint8Array.from([0x63, 0x64])\n * });\n */\nfunction map(inner, variants) {\n    if (!isCoder(inner))\n        throw new Error(`map: invalid inner value ${inner}`);\n    if (!isPlainObject(variants))\n        throw new Error(`map: variants should be plain object`);\n    const variantNames = new Map();\n    for (const k in variants)\n        variantNames.set(variants[k], k);\n    return (0, exports.wrap)({\n        size: inner.size,\n        encodeStream: (w, value) => inner.encodeStream(w, variants[value]),\n        decodeStream: (r) => {\n            const variant = inner.decodeStream(r);\n            const name = variantNames.get(variant);\n            if (name === undefined)\n                throw r.err(`Enum: unknown value: ${variant} ${Array.from(variantNames.keys())}`);\n            return name;\n        },\n        validate: (value) => {\n            if (typeof value !== 'string')\n                throw new Error(`map: invalid value ${value}`);\n            if (!(value in variants))\n                throw new Error(`Map: unknown variant: ${value}`);\n            return value;\n        },\n    });\n}\nexports.map = map;\n/**\n * Tagged union of CoderTypes, where the tag value determines which CoderType to use.\n * The decoded value will have the structure `{ TAG: number, data: ... }`.\n * @param tag - CoderType for the tag value.\n * @param variants - Object mapping tag values to CoderTypes.\n * @returns CoderType representing the tagged union.\n * @example\n * // Tagged union of array, string, and number\n * // Depending on the value of the first byte, it will be decoded as an array, string, or number.\n * const taggedUnion = P.tag(P.U8, {\n *   0x01: P.array(P.U16LE, P.U8),\n *   0x02: P.string(P.U8),\n *   0x03: P.U32BE\n * });\n *\n * const encoded = taggedUnion.encode({ TAG: 0x01, data: 'hello' }); // Encodes the string 'hello' with tag 0x01\n * const decoded = taggedUnion.decode(encoded); // Decodes the encoded value back to { TAG: 0x01, data: 'hello' }\n */\nfunction tag(tag, variants) {\n    if (!isCoder(tag))\n        throw new Error(`tag: invalid tag value ${tag}`);\n    if (!isPlainObject(variants))\n        throw new Error(`tag: variants should be plain object`);\n    for (const name in variants) {\n        if (!isCoder(variants[name]))\n            throw new Error(`tag: variant ${name} is not CoderType`);\n    }\n    return (0, exports.wrap)({\n        size: tag.size,\n        encodeStream: (w, value) => {\n            const { TAG, data } = value;\n            const dataType = variants[TAG];\n            tag.encodeStream(w, TAG);\n            dataType.encodeStream(w, data);\n        },\n        decodeStream: (r) => {\n            const TAG = tag.decodeStream(r);\n            const dataType = variants[TAG];\n            if (!dataType)\n                throw r.err(`Tag: invalid tag ${TAG}`);\n            return { TAG, data: dataType.decodeStream(r) };\n        },\n        validate: (value) => {\n            const { TAG } = value;\n            const dataType = variants[TAG];\n            if (!dataType)\n                throw new Error(`Tag: invalid tag ${TAG.toString()}`);\n            return value;\n        },\n    });\n}\nexports.tag = tag;\n/**\n * Mapping between encoded values, string representations, and CoderTypes using a tag CoderType.\n * @param tagCoder - CoderType for the tag value.\n * @param variants - Object mapping string representations to [tag value, CoderType] pairs.\n *  * @returns CoderType representing the mapping.\n * @example\n * const cborValue: P.CoderType<CborValue> = P.mappedTag(P.bits(3), {\n *   uint: [0, cborUint], // An unsigned integer in the range 0..264-1 inclusive.\n *   negint: [1, cborNegint], // A negative integer in the range -264..-1 inclusive\n *   bytes: [2, P.lazy(() => cborLength(P.bytes, cborValue))], // A byte string.\n *   string: [3, P.lazy(() => cborLength(P.string, cborValue))], // A text string (utf8)\n *   array: [4, cborArrLength(P.lazy(() => cborValue))], // An array of data items\n *   map: [5, P.lazy(() => cborArrLength(P.tuple([cborValue, cborValue])))], // A map of pairs of data items\n *   tag: [6, P.tuple([cborUint, P.lazy(() => cborValue)] as const)], // A tagged data item (\"tag\") whose tag number\n *   simple: [7, cborSimple], // Floating-point numbers and simple values, as well as the \"break\" stop code\n * });\n */\nfunction mappedTag(tagCoder, variants) {\n    if (!isCoder(tagCoder))\n        throw new Error(`mappedTag: invalid tag value ${tag}`);\n    if (!isPlainObject(variants))\n        throw new Error(`mappedTag: variants should be plain object`);\n    const mapValue = {};\n    const tagValue = {};\n    for (const key in variants) {\n        const v = variants[key];\n        mapValue[key] = v[0];\n        tagValue[key] = v[1];\n    }\n    return tag(map(tagCoder, mapValue), tagValue);\n}\nexports.mappedTag = mappedTag;\n/**\n * Bitset of boolean values with optional padding.\n * @param names - An array of string names for the bitset values.\n * @param pad - Whether to pad the bitset to a multiple of 8 bits.\n * @returns CoderType representing the bitset.\n * @template Names\n * @example\n * const myBitset = P.bitset(['flag1', 'flag2', 'flag3', 'flag4'], true);\n */\nfunction bitset(names, pad = false) {\n    if (typeof pad !== 'boolean')\n        throw new Error(`bitset/pad: expected boolean, got ${typeof pad}`);\n    if (!Array.isArray(names))\n        throw new Error('bitset/names: expected array');\n    for (const name of names) {\n        if (typeof name !== 'string')\n            throw new Error('bitset/names: expected array of strings');\n    }\n    return (0, exports.wrap)({\n        encodeStream: (w, value) => {\n            for (let i = 0; i < names.length; i++)\n                w.bits(+value[names[i]], 1);\n            if (pad && names.length % 8)\n                w.bits(0, 8 - (names.length % 8));\n        },\n        decodeStream: (r) => {\n            const out = {};\n            for (let i = 0; i < names.length; i++)\n                out[names[i]] = !!r.bits(1);\n            if (pad && names.length % 8)\n                r.bits(8 - (names.length % 8));\n            return out;\n        },\n        validate: (value) => {\n            if (!isPlainObject(value))\n                throw new Error(`bitset: invalid value ${value}`);\n            for (const v of Object.values(value)) {\n                if (typeof v !== 'boolean')\n                    throw new Error('expected boolean');\n            }\n            return value;\n        },\n    });\n}\nexports.bitset = bitset;\n/**\n * Padding function which always returns zero\n */\nconst ZeroPad = (_) => 0;\nexports.ZeroPad = ZeroPad;\nfunction padLength(blockSize, len) {\n    if (len % blockSize === 0)\n        return 0;\n    return blockSize - (len % blockSize);\n}\n/**\n * Pads a CoderType with a specified block size and padding function on the left side.\n * @param blockSize - Block size for padding (positive safe integer).\n * @param inner - Inner CoderType to pad.\n * @param padFn - Padding function to use. If not provided, zero padding is used.\n * @returns CoderType representing the padded value.\n * @example\n * // Pad a U32BE with a block size of 4 and zero padding\n * const paddedU32BE = P.padLeft(4, P.U32BE);\n *\n * // Pad a string with a block size of 16 and custom padding\n * const paddedString = P.padLeft(16, P.string(P.U8), (i) => i + 1);\n */\nfunction padLeft(blockSize, inner, padFn) {\n    if (!isNum(blockSize) || blockSize <= 0)\n        throw new Error(`padLeft: wrong blockSize=${blockSize}`);\n    if (!isCoder(inner))\n        throw new Error(`padLeft: invalid inner value ${inner}`);\n    if (padFn !== undefined && typeof padFn !== 'function')\n        throw new Error(`padLeft: wrong padFn=${typeof padFn}`);\n    const _padFn = padFn || exports.ZeroPad;\n    if (!inner.size)\n        throw new Error('padLeft cannot have dynamic size');\n    return (0, exports.wrap)({\n        size: inner.size + padLength(blockSize, inner.size),\n        encodeStream: (w, value) => {\n            const padBytes = padLength(blockSize, inner.size);\n            for (let i = 0; i < padBytes; i++)\n                w.byte(_padFn(i));\n            inner.encodeStream(w, value);\n        },\n        decodeStream: (r) => {\n            r.bytes(padLength(blockSize, inner.size));\n            return inner.decodeStream(r);\n        },\n    });\n}\nexports.padLeft = padLeft;\n/**\n * Pads a CoderType with a specified block size and padding function on the right side.\n * @param blockSize - Block size for padding (positive safe integer).\n * @param inner - Inner CoderType to pad.\n * @param padFn - Padding function to use. If not provided, zero padding is used.\n * @returns CoderType representing the padded value.\n * @example\n * // Pad a U16BE with a block size of 2 and zero padding\n * const paddedU16BE = P.padRight(2, P.U16BE);\n *\n * // Pad a bytes with a block size of 8 and custom padding\n * const paddedBytes = P.padRight(8, P.bytes(null), (i) => i + 1);\n */\nfunction padRight(blockSize, inner, padFn) {\n    if (!isCoder(inner))\n        throw new Error(`padRight: invalid inner value ${inner}`);\n    if (!isNum(blockSize) || blockSize <= 0)\n        throw new Error(`padLeft: wrong blockSize=${blockSize}`);\n    if (padFn !== undefined && typeof padFn !== 'function')\n        throw new Error(`padRight: wrong padFn=${typeof padFn}`);\n    const _padFn = padFn || exports.ZeroPad;\n    return (0, exports.wrap)({\n        size: inner.size ? inner.size + padLength(blockSize, inner.size) : undefined,\n        encodeStream: (w, value) => {\n            const _w = w;\n            const pos = _w.pos;\n            inner.encodeStream(w, value);\n            const padBytes = padLength(blockSize, _w.pos - pos);\n            for (let i = 0; i < padBytes; i++)\n                w.byte(_padFn(i));\n        },\n        decodeStream: (r) => {\n            const start = r.pos;\n            const res = inner.decodeStream(r);\n            r.bytes(padLength(blockSize, r.pos - start));\n            return res;\n        },\n    });\n}\nexports.padRight = padRight;\n1;\n/**\n * Pointer to a value using a pointer CoderType and an inner CoderType.\n * Pointers are scoped, and the next pointer in the dereference chain is offset by the previous one.\n * By default (if no 'allowMultipleReads' in ReaderOpts is set) is safe, since\n * same region of memory cannot be read multiple times.\n * @param ptr - CoderType for the pointer value.\n * @param inner - CoderType for encoding/decoding the pointed value.\n * @param sized - Whether the pointer should have a fixed size.\n * @returns CoderType representing the pointer to the value.\n * @example\n * const pointerToU8 = P.pointer(P.U16BE, P.U8); // Pointer to a single U8 value\n */\nfunction pointer(ptr, inner, sized = false) {\n    if (!isCoder(ptr))\n        throw new Error(`pointer: invalid ptr value ${ptr}`);\n    if (!isCoder(inner))\n        throw new Error(`pointer: invalid inner value ${inner}`);\n    if (typeof sized !== 'boolean')\n        throw new Error(`pointer/sized: expected boolean, got ${typeof sized}`);\n    if (!ptr.size)\n        throw new Error('unsized pointer');\n    return (0, exports.wrap)({\n        size: sized ? ptr.size : undefined,\n        encodeStream: (w, value) => {\n            const _w = w;\n            const start = _w.pos;\n            ptr.encodeStream(w, 0);\n            _w.ptrs.push({ pos: start, ptr, buffer: inner.encode(value) });\n        },\n        decodeStream: (r) => {\n            const ptrVal = ptr.decodeStream(r);\n            r._enablePointers();\n            return inner.decodeStream(r.offsetReader(ptrVal));\n        },\n    });\n}\nexports.pointer = pointer;\n// Internal methods for test purposes only\nexports._TEST = { _bitset: Bitset, _Reader, _Writer, Path };\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hmac = exports.HMAC = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// HMAC (RFC 2104)\nclass HMAC extends utils_js_1.Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        (0, _assert_js_1.hash)(hash);\n        const key = (0, utils_js_1.toBytes)(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        (0, _assert_js_1.exists)(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        (0, _assert_js_1.exists)(this);\n        (0, _assert_js_1.bytes)(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\nexports.HMAC = HMAC;\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nconst hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nexports.hmac = hmac;\nexports.hmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bitMask = void 0;\nexports.isBytes = isBytes;\nexports.abytes = abytes;\nexports.bytesToHex = bytesToHex;\nexports.numberToHexUnpadded = numberToHexUnpadded;\nexports.hexToNumber = hexToNumber;\nexports.hexToBytes = hexToBytes;\nexports.bytesToNumberBE = bytesToNumberBE;\nexports.bytesToNumberLE = bytesToNumberLE;\nexports.numberToBytesBE = numberToBytesBE;\nexports.numberToBytesLE = numberToBytesLE;\nexports.numberToVarBytesBE = numberToVarBytesBE;\nexports.ensureBytes = ensureBytes;\nexports.concatBytes = concatBytes;\nexports.equalBytes = equalBytes;\nexports.utf8ToBytes = utf8ToBytes;\nexports.bitLen = bitLen;\nexports.bitGet = bitGet;\nexports.bitSet = bitSet;\nexports.createHmacDrbg = createHmacDrbg;\nexports.validateObject = validateObject;\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// 100 lines of code in the file are duplicated from noble-hashes (utils).\n// This is OK: `abstract` directory does not use noble-hashes.\n// User may opt-in into using different hashing library. This way, noble-hashes\n// won't be included into their bundle.\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nfunction abytes(item) {\n    if (!isBytes(item))\n        throw new Error('Uint8Array expected');\n}\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    abytes(bytes);\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nfunction numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nfunction hexToNumber(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // Big Endian\n    return BigInt(hex === '' ? '0' : `0x${hex}`);\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, _A: 65, _F: 70, _a: 97, _f: 102 };\nfunction asciiToBase16(char) {\n    if (char >= asciis._0 && char <= asciis._9)\n        return char - asciis._0;\n    if (char >= asciis._A && char <= asciis._F)\n        return char - (asciis._A - 10);\n    if (char >= asciis._a && char <= asciis._f)\n        return char - (asciis._a - 10);\n    return;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2;\n    }\n    return array;\n}\n// BE: Big Endian, LE: Little Endian\nfunction bytesToNumberBE(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nfunction bytesToNumberLE(bytes) {\n    abytes(bytes);\n    return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\nfunction numberToBytesBE(n, len) {\n    return hexToBytes(n.toString(16).padStart(len * 2, '0'));\n}\nfunction numberToBytesLE(n, len) {\n    return numberToBytesBE(n, len).reverse();\n}\n// Unpadded, rarely used\nfunction numberToVarBytesBE(n) {\n    return hexToBytes(numberToHexUnpadded(n));\n}\n/**\n * Takes hex string or Uint8Array, converts to Uint8Array.\n * Validates output length.\n * Will throw error for other types.\n * @param title descriptive title for an error e.g. 'private key'\n * @param hex hex string or Uint8Array\n * @param expectedLength optional, will compare to result array's length\n * @returns\n */\nfunction ensureBytes(title, hex, expectedLength) {\n    let res;\n    if (typeof hex === 'string') {\n        try {\n            res = hexToBytes(hex);\n        }\n        catch (e) {\n            throw new Error(`${title} must be valid hex string, got \"${hex}\". Cause: ${e}`);\n        }\n    }\n    else if (isBytes(hex)) {\n        // Uint8Array.from() instead of hash.slice() because node.js Buffer\n        // is instance of Uint8Array, and its slice() creates **mutable** copy\n        res = Uint8Array.from(hex);\n    }\n    else {\n        throw new Error(`${title} must be hex string or Uint8Array`);\n    }\n    const len = res.length;\n    if (typeof expectedLength === 'number' && len !== expectedLength)\n        throw new Error(`${title} expected ${expectedLength} bytes, got ${len}`);\n    return res;\n}\n/**\n * Copies several Uint8Arrays into one.\n */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\n// Compares 2 u8a-s in kinda constant time\nfunction equalBytes(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let diff = 0;\n    for (let i = 0; i < a.length; i++)\n        diff |= a[i] ^ b[i];\n    return diff === 0;\n}\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n// Bit operations\n/**\n * Calculates amount of bits in a bigint.\n * Same as `n.toString(2).length`\n */\nfunction bitLen(n) {\n    let len;\n    for (len = 0; n > _0n; n >>= _1n, len += 1)\n        ;\n    return len;\n}\n/**\n * Gets single bit at position.\n * NOTE: first bit position is 0 (same as arrays)\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\n */\nfunction bitGet(n, pos) {\n    return (n >> BigInt(pos)) & _1n;\n}\n/**\n * Sets single bit at position.\n */\nfunction bitSet(n, pos, value) {\n    return n | ((value ? _1n : _0n) << BigInt(pos));\n}\n/**\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\n */\nconst bitMask = (n) => (_2n << BigInt(n - 1)) - _1n;\nexports.bitMask = bitMask;\n// DRBG\nconst u8n = (data) => new Uint8Array(data); // creates Uint8Array\nconst u8fr = (arr) => Uint8Array.from(arr); // another shortcut\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nfunction createHmacDrbg(hashLen, qByteLen, hmacFn) {\n    if (typeof hashLen !== 'number' || hashLen < 2)\n        throw new Error('hashLen must be a number');\n    if (typeof qByteLen !== 'number' || qByteLen < 2)\n        throw new Error('qByteLen must be a number');\n    if (typeof hmacFn !== 'function')\n        throw new Error('hmacFn must be a function');\n    // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n    let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n    let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n    let i = 0; // Iterations counter, will throw when over 1000\n    const reset = () => {\n        v.fill(1);\n        k.fill(0);\n        i = 0;\n    };\n    const h = (...b) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n    const reseed = (seed = u8n()) => {\n        // HMAC-DRBG reseed() function. Steps D-G\n        k = h(u8fr([0x00]), seed); // k = hmac(k || v || 0x00 || seed)\n        v = h(); // v = hmac(k || v)\n        if (seed.length === 0)\n            return;\n        k = h(u8fr([0x01]), seed); // k = hmac(k || v || 0x01 || seed)\n        v = h(); // v = hmac(k || v)\n    };\n    const gen = () => {\n        // HMAC-DRBG generate() function\n        if (i++ >= 1000)\n            throw new Error('drbg: tried 1000 values');\n        let len = 0;\n        const out = [];\n        while (len < qByteLen) {\n            v = h();\n            const sl = v.slice();\n            out.push(sl);\n            len += v.length;\n        }\n        return concatBytes(...out);\n    };\n    const genUntil = (seed, pred) => {\n        reset();\n        reseed(seed); // Steps D-G\n        let res = undefined; // Step H: grind until k is in [1..n-1]\n        while (!(res = pred(gen())))\n            reseed();\n        reset();\n        return res;\n    };\n    return genUntil;\n}\n// Validating curves and fields\nconst validatorFns = {\n    bigint: (val) => typeof val === 'bigint',\n    function: (val) => typeof val === 'function',\n    boolean: (val) => typeof val === 'boolean',\n    string: (val) => typeof val === 'string',\n    stringOrUint8Array: (val) => typeof val === 'string' || isBytes(val),\n    isSafeInteger: (val) => Number.isSafeInteger(val),\n    array: (val) => Array.isArray(val),\n    field: (val, object) => object.Fp.isValid(val),\n    hash: (val) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n};\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\nfunction validateObject(object, validators, optValidators = {}) {\n    const checkField = (fieldName, type, isOptional) => {\n        const checkVal = validatorFns[type];\n        if (typeof checkVal !== 'function')\n            throw new Error(`Invalid validator \"${type}\", expected function`);\n        const val = object[fieldName];\n        if (isOptional && val === undefined)\n            return;\n        if (!checkVal(val, object)) {\n            throw new Error(`Invalid param ${String(fieldName)}=${val} (${typeof val}), expected ${type}`);\n        }\n    };\n    for (const [fieldName, type] of Object.entries(validators))\n        checkField(fieldName, type, false);\n    for (const [fieldName, type] of Object.entries(optValidators))\n        checkField(fieldName, type, true);\n    return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNegativeLE = void 0;\nexports.mod = mod;\nexports.pow = pow;\nexports.pow2 = pow2;\nexports.invert = invert;\nexports.tonelliShanks = tonelliShanks;\nexports.FpSqrt = FpSqrt;\nexports.validateField = validateField;\nexports.FpPow = FpPow;\nexports.FpInvertBatch = FpInvertBatch;\nexports.FpDiv = FpDiv;\nexports.FpIsSquare = FpIsSquare;\nexports.nLength = nLength;\nexports.Field = Field;\nexports.FpSqrtOdd = FpSqrtOdd;\nexports.FpSqrtEven = FpSqrtEven;\nexports.hashToPrivateScalar = hashToPrivateScalar;\nexports.getFieldBytesLength = getFieldBytesLength;\nexports.getMinHashLength = getMinHashLength;\nexports.mapHashToField = mapHashToField;\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Utilities for modular arithmetics and finite fields\nconst utils_js_1 = require(\"./utils.js\");\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _4n = BigInt(4), _5n = BigInt(5), _8n = BigInt(8);\n// prettier-ignore\nconst _9n = BigInt(9), _16n = BigInt(16);\n// Calculates a modulo b\nfunction mod(a, b) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently raise num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @example\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\n */\n// TODO: use field version && remove\nfunction pow(num, power, modulo) {\n    if (modulo <= _0n || power < _0n)\n        throw new Error('Expected power/modulo > 0');\n    if (modulo === _1n)\n        return _0n;\n    let res = _1n;\n    while (power > _0n) {\n        if (power & _1n)\n            res = (res * num) % modulo;\n        num = (num * num) % modulo;\n        power >>= _1n;\n    }\n    return res;\n}\n// Does x ^ (2 ^ power) mod p. pow2(30, 4) == 30 ^ (2 ^ 4)\nfunction pow2(x, power, modulo) {\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= modulo;\n    }\n    return res;\n}\n// Inverses number over modulo\nfunction invert(number, modulo) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    // Euclidean GCD https://brilliant.org/wiki/extended-euclidean-algorithm/\n    // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n    let a = mod(number, modulo);\n    let b = modulo;\n    // prettier-ignore\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        // JIT applies optimization if those two lines follow each other\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        // prettier-ignore\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\n/**\n * Tonelli-Shanks square root search algorithm.\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\n * Will start an infinite loop if field order P is not prime.\n * @param P field order\n * @returns function that takes field Fp (created from P) and number n\n */\nfunction tonelliShanks(P) {\n    // Legendre constant: used to calculate Legendre symbol (a | p),\n    // which denotes the value of a^((p-1)/2) (mod p).\n    // (a | p) ≡ 1    if a is a square (mod p)\n    // (a | p) ≡ -1   if a is not a square (mod p)\n    // (a | p) ≡ 0    if a ≡ 0 (mod p)\n    const legendreC = (P - _1n) / _2n;\n    let Q, S, Z;\n    // Step 1: By factoring out powers of 2 from p - 1,\n    // find q and s such that p - 1 = q*(2^s) with q odd\n    for (Q = P - _1n, S = 0; Q % _2n === _0n; Q /= _2n, S++)\n        ;\n    // Step 2: Select a non-square z such that (z | p) ≡ -1 and set c ≡ zq\n    for (Z = _2n; Z < P && pow(Z, legendreC, P) !== P - _1n; Z++)\n        ;\n    // Fast-path\n    if (S === 1) {\n        const p1div4 = (P + _1n) / _4n;\n        return function tonelliFast(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Slow-path\n    const Q1div2 = (Q + _1n) / _2n;\n    return function tonelliSlow(Fp, n) {\n        // Step 0: Check that n is indeed a square: (n | p) should not be ≡ -1\n        if (Fp.pow(n, legendreC) === Fp.neg(Fp.ONE))\n            throw new Error('Cannot find square root');\n        let r = S;\n        // TODO: will fail at Fp2/etc\n        let g = Fp.pow(Fp.mul(Fp.ONE, Z), Q); // will update both x and b\n        let x = Fp.pow(n, Q1div2); // first guess at the square root\n        let b = Fp.pow(n, Q); // first guess at the fudge factor\n        while (!Fp.eql(b, Fp.ONE)) {\n            if (Fp.eql(b, Fp.ZERO))\n                return Fp.ZERO; // https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm (4. If t = 0, return r = 0)\n            // Find m such b^(2^m)==1\n            let m = 1;\n            for (let t2 = Fp.sqr(b); m < r; m++) {\n                if (Fp.eql(t2, Fp.ONE))\n                    break;\n                t2 = Fp.sqr(t2); // t2 *= t2\n            }\n            // NOTE: r-m-1 can be bigger than 32, need to convert to bigint before shift, otherwise there will be overflow\n            const ge = Fp.pow(g, _1n << BigInt(r - m - 1)); // ge = 2^(r-m-1)\n            g = Fp.sqr(ge); // g = ge * ge\n            x = Fp.mul(x, ge); // x *= ge\n            b = Fp.mul(b, g); // b *= g\n            r = m;\n        }\n        return x;\n    };\n}\nfunction FpSqrt(P) {\n    // NOTE: different algorithms can give different roots, it is up to user to decide which one they want.\n    // For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n    // P ≡ 3 (mod 4)\n    // √n = n^((P+1)/4)\n    if (P % _4n === _3n) {\n        // Not all roots possible!\n        // const ORDER =\n        //   0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n        // const NUM = 72057594037927816n;\n        const p1div4 = (P + _1n) / _4n;\n        return function sqrt3mod4(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            // Throw if root**2 != n\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Atkin algorithm for q ≡ 5 (mod 8), https://eprint.iacr.org/2012/685.pdf (page 10)\n    if (P % _8n === _5n) {\n        const c1 = (P - _5n) / _8n;\n        return function sqrt5mod8(Fp, n) {\n            const n2 = Fp.mul(n, _2n);\n            const v = Fp.pow(n2, c1);\n            const nv = Fp.mul(n, v);\n            const i = Fp.mul(Fp.mul(nv, _2n), v);\n            const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // P ≡ 9 (mod 16)\n    if (P % _16n === _9n) {\n        // NOTE: tonelli is too slow for bls-Fp2 calculations even on start\n        // Means we cannot use sqrt for constants at all!\n        //\n        // const c1 = Fp.sqrt(Fp.negate(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n        // const c2 = Fp.sqrt(c1);                //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n        // const c3 = Fp.sqrt(Fp.negate(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n        // const c4 = (P + _7n) / _16n;           //  4. c4 = (q + 7) / 16        # Integer arithmetic\n        // sqrt = (x) => {\n        //   let tv1 = Fp.pow(x, c4);             //  1. tv1 = x^c4\n        //   let tv2 = Fp.mul(c1, tv1);           //  2. tv2 = c1 * tv1\n        //   const tv3 = Fp.mul(c2, tv1);         //  3. tv3 = c2 * tv1\n        //   let tv4 = Fp.mul(c3, tv1);           //  4. tv4 = c3 * tv1\n        //   const e1 = Fp.equals(Fp.square(tv2), x); //  5.  e1 = (tv2^2) == x\n        //   const e2 = Fp.equals(Fp.square(tv3), x); //  6.  e2 = (tv3^2) == x\n        //   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n        //   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n        //   const e3 = Fp.equals(Fp.square(tv2), x); //  9.  e3 = (tv2^2) == x\n        //   return Fp.cmov(tv1, tv2, e3); //  10.  z = CMOV(tv1, tv2, e3)  # Select the sqrt from tv1 and tv2\n        // }\n    }\n    // Other cases: Tonelli-Shanks algorithm\n    return tonelliShanks(P);\n}\n// Little-endian check for first LE bit (last BE bit);\nconst isNegativeLE = (num, modulo) => (mod(num, modulo) & _1n) === _1n;\nexports.isNegativeLE = isNegativeLE;\n// prettier-ignore\nconst FIELD_FIELDS = [\n    'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n    'eql', 'add', 'sub', 'mul', 'pow', 'div',\n    'addN', 'subN', 'mulN', 'sqrN'\n];\nfunction validateField(field) {\n    const initial = {\n        ORDER: 'bigint',\n        MASK: 'bigint',\n        BYTES: 'isSafeInteger',\n        BITS: 'isSafeInteger',\n    };\n    const opts = FIELD_FIELDS.reduce((map, val) => {\n        map[val] = 'function';\n        return map;\n    }, initial);\n    return (0, utils_js_1.validateObject)(field, opts);\n}\n// Generic field functions\n/**\n * Same as `pow` but for Fp: non-constant-time.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n */\nfunction FpPow(f, num, power) {\n    // Should have same speed as pow for bigints\n    // TODO: benchmark!\n    if (power < _0n)\n        throw new Error('Expected power > 0');\n    if (power === _0n)\n        return f.ONE;\n    if (power === _1n)\n        return num;\n    let p = f.ONE;\n    let d = num;\n    while (power > _0n) {\n        if (power & _1n)\n            p = f.mul(p, d);\n        d = f.sqr(d);\n        power >>= _1n;\n    }\n    return p;\n}\n/**\n * Efficiently invert an array of Field elements.\n * `inv(0)` will return `undefined` here: make sure to throw an error.\n */\nfunction FpInvertBatch(f, nums) {\n    const tmp = new Array(nums.length);\n    // Walk from first to last, multiply them by each other MOD p\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = acc;\n        return f.mul(acc, num);\n    }, f.ONE);\n    // Invert last element\n    const inverted = f.inv(lastMultiplied);\n    // Walk from last to first, multiply them by inverted each other MOD p\n    nums.reduceRight((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = f.mul(acc, tmp[i]);\n        return f.mul(acc, num);\n    }, inverted);\n    return tmp;\n}\nfunction FpDiv(f, lhs, rhs) {\n    return f.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, f.ORDER) : f.inv(rhs));\n}\n// This function returns True whenever the value x is a square in the field F.\nfunction FpIsSquare(f) {\n    const legendreConst = (f.ORDER - _1n) / _2n; // Integer arithmetic\n    return (x) => {\n        const p = f.pow(x, legendreConst);\n        return f.eql(p, f.ZERO) || f.eql(p, f.ONE);\n    };\n}\n// CURVE.n lengths\nfunction nLength(n, nBitLength) {\n    // Bit size, byte size of CURVE.n\n    const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n    const nByteLength = Math.ceil(_nBitLength / 8);\n    return { nBitLength: _nBitLength, nByteLength };\n}\n/**\n * Initializes a finite field over prime. **Non-primes are not supported.**\n * Do not init in loop: slow. Very fragile: always run a benchmark on a change.\n * Major performance optimizations:\n * * a) denormalized operations like mulN instead of mul\n * * b) same object shape: never add or remove keys\n * * c) Object.freeze\n * @param ORDER prime positive bigint\n * @param bitLen how many bits the field consumes\n * @param isLE (def: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nfunction Field(ORDER, bitLen, isLE = false, redef = {}) {\n    if (ORDER <= _0n)\n        throw new Error(`Expected Field ORDER > 0, got ${ORDER}`);\n    const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, bitLen);\n    if (BYTES > 2048)\n        throw new Error('Field lengths over 2048 bytes are not supported');\n    const sqrtP = FpSqrt(ORDER);\n    const f = Object.freeze({\n        ORDER,\n        BITS,\n        BYTES,\n        MASK: (0, utils_js_1.bitMask)(BITS),\n        ZERO: _0n,\n        ONE: _1n,\n        create: (num) => mod(num, ORDER),\n        isValid: (num) => {\n            if (typeof num !== 'bigint')\n                throw new Error(`Invalid field element: expected bigint, got ${typeof num}`);\n            return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n        },\n        is0: (num) => num === _0n,\n        isOdd: (num) => (num & _1n) === _1n,\n        neg: (num) => mod(-num, ORDER),\n        eql: (lhs, rhs) => lhs === rhs,\n        sqr: (num) => mod(num * num, ORDER),\n        add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n        sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n        mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n        pow: (num, power) => FpPow(f, num, power),\n        div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n        // Same as above, but doesn't normalize\n        sqrN: (num) => num * num,\n        addN: (lhs, rhs) => lhs + rhs,\n        subN: (lhs, rhs) => lhs - rhs,\n        mulN: (lhs, rhs) => lhs * rhs,\n        inv: (num) => invert(num, ORDER),\n        sqrt: redef.sqrt || ((n) => sqrtP(f, n)),\n        invertBatch: (lst) => FpInvertBatch(f, lst),\n        // TODO: do we really need constant cmov?\n        // We don't have const-time bigints anyway, so probably will be not very useful\n        cmov: (a, b, c) => (c ? b : a),\n        toBytes: (num) => (isLE ? (0, utils_js_1.numberToBytesLE)(num, BYTES) : (0, utils_js_1.numberToBytesBE)(num, BYTES)),\n        fromBytes: (bytes) => {\n            if (bytes.length !== BYTES)\n                throw new Error(`Fp.fromBytes: expected ${BYTES}, got ${bytes.length}`);\n            return isLE ? (0, utils_js_1.bytesToNumberLE)(bytes) : (0, utils_js_1.bytesToNumberBE)(bytes);\n        },\n    });\n    return Object.freeze(f);\n}\nfunction FpSqrtOdd(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? root : Fp.neg(root);\n}\nfunction FpSqrtEven(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(`Field doesn't have isOdd`);\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\n * Which makes it slightly more biased, less secure.\n * @deprecated use mapKeyToField instead\n */\nfunction hashToPrivateScalar(hash, groupOrder, isLE = false) {\n    hash = (0, utils_js_1.ensureBytes)('privateHash', hash);\n    const hashLen = hash.length;\n    const minLen = nLength(groupOrder).nByteLength + 8;\n    if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n        throw new Error(`hashToPrivateScalar: expected ${minLen}-1024 bytes of input, got ${hashLen}`);\n    const num = isLE ? (0, utils_js_1.bytesToNumberLE)(hash) : (0, utils_js_1.bytesToNumberBE)(hash);\n    return mod(num, groupOrder - _1n) + _1n;\n}\n/**\n * Returns total number of bytes consumed by the field element.\n * For example, 32 bytes for usual 256-bit weierstrass curve.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of field\n */\nfunction getFieldBytesLength(fieldOrder) {\n    if (typeof fieldOrder !== 'bigint')\n        throw new Error('field order must be bigint');\n    const bitLength = fieldOrder.toString(2).length;\n    return Math.ceil(bitLength / 8);\n}\n/**\n * Returns minimal amount of bytes that can be safely reduced\n * by field order.\n * Should be 2^-128 for 128-bit curve such as P256.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of target hash\n */\nfunction getMinHashLength(fieldOrder) {\n    const length = getFieldBytesLength(fieldOrder);\n    return length + Math.ceil(length / 2);\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being negligible.\n * Needs at least 48 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\n * @param hash hash output from SHA3 or a similar function\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\n * @param isLE interpret hash bytes as LE num\n * @returns valid private scalar\n */\nfunction mapHashToField(key, fieldOrder, isLE = false) {\n    const len = key.length;\n    const fieldLen = getFieldBytesLength(fieldOrder);\n    const minLen = getMinHashLength(fieldOrder);\n    // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\n    if (len < 16 || len < minLen || len > 1024)\n        throw new Error(`expected ${minLen}-1024 bytes of input, got ${len}`);\n    const num = isLE ? (0, utils_js_1.bytesToNumberBE)(key) : (0, utils_js_1.bytesToNumberLE)(key);\n    // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n    const reduced = mod(num, fieldOrder - _1n) + _1n;\n    return isLE ? (0, utils_js_1.numberToBytesLE)(reduced, fieldLen) : (0, utils_js_1.numberToBytesBE)(reduced, fieldLen);\n}\n//# sourceMappingURL=modular.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wNAF = wNAF;\nexports.validateBasic = validateBasic;\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Abelian group utilities\nconst modular_js_1 = require(\"./modular.js\");\nconst utils_js_1 = require(\"./utils.js\");\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\n// Elliptic curve multiplication of Point by scalar. Fragile.\n// Scalars should always be less than curve order: this should be checked inside of a curve itself.\n// Creates precomputation tables for fast multiplication:\n// - private scalar is split by fixed size windows of W bits\n// - every window point is collected from window's table & added to accumulator\n// - since windows are different, same point inside tables won't be accessed more than once per calc\n// - each multiplication is 'Math.ceil(CURVE_ORDER / 𝑊) + 1' point additions (fixed for any scalar)\n// - +1 window is neccessary for wNAF\n// - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n// TODO: Research returning 2d JS array of windows, instead of a single window. This would allow\n// windows to be in different memory locations\nfunction wNAF(c, bits) {\n    const constTimeNegate = (condition, item) => {\n        const neg = item.negate();\n        return condition ? neg : item;\n    };\n    const opts = (W) => {\n        const windows = Math.ceil(bits / W) + 1; // +1, because\n        const windowSize = 2 ** (W - 1); // -1 because we skip zero\n        return { windows, windowSize };\n    };\n    return {\n        constTimeNegate,\n        // non-const time multiplication ladder\n        unsafeLadder(elm, n) {\n            let p = c.ZERO;\n            let d = elm;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        },\n        /**\n         * Creates a wNAF precomputation window. Used for caching.\n         * Default window size is set by `utils.precompute()` and is equal to 8.\n         * Number of precomputed points depends on the curve size:\n         * 2^(𝑊−1) * (Math.ceil(𝑛 / 𝑊) + 1), where:\n         * - 𝑊 is the window size\n         * - 𝑛 is the bitlength of the curve order.\n         * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n         * @returns precomputed point tables flattened to a single array\n         */\n        precomputeWindow(elm, W) {\n            const { windows, windowSize } = opts(W);\n            const points = [];\n            let p = elm;\n            let base = p;\n            for (let window = 0; window < windows; window++) {\n                base = p;\n                points.push(base);\n                // =1, because we skip zero\n                for (let i = 1; i < windowSize; i++) {\n                    base = base.add(p);\n                    points.push(base);\n                }\n                p = base.double();\n            }\n            return points;\n        },\n        /**\n         * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @returns real and fake (for const-time) points\n         */\n        wNAF(W, precomputes, n) {\n            // TODO: maybe check that scalar is less than group order? wNAF behavious is undefined otherwise\n            // But need to carefully remove other checks before wNAF. ORDER == bits here\n            const { windows, windowSize } = opts(W);\n            let p = c.ZERO;\n            let f = c.BASE;\n            const mask = BigInt(2 ** W - 1); // Create mask with W ones: 0b1111 for W=4 etc.\n            const maxNumber = 2 ** W;\n            const shiftBy = BigInt(W);\n            for (let window = 0; window < windows; window++) {\n                const offset = window * windowSize;\n                // Extract W bits.\n                let wbits = Number(n & mask);\n                // Shift number by W bits.\n                n >>= shiftBy;\n                // If the bits are bigger than max size, we'll split those.\n                // +224 => 256 - 32\n                if (wbits > windowSize) {\n                    wbits -= maxNumber;\n                    n += _1n;\n                }\n                // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n                // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n                // there is negate now: it is possible that negated element from low value\n                // would be the same as high element, which will create carry into next window.\n                // It's not obvious how this can fail, but still worth investigating later.\n                // Check if we're onto Zero point.\n                // Add random point inside current window to f.\n                const offset1 = offset;\n                const offset2 = offset + Math.abs(wbits) - 1; // -1 because we skip zero\n                const cond1 = window % 2 !== 0;\n                const cond2 = wbits < 0;\n                if (wbits === 0) {\n                    // The most important part for const-time getPublicKey\n                    f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n                }\n                else {\n                    p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n                }\n            }\n            // JIT-compiler should not eliminate f here, since it will later be used in normalizeZ()\n            // Even if the variable is still unused, there are some checks which will\n            // throw an exception, so compiler needs to prove they won't happen, which is hard.\n            // At this point there is a way to F be infinity-point even if p is not,\n            // which makes it less const-time: around 1 bigint multiply.\n            return { p, f };\n        },\n        wNAFCached(P, precomputesMap, n, transform) {\n            // @ts-ignore\n            const W = P._WINDOW_SIZE || 1;\n            // Calculate precomputes on a first run, reuse them after\n            let comp = precomputesMap.get(P);\n            if (!comp) {\n                comp = this.precomputeWindow(P, W);\n                if (W !== 1) {\n                    precomputesMap.set(P, transform(comp));\n                }\n            }\n            return this.wNAF(W, comp, n);\n        },\n    };\n}\nfunction validateBasic(curve) {\n    (0, modular_js_1.validateField)(curve.Fp);\n    (0, utils_js_1.validateObject)(curve, {\n        n: 'bigint',\n        h: 'bigint',\n        Gx: 'field',\n        Gy: 'field',\n    }, {\n        nBitLength: 'isSafeInteger',\n        nByteLength: 'isSafeInteger',\n    });\n    // Set defaults\n    return Object.freeze({\n        ...(0, modular_js_1.nLength)(curve.n, curve.nBitLength),\n        ...curve,\n        ...{ p: curve.Fp.ORDER },\n    });\n}\n//# sourceMappingURL=curve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DER = void 0;\nexports.weierstrassPoints = weierstrassPoints;\nexports.weierstrass = weierstrass;\nexports.SWUFpSqrtRatio = SWUFpSqrtRatio;\nexports.mapToCurveSimpleSWU = mapToCurveSimpleSWU;\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Short Weierstrass curve. The formula is: y² = x³ + ax + b\nconst curve_js_1 = require(\"./curve.js\");\nconst mod = require(\"./modular.js\");\nconst ut = require(\"./utils.js\");\nconst utils_js_1 = require(\"./utils.js\");\nfunction validatePointOpts(curve) {\n    const opts = (0, curve_js_1.validateBasic)(curve);\n    ut.validateObject(opts, {\n        a: 'field',\n        b: 'field',\n    }, {\n        allowedPrivateKeyLengths: 'array',\n        wrapPrivateKey: 'boolean',\n        isTorsionFree: 'function',\n        clearCofactor: 'function',\n        allowInfinityPoint: 'boolean',\n        fromBytes: 'function',\n        toBytes: 'function',\n    });\n    const { endo, Fp, a } = opts;\n    if (endo) {\n        if (!Fp.eql(a, Fp.ZERO)) {\n            throw new Error('Endomorphism can only be defined for Koblitz curves that have a=0');\n        }\n        if (typeof endo !== 'object' ||\n            typeof endo.beta !== 'bigint' ||\n            typeof endo.splitScalar !== 'function') {\n            throw new Error('Expected endomorphism with beta: bigint and splitScalar: function');\n        }\n    }\n    return Object.freeze({ ...opts });\n}\n// ASN.1 DER encoding utilities\nconst { bytesToNumberBE: b2n, hexToBytes: h2b } = ut;\nexports.DER = {\n    // asn.1 DER encoding utils\n    Err: class DERErr extends Error {\n        constructor(m = '') {\n            super(m);\n        }\n    },\n    _parseInt(data) {\n        const { Err: E } = exports.DER;\n        if (data.length < 2 || data[0] !== 0x02)\n            throw new E('Invalid signature integer tag');\n        const len = data[1];\n        const res = data.subarray(2, len + 2);\n        if (!len || res.length !== len)\n            throw new E('Invalid signature integer: wrong length');\n        // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n        // since we always use positive integers here. It must always be empty:\n        // - add zero byte if exists\n        // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n        if (res[0] & 0b10000000)\n            throw new E('Invalid signature integer: negative');\n        if (res[0] === 0x00 && !(res[1] & 0b10000000))\n            throw new E('Invalid signature integer: unnecessary leading zero');\n        return { d: b2n(res), l: data.subarray(len + 2) }; // d is data, l is left\n    },\n    toSig(hex) {\n        // parse DER signature\n        const { Err: E } = exports.DER;\n        const data = typeof hex === 'string' ? h2b(hex) : hex;\n        ut.abytes(data);\n        let l = data.length;\n        if (l < 2 || data[0] != 0x30)\n            throw new E('Invalid signature tag');\n        if (data[1] !== l - 2)\n            throw new E('Invalid signature: incorrect length');\n        const { d: r, l: sBytes } = exports.DER._parseInt(data.subarray(2));\n        const { d: s, l: rBytesLeft } = exports.DER._parseInt(sBytes);\n        if (rBytesLeft.length)\n            throw new E('Invalid signature: left bytes after parsing');\n        return { r, s };\n    },\n    hexFromSig(sig) {\n        // Add leading zero if first byte has negative bit enabled. More details in '_parseInt'\n        const slice = (s) => (Number.parseInt(s[0], 16) & 0b1000 ? '00' + s : s);\n        const h = (num) => {\n            const hex = num.toString(16);\n            return hex.length & 1 ? `0${hex}` : hex;\n        };\n        const s = slice(h(sig.s));\n        const r = slice(h(sig.r));\n        const shl = s.length / 2;\n        const rhl = r.length / 2;\n        const sl = h(shl);\n        const rl = h(rhl);\n        return `30${h(rhl + shl + 4)}02${rl}${r}02${sl}${s}`;\n    },\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\nfunction weierstrassPoints(opts) {\n    const CURVE = validatePointOpts(opts);\n    const { Fp } = CURVE; // All curves has same field / group length as for now, but they can differ\n    const toBytes = CURVE.toBytes ||\n        ((_c, point, _isCompressed) => {\n            const a = point.toAffine();\n            return ut.concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n        });\n    const fromBytes = CURVE.fromBytes ||\n        ((bytes) => {\n            // const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n            const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n            const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n            return { x, y };\n        });\n    /**\n     * y² = x³ + ax + b: Short weierstrass curve formula\n     * @returns y²\n     */\n    function weierstrassEquation(x) {\n        const { a, b } = CURVE;\n        const x2 = Fp.sqr(x); // x * x\n        const x3 = Fp.mul(x2, x); // x2 * x\n        return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n    }\n    // Validate whether the passed curve params are valid.\n    // We check if curve equation works for generator point.\n    // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n    // ProjectivePoint class has not been initialized yet.\n    if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx)))\n        throw new Error('bad generator point: equation left != right');\n    // Valid group elements reside in range 1..n-1\n    function isWithinCurveOrder(num) {\n        return typeof num === 'bigint' && _0n < num && num < CURVE.n;\n    }\n    function assertGE(num) {\n        if (!isWithinCurveOrder(num))\n            throw new Error('Expected valid bigint: 0 < bigint < curve.n');\n    }\n    // Validates if priv key is valid and converts it to bigint.\n    // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n    function normPrivateKeyToScalar(key) {\n        const { allowedPrivateKeyLengths: lengths, nByteLength, wrapPrivateKey, n } = CURVE;\n        if (lengths && typeof key !== 'bigint') {\n            if (ut.isBytes(key))\n                key = ut.bytesToHex(key);\n            // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n            if (typeof key !== 'string' || !lengths.includes(key.length))\n                throw new Error('Invalid key');\n            key = key.padStart(nByteLength * 2, '0');\n        }\n        let num;\n        try {\n            num =\n                typeof key === 'bigint'\n                    ? key\n                    : ut.bytesToNumberBE((0, utils_js_1.ensureBytes)('private key', key, nByteLength));\n        }\n        catch (error) {\n            throw new Error(`private key must be ${nByteLength} bytes, hex or bigint, not ${typeof key}`);\n        }\n        if (wrapPrivateKey)\n            num = mod.mod(num, n); // disabled by default, enabled for BLS\n        assertGE(num); // num in range [1..N-1]\n        return num;\n    }\n    const pointPrecomputes = new Map();\n    function assertPrjPoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ProjectivePoint expected');\n    }\n    /**\n     * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z) ∋ (x=x/z, y=y/z)\n     * Default Point works in 2d / affine coordinates: (x, y)\n     * We're doing calculations in projective, because its operations don't require costly inversion.\n     */\n    class Point {\n        constructor(px, py, pz) {\n            this.px = px;\n            this.py = py;\n            this.pz = pz;\n            if (px == null || !Fp.isValid(px))\n                throw new Error('x required');\n            if (py == null || !Fp.isValid(py))\n                throw new Error('y required');\n            if (pz == null || !Fp.isValid(pz))\n                throw new Error('z required');\n        }\n        // Does not validate if the point is on-curve.\n        // Use fromHex instead, or call assertValidity() later.\n        static fromAffine(p) {\n            const { x, y } = p || {};\n            if (!p || !Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('invalid affine point');\n            if (p instanceof Point)\n                throw new Error('projective point not allowed');\n            const is0 = (i) => Fp.eql(i, Fp.ZERO);\n            // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n            if (is0(x) && is0(y))\n                return Point.ZERO;\n            return new Point(x, y, Fp.ONE);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        /**\n         * Takes a bunch of Projective Points but executes only one\n         * inversion on all of them. Inversion is very slow operation,\n         * so this improves performance massively.\n         * Optimization: converts a list of projective points to a list of identical points with Z=1.\n         */\n        static normalizeZ(points) {\n            const toInv = Fp.invertBatch(points.map((p) => p.pz));\n            return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n        }\n        /**\n         * Converts hash string or Uint8Array to Point.\n         * @param hex short/long ECDSA hex\n         */\n        static fromHex(hex) {\n            const P = Point.fromAffine(fromBytes((0, utils_js_1.ensureBytes)('pointHex', hex)));\n            P.assertValidity();\n            return P;\n        }\n        // Multiplies generator point by privateKey.\n        static fromPrivateKey(privateKey) {\n            return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            this._WINDOW_SIZE = windowSize;\n            pointPrecomputes.delete(this);\n        }\n        // A point on curve is valid if it conforms to equation.\n        assertValidity() {\n            if (this.is0()) {\n                // (0, 1, 0) aka ZERO is invalid in most contexts.\n                // In BLS, ZERO can be serialized, so we allow it.\n                // (0, 0, 0) is wrong representation of ZERO and is always invalid.\n                if (CURVE.allowInfinityPoint && !Fp.is0(this.py))\n                    return;\n                throw new Error('bad point: ZERO');\n            }\n            // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n            const { x, y } = this.toAffine();\n            // Check if x, y are valid field elements\n            if (!Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('bad point: x or y not FE');\n            const left = Fp.sqr(y); // y²\n            const right = weierstrassEquation(x); // x³ + ax + b\n            if (!Fp.eql(left, right))\n                throw new Error('bad point: equation left != right');\n            if (!this.isTorsionFree())\n                throw new Error('bad point: not in prime-order subgroup');\n        }\n        hasEvenY() {\n            const { y } = this.toAffine();\n            if (Fp.isOdd)\n                return !Fp.isOdd(y);\n            throw new Error(\"Field doesn't support isOdd\");\n        }\n        /**\n         * Compare one point to another.\n         */\n        equals(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n            const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n            return U1 && U2;\n        }\n        /**\n         * Flips point to one corresponding to (x, -y) in Affine coordinates.\n         */\n        negate() {\n            return new Point(this.px, Fp.neg(this.py), this.pz);\n        }\n        // Renes-Costello-Batina exception-free doubling formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 3\n        // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n        double() {\n            const { a, b } = CURVE;\n            const b3 = Fp.mul(b, _3n);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            let t0 = Fp.mul(X1, X1); // step 1\n            let t1 = Fp.mul(Y1, Y1);\n            let t2 = Fp.mul(Z1, Z1);\n            let t3 = Fp.mul(X1, Y1);\n            t3 = Fp.add(t3, t3); // step 5\n            Z3 = Fp.mul(X1, Z1);\n            Z3 = Fp.add(Z3, Z3);\n            X3 = Fp.mul(a, Z3);\n            Y3 = Fp.mul(b3, t2);\n            Y3 = Fp.add(X3, Y3); // step 10\n            X3 = Fp.sub(t1, Y3);\n            Y3 = Fp.add(t1, Y3);\n            Y3 = Fp.mul(X3, Y3);\n            X3 = Fp.mul(t3, X3);\n            Z3 = Fp.mul(b3, Z3); // step 15\n            t2 = Fp.mul(a, t2);\n            t3 = Fp.sub(t0, t2);\n            t3 = Fp.mul(a, t3);\n            t3 = Fp.add(t3, Z3);\n            Z3 = Fp.add(t0, t0); // step 20\n            t0 = Fp.add(Z3, t0);\n            t0 = Fp.add(t0, t2);\n            t0 = Fp.mul(t0, t3);\n            Y3 = Fp.add(Y3, t0);\n            t2 = Fp.mul(Y1, Z1); // step 25\n            t2 = Fp.add(t2, t2);\n            t0 = Fp.mul(t2, t3);\n            X3 = Fp.sub(X3, t0);\n            Z3 = Fp.mul(t2, t1);\n            Z3 = Fp.add(Z3, Z3); // step 30\n            Z3 = Fp.add(Z3, Z3);\n            return new Point(X3, Y3, Z3);\n        }\n        // Renes-Costello-Batina exception-free addition formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 1\n        // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n        add(other) {\n            assertPrjPoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            const a = CURVE.a;\n            const b3 = Fp.mul(CURVE.b, _3n);\n            let t0 = Fp.mul(X1, X2); // step 1\n            let t1 = Fp.mul(Y1, Y2);\n            let t2 = Fp.mul(Z1, Z2);\n            let t3 = Fp.add(X1, Y1);\n            let t4 = Fp.add(X2, Y2); // step 5\n            t3 = Fp.mul(t3, t4);\n            t4 = Fp.add(t0, t1);\n            t3 = Fp.sub(t3, t4);\n            t4 = Fp.add(X1, Z1);\n            let t5 = Fp.add(X2, Z2); // step 10\n            t4 = Fp.mul(t4, t5);\n            t5 = Fp.add(t0, t2);\n            t4 = Fp.sub(t4, t5);\n            t5 = Fp.add(Y1, Z1);\n            X3 = Fp.add(Y2, Z2); // step 15\n            t5 = Fp.mul(t5, X3);\n            X3 = Fp.add(t1, t2);\n            t5 = Fp.sub(t5, X3);\n            Z3 = Fp.mul(a, t4);\n            X3 = Fp.mul(b3, t2); // step 20\n            Z3 = Fp.add(X3, Z3);\n            X3 = Fp.sub(t1, Z3);\n            Z3 = Fp.add(t1, Z3);\n            Y3 = Fp.mul(X3, Z3);\n            t1 = Fp.add(t0, t0); // step 25\n            t1 = Fp.add(t1, t0);\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.mul(b3, t4);\n            t1 = Fp.add(t1, t2);\n            t2 = Fp.sub(t0, t2); // step 30\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.add(t4, t2);\n            t0 = Fp.mul(t1, t4);\n            Y3 = Fp.add(Y3, t0);\n            t0 = Fp.mul(t5, t4); // step 35\n            X3 = Fp.mul(t3, X3);\n            X3 = Fp.sub(X3, t0);\n            t0 = Fp.mul(t3, t1);\n            Z3 = Fp.mul(t5, Z3);\n            Z3 = Fp.add(Z3, t0); // step 40\n            return new Point(X3, Y3, Z3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        wNAF(n) {\n            return wnaf.wNAFCached(this, pointPrecomputes, n, (comp) => {\n                const toInv = Fp.invertBatch(comp.map((p) => p.pz));\n                return comp.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n            });\n        }\n        /**\n         * Non-constant-time multiplication. Uses double-and-add algorithm.\n         * It's faster, but should only be used when you don't care about\n         * an exposed private key e.g. sig verification, which works over *public* keys.\n         */\n        multiplyUnsafe(n) {\n            const I = Point.ZERO;\n            if (n === _0n)\n                return I;\n            assertGE(n); // Will throw on 0\n            if (n === _1n)\n                return this;\n            const { endo } = CURVE;\n            if (!endo)\n                return wnaf.unsafeLadder(this, n);\n            // Apply endomorphism\n            let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let k1p = I;\n            let k2p = I;\n            let d = this;\n            while (k1 > _0n || k2 > _0n) {\n                if (k1 & _1n)\n                    k1p = k1p.add(d);\n                if (k2 & _1n)\n                    k2p = k2p.add(d);\n                d = d.double();\n                k1 >>= _1n;\n                k2 >>= _1n;\n            }\n            if (k1neg)\n                k1p = k1p.negate();\n            if (k2neg)\n                k2p = k2p.negate();\n            k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n            return k1p.add(k2p);\n        }\n        /**\n         * Constant time multiplication.\n         * Uses wNAF method. Windowed method may be 10% faster,\n         * but takes 2x longer to generate and consumes 2x memory.\n         * Uses precomputes when available.\n         * Uses endomorphism for Koblitz curves.\n         * @param scalar by which the point would be multiplied\n         * @returns New point\n         */\n        multiply(scalar) {\n            assertGE(scalar);\n            let n = scalar;\n            let point, fake; // Fake point is used to const-time mult\n            const { endo } = CURVE;\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n                let { p: k1p, f: f1p } = this.wNAF(k1);\n                let { p: k2p, f: f2p } = this.wNAF(k2);\n                k1p = wnaf.constTimeNegate(k1neg, k1p);\n                k2p = wnaf.constTimeNegate(k2neg, k2p);\n                k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n                point = k1p.add(k2p);\n                fake = f1p.add(f2p);\n            }\n            else {\n                const { p, f } = this.wNAF(n);\n                point = p;\n                fake = f;\n            }\n            // Normalize `z` for both points, but return only real one\n            return Point.normalizeZ([point, fake])[0];\n        }\n        /**\n         * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n         * Not using Strauss-Shamir trick: precomputation tables are faster.\n         * The trick could be useful if both P and Q are not G (not in our case).\n         * @returns non-zero affine point\n         */\n        multiplyAndAddUnsafe(Q, a, b) {\n            const G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n            const mul = (P, a // Select faster multiply() method\n            ) => (a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a));\n            const sum = mul(this, a).add(mul(Q, b));\n            return sum.is0() ? undefined : sum;\n        }\n        // Converts Projective point to affine (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        // (x, y, z) ∋ (x=x/z, y=y/z)\n        toAffine(iz) {\n            const { px: x, py: y, pz: z } = this;\n            const is0 = this.is0();\n            // If invZ was 0, we return zero point. However we still want to execute\n            // all operations, so we replace invZ with a random number, 1.\n            if (iz == null)\n                iz = is0 ? Fp.ONE : Fp.inv(z);\n            const ax = Fp.mul(x, iz);\n            const ay = Fp.mul(y, iz);\n            const zz = Fp.mul(z, iz);\n            if (is0)\n                return { x: Fp.ZERO, y: Fp.ZERO };\n            if (!Fp.eql(zz, Fp.ONE))\n                throw new Error('invZ was invalid');\n            return { x: ax, y: ay };\n        }\n        isTorsionFree() {\n            const { h: cofactor, isTorsionFree } = CURVE;\n            if (cofactor === _1n)\n                return true; // No subgroups, always torsion-free\n            if (isTorsionFree)\n                return isTorsionFree(Point, this);\n            throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n        }\n        clearCofactor() {\n            const { h: cofactor, clearCofactor } = CURVE;\n            if (cofactor === _1n)\n                return this; // Fast-path\n            if (clearCofactor)\n                return clearCofactor(Point, this);\n            return this.multiplyUnsafe(CURVE.h);\n        }\n        toRawBytes(isCompressed = true) {\n            this.assertValidity();\n            return toBytes(Point, this, isCompressed);\n        }\n        toHex(isCompressed = true) {\n            return ut.bytesToHex(this.toRawBytes(isCompressed));\n        }\n    }\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n    const _bits = CURVE.nBitLength;\n    const wnaf = (0, curve_js_1.wNAF)(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n    // Validate if generator point is on curve\n    return {\n        CURVE,\n        ProjectivePoint: Point,\n        normPrivateKeyToScalar,\n        weierstrassEquation,\n        isWithinCurveOrder,\n    };\n}\nfunction validateOpts(curve) {\n    const opts = (0, curve_js_1.validateBasic)(curve);\n    ut.validateObject(opts, {\n        hash: 'hash',\n        hmac: 'function',\n        randomBytes: 'function',\n    }, {\n        bits2int: 'function',\n        bits2int_modN: 'function',\n        lowS: 'boolean',\n    });\n    return Object.freeze({ lowS: true, ...opts });\n}\nfunction weierstrass(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { Fp, n: CURVE_ORDER } = CURVE;\n    const compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n    const uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n    function isValidFieldElement(num) {\n        return _0n < num && num < Fp.ORDER; // 0 is banned since it's not invertible FE\n    }\n    function modN(a) {\n        return mod.mod(a, CURVE_ORDER);\n    }\n    function invN(a) {\n        return mod.invert(a, CURVE_ORDER);\n    }\n    const { ProjectivePoint: Point, normPrivateKeyToScalar, weierstrassEquation, isWithinCurveOrder, } = weierstrassPoints({\n        ...CURVE,\n        toBytes(_c, point, isCompressed) {\n            const a = point.toAffine();\n            const x = Fp.toBytes(a.x);\n            const cat = ut.concatBytes;\n            if (isCompressed) {\n                return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n            }\n            else {\n                return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n            }\n        },\n        fromBytes(bytes) {\n            const len = bytes.length;\n            const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // this.assertValidity() is done inside of fromHex\n            if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n                const x = ut.bytesToNumberBE(tail);\n                if (!isValidFieldElement(x))\n                    throw new Error('Point is not on curve');\n                const y2 = weierstrassEquation(x); // y² = x³ + ax + b\n                let y;\n                try {\n                    y = Fp.sqrt(y2); // y = y² ^ (p+1)/4\n                }\n                catch (sqrtError) {\n                    const suffix = sqrtError instanceof Error ? ': ' + sqrtError.message : '';\n                    throw new Error('Point is not on curve' + suffix);\n                }\n                const isYOdd = (y & _1n) === _1n;\n                // ECDSA\n                const isHeadOdd = (head & 1) === 1;\n                if (isHeadOdd !== isYOdd)\n                    y = Fp.neg(y);\n                return { x, y };\n            }\n            else if (len === uncompressedLen && head === 0x04) {\n                const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n                const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n                return { x, y };\n            }\n            else {\n                throw new Error(`Point of length ${len} was invalid. Expected ${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes`);\n            }\n        },\n    });\n    const numToNByteStr = (num) => ut.bytesToHex(ut.numberToBytesBE(num, CURVE.nByteLength));\n    function isBiggerThanHalfOrder(number) {\n        const HALF = CURVE_ORDER >> _1n;\n        return number > HALF;\n    }\n    function normalizeS(s) {\n        return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n    }\n    // slice bytes num\n    const slcNum = (b, from, to) => ut.bytesToNumberBE(b.slice(from, to));\n    /**\n     * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n     */\n    class Signature {\n        constructor(r, s, recovery) {\n            this.r = r;\n            this.s = s;\n            this.recovery = recovery;\n            this.assertValidity();\n        }\n        // pair (bytes of r, bytes of s)\n        static fromCompact(hex) {\n            const l = CURVE.nByteLength;\n            hex = (0, utils_js_1.ensureBytes)('compactSignature', hex, l * 2);\n            return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n        }\n        // DER encoded ECDSA signature\n        // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n        static fromDER(hex) {\n            const { r, s } = exports.DER.toSig((0, utils_js_1.ensureBytes)('DER', hex));\n            return new Signature(r, s);\n        }\n        assertValidity() {\n            // can use assertGE here\n            if (!isWithinCurveOrder(this.r))\n                throw new Error('r must be 0 < r < CURVE.n');\n            if (!isWithinCurveOrder(this.s))\n                throw new Error('s must be 0 < s < CURVE.n');\n        }\n        addRecoveryBit(recovery) {\n            return new Signature(this.r, this.s, recovery);\n        }\n        recoverPublicKey(msgHash) {\n            const { r, s, recovery: rec } = this;\n            const h = bits2int_modN((0, utils_js_1.ensureBytes)('msgHash', msgHash)); // Truncate hash\n            if (rec == null || ![0, 1, 2, 3].includes(rec))\n                throw new Error('recovery id invalid');\n            const radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n            if (radj >= Fp.ORDER)\n                throw new Error('recovery id 2 or 3 invalid');\n            const prefix = (rec & 1) === 0 ? '02' : '03';\n            const R = Point.fromHex(prefix + numToNByteStr(radj));\n            const ir = invN(radj); // r^-1\n            const u1 = modN(-h * ir); // -hr^-1\n            const u2 = modN(s * ir); // sr^-1\n            const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n            if (!Q)\n                throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n            Q.assertValidity();\n            return Q;\n        }\n        // Signatures should be low-s, to prevent malleability.\n        hasHighS() {\n            return isBiggerThanHalfOrder(this.s);\n        }\n        normalizeS() {\n            return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n        }\n        // DER-encoded\n        toDERRawBytes() {\n            return ut.hexToBytes(this.toDERHex());\n        }\n        toDERHex() {\n            return exports.DER.hexFromSig({ r: this.r, s: this.s });\n        }\n        // padded bytes of r, then padded bytes of s\n        toCompactRawBytes() {\n            return ut.hexToBytes(this.toCompactHex());\n        }\n        toCompactHex() {\n            return numToNByteStr(this.r) + numToNByteStr(this.s);\n        }\n    }\n    const utils = {\n        isValidPrivateKey(privateKey) {\n            try {\n                normPrivateKeyToScalar(privateKey);\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        },\n        normPrivateKeyToScalar: normPrivateKeyToScalar,\n        /**\n         * Produces cryptographically secure private key from random of size\n         * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n         */\n        randomPrivateKey: () => {\n            const length = mod.getMinHashLength(CURVE.n);\n            return mod.mapHashToField(CURVE.randomBytes(length), CURVE.n);\n        },\n        /**\n         * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n         * Allows to massively speed-up `point.multiply(scalar)`.\n         * @returns cached point\n         * @example\n         * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n         * fast.multiply(privKey); // much faster ECDH now\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            point._setWindowSize(windowSize);\n            point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n            return point;\n        },\n    };\n    /**\n     * Computes public key for a private key. Checks for validity of the private key.\n     * @param privateKey private key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns Public key, full when isCompressed=false; short when isCompressed=true\n     */\n    function getPublicKey(privateKey, isCompressed = true) {\n        return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n    }\n    /**\n     * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n     */\n    function isProbPub(item) {\n        const arr = ut.isBytes(item);\n        const str = typeof item === 'string';\n        const len = (arr || str) && item.length;\n        if (arr)\n            return len === compressedLen || len === uncompressedLen;\n        if (str)\n            return len === 2 * compressedLen || len === 2 * uncompressedLen;\n        if (item instanceof Point)\n            return true;\n        return false;\n    }\n    /**\n     * ECDH (Elliptic Curve Diffie Hellman).\n     * Computes shared public key from private key and public key.\n     * Checks: 1) private key validity 2) shared key is on-curve.\n     * Does NOT hash the result.\n     * @param privateA private key\n     * @param publicB different public key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns shared public key\n     */\n    function getSharedSecret(privateA, publicB, isCompressed = true) {\n        if (isProbPub(privateA))\n            throw new Error('first arg must be private key');\n        if (!isProbPub(publicB))\n            throw new Error('second arg must be public key');\n        const b = Point.fromHex(publicB); // check for being on-curve\n        return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n    }\n    // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n    // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n    // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n    // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n    const bits2int = CURVE.bits2int ||\n        function (bytes) {\n            // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n            // for some cases, since bytes.length * 8 is not actual bitLength.\n            const num = ut.bytesToNumberBE(bytes); // check for == u8 done here\n            const delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n            return delta > 0 ? num >> BigInt(delta) : num;\n        };\n    const bits2int_modN = CURVE.bits2int_modN ||\n        function (bytes) {\n            return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n        };\n    // NOTE: pads output with zero as per spec\n    const ORDER_MASK = ut.bitMask(CURVE.nBitLength);\n    /**\n     * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n     */\n    function int2octets(num) {\n        if (typeof num !== 'bigint')\n            throw new Error('bigint expected');\n        if (!(_0n <= num && num < ORDER_MASK))\n            throw new Error(`bigint expected < 2^${CURVE.nBitLength}`);\n        // works with order, can have different size than numToField!\n        return ut.numberToBytesBE(num, CURVE.nByteLength);\n    }\n    // Steps A, D of RFC6979 3.2\n    // Creates RFC6979 seed; converts msg/privKey to numbers.\n    // Used only in sign, not in verify.\n    // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order, this will be wrong at least for P521.\n    // Also it can be bigger for P224 + SHA256\n    function prepSig(msgHash, privateKey, opts = defaultSigOpts) {\n        if (['recovered', 'canonical'].some((k) => k in opts))\n            throw new Error('sign() legacy options not supported');\n        const { hash, randomBytes } = CURVE;\n        let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n        if (lowS == null)\n            lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n        msgHash = (0, utils_js_1.ensureBytes)('msgHash', msgHash);\n        if (prehash)\n            msgHash = (0, utils_js_1.ensureBytes)('prehashed msgHash', hash(msgHash));\n        // We can't later call bits2octets, since nested bits2int is broken for curves\n        // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n        // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n        const h1int = bits2int_modN(msgHash);\n        const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n        const seedArgs = [int2octets(d), int2octets(h1int)];\n        // extraEntropy. RFC6979 3.6: additional k' (optional).\n        if (ent != null && ent !== false) {\n            // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n            const e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n            seedArgs.push((0, utils_js_1.ensureBytes)('extraEntropy', e)); // check for being bytes\n        }\n        const seed = ut.concatBytes(...seedArgs); // Step D of RFC6979 3.2\n        const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n        // Converts signature params into point w r/s, checks result for validity.\n        function k2sig(kBytes) {\n            // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n            const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n            if (!isWithinCurveOrder(k))\n                return; // Important: all mod() calls here must be done over N\n            const ik = invN(k); // k^-1 mod n\n            const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n            const r = modN(q.x); // r = q.x mod n\n            if (r === _0n)\n                return;\n            // Can use scalar blinding b^-1(bm + bdr) where b ∈ [1,q−1] according to\n            // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n            // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n            const s = modN(ik * modN(m + r * d)); // Not using blinding here\n            if (s === _0n)\n                return;\n            let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n            let normS = s;\n            if (lowS && isBiggerThanHalfOrder(s)) {\n                normS = normalizeS(s); // if lowS was passed, ensure s is always\n                recovery ^= 1; // // in the bottom half of N\n            }\n            return new Signature(r, normS, recovery); // use normS, not s\n        }\n        return { seed, k2sig };\n    }\n    const defaultSigOpts = { lowS: CURVE.lowS, prehash: false };\n    const defaultVerOpts = { lowS: CURVE.lowS, prehash: false };\n    /**\n     * Signs message hash with a private key.\n     * ```\n     * sign(m, d, k) where\n     *   (x, y) = G × k\n     *   r = x mod n\n     *   s = (m + dr)/k mod n\n     * ```\n     * @param msgHash NOT message. msg needs to be hashed to `msgHash`, or use `prehash`.\n     * @param privKey private key\n     * @param opts lowS for non-malleable sigs. extraEntropy for mixing randomness into k. prehash will hash first arg.\n     * @returns signature with recovery param\n     */\n    function sign(msgHash, privKey, opts = defaultSigOpts) {\n        const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n        const C = CURVE;\n        const drbg = ut.createHmacDrbg(C.hash.outputLen, C.nByteLength, C.hmac);\n        return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    }\n    // Enable precomputes. Slows down first publicKey computation by 20ms.\n    Point.BASE._setWindowSize(8);\n    // utils.precompute(8, ProjectivePoint.BASE)\n    /**\n     * Verifies a signature against message hash and public key.\n     * Rejects lowS signatures by default: to override,\n     * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n     *\n     * ```\n     * verify(r, s, h, P) where\n     *   U1 = hs^-1 mod n\n     *   U2 = rs^-1 mod n\n     *   R = U1⋅G - U2⋅P\n     *   mod(R.x, n) == r\n     * ```\n     */\n    function verify(signature, msgHash, publicKey, opts = defaultVerOpts) {\n        const sg = signature;\n        msgHash = (0, utils_js_1.ensureBytes)('msgHash', msgHash);\n        publicKey = (0, utils_js_1.ensureBytes)('publicKey', publicKey);\n        if ('strict' in opts)\n            throw new Error('options.strict was renamed to lowS');\n        const { lowS, prehash } = opts;\n        let _sig = undefined;\n        let P;\n        try {\n            if (typeof sg === 'string' || ut.isBytes(sg)) {\n                // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n                // Since DER can also be 2*nByteLength bytes, we check for it first.\n                try {\n                    _sig = Signature.fromDER(sg);\n                }\n                catch (derError) {\n                    if (!(derError instanceof exports.DER.Err))\n                        throw derError;\n                    _sig = Signature.fromCompact(sg);\n                }\n            }\n            else if (typeof sg === 'object' && typeof sg.r === 'bigint' && typeof sg.s === 'bigint') {\n                const { r, s } = sg;\n                _sig = new Signature(r, s);\n            }\n            else {\n                throw new Error('PARSE');\n            }\n            P = Point.fromHex(publicKey);\n        }\n        catch (error) {\n            if (error.message === 'PARSE')\n                throw new Error(`signature must be Signature instance, Uint8Array or hex string`);\n            return false;\n        }\n        if (lowS && _sig.hasHighS())\n            return false;\n        if (prehash)\n            msgHash = CURVE.hash(msgHash);\n        const { r, s } = _sig;\n        const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n        const is = invN(s); // s^-1\n        const u1 = modN(h * is); // u1 = hs^-1 mod n\n        const u2 = modN(r * is); // u2 = rs^-1 mod n\n        const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)?.toAffine(); // R = u1⋅G + u2⋅P\n        if (!R)\n            return false;\n        const v = modN(R.x);\n        return v === r;\n    }\n    return {\n        CURVE,\n        getPublicKey,\n        getSharedSecret,\n        sign,\n        verify,\n        ProjectivePoint: Point,\n        Signature,\n        utils,\n    };\n}\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nfunction SWUFpSqrtRatio(Fp, Z) {\n    // Generic implementation\n    const q = Fp.ORDER;\n    let l = _0n;\n    for (let o = q - _1n; o % _2n === _0n; o /= _2n)\n        l += _1n;\n    const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n    // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n    // 2n ** c1 == 2n << (c1-1)\n    const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\n    const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n    const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n    const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n    const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n    const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n    const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n    const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n    let sqrtRatio = (u, v) => {\n        let tv1 = c6; // 1. tv1 = c6\n        let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n        let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n        tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n        let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n        tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n        tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n        tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n        tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n        let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n        tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n        let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n        tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n        tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n        tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n        tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n        // 17. for i in (c1, c1 - 1, ..., 2):\n        for (let i = c1; i > _1n; i--) {\n            let tv5 = i - _2n; // 18.    tv5 = i - 2\n            tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\n            let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n            const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n            tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n            tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n            tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n            tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n            tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n        }\n        return { isValid: isQR, value: tv3 };\n    };\n    if (Fp.ORDER % _4n === _3n) {\n        // sqrt_ratio_3mod4(u, v)\n        const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n        const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n        sqrtRatio = (u, v) => {\n            let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n            const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n            tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n            let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n            y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n            const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n            const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n            const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n            let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n            return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n        };\n    }\n    // No curves uses that\n    // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n    return sqrtRatio;\n}\n/**\n * Simplified Shallue-van de Woestijne-Ulas Method\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\n */\nfunction mapToCurveSimpleSWU(Fp, opts) {\n    mod.validateField(Fp);\n    if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z))\n        throw new Error('mapToCurveSimpleSWU: invalid opts');\n    const sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n    if (!Fp.isOdd)\n        throw new Error('Fp.isOdd is not implemented!');\n    // Input: u, an element of F.\n    // Output: (x, y), a point on E.\n    return (u) => {\n        // prettier-ignore\n        let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n        tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n        tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n        tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n        tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n        tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n        tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n        tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n        tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n        tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n        tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n        tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n        tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n        tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n        tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n        tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n        tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n        x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n        const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n        y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n        y = Fp.mul(y, value); // 20.   y = y * y1\n        x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n        y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n        const e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n        y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n        x = Fp.div(x, tv4); // 25.   x = x / tv4\n        return { x, y };\n    };\n}\n//# sourceMappingURL=weierstrass.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getHash = getHash;\nexports.createCurve = createCurve;\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst hmac_1 = require(\"@noble/hashes/hmac\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst weierstrass_js_1 = require(\"./abstract/weierstrass.js\");\n// connects noble-curves to noble-hashes\nfunction getHash(hash) {\n    return {\n        hash,\n        hmac: (key, ...msgs) => (0, hmac_1.hmac)(hash, key, (0, utils_1.concatBytes)(...msgs)),\n        randomBytes: utils_1.randomBytes,\n    };\n}\nfunction createCurve(curveDef, defHash) {\n    const create = (hash) => (0, weierstrass_js_1.weierstrass)({ ...curveDef, ...getHash(hash) });\n    return Object.freeze({ ...create(defHash), create });\n}\n//# sourceMappingURL=_shortw_utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expand_message_xmd = expand_message_xmd;\nexports.expand_message_xof = expand_message_xof;\nexports.hash_to_field = hash_to_field;\nexports.isogenyMap = isogenyMap;\nexports.createHasher = createHasher;\nconst modular_js_1 = require(\"./modular.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// Octet Stream to Integer. \"spec\" implementation of os2ip is 2.5x slower vs bytesToNumberBE.\nconst os2ip = utils_js_1.bytesToNumberBE;\n// Integer to Octet Stream (numberToBytesBE)\nfunction i2osp(value, length) {\n    if (value < 0 || value >= 1 << (8 * length)) {\n        throw new Error(`bad I2OSP call: value=${value} length=${length}`);\n    }\n    const res = Array.from({ length }).fill(0);\n    for (let i = length - 1; i >= 0; i--) {\n        res[i] = value & 0xff;\n        value >>>= 8;\n    }\n    return new Uint8Array(res);\n}\nfunction strxor(a, b) {\n    const arr = new Uint8Array(a.length);\n    for (let i = 0; i < a.length; i++) {\n        arr[i] = a[i] ^ b[i];\n    }\n    return arr;\n}\nfunction anum(item) {\n    if (!Number.isSafeInteger(item))\n        throw new Error('number expected');\n}\n// Produces a uniformly random byte string using a cryptographic hash function H that outputs b bits\n// https://www.rfc-editor.org/rfc/rfc9380#section-5.3.1\nfunction expand_message_xmd(msg, DST, lenInBytes, H) {\n    (0, utils_js_1.abytes)(msg);\n    (0, utils_js_1.abytes)(DST);\n    anum(lenInBytes);\n    // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n    if (DST.length > 255)\n        DST = H((0, utils_js_1.concatBytes)((0, utils_js_1.utf8ToBytes)('H2C-OVERSIZE-DST-'), DST));\n    const { outputLen: b_in_bytes, blockLen: r_in_bytes } = H;\n    const ell = Math.ceil(lenInBytes / b_in_bytes);\n    if (ell > 255)\n        throw new Error('Invalid xmd length');\n    const DST_prime = (0, utils_js_1.concatBytes)(DST, i2osp(DST.length, 1));\n    const Z_pad = i2osp(0, r_in_bytes);\n    const l_i_b_str = i2osp(lenInBytes, 2); // len_in_bytes_str\n    const b = new Array(ell);\n    const b_0 = H((0, utils_js_1.concatBytes)(Z_pad, msg, l_i_b_str, i2osp(0, 1), DST_prime));\n    b[0] = H((0, utils_js_1.concatBytes)(b_0, i2osp(1, 1), DST_prime));\n    for (let i = 1; i <= ell; i++) {\n        const args = [strxor(b_0, b[i - 1]), i2osp(i + 1, 1), DST_prime];\n        b[i] = H((0, utils_js_1.concatBytes)(...args));\n    }\n    const pseudo_random_bytes = (0, utils_js_1.concatBytes)(...b);\n    return pseudo_random_bytes.slice(0, lenInBytes);\n}\n// Produces a uniformly random byte string using an extendable-output function (XOF) H.\n// 1. The collision resistance of H MUST be at least k bits.\n// 2. H MUST be an XOF that has been proved indifferentiable from\n//    a random oracle under a reasonable cryptographic assumption.\n// https://www.rfc-editor.org/rfc/rfc9380#section-5.3.2\nfunction expand_message_xof(msg, DST, lenInBytes, k, H) {\n    (0, utils_js_1.abytes)(msg);\n    (0, utils_js_1.abytes)(DST);\n    anum(lenInBytes);\n    // https://www.rfc-editor.org/rfc/rfc9380#section-5.3.3\n    // DST = H('H2C-OVERSIZE-DST-' || a_very_long_DST, Math.ceil((lenInBytes * k) / 8));\n    if (DST.length > 255) {\n        const dkLen = Math.ceil((2 * k) / 8);\n        DST = H.create({ dkLen }).update((0, utils_js_1.utf8ToBytes)('H2C-OVERSIZE-DST-')).update(DST).digest();\n    }\n    if (lenInBytes > 65535 || DST.length > 255)\n        throw new Error('expand_message_xof: invalid lenInBytes');\n    return (H.create({ dkLen: lenInBytes })\n        .update(msg)\n        .update(i2osp(lenInBytes, 2))\n        // 2. DST_prime = DST || I2OSP(len(DST), 1)\n        .update(DST)\n        .update(i2osp(DST.length, 1))\n        .digest());\n}\n/**\n * Hashes arbitrary-length byte strings to a list of one or more elements of a finite field F\n * https://www.rfc-editor.org/rfc/rfc9380#section-5.2\n * @param msg a byte string containing the message to hash\n * @param count the number of elements of F to output\n * @param options `{DST: string, p: bigint, m: number, k: number, expand: 'xmd' | 'xof', hash: H}`, see above\n * @returns [u_0, ..., u_(count - 1)], a list of field elements.\n */\nfunction hash_to_field(msg, count, options) {\n    (0, utils_js_1.validateObject)(options, {\n        DST: 'stringOrUint8Array',\n        p: 'bigint',\n        m: 'isSafeInteger',\n        k: 'isSafeInteger',\n        hash: 'hash',\n    });\n    const { p, k, m, hash, expand, DST: _DST } = options;\n    (0, utils_js_1.abytes)(msg);\n    anum(count);\n    const DST = typeof _DST === 'string' ? (0, utils_js_1.utf8ToBytes)(_DST) : _DST;\n    const log2p = p.toString(2).length;\n    const L = Math.ceil((log2p + k) / 8); // section 5.1 of ietf draft link above\n    const len_in_bytes = count * m * L;\n    let prb; // pseudo_random_bytes\n    if (expand === 'xmd') {\n        prb = expand_message_xmd(msg, DST, len_in_bytes, hash);\n    }\n    else if (expand === 'xof') {\n        prb = expand_message_xof(msg, DST, len_in_bytes, k, hash);\n    }\n    else if (expand === '_internal_pass') {\n        // for internal tests only\n        prb = msg;\n    }\n    else {\n        throw new Error('expand must be \"xmd\" or \"xof\"');\n    }\n    const u = new Array(count);\n    for (let i = 0; i < count; i++) {\n        const e = new Array(m);\n        for (let j = 0; j < m; j++) {\n            const elm_offset = L * (j + i * m);\n            const tv = prb.subarray(elm_offset, elm_offset + L);\n            e[j] = (0, modular_js_1.mod)(os2ip(tv), p);\n        }\n        u[i] = e;\n    }\n    return u;\n}\nfunction isogenyMap(field, map) {\n    // Make same order as in spec\n    const COEFF = map.map((i) => Array.from(i).reverse());\n    return (x, y) => {\n        const [xNum, xDen, yNum, yDen] = COEFF.map((val) => val.reduce((acc, i) => field.add(field.mul(acc, x), i)));\n        x = field.div(xNum, xDen); // xNum / xDen\n        y = field.mul(y, field.div(yNum, yDen)); // y * (yNum / yDev)\n        return { x, y };\n    };\n}\nfunction createHasher(Point, mapToCurve, def) {\n    if (typeof mapToCurve !== 'function')\n        throw new Error('mapToCurve() must be defined');\n    return {\n        // Encodes byte string to elliptic curve.\n        // hash_to_curve from https://www.rfc-editor.org/rfc/rfc9380#section-3\n        hashToCurve(msg, options) {\n            const u = hash_to_field(msg, 2, { ...def, DST: def.DST, ...options });\n            const u0 = Point.fromAffine(mapToCurve(u[0]));\n            const u1 = Point.fromAffine(mapToCurve(u[1]));\n            const P = u0.add(u1).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n        // Encodes byte string to elliptic curve.\n        // encode_to_curve from https://www.rfc-editor.org/rfc/rfc9380#section-3\n        encodeToCurve(msg, options) {\n            const u = hash_to_field(msg, 1, { ...def, DST: def.encodeDST, ...options });\n            const P = Point.fromAffine(mapToCurve(u[0])).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n        // Same as encodeToCurve, but without hash\n        mapToCurve(scalars) {\n            if (!Array.isArray(scalars))\n                throw new Error('mapToCurve: expected array of bigints');\n            for (const i of scalars)\n                if (typeof i !== 'bigint')\n                    throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);\n            const P = Point.fromAffine(mapToCurve(scalars)).clearCofactor();\n            P.assertValidity();\n            return P;\n        },\n    };\n}\n//# sourceMappingURL=hash-to-curve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encodeToCurve = exports.hashToCurve = exports.schnorr = exports.secp256k1 = void 0;\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst _shortw_utils_js_1 = require(\"./_shortw_utils.js\");\nconst hash_to_curve_js_1 = require(\"./abstract/hash-to-curve.js\");\nconst modular_js_1 = require(\"./abstract/modular.js\");\nconst utils_js_1 = require(\"./abstract/utils.js\");\nconst weierstrass_js_1 = require(\"./abstract/weierstrass.js\");\nconst secp256k1P = BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f');\nconst secp256k1N = BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141');\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst divNearest = (a, b) => (a + b / _2n) / b;\n/**\n * √n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y) {\n    const P = secp256k1P;\n    // prettier-ignore\n    const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n    // prettier-ignore\n    const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n    const b2 = (y * y * y) % P; // x^3, 11\n    const b3 = (b2 * b2 * y) % P; // x^7\n    const b6 = ((0, modular_js_1.pow2)(b3, _3n, P) * b3) % P;\n    const b9 = ((0, modular_js_1.pow2)(b6, _3n, P) * b3) % P;\n    const b11 = ((0, modular_js_1.pow2)(b9, _2n, P) * b2) % P;\n    const b22 = ((0, modular_js_1.pow2)(b11, _11n, P) * b11) % P;\n    const b44 = ((0, modular_js_1.pow2)(b22, _22n, P) * b22) % P;\n    const b88 = ((0, modular_js_1.pow2)(b44, _44n, P) * b44) % P;\n    const b176 = ((0, modular_js_1.pow2)(b88, _88n, P) * b88) % P;\n    const b220 = ((0, modular_js_1.pow2)(b176, _44n, P) * b44) % P;\n    const b223 = ((0, modular_js_1.pow2)(b220, _3n, P) * b3) % P;\n    const t1 = ((0, modular_js_1.pow2)(b223, _23n, P) * b22) % P;\n    const t2 = ((0, modular_js_1.pow2)(t1, _6n, P) * b2) % P;\n    const root = (0, modular_js_1.pow2)(t2, _2n, P);\n    if (!Fp.eql(Fp.sqr(root), y))\n        throw new Error('Cannot find square root');\n    return root;\n}\nconst Fp = (0, modular_js_1.Field)(secp256k1P, undefined, undefined, { sqrt: sqrtMod });\nexports.secp256k1 = (0, _shortw_utils_js_1.createCurve)({\n    a: BigInt(0), // equation params: a, b\n    b: BigInt(7), // Seem to be rigid: bitcointalk.org/index.php?topic=289795.msg3183975#msg3183975\n    Fp, // Field's prime: 2n**256n - 2n**32n - 2n**9n - 2n**8n - 2n**7n - 2n**6n - 2n**4n - 1n\n    n: secp256k1N, // Curve order, total count of valid points in the field\n    // Base point (x, y) aka generator point\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    h: BigInt(1), // Cofactor\n    lowS: true, // Allow only low-S signatures by default in sign() and verify()\n    /**\n     * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n     * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n     * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n     * Explanation: https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066\n     */\n    endo: {\n        beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n        splitScalar: (k) => {\n            const n = secp256k1N;\n            const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n            const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n            const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n            const b2 = a1;\n            const POW_2_128 = BigInt('0x100000000000000000000000000000000'); // (2n**128n).toString(16)\n            const c1 = divNearest(b2 * k, n);\n            const c2 = divNearest(-b1 * k, n);\n            let k1 = (0, modular_js_1.mod)(k - c1 * a1 - c2 * a2, n);\n            let k2 = (0, modular_js_1.mod)(-c1 * b1 - c2 * b2, n);\n            const k1neg = k1 > POW_2_128;\n            const k2neg = k2 > POW_2_128;\n            if (k1neg)\n                k1 = n - k1;\n            if (k2neg)\n                k2 = n - k2;\n            if (k1 > POW_2_128 || k2 > POW_2_128) {\n                throw new Error('splitScalar: Endomorphism failed, k=' + k);\n            }\n            return { k1neg, k1, k2neg, k2 };\n        },\n    },\n}, sha256_1.sha256);\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\nconst _0n = BigInt(0);\nconst fe = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1P;\nconst ge = (x) => typeof x === 'bigint' && _0n < x && x < secp256k1N;\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES = {};\nfunction taggedHash(tag, ...messages) {\n    let tagP = TAGGED_HASH_PREFIXES[tag];\n    if (tagP === undefined) {\n        const tagH = (0, sha256_1.sha256)(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n        tagP = (0, utils_js_1.concatBytes)(tagH, tagH);\n        TAGGED_HASH_PREFIXES[tag] = tagP;\n    }\n    return (0, sha256_1.sha256)((0, utils_js_1.concatBytes)(tagP, ...messages));\n}\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point) => point.toRawBytes(true).slice(1);\nconst numTo32b = (n) => (0, utils_js_1.numberToBytesBE)(n, 32);\nconst modP = (x) => (0, modular_js_1.mod)(x, secp256k1P);\nconst modN = (x) => (0, modular_js_1.mod)(x, secp256k1N);\nconst Point = exports.secp256k1.ProjectivePoint;\nconst GmulAdd = (Q, a, b) => Point.BASE.multiplyAndAddUnsafe(Q, a, b);\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv) {\n    let d_ = exports.secp256k1.utils.normPrivateKeyToScalar(priv); // same method executed in fromPrivateKey\n    let p = Point.fromPrivateKey(d_); // P = d'⋅G; 0 < d' < n check is done inside\n    const scalar = p.hasEvenY() ? d_ : modN(-d_);\n    return { scalar: scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x) {\n    if (!fe(x))\n        throw new Error('bad x: need 0 < x < p'); // Fail if x ≥ p.\n    const xx = modP(x * x);\n    const c = modP(xx * x + BigInt(7)); // Let c = x³ + 7 mod p.\n    let y = sqrtMod(c); // Let y = c^(p+1)/4 mod p.\n    if (y % _2n !== _0n)\n        y = modP(-y); // Return the unique point P such that x(P) = x and\n    const p = new Point(x, y, _1n); // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n    p.assertValidity();\n    return p;\n}\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args) {\n    return modN((0, utils_js_1.bytesToNumberBE)(taggedHash('BIP0340/challenge', ...args)));\n}\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(privateKey) {\n    return schnorrGetExtPubKey(privateKey).bytes; // d'=int(sk). Fail if d'=0 or d'≥n. Ret bytes(d'⋅G)\n}\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message, privateKey, auxRand = (0, utils_1.randomBytes)(32)) {\n    const m = (0, utils_js_1.ensureBytes)('message', message);\n    const { bytes: px, scalar: d } = schnorrGetExtPubKey(privateKey); // checks for isWithinCurveOrder\n    const a = (0, utils_js_1.ensureBytes)('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n    const t = numTo32b(d ^ (0, utils_js_1.bytesToNumberBE)(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n    const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n    const k_ = modN((0, utils_js_1.bytesToNumberBE)(rand)); // Let k' = int(rand) mod n\n    if (k_ === _0n)\n        throw new Error('sign failed: k is zero'); // Fail if k' = 0.\n    const { bytes: rx, scalar: k } = schnorrGetExtPubKey(k_); // Let R = k'⋅G.\n    const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n    const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n    sig.set(rx, 0);\n    sig.set(numTo32b(modN(k + e * d)), 32);\n    // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n    if (!schnorrVerify(sig, m, px))\n        throw new Error('sign: Invalid signature produced');\n    return sig;\n}\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature, message, publicKey) {\n    const sig = (0, utils_js_1.ensureBytes)('signature', signature, 64);\n    const m = (0, utils_js_1.ensureBytes)('message', message);\n    const pub = (0, utils_js_1.ensureBytes)('publicKey', publicKey, 32);\n    try {\n        const P = lift_x((0, utils_js_1.bytesToNumberBE)(pub)); // P = lift_x(int(pk)); fail if that fails\n        const r = (0, utils_js_1.bytesToNumberBE)(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r ≥ p.\n        if (!fe(r))\n            return false;\n        const s = (0, utils_js_1.bytesToNumberBE)(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s ≥ n.\n        if (!ge(s))\n            return false;\n        const e = challenge(numTo32b(r), pointToBytes(P), m); // int(challenge(bytes(r)||bytes(P)||m))%n\n        const R = GmulAdd(P, s, modN(-e)); // R = s⋅G - e⋅P\n        if (!R || !R.hasEvenY() || R.toAffine().x !== r)\n            return false; // -eP == (n-e)P\n        return true; // Fail if is_infinite(R) / not has_even_y(R) / x(R) ≠ r.\n    }\n    catch (error) {\n        return false;\n    }\n}\nexports.schnorr = (() => ({\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    utils: {\n        randomPrivateKey: exports.secp256k1.utils.randomPrivateKey,\n        lift_x,\n        pointToBytes,\n        numberToBytesBE: utils_js_1.numberToBytesBE,\n        bytesToNumberBE: utils_js_1.bytesToNumberBE,\n        taggedHash,\n        mod: modular_js_1.mod,\n    },\n}))();\nconst isoMap = /* @__PURE__ */ (() => (0, hash_to_curve_js_1.isogenyMap)(Fp, [\n    // xNum\n    [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n    ],\n    // xDen\n    [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n    // yNum\n    [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n    ],\n    // yDen\n    [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n].map((i) => i.map((j) => BigInt(j)))))();\nconst mapSWU = /* @__PURE__ */ (() => (0, weierstrass_js_1.mapToCurveSimpleSWU)(Fp, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fp.create(BigInt('-11')),\n}))();\nconst htf = /* @__PURE__ */ (() => (0, hash_to_curve_js_1.createHasher)(exports.secp256k1.ProjectivePoint, (scalars) => {\n    const { x, y } = mapSWU(Fp.create(scalars[0]));\n    return isoMap(x, y);\n}, {\n    DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n    encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n    p: Fp.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha256_1.sha256,\n}))();\nexports.hashToCurve = (() => htf.hashToCurve)();\nexports.encodeToCurve = (() => htf.encodeToCurve)();\n//# sourceMappingURL=secp256k1.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compareBytes = exports.TEST_NETWORK = exports.NETWORK = exports.TAPROOT_UNSPENDABLE_KEY = exports.taprootTweakPubkey = exports.taprootTweakPrivKey = exports.tapTweak = exports.validatePubkey = exports.PubT = exports.tagSchnorr = exports.signSchnorr = exports.signECDSA = exports.pubECDSA = exports.pubSchnorr = exports.randomPrivateKeyBytes = exports.sha256x2 = exports.hash160 = exports.equalBytes = exports.concatBytes = exports.isBytes = exports.sha256 = void 0;\nconst micro_packed_1 = require(\"micro-packed\");\nconst ripemd160_1 = require(\"@noble/hashes/ripemd160\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nObject.defineProperty(exports, \"sha256\", { enumerable: true, get: function () { return sha256_1.sha256; } });\nconst secp256k1_1 = require(\"@noble/curves/secp256k1\");\nconst Point = secp256k1_1.secp256k1.ProjectivePoint;\nconst CURVE_ORDER = secp256k1_1.secp256k1.CURVE.n;\nconst { isBytes, concatBytes, equalBytes } = micro_packed_1.utils;\nexports.isBytes = isBytes;\nexports.concatBytes = concatBytes;\nexports.equalBytes = equalBytes;\nconst hash160 = (msg) => (0, ripemd160_1.ripemd160)((0, sha256_1.sha256)(msg));\nexports.hash160 = hash160;\nconst sha256x2 = (...msgs) => (0, sha256_1.sha256)((0, sha256_1.sha256)(concatBytes(...msgs)));\nexports.sha256x2 = sha256x2;\nexports.randomPrivateKeyBytes = secp256k1_1.schnorr.utils.randomPrivateKey;\nexports.pubSchnorr = secp256k1_1.schnorr.getPublicKey;\nexports.pubECDSA = secp256k1_1.secp256k1.getPublicKey;\n// low-r signature grinding. Used to reduce tx size by 1 byte.\n// noble/secp256k1 does not support the feature: it is not used outside of BTC.\n// We implement it manually, because in BTC it's common.\n// Not best way, but closest to bitcoin implementation (easier to check)\nconst hasLowR = (sig) => sig.r < CURVE_ORDER / 2n;\nfunction signECDSA(hash, privateKey, lowR = false) {\n    let sig = secp256k1_1.secp256k1.sign(hash, privateKey);\n    if (lowR && !hasLowR(sig)) {\n        const extraEntropy = new Uint8Array(32);\n        let counter = 0;\n        while (!hasLowR(sig)) {\n            extraEntropy.set(micro_packed_1.U32LE.encode(counter++));\n            sig = secp256k1_1.secp256k1.sign(hash, privateKey, { extraEntropy });\n            if (counter > 4294967295)\n                throw new Error('lowR counter overflow: report the error');\n        }\n    }\n    return sig.toDERRawBytes();\n}\nexports.signECDSA = signECDSA;\nexports.signSchnorr = secp256k1_1.schnorr.sign;\nexports.tagSchnorr = secp256k1_1.schnorr.utils.taggedHash;\nvar PubT;\n(function (PubT) {\n    PubT[PubT[\"ecdsa\"] = 0] = \"ecdsa\";\n    PubT[PubT[\"schnorr\"] = 1] = \"schnorr\";\n})(PubT || (exports.PubT = PubT = {}));\nfunction validatePubkey(pub, type) {\n    const len = pub.length;\n    if (type === PubT.ecdsa) {\n        if (len === 32)\n            throw new Error('Expected non-Schnorr key');\n        Point.fromHex(pub); // does assertValidity\n        return pub;\n    }\n    else if (type === PubT.schnorr) {\n        if (len !== 32)\n            throw new Error('Expected 32-byte Schnorr key');\n        secp256k1_1.schnorr.utils.lift_x(secp256k1_1.schnorr.utils.bytesToNumberBE(pub));\n        return pub;\n    }\n    else {\n        throw new Error('Unknown key type');\n    }\n}\nexports.validatePubkey = validatePubkey;\nfunction tapTweak(a, b) {\n    const u = secp256k1_1.schnorr.utils;\n    const t = u.taggedHash('TapTweak', a, b);\n    const tn = u.bytesToNumberBE(t);\n    if (tn >= CURVE_ORDER)\n        throw new Error('tweak higher than curve order');\n    return tn;\n}\nexports.tapTweak = tapTweak;\nfunction taprootTweakPrivKey(privKey, merkleRoot = new Uint8Array()) {\n    const u = secp256k1_1.schnorr.utils;\n    const seckey0 = u.bytesToNumberBE(privKey); // seckey0 = int_from_bytes(seckey0)\n    const P = Point.fromPrivateKey(seckey0); // P = point_mul(G, seckey0)\n    // seckey = seckey0 if has_even_y(P) else SECP256K1_ORDER - seckey0\n    const seckey = P.hasEvenY() ? seckey0 : u.mod(-seckey0, CURVE_ORDER);\n    const xP = u.pointToBytes(P);\n    // t = int_from_bytes(tagged_hash(\"TapTweak\", bytes_from_int(x(P)) + h)); >= SECP256K1_ORDER check\n    const t = tapTweak(xP, merkleRoot);\n    // bytes_from_int((seckey + t) % SECP256K1_ORDER)\n    return u.numberToBytesBE(u.mod(seckey + t, CURVE_ORDER), 32);\n}\nexports.taprootTweakPrivKey = taprootTweakPrivKey;\nfunction taprootTweakPubkey(pubKey, h) {\n    const u = secp256k1_1.schnorr.utils;\n    const t = tapTweak(pubKey, h); // t = int_from_bytes(tagged_hash(\"TapTweak\", pubkey + h))\n    const P = u.lift_x(u.bytesToNumberBE(pubKey)); // P = lift_x(int_from_bytes(pubkey))\n    const Q = P.add(Point.fromPrivateKey(t)); // Q = point_add(P, point_mul(G, t))\n    const parity = Q.hasEvenY() ? 0 : 1; // 0 if has_even_y(Q) else 1\n    return [u.pointToBytes(Q), parity]; // bytes_from_int(x(Q))\n}\nexports.taprootTweakPubkey = taprootTweakPubkey;\n// Another stupid decision, where lack of standard affects security.\n// Multisig needs to be generated with some key.\n// We are using approach from BIP 341/bitcoinjs-lib: SHA256(uncompressedDER(SECP256K1_GENERATOR_POINT))\n// It is possible to switch SECP256K1_GENERATOR_POINT with some random point;\n// but it's too complex to prove.\n// Also used by bitcoin-core and bitcoinjs-lib\nexports.TAPROOT_UNSPENDABLE_KEY = (0, sha256_1.sha256)(Point.BASE.toRawBytes(false));\nexports.NETWORK = {\n    bech32: 'bc',\n    pubKeyHash: 0x00,\n    scriptHash: 0x05,\n    wif: 0x80,\n};\nexports.TEST_NETWORK = {\n    bech32: 'tb',\n    pubKeyHash: 0x6f,\n    scriptHash: 0xc4,\n    wif: 0xef,\n};\n// Exported for tests, internal method\nfunction compareBytes(a, b) {\n    if (!isBytes(a) || !isBytes(b))\n        throw new Error(`cmp: wrong type a=${typeof a} b=${typeof b}`);\n    // -1 -> a<b, 0 -> a==b, 1 -> a>b\n    const len = Math.min(a.length, b.length);\n    for (let i = 0; i < len; i++)\n        if (a[i] != b[i])\n            return Math.sign(a[i] - b[i]);\n    return Math.sign(a.length - b.length);\n}\nexports.compareBytes = compareBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RawTx = exports.RawOutput = exports.RawInput = exports.BTCArray = exports.RawWitness = exports.VarBytes = exports.CompactSizeLen = exports.CompactSize = exports.Script = exports.OpToNum = exports.ScriptNum = exports.OP = exports.MAX_SCRIPT_BYTE_LENGTH = void 0;\nconst P = require(\"micro-packed\");\nconst utils_js_1 = require(\"./utils.js\");\nexports.MAX_SCRIPT_BYTE_LENGTH = 520;\n// prettier-ignore\nvar OP;\n(function (OP) {\n    OP[OP[\"OP_0\"] = 0] = \"OP_0\";\n    OP[OP[\"PUSHDATA1\"] = 76] = \"PUSHDATA1\";\n    OP[OP[\"PUSHDATA2\"] = 77] = \"PUSHDATA2\";\n    OP[OP[\"PUSHDATA4\"] = 78] = \"PUSHDATA4\";\n    OP[OP[\"1NEGATE\"] = 79] = \"1NEGATE\";\n    OP[OP[\"RESERVED\"] = 80] = \"RESERVED\";\n    OP[OP[\"OP_1\"] = 81] = \"OP_1\";\n    OP[OP[\"OP_2\"] = 82] = \"OP_2\";\n    OP[OP[\"OP_3\"] = 83] = \"OP_3\";\n    OP[OP[\"OP_4\"] = 84] = \"OP_4\";\n    OP[OP[\"OP_5\"] = 85] = \"OP_5\";\n    OP[OP[\"OP_6\"] = 86] = \"OP_6\";\n    OP[OP[\"OP_7\"] = 87] = \"OP_7\";\n    OP[OP[\"OP_8\"] = 88] = \"OP_8\";\n    OP[OP[\"OP_9\"] = 89] = \"OP_9\";\n    OP[OP[\"OP_10\"] = 90] = \"OP_10\";\n    OP[OP[\"OP_11\"] = 91] = \"OP_11\";\n    OP[OP[\"OP_12\"] = 92] = \"OP_12\";\n    OP[OP[\"OP_13\"] = 93] = \"OP_13\";\n    OP[OP[\"OP_14\"] = 94] = \"OP_14\";\n    OP[OP[\"OP_15\"] = 95] = \"OP_15\";\n    OP[OP[\"OP_16\"] = 96] = \"OP_16\";\n    // Control\n    OP[OP[\"NOP\"] = 97] = \"NOP\";\n    OP[OP[\"VER\"] = 98] = \"VER\";\n    OP[OP[\"IF\"] = 99] = \"IF\";\n    OP[OP[\"NOTIF\"] = 100] = \"NOTIF\";\n    OP[OP[\"VERIF\"] = 101] = \"VERIF\";\n    OP[OP[\"VERNOTIF\"] = 102] = \"VERNOTIF\";\n    OP[OP[\"ELSE\"] = 103] = \"ELSE\";\n    OP[OP[\"ENDIF\"] = 104] = \"ENDIF\";\n    OP[OP[\"VERIFY\"] = 105] = \"VERIFY\";\n    OP[OP[\"RETURN\"] = 106] = \"RETURN\";\n    // Stack\n    OP[OP[\"TOALTSTACK\"] = 107] = \"TOALTSTACK\";\n    OP[OP[\"FROMALTSTACK\"] = 108] = \"FROMALTSTACK\";\n    OP[OP[\"2DROP\"] = 109] = \"2DROP\";\n    OP[OP[\"2DUP\"] = 110] = \"2DUP\";\n    OP[OP[\"3DUP\"] = 111] = \"3DUP\";\n    OP[OP[\"2OVER\"] = 112] = \"2OVER\";\n    OP[OP[\"2ROT\"] = 113] = \"2ROT\";\n    OP[OP[\"2SWAP\"] = 114] = \"2SWAP\";\n    OP[OP[\"IFDUP\"] = 115] = \"IFDUP\";\n    OP[OP[\"DEPTH\"] = 116] = \"DEPTH\";\n    OP[OP[\"DROP\"] = 117] = \"DROP\";\n    OP[OP[\"DUP\"] = 118] = \"DUP\";\n    OP[OP[\"NIP\"] = 119] = \"NIP\";\n    OP[OP[\"OVER\"] = 120] = \"OVER\";\n    OP[OP[\"PICK\"] = 121] = \"PICK\";\n    OP[OP[\"ROLL\"] = 122] = \"ROLL\";\n    OP[OP[\"ROT\"] = 123] = \"ROT\";\n    OP[OP[\"SWAP\"] = 124] = \"SWAP\";\n    OP[OP[\"TUCK\"] = 125] = \"TUCK\";\n    // Splice\n    OP[OP[\"CAT\"] = 126] = \"CAT\";\n    OP[OP[\"SUBSTR\"] = 127] = \"SUBSTR\";\n    OP[OP[\"LEFT\"] = 128] = \"LEFT\";\n    OP[OP[\"RIGHT\"] = 129] = \"RIGHT\";\n    OP[OP[\"SIZE\"] = 130] = \"SIZE\";\n    // Boolean logic\n    OP[OP[\"INVERT\"] = 131] = \"INVERT\";\n    OP[OP[\"AND\"] = 132] = \"AND\";\n    OP[OP[\"OR\"] = 133] = \"OR\";\n    OP[OP[\"XOR\"] = 134] = \"XOR\";\n    OP[OP[\"EQUAL\"] = 135] = \"EQUAL\";\n    OP[OP[\"EQUALVERIFY\"] = 136] = \"EQUALVERIFY\";\n    OP[OP[\"RESERVED1\"] = 137] = \"RESERVED1\";\n    OP[OP[\"RESERVED2\"] = 138] = \"RESERVED2\";\n    // Numbers\n    OP[OP[\"1ADD\"] = 139] = \"1ADD\";\n    OP[OP[\"1SUB\"] = 140] = \"1SUB\";\n    OP[OP[\"2MUL\"] = 141] = \"2MUL\";\n    OP[OP[\"2DIV\"] = 142] = \"2DIV\";\n    OP[OP[\"NEGATE\"] = 143] = \"NEGATE\";\n    OP[OP[\"ABS\"] = 144] = \"ABS\";\n    OP[OP[\"NOT\"] = 145] = \"NOT\";\n    OP[OP[\"0NOTEQUAL\"] = 146] = \"0NOTEQUAL\";\n    OP[OP[\"ADD\"] = 147] = \"ADD\";\n    OP[OP[\"SUB\"] = 148] = \"SUB\";\n    OP[OP[\"MUL\"] = 149] = \"MUL\";\n    OP[OP[\"DIV\"] = 150] = \"DIV\";\n    OP[OP[\"MOD\"] = 151] = \"MOD\";\n    OP[OP[\"LSHIFT\"] = 152] = \"LSHIFT\";\n    OP[OP[\"RSHIFT\"] = 153] = \"RSHIFT\";\n    OP[OP[\"BOOLAND\"] = 154] = \"BOOLAND\";\n    OP[OP[\"BOOLOR\"] = 155] = \"BOOLOR\";\n    OP[OP[\"NUMEQUAL\"] = 156] = \"NUMEQUAL\";\n    OP[OP[\"NUMEQUALVERIFY\"] = 157] = \"NUMEQUALVERIFY\";\n    OP[OP[\"NUMNOTEQUAL\"] = 158] = \"NUMNOTEQUAL\";\n    OP[OP[\"LESSTHAN\"] = 159] = \"LESSTHAN\";\n    OP[OP[\"GREATERTHAN\"] = 160] = \"GREATERTHAN\";\n    OP[OP[\"LESSTHANOREQUAL\"] = 161] = \"LESSTHANOREQUAL\";\n    OP[OP[\"GREATERTHANOREQUAL\"] = 162] = \"GREATERTHANOREQUAL\";\n    OP[OP[\"MIN\"] = 163] = \"MIN\";\n    OP[OP[\"MAX\"] = 164] = \"MAX\";\n    OP[OP[\"WITHIN\"] = 165] = \"WITHIN\";\n    // Crypto\n    OP[OP[\"RIPEMD160\"] = 166] = \"RIPEMD160\";\n    OP[OP[\"SHA1\"] = 167] = \"SHA1\";\n    OP[OP[\"SHA256\"] = 168] = \"SHA256\";\n    OP[OP[\"HASH160\"] = 169] = \"HASH160\";\n    OP[OP[\"HASH256\"] = 170] = \"HASH256\";\n    OP[OP[\"CODESEPARATOR\"] = 171] = \"CODESEPARATOR\";\n    OP[OP[\"CHECKSIG\"] = 172] = \"CHECKSIG\";\n    OP[OP[\"CHECKSIGVERIFY\"] = 173] = \"CHECKSIGVERIFY\";\n    OP[OP[\"CHECKMULTISIG\"] = 174] = \"CHECKMULTISIG\";\n    OP[OP[\"CHECKMULTISIGVERIFY\"] = 175] = \"CHECKMULTISIGVERIFY\";\n    // Expansion\n    OP[OP[\"NOP1\"] = 176] = \"NOP1\";\n    OP[OP[\"CHECKLOCKTIMEVERIFY\"] = 177] = \"CHECKLOCKTIMEVERIFY\";\n    OP[OP[\"CHECKSEQUENCEVERIFY\"] = 178] = \"CHECKSEQUENCEVERIFY\";\n    OP[OP[\"NOP4\"] = 179] = \"NOP4\";\n    OP[OP[\"NOP5\"] = 180] = \"NOP5\";\n    OP[OP[\"NOP6\"] = 181] = \"NOP6\";\n    OP[OP[\"NOP7\"] = 182] = \"NOP7\";\n    OP[OP[\"NOP8\"] = 183] = \"NOP8\";\n    OP[OP[\"NOP9\"] = 184] = \"NOP9\";\n    OP[OP[\"NOP10\"] = 185] = \"NOP10\";\n    // BIP 342\n    OP[OP[\"CHECKSIGADD\"] = 186] = \"CHECKSIGADD\";\n    // Invalid\n    OP[OP[\"INVALID\"] = 255] = \"INVALID\";\n})(OP || (exports.OP = OP = {}));\n// We can encode almost any number as ScriptNum, however, parsing will be a problem\n// since we can't know if buffer is a number or something else.\nfunction ScriptNum(bytesLimit = 6, forceMinimal = false) {\n    return P.wrap({\n        encodeStream: (w, value) => {\n            if (value === 0n)\n                return;\n            const neg = value < 0;\n            const val = BigInt(value);\n            const nums = [];\n            for (let abs = neg ? -val : val; abs; abs >>= 8n)\n                nums.push(Number(abs & 0xffn));\n            if (nums[nums.length - 1] >= 0x80)\n                nums.push(neg ? 0x80 : 0);\n            else if (neg)\n                nums[nums.length - 1] |= 0x80;\n            w.bytes(new Uint8Array(nums));\n        },\n        decodeStream: (r) => {\n            const len = r.leftBytes;\n            if (len > bytesLimit)\n                throw new Error(`ScriptNum: number (${len}) bigger than limit=${bytesLimit}`);\n            if (len === 0)\n                return 0n;\n            if (forceMinimal) {\n                const data = r.bytes(len, true);\n                // MSB is zero (without sign bit) -> not minimally encoded\n                if ((data[data.length - 1] & 0x7f) === 0) {\n                    // exception\n                    if (len <= 1 || (data[data.length - 2] & 0x80) === 0)\n                        throw new Error('Non-minimally encoded ScriptNum');\n                }\n            }\n            let last = 0;\n            let res = 0n;\n            for (let i = 0; i < len; ++i) {\n                last = r.byte();\n                res |= BigInt(last) << (8n * BigInt(i));\n            }\n            if (last >= 0x80) {\n                res &= (2n ** BigInt(len * 8) - 1n) >> 1n;\n                res = -res;\n            }\n            return res;\n        },\n    });\n}\nexports.ScriptNum = ScriptNum;\nfunction OpToNum(op, bytesLimit = 4, forceMinimal = true) {\n    if (typeof op === 'number')\n        return op;\n    if ((0, utils_js_1.isBytes)(op)) {\n        try {\n            const val = ScriptNum(bytesLimit, forceMinimal).decode(op);\n            if (val > Number.MAX_SAFE_INTEGER)\n                return;\n            return Number(val);\n        }\n        catch (e) {\n            return;\n        }\n    }\n    return;\n}\nexports.OpToNum = OpToNum;\n// Converts script bytes to parsed script\n// 5221030000000000000000000000000000000000000000000000000000000000000001210300000000000000000000000000000000000000000000000000000000000000022103000000000000000000000000000000000000000000000000000000000000000353ae\n// =>\n// OP_2\n//   030000000000000000000000000000000000000000000000000000000000000001\n//   030000000000000000000000000000000000000000000000000000000000000002\n//   030000000000000000000000000000000000000000000000000000000000000003\n//   OP_3\n//   CHECKMULTISIG\nexports.Script = P.wrap({\n    encodeStream: (w, value) => {\n        for (let o of value) {\n            if (typeof o === 'string') {\n                if (OP[o] === undefined)\n                    throw new Error(`Unknown opcode=${o}`);\n                w.byte(OP[o]);\n                continue;\n            }\n            else if (typeof o === 'number') {\n                if (o === 0x00) {\n                    w.byte(0x00);\n                    continue;\n                }\n                else if (1 <= o && o <= 16) {\n                    w.byte(OP.OP_1 - 1 + o);\n                    continue;\n                }\n            }\n            // Encode big numbers\n            if (typeof o === 'number')\n                o = ScriptNum().encode(BigInt(o));\n            if (!(0, utils_js_1.isBytes)(o))\n                throw new Error(`Wrong Script OP=${o} (${typeof o})`);\n            // Bytes\n            const len = o.length;\n            if (len < OP.PUSHDATA1)\n                w.byte(len);\n            else if (len <= 0xff) {\n                w.byte(OP.PUSHDATA1);\n                w.byte(len);\n            }\n            else if (len <= 0xffff) {\n                w.byte(OP.PUSHDATA2);\n                w.bytes(P.U16LE.encode(len));\n            }\n            else {\n                w.byte(OP.PUSHDATA4);\n                w.bytes(P.U32LE.encode(len));\n            }\n            w.bytes(o);\n        }\n    },\n    decodeStream: (r) => {\n        const out = [];\n        while (!r.isEnd()) {\n            const cur = r.byte();\n            // if 0 < cur < 78\n            if (OP.OP_0 < cur && cur <= OP.PUSHDATA4) {\n                let len;\n                if (cur < OP.PUSHDATA1)\n                    len = cur;\n                else if (cur === OP.PUSHDATA1)\n                    len = P.U8.decodeStream(r);\n                else if (cur === OP.PUSHDATA2)\n                    len = P.U16LE.decodeStream(r);\n                else if (cur === OP.PUSHDATA4)\n                    len = P.U32LE.decodeStream(r);\n                else\n                    throw new Error('Should be not possible');\n                out.push(r.bytes(len));\n            }\n            else if (cur === 0x00) {\n                out.push(0);\n            }\n            else if (OP.OP_1 <= cur && cur <= OP.OP_16) {\n                out.push(cur - (OP.OP_1 - 1));\n            }\n            else {\n                const op = OP[cur];\n                if (op === undefined)\n                    throw new Error(`Unknown opcode=${cur.toString(16)}`);\n                out.push(op);\n            }\n        }\n        return out;\n    },\n});\n// BTC specific variable length integer encoding\n// https://en.bitcoin.it/wiki/Protocol_documentation#Variable_length_integer\nconst CSLimits = {\n    0xfd: [0xfd, 2, 253n, 65535n],\n    0xfe: [0xfe, 4, 65536n, 4294967295n],\n    0xff: [0xff, 8, 4294967296n, 18446744073709551615n],\n};\nexports.CompactSize = P.wrap({\n    encodeStream: (w, value) => {\n        if (typeof value === 'number')\n            value = BigInt(value);\n        if (0n <= value && value <= 252n)\n            return w.byte(Number(value));\n        for (const [flag, bytes, start, stop] of Object.values(CSLimits)) {\n            if (start > value || value > stop)\n                continue;\n            w.byte(flag);\n            for (let i = 0; i < bytes; i++)\n                w.byte(Number((value >> (8n * BigInt(i))) & 0xffn));\n            return;\n        }\n        throw w.err(`VarInt too big: ${value}`);\n    },\n    decodeStream: (r) => {\n        const b0 = r.byte();\n        if (b0 <= 0xfc)\n            return BigInt(b0);\n        const [_, bytes, start] = CSLimits[b0];\n        let num = 0n;\n        for (let i = 0; i < bytes; i++)\n            num |= BigInt(r.byte()) << (8n * BigInt(i));\n        if (num < start)\n            throw r.err(`Wrong CompactSize(${8 * bytes})`);\n        return num;\n    },\n});\n// Same thing, but in number instead of bigint. Checks for safe integer inside\nexports.CompactSizeLen = P.apply(exports.CompactSize, P.coders.numberBigint);\n// ui8a of size <CompactSize>\nexports.VarBytes = P.bytes(exports.CompactSize);\n// SegWit v0 stack of witness buffers\nexports.RawWitness = P.array(exports.CompactSizeLen, exports.VarBytes);\n// Array of size <CompactSize>\nconst BTCArray = (t) => P.array(exports.CompactSize, t);\nexports.BTCArray = BTCArray;\nexports.RawInput = P.struct({\n    txid: P.bytes(32, true), // hash(prev_tx),\n    index: P.U32LE, // output number of previous tx\n    finalScriptSig: exports.VarBytes, // btc merges input and output script, executes it. If ok = tx passes\n    sequence: P.U32LE, // ?\n});\nexports.RawOutput = P.struct({ amount: P.U64LE, script: exports.VarBytes });\n// https://en.bitcoin.it/wiki/Protocol_documentation#tx\nconst _RawTx = P.struct({\n    version: P.I32LE,\n    segwitFlag: P.flag(new Uint8Array([0x00, 0x01])),\n    inputs: (0, exports.BTCArray)(exports.RawInput),\n    outputs: (0, exports.BTCArray)(exports.RawOutput),\n    witnesses: P.flagged('segwitFlag', P.array('inputs/length', exports.RawWitness)),\n    // < 500000000\tBlock number at which this transaction is unlocked\n    // >= 500000000\tUNIX timestamp at which this transaction is unlocked\n    // Handled as part of PSBTv2\n    lockTime: P.U32LE,\n});\nfunction validateRawTx(tx) {\n    if (tx.segwitFlag && tx.witnesses && !tx.witnesses.length)\n        throw new Error('Segwit flag with empty witnesses array');\n    return tx;\n}\nexports.RawTx = P.validate(_RawTx, validateRawTx);\n//# sourceMappingURL=script.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.selectUTXO = exports._Estimator = exports._cmpBig = exports.toVsize = exports.getInputType = exports.normalizeInput = exports.getPrevOut = void 0;\nconst base_1 = require(\"@scure/base\");\nconst P = require(\"micro-packed\");\nconst payment_js_1 = require(\"./payment.js\");\nconst psbt = require(\"./psbt.js\");\nconst script_js_1 = require(\"./script.js\");\nconst transaction_js_1 = require(\"./transaction.js\"); // circular\nconst utils_js_1 = require(\"./utils.js\");\nconst utils_js_2 = require(\"./utils.js\");\n// Normalizes input\nfunction getPrevOut(input) {\n    if (input.nonWitnessUtxo) {\n        if (input.index === undefined)\n            throw new Error('Unknown input index');\n        return input.nonWitnessUtxo.outputs[input.index];\n    }\n    else if (input.witnessUtxo)\n        return input.witnessUtxo;\n    else\n        throw new Error('Cannot find previous output info');\n}\nexports.getPrevOut = getPrevOut;\nfunction normalizeInput(i, cur, allowedFields, disableScriptCheck = false) {\n    let { nonWitnessUtxo, txid } = i;\n    // String support for common fields. We usually prefer Uint8Array to avoid errors\n    // like hex looking string accidentally passed, however, in case of nonWitnessUtxo\n    // it is better to expect string, since constructing this complex object will be\n    // difficult for user\n    if (typeof nonWitnessUtxo === 'string')\n        nonWitnessUtxo = base_1.hex.decode(nonWitnessUtxo);\n    if ((0, utils_js_1.isBytes)(nonWitnessUtxo))\n        nonWitnessUtxo = script_js_1.RawTx.decode(nonWitnessUtxo);\n    if (!('nonWitnessUtxo' in i) && nonWitnessUtxo === undefined)\n        nonWitnessUtxo = cur?.nonWitnessUtxo;\n    if (typeof txid === 'string')\n        txid = base_1.hex.decode(txid);\n    // TODO: if we have nonWitnessUtxo, we can extract txId from here\n    if (txid === undefined)\n        txid = cur?.txid;\n    let res = { ...cur, ...i, nonWitnessUtxo, txid };\n    if (!('nonWitnessUtxo' in i) && res.nonWitnessUtxo === undefined)\n        delete res.nonWitnessUtxo;\n    if (res.sequence === undefined)\n        res.sequence = transaction_js_1.DEFAULT_SEQUENCE;\n    if (res.tapMerkleRoot === null)\n        delete res.tapMerkleRoot;\n    res = psbt.mergeKeyMap(psbt.PSBTInput, res, cur, allowedFields);\n    psbt.PSBTInputCoder.encode(res); // Validates that everything is correct at this point\n    let prevOut;\n    if (res.nonWitnessUtxo && res.index !== undefined)\n        prevOut = res.nonWitnessUtxo.outputs[res.index];\n    else if (res.witnessUtxo)\n        prevOut = res.witnessUtxo;\n    if (prevOut && !disableScriptCheck)\n        (0, payment_js_1.checkScript)(prevOut && prevOut.script, res.redeemScript, res.witnessScript);\n    return res;\n}\nexports.normalizeInput = normalizeInput;\nfunction getInputType(input, allowLegacyWitnessUtxo = false) {\n    let txType = 'legacy';\n    let defaultSighash = transaction_js_1.SignatureHash.ALL;\n    const prevOut = getPrevOut(input);\n    const first = payment_js_1.OutScript.decode(prevOut.script);\n    let type = first.type;\n    let cur = first;\n    const stack = [first];\n    if (first.type === 'tr') {\n        defaultSighash = transaction_js_1.SignatureHash.DEFAULT;\n        return {\n            txType: 'taproot',\n            type: 'tr',\n            last: first,\n            lastScript: prevOut.script,\n            defaultSighash,\n            sighash: input.sighashType || defaultSighash,\n        };\n    }\n    else {\n        if (first.type === 'wpkh' || first.type === 'wsh')\n            txType = 'segwit';\n        if (first.type === 'sh') {\n            if (!input.redeemScript)\n                throw new Error('inputType: sh without redeemScript');\n            let child = payment_js_1.OutScript.decode(input.redeemScript);\n            if (child.type === 'wpkh' || child.type === 'wsh')\n                txType = 'segwit';\n            stack.push(child);\n            cur = child;\n            type += `-${child.type}`;\n        }\n        // wsh can be inside sh\n        if (cur.type === 'wsh') {\n            if (!input.witnessScript)\n                throw new Error('inputType: wsh without witnessScript');\n            let child = payment_js_1.OutScript.decode(input.witnessScript);\n            if (child.type === 'wsh')\n                txType = 'segwit';\n            stack.push(child);\n            cur = child;\n            type += `-${child.type}`;\n        }\n        const last = stack[stack.length - 1];\n        if (last.type === 'sh' || last.type === 'wsh')\n            throw new Error('inputType: sh/wsh cannot be terminal type');\n        const lastScript = payment_js_1.OutScript.encode(last);\n        const res = {\n            type,\n            txType,\n            last,\n            lastScript,\n            defaultSighash,\n            sighash: input.sighashType || defaultSighash,\n        };\n        if (txType === 'legacy' && !allowLegacyWitnessUtxo && !input.nonWitnessUtxo) {\n            throw new Error(`Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure`);\n        }\n        return res;\n    }\n}\nexports.getInputType = getInputType;\nconst toVsize = (weight) => Math.ceil(weight / 4);\nexports.toVsize = toVsize;\nconst encodeTapBlock = (item) => psbt.TaprootControlBlock.encode(item);\nfunction iterLeafs(tapLeafScript, sigSize, customScripts) {\n    if (!tapLeafScript || !tapLeafScript.length)\n        throw new Error('no leafs');\n    const empty = () => new Uint8Array(sigSize);\n    // If user want to select specific leaf, which can signed,\n    // it is possible to remove all other leafs manually.\n    // Sort leafs by control block length.\n    const leafs = tapLeafScript.sort((a, b) => encodeTapBlock(a[0]).length - encodeTapBlock(b[0]).length);\n    for (const [cb, _script] of leafs) {\n        // Last byte is version\n        const script = _script.slice(0, -1);\n        const ver = _script[_script.length - 1];\n        const outs = payment_js_1.OutScript.decode(script);\n        let signatures = [];\n        if (outs.type === 'tr_ms') {\n            const m = outs.m;\n            const n = outs.pubkeys.length - m;\n            for (let i = 0; i < m; i++)\n                signatures.push(empty());\n            for (let i = 0; i < n; i++)\n                signatures.push(P.EMPTY);\n        }\n        else if (outs.type === 'tr_ns') {\n            for (const _pub of outs.pubkeys)\n                signatures.push(empty());\n        }\n        else {\n            if (!customScripts)\n                throw new Error('Finalize: Unknown tapLeafScript');\n            const leafHash = (0, payment_js_1.tapLeafHash)(script, ver);\n            for (const c of customScripts) {\n                if (!c.finalizeTaproot)\n                    continue;\n                const scriptDecoded = script_js_1.Script.decode(script);\n                const csEncoded = c.encode(scriptDecoded);\n                if (csEncoded === undefined)\n                    continue;\n                const pubKeys = scriptDecoded.filter((i) => {\n                    if (!(0, utils_js_1.isBytes)(i))\n                        return false;\n                    try {\n                        (0, utils_js_2.validatePubkey)(i, utils_js_2.PubT.schnorr);\n                        return true;\n                    }\n                    catch (e) {\n                        return false;\n                    }\n                });\n                const finalized = c.finalizeTaproot(script, csEncoded, pubKeys.map((pubKey) => [{ pubKey, leafHash }, empty()]));\n                if (!finalized)\n                    continue;\n                return finalized.concat(encodeTapBlock(cb));\n            }\n        }\n        // Witness is stack, so last element will be used first\n        return signatures.reverse().concat([script, encodeTapBlock(cb)]);\n    }\n    throw new Error('there was no witness');\n}\nfunction estimateInput(inputType, input, opts) {\n    let script = P.EMPTY;\n    let witness;\n    // schnorr sig is always 64 bytes. except for cases when sighash is not default!\n    if (inputType.txType === 'taproot') {\n        const SCHNORR_SIG_SIZE = inputType.sighash !== transaction_js_1.SignatureHash.DEFAULT ? 65 : 64;\n        if (input.tapInternalKey && !(0, utils_js_1.equalBytes)(input.tapInternalKey, utils_js_1.TAPROOT_UNSPENDABLE_KEY)) {\n            witness = [new Uint8Array(SCHNORR_SIG_SIZE)];\n        }\n        else if (input.tapLeafScript) {\n            witness = iterLeafs(input.tapLeafScript, SCHNORR_SIG_SIZE, opts.customScripts);\n        }\n        else\n            throw new Error('estimateInput/taproot: unknown input');\n    }\n    else {\n        // It is possible to grind signatures until it has minimal size (but changing fee value +N satoshi),\n        // which will make estimations exact. But will be very hard for multi sig (need to make sure all signatures has small size).\n        const empty = () => new Uint8Array(72); // max size of sigs\n        const emptyPub = () => new Uint8Array(33); // size of pubkey\n        let inputScript = P.EMPTY;\n        let inputWitness = [];\n        const ltype = inputType.last.type;\n        if (ltype === 'ms') {\n            const m = inputType.last.m;\n            const sig = [0];\n            for (let i = 0; i < m; i++)\n                sig.push(empty());\n            inputScript = script_js_1.Script.encode(sig);\n        }\n        else if (ltype === 'pk') {\n            // 71 sig + 1 sighash\n            inputScript = script_js_1.Script.encode([empty()]);\n        }\n        else if (ltype === 'pkh') {\n            inputScript = script_js_1.Script.encode([empty(), emptyPub()]);\n        }\n        else if (ltype === 'wpkh') {\n            inputScript = P.EMPTY;\n            inputWitness = [empty(), emptyPub()];\n        }\n        else if (ltype === 'unknown' && !opts.allowUnknownInputs)\n            throw new Error('Unknown inputs are not allowed');\n        if (inputType.type.includes('wsh-')) {\n            // P2WSH\n            if (inputScript.length && inputType.lastScript.length) {\n                inputWitness = script_js_1.Script.decode(inputScript).map((i) => {\n                    if (i === 0)\n                        return P.EMPTY;\n                    if ((0, utils_js_1.isBytes)(i))\n                        return i;\n                    throw new Error(`Wrong witness op=${i}`);\n                });\n            }\n            inputWitness = inputWitness.concat(inputType.lastScript);\n        }\n        if (inputType.txType === 'segwit')\n            witness = inputWitness;\n        if (inputType.type.startsWith('sh-wsh-')) {\n            script = script_js_1.Script.encode([script_js_1.Script.encode([0, new Uint8Array(utils_js_1.sha256.outputLen)])]);\n        }\n        else if (inputType.type.startsWith('sh-')) {\n            script = script_js_1.Script.encode([...script_js_1.Script.decode(inputScript), inputType.lastScript]);\n        }\n        else if (inputType.type.startsWith('wsh-')) {\n        }\n        else if (inputType.txType !== 'segwit')\n            script = inputScript;\n    }\n    let weight = 160 + 4 * script_js_1.VarBytes.encode(script).length;\n    let hasWitnesses = false;\n    if (witness) {\n        weight += script_js_1.RawWitness.encode(witness).length;\n        hasWitnesses = true;\n    }\n    return { weight, hasWitnesses };\n}\n// Exported for tests, internal method\nconst _cmpBig = (a, b) => {\n    const n = a - b;\n    if (n < 0n)\n        return -1;\n    else if (n > 0n)\n        return 1;\n    return 0;\n};\nexports._cmpBig = _cmpBig;\nfunction getScript(o, opts = {}, network = utils_js_1.NETWORK) {\n    let script;\n    if ('script' in o && o.script instanceof Uint8Array) {\n        script = o.script;\n    }\n    if ('address' in o) {\n        if (typeof o.address !== 'string')\n            throw new Error(`Estimator: wrong output address=${o.address}`);\n        script = payment_js_1.OutScript.encode((0, payment_js_1.Address)(network).decode(o.address));\n    }\n    if (!script)\n        throw new Error('Estimator: wrong output script');\n    if (typeof o.amount !== 'bigint')\n        throw new Error(`Estimator: wrong output amount=${o.amount}`);\n    if (script && !opts.allowUnknownOutputs && payment_js_1.OutScript.decode(script).type === 'unknown') {\n        throw new Error('Estimator: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure');\n    }\n    if (!opts.disableScriptCheck)\n        (0, payment_js_1.checkScript)(script);\n    return script;\n}\n// class, because we need to re-use normalized inputs, instead of parsing each time\n// internal stuff, exported for tests only\nclass _Estimator {\n    constructor(inputs, outputs, opts) {\n        this.inputs = inputs;\n        this.outputs = outputs;\n        this.opts = opts;\n        // https://github.com/bitcoin/bitcoin/blob/f90603ac6d24f5263649675d51233f1fce8b2ecd/src/policy/policy.cpp#L44\n        // 32 + 4 + 1 + 107 + 4\n        // Dust used in accumExact + change address algo\n        // - change address: can be smaller for segwit\n        // - accumExact: ???\n        this.dust = 148n; // compat with coinselect\n        if (typeof opts.feePerByte !== 'bigint')\n            throw new Error(`Estimator: wrong feePerByte=${opts.feePerByte}`);\n        if (opts.dust) {\n            if (typeof opts.dust !== 'bigint')\n                throw new Error(`Estimator: wrong dust=${opts.dust}`);\n            this.dust = opts.dust;\n        }\n        const network = opts.network || utils_js_1.NETWORK;\n        let amount = 0n;\n        // Base weight: tx with outputs, no inputs\n        let baseWeight = 32;\n        for (const o of outputs) {\n            const script = getScript(o, opts, opts.network);\n            baseWeight += 32 + 4 * script_js_1.VarBytes.encode(script).length;\n            amount += o.amount;\n        }\n        if (typeof opts.changeAddress !== 'string')\n            throw new Error(`Estimator: wrong change address=${opts.changeAddress}`);\n        let changeWeight = baseWeight +\n            32 +\n            4 * script_js_1.VarBytes.encode(payment_js_1.OutScript.encode((0, payment_js_1.Address)(network).decode(opts.changeAddress))).length;\n        baseWeight += 4 * script_js_1.CompactSizeLen.encode(outputs.length).length;\n        // If there a lot of outputs change can change fee\n        changeWeight += 4 * script_js_1.CompactSizeLen.encode(outputs.length + 1).length;\n        this.baseWeight = baseWeight;\n        this.changeWeight = changeWeight;\n        this.amount = amount;\n        this.normalizedInputs = this.inputs.map((i) => {\n            const normalized = normalizeInput(i, undefined, undefined, opts.disableScriptCheck);\n            (0, transaction_js_1.inputBeforeSign)(normalized); // check fields\n            const inputType = getInputType(normalized, opts.allowLegacyWitnessUtxo);\n            const prev = getPrevOut(normalized);\n            const estimate = estimateInput(inputType, normalized, this.opts);\n            const value = prev.amount - opts.feePerByte * BigInt((0, exports.toVsize)(estimate.weight)); // value = amount-fee\n            return { inputType, normalized, amount: prev.amount, value, estimate };\n        });\n    }\n    checkInputIdx(idx) {\n        if (!Number.isSafeInteger(idx) || 0 > idx || idx >= this.inputs.length)\n            throw new Error(`Wrong input index=${idx}`);\n        return idx;\n    }\n    sortIndices(indices) {\n        return indices.slice().sort((a, b) => {\n            const ai = this.normalizedInputs[this.checkInputIdx(a)];\n            const bi = this.normalizedInputs[this.checkInputIdx(b)];\n            const out = (0, utils_js_1.compareBytes)(ai.normalized.txid, bi.normalized.txid);\n            if (out !== 0)\n                return out;\n            return ai.normalized.index - bi.normalized.index;\n        });\n    }\n    sortOutputs(outputs) {\n        const scripts = outputs.map((o) => getScript(o, this.opts, this.opts.network));\n        const indices = outputs.map((_, j) => j);\n        return indices.sort((a, b) => {\n            const aa = outputs[a].amount;\n            const ba = outputs[b].amount;\n            const out = (0, exports._cmpBig)(aa, ba);\n            if (out !== 0)\n                return out;\n            return (0, utils_js_1.compareBytes)(scripts[a], scripts[b]);\n        });\n    }\n    getSatoshi(weigth) {\n        return this.opts.feePerByte * BigInt((0, exports.toVsize)(weigth));\n    }\n    // Sort by value instead of amount\n    get biggest() {\n        return this.inputs\n            .map((_i, j) => j)\n            .sort((a, b) => (0, exports._cmpBig)(this.normalizedInputs[b].value, this.normalizedInputs[a].value));\n    }\n    get smallest() {\n        return this.biggest.reverse();\n    }\n    // These assume that UTXO array has historical order.\n    // Otherwise, we have no way to know which tx is oldest\n    // Explorers usually give UTXO in this order.\n    get oldest() {\n        return this.inputs.map((_i, j) => j);\n    }\n    get newest() {\n        return this.oldest.reverse();\n    }\n    // exact - like blackjack from coinselect.\n    // exact(biggest) will select one big utxo which is closer to targetValue+dust, if possible.\n    // If not, it will accumulate largest utxo until value is close to targetValue+dust.\n    accumulate(indices, exact = false, skipNegative = true, all = false) {\n        const { feePerByte } = this.opts;\n        // TODO: how to handle change addresses?\n        // - cost of input\n        // - cost of change output (if input requires change)\n        // - cost of output spending\n        // Dust threshold should be significantly bigger, no point in\n        // creating an output, which cannot be spent.\n        // coinselect doesn't consider cost of output address for dust.\n        // Changing that can actually reduce privacy\n        let weight = this.opts.alwaysChange ? this.changeWeight : this.baseWeight;\n        let hasWitnesses = false;\n        let num = 0;\n        let inputsAmount = 0n;\n        const targetAmount = this.amount;\n        const res = [];\n        let fee;\n        for (const idx of indices) {\n            this.checkInputIdx(idx);\n            const { estimate, amount, value } = this.normalizedInputs[idx];\n            let newWeight = weight + estimate.weight;\n            if (!hasWitnesses && estimate.hasWitnesses)\n                newWeight += 2; // enable witness if needed\n            const totalWeight = newWeight + 4 * script_js_1.CompactSizeLen.encode(num).length; // number of outputs can change weight\n            fee = this.getSatoshi(totalWeight);\n            // Best case scenario exact(biggest) -> we find biggest output, less than target+threshold\n            if (exact) {\n                const dust = this.dust * feePerByte;\n                // skip if added value is bigger than dust\n                if (amount + inputsAmount > targetAmount + fee + dust)\n                    continue;\n            }\n            // Negative: cost of using input is more than value provided (negative)\n            // By default 'blackjack' mode in coinselect doesn't use that, which means\n            // it will use negative output if sorted by 'smallest'\n            if (skipNegative && value <= 0n)\n                continue;\n            weight = newWeight;\n            if (estimate.hasWitnesses)\n                hasWitnesses = true;\n            num++;\n            inputsAmount += amount;\n            res.push(idx);\n            // inputsAmount is enough to cover cost of tx\n            if (!all && targetAmount + fee < inputsAmount)\n                return { indices: res, fee, weight: totalWeight, total: inputsAmount };\n        }\n        if (all) {\n            const newWeight = weight + 4 * script_js_1.CompactSizeLen.encode(num).length;\n            return { indices: res, fee, weight: newWeight, total: inputsAmount };\n        }\n        return undefined;\n    }\n    // Works like coinselect default method\n    default() {\n        const { biggest } = this;\n        const exact = this.accumulate(biggest, true, false);\n        if (exact)\n            return exact;\n        return this.accumulate(biggest);\n    }\n    select(strategy) {\n        if (strategy === 'all') {\n            return this.accumulate(this.inputs.map((_, j) => j), false, true, true);\n        }\n        if (strategy === 'default')\n            return this.default();\n        const data = {\n            Oldest: () => this.oldest,\n            Newest: () => this.newest,\n            Smallest: () => this.smallest,\n            Biggest: () => this.biggest,\n        };\n        if (strategy.startsWith('exact')) {\n            const [exactData, left] = strategy.slice(5).split('/');\n            if (!data[exactData])\n                throw new Error(`Estimator.select: wrong strategy=${strategy}`);\n            strategy = left;\n            const exact = this.accumulate(data[exactData](), true, true);\n            if (exact)\n                return exact;\n        }\n        if (strategy.startsWith('accum')) {\n            const accumData = strategy.slice(5);\n            if (!data[accumData])\n                throw new Error(`Estimator.select: wrong strategy=${strategy}`);\n            return this.accumulate(data[accumData]());\n        }\n        throw new Error(`Estimator.select: wrong strategy=${strategy}`);\n    }\n    result(strategy) {\n        const s = this.select(strategy);\n        if (!s)\n            return;\n        const { indices, weight, total } = s;\n        let needChange = this.opts.alwaysChange;\n        const changeWeight = this.opts.alwaysChange\n            ? weight\n            : weight + (this.changeWeight - this.baseWeight);\n        const changeFee = this.getSatoshi(changeWeight);\n        let fee = s.fee;\n        const change = total - this.amount - changeFee;\n        if (change > this.dust)\n            needChange = true;\n        let inputs = indices;\n        let outputs = Array.from(this.outputs);\n        if (needChange) {\n            fee = changeFee;\n            // this shouldn't happen!\n            if (change < 0n)\n                throw new Error(`Estimator.result: negative change=${change}`);\n            outputs.push({ address: this.opts.changeAddress, amount: change });\n        }\n        if (this.opts.bip69) {\n            inputs = this.sortIndices(inputs);\n            outputs = this.sortOutputs(outputs).map((i) => outputs[i]);\n        }\n        const res = {\n            inputs: inputs.map((i) => this.inputs[i]),\n            outputs,\n            fee,\n            weight: this.opts.alwaysChange ? s.weight : changeWeight,\n            change: !!needChange,\n        };\n        let tx;\n        if (this.opts.createTx) {\n            const { inputs, outputs } = res;\n            tx = new transaction_js_1.Transaction(this.opts);\n            for (const i of inputs)\n                tx.addInput(i);\n            for (const o of outputs)\n                tx.addOutput({ ...o, script: getScript(o, this.opts, this.opts.network) });\n        }\n        return { ...res, tx };\n    }\n}\nexports._Estimator = _Estimator;\nfunction selectUTXO(inputs, outputs, strategy, opts) {\n    // Defaults: do we want bip69 by default?\n    const _opts = { createTx: true, bip69: true, ...opts };\n    const est = new _Estimator(inputs, outputs, _opts);\n    return est.result(strategy);\n}\nexports.selectUTXO = selectUTXO;\n//# sourceMappingURL=utxo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bip32Path = exports.PSBTCombine = exports.Transaction = exports.inputBeforeSign = exports.SigHash = exports.SignatureHash = exports.cloneDeep = exports.def = exports.Decimal = exports.DEFAULT_SEQUENCE = exports.DEFAULT_LOCKTIME = exports.DEFAULT_VERSION = exports.PRECISION = void 0;\nconst P = require(\"micro-packed\");\nconst base_1 = require(\"@scure/base\");\nconst payment_js_1 = require(\"./payment.js\");\nconst psbt = require(\"./psbt.js\"); // circular\nconst script_js_1 = require(\"./script.js\");\nconst utils_js_1 = require(\"./utils.js\");\nconst u = require(\"./utils.js\");\nconst utxo_js_1 = require(\"./utxo.js\"); // circular\nconst EMPTY32 = new Uint8Array(32);\nconst EMPTY_OUTPUT = {\n    amount: 0xffffffffffffffffn,\n    script: P.EMPTY,\n};\nexports.PRECISION = 8;\nexports.DEFAULT_VERSION = 2;\nexports.DEFAULT_LOCKTIME = 0;\nexports.DEFAULT_SEQUENCE = 4294967295;\nexports.Decimal = P.coders.decimal(exports.PRECISION);\n// Same as value || def, but doesn't overwrites zero ('0', 0, 0n, etc)\nconst def = (value, def) => (value === undefined ? def : value);\nexports.def = def;\nfunction cloneDeep(obj) {\n    if (Array.isArray(obj))\n        return obj.map((i) => cloneDeep(i));\n    // slice of nodejs Buffer doesn't copy\n    else if (obj instanceof Uint8Array)\n        return Uint8Array.from(obj);\n    // immutable\n    else if (['number', 'bigint', 'boolean', 'string', 'undefined'].includes(typeof obj))\n        return obj;\n    // null is object\n    else if (obj === null)\n        return obj;\n    // should be last, so it won't catch other types\n    else if (typeof obj === 'object') {\n        return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, cloneDeep(v)]));\n    }\n    throw new Error(`cloneDeep: unknown type=${obj} (${typeof obj})`);\n}\nexports.cloneDeep = cloneDeep;\n/**\n * Internal, exported only for backwards-compat. Use `SigHash` instead.\n * @deprecated\n */\nvar SignatureHash;\n(function (SignatureHash) {\n    SignatureHash[SignatureHash[\"DEFAULT\"] = 0] = \"DEFAULT\";\n    SignatureHash[SignatureHash[\"ALL\"] = 1] = \"ALL\";\n    SignatureHash[SignatureHash[\"NONE\"] = 2] = \"NONE\";\n    SignatureHash[SignatureHash[\"SINGLE\"] = 3] = \"SINGLE\";\n    SignatureHash[SignatureHash[\"ANYONECANPAY\"] = 128] = \"ANYONECANPAY\";\n})(SignatureHash || (exports.SignatureHash = SignatureHash = {}));\nvar SigHash;\n(function (SigHash) {\n    SigHash[SigHash[\"DEFAULT\"] = 0] = \"DEFAULT\";\n    SigHash[SigHash[\"ALL\"] = 1] = \"ALL\";\n    SigHash[SigHash[\"NONE\"] = 2] = \"NONE\";\n    SigHash[SigHash[\"SINGLE\"] = 3] = \"SINGLE\";\n    SigHash[SigHash[\"DEFAULT_ANYONECANPAY\"] = 128] = \"DEFAULT_ANYONECANPAY\";\n    SigHash[SigHash[\"ALL_ANYONECANPAY\"] = 129] = \"ALL_ANYONECANPAY\";\n    SigHash[SigHash[\"NONE_ANYONECANPAY\"] = 130] = \"NONE_ANYONECANPAY\";\n    SigHash[SigHash[\"SINGLE_ANYONECANPAY\"] = 131] = \"SINGLE_ANYONECANPAY\";\n})(SigHash || (exports.SigHash = SigHash = {}));\nfunction getTaprootKeys(privKey, pubKey, internalKey, merkleRoot = P.EMPTY) {\n    if ((0, utils_js_1.equalBytes)(internalKey, pubKey)) {\n        privKey = u.taprootTweakPrivKey(privKey, merkleRoot);\n        pubKey = u.pubSchnorr(privKey);\n    }\n    return { privKey, pubKey };\n}\n// Force check amount/script\nfunction outputBeforeSign(i) {\n    if (i.script === undefined || i.amount === undefined)\n        throw new Error('Transaction/output: script and amount required');\n    return { script: i.script, amount: i.amount };\n}\n// Force check index/txid/sequence\nfunction inputBeforeSign(i) {\n    if (i.txid === undefined || i.index === undefined)\n        throw new Error('Transaction/input: txid and index required');\n    return {\n        txid: i.txid,\n        index: i.index,\n        sequence: (0, exports.def)(i.sequence, exports.DEFAULT_SEQUENCE),\n        finalScriptSig: (0, exports.def)(i.finalScriptSig, P.EMPTY),\n    };\n}\nexports.inputBeforeSign = inputBeforeSign;\nfunction cleanFinalInput(i) {\n    for (const _k in i) {\n        const k = _k;\n        if (!psbt.PSBTInputFinalKeys.includes(k))\n            delete i[k];\n    }\n}\n// (TxHash, Idx)\nconst TxHashIdx = P.struct({ txid: P.bytes(32, true), index: P.U32LE });\nfunction validateSigHash(s) {\n    if (typeof s !== 'number' || typeof SigHash[s] !== 'string')\n        throw new Error(`Invalid SigHash=${s}`);\n    return s;\n}\nfunction unpackSighash(hashType) {\n    const masked = hashType & 0b0011111;\n    return {\n        isAny: !!(hashType & SignatureHash.ANYONECANPAY),\n        isNone: masked === SignatureHash.NONE,\n        isSingle: masked === SignatureHash.SINGLE,\n    };\n}\nfunction validateOpts(opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error(`Wrong object type for transaction options: ${opts}`);\n    const _opts = {\n        ...opts,\n        // Defaults\n        version: (0, exports.def)(opts.version, exports.DEFAULT_VERSION),\n        lockTime: (0, exports.def)(opts.lockTime, 0),\n        PSBTVersion: (0, exports.def)(opts.PSBTVersion, 0),\n    };\n    if (typeof _opts.allowUnknowInput !== 'undefined')\n        opts.allowUnknownInputs = _opts.allowUnknowInput;\n    if (typeof _opts.allowUnknowOutput !== 'undefined')\n        opts.allowUnknownOutputs = _opts.allowUnknowOutput;\n    // 0 and -1 happens in tests\n    if (![-1, 0, 1, 2].includes(_opts.version))\n        throw new Error(`Unknown version: ${_opts.version}`);\n    if (typeof _opts.lockTime !== 'number')\n        throw new Error('Transaction lock time should be number');\n    P.U32LE.encode(_opts.lockTime); // Additional range checks that lockTime\n    // There is no PSBT v1, and any new version will probably have fields which we don't know how to parse, which\n    // can lead to constructing broken transactions\n    if (_opts.PSBTVersion !== 0 && _opts.PSBTVersion !== 2)\n        throw new Error(`Unknown PSBT version ${_opts.PSBTVersion}`);\n    // Flags\n    for (const k of [\n        'allowUnknownOutputs',\n        'allowUnknownInputs',\n        'disableScriptCheck',\n        'bip174jsCompat',\n        'allowLegacyWitnessUtxo',\n        'lowR',\n    ]) {\n        const v = _opts[k];\n        if (v === undefined)\n            continue; // optional\n        if (typeof v !== 'boolean')\n            throw new Error(`Transation options wrong type: ${k}=${v} (${typeof v})`);\n    }\n    if (_opts.customScripts !== undefined) {\n        const cs = _opts.customScripts;\n        if (!Array.isArray(cs)) {\n            throw new Error(`wrong custom scripts type (expected array): customScripts=${cs} (${typeof cs})`);\n        }\n        for (const s of cs) {\n            if (typeof s.encode !== 'function' || typeof s.decode !== 'function')\n                throw new Error(`wrong script=${s} (${typeof s})`);\n            if (s.finalizeTaproot !== undefined && typeof s.finalizeTaproot !== 'function')\n                throw new Error(`wrong script=${s} (${typeof s})`);\n        }\n    }\n    return Object.freeze(_opts);\n}\nclass Transaction {\n    constructor(opts = {}) {\n        this.global = {};\n        this.inputs = []; // use getInput()\n        this.outputs = []; // use getOutput()\n        const _opts = (this.opts = validateOpts(opts));\n        // Merge with global structure of PSBTv2\n        if (_opts.lockTime !== exports.DEFAULT_LOCKTIME)\n            this.global.fallbackLocktime = _opts.lockTime;\n        this.global.txVersion = _opts.version;\n    }\n    // Import\n    static fromRaw(raw, opts = {}) {\n        const parsed = script_js_1.RawTx.decode(raw);\n        const tx = new Transaction({ ...opts, version: parsed.version, lockTime: parsed.lockTime });\n        for (const o of parsed.outputs)\n            tx.addOutput(o);\n        tx.outputs = parsed.outputs;\n        tx.inputs = parsed.inputs;\n        if (parsed.witnesses) {\n            for (let i = 0; i < parsed.witnesses.length; i++)\n                tx.inputs[i].finalScriptWitness = parsed.witnesses[i];\n        }\n        return tx;\n    }\n    // PSBT\n    static fromPSBT(psbt_, opts = {}) {\n        let parsed;\n        try {\n            parsed = psbt.RawPSBTV0.decode(psbt_);\n        }\n        catch (e0) {\n            try {\n                parsed = psbt.RawPSBTV2.decode(psbt_);\n            }\n            catch (e2) {\n                // Throw error for v0 parsing, since it popular, otherwise it would be shadowed by v2 error\n                throw e0;\n            }\n        }\n        const PSBTVersion = parsed.global.version || 0;\n        if (PSBTVersion !== 0 && PSBTVersion !== 2)\n            throw new Error(`Wrong PSBT version=${PSBTVersion}`);\n        const unsigned = parsed.global.unsignedTx;\n        const version = PSBTVersion === 0 ? unsigned?.version : parsed.global.txVersion;\n        const lockTime = PSBTVersion === 0 ? unsigned?.lockTime : parsed.global.fallbackLocktime;\n        const tx = new Transaction({ ...opts, version, lockTime, PSBTVersion });\n        // We need slice here, because otherwise\n        const inputCount = PSBTVersion === 0 ? unsigned?.inputs.length : parsed.global.inputCount;\n        tx.inputs = parsed.inputs.slice(0, inputCount).map((i, j) => ({\n            finalScriptSig: P.EMPTY,\n            ...parsed.global.unsignedTx?.inputs[j],\n            ...i,\n        }));\n        const outputCount = PSBTVersion === 0 ? unsigned?.outputs.length : parsed.global.outputCount;\n        tx.outputs = parsed.outputs.slice(0, outputCount).map((i, j) => ({\n            ...i,\n            ...parsed.global.unsignedTx?.outputs[j],\n        }));\n        tx.global = { ...parsed.global, txVersion: version }; // just in case proprietary/unknown fields\n        if (lockTime !== exports.DEFAULT_LOCKTIME)\n            tx.global.fallbackLocktime = lockTime;\n        return tx;\n    }\n    toPSBT(PSBTVersion = this.opts.PSBTVersion) {\n        if (PSBTVersion !== 0 && PSBTVersion !== 2)\n            throw new Error(`Wrong PSBT version=${PSBTVersion}`);\n        const inputs = this.inputs.map((i) => psbt.cleanPSBTFields(PSBTVersion, psbt.PSBTInput, i));\n        for (const inp of inputs) {\n            // Don't serialize empty fields\n            if (inp.partialSig && !inp.partialSig.length)\n                delete inp.partialSig;\n            if (inp.finalScriptSig && !inp.finalScriptSig.length)\n                delete inp.finalScriptSig;\n            if (inp.finalScriptWitness && !inp.finalScriptWitness.length)\n                delete inp.finalScriptWitness;\n        }\n        const outputs = this.outputs.map((i) => psbt.cleanPSBTFields(PSBTVersion, psbt.PSBTOutput, i));\n        const global = { ...this.global };\n        if (PSBTVersion === 0) {\n            global.unsignedTx = script_js_1.RawTx.decode(this.unsignedTx);\n            delete global.fallbackLocktime;\n            delete global.txVersion;\n        }\n        else {\n            global.version = PSBTVersion;\n            global.txVersion = this.version;\n            global.inputCount = this.inputs.length;\n            global.outputCount = this.outputs.length;\n            if (global.fallbackLocktime && global.fallbackLocktime === exports.DEFAULT_LOCKTIME)\n                delete global.fallbackLocktime;\n        }\n        if (this.opts.bip174jsCompat) {\n            if (!inputs.length)\n                inputs.push({});\n            if (!outputs.length)\n                outputs.push({});\n        }\n        return (PSBTVersion === 0 ? psbt.RawPSBTV0 : psbt.RawPSBTV2).encode({\n            global,\n            inputs,\n            outputs,\n        });\n    }\n    // BIP370 lockTime (https://github.com/bitcoin/bips/blob/master/bip-0370.mediawiki#determining-lock-time)\n    get lockTime() {\n        let height = exports.DEFAULT_LOCKTIME;\n        let heightCnt = 0;\n        let time = exports.DEFAULT_LOCKTIME;\n        let timeCnt = 0;\n        for (const i of this.inputs) {\n            if (i.requiredHeightLocktime) {\n                height = Math.max(height, i.requiredHeightLocktime);\n                heightCnt++;\n            }\n            if (i.requiredTimeLocktime) {\n                time = Math.max(time, i.requiredTimeLocktime);\n                timeCnt++;\n            }\n        }\n        if (heightCnt && heightCnt >= timeCnt)\n            return height;\n        if (time !== exports.DEFAULT_LOCKTIME)\n            return time;\n        return this.global.fallbackLocktime || exports.DEFAULT_LOCKTIME;\n    }\n    get version() {\n        // Should be not possible\n        if (this.global.txVersion === undefined)\n            throw new Error('No global.txVersion');\n        return this.global.txVersion;\n    }\n    inputStatus(idx) {\n        this.checkInputIdx(idx);\n        const input = this.inputs[idx];\n        // Finalized\n        if (input.finalScriptSig && input.finalScriptSig.length)\n            return 'finalized';\n        if (input.finalScriptWitness && input.finalScriptWitness.length)\n            return 'finalized';\n        // Signed taproot\n        if (input.tapKeySig)\n            return 'signed';\n        if (input.tapScriptSig && input.tapScriptSig.length)\n            return 'signed';\n        // Signed\n        if (input.partialSig && input.partialSig.length)\n            return 'signed';\n        return 'unsigned';\n    }\n    // Cannot replace unpackSighash, tests rely on very generic implemenetation with signing inputs outside of range\n    // We will lose some vectors -> smaller test coverage of preimages (very important!)\n    inputSighash(idx) {\n        this.checkInputIdx(idx);\n        const sighash = (0, utxo_js_1.getInputType)(this.inputs[idx], this.opts.allowLegacyWitnessUtxo).sighash;\n        // ALL or DEFAULT -- everything signed\n        // NONE           -- all inputs + no outputs\n        // SINGLE         -- all inputs + output with same index\n        // ALL + ANYONE   -- specific input + all outputs\n        // NONE + ANYONE  -- specific input + no outputs\n        // SINGLE         -- specific inputs + output with same index\n        const sigOutputs = sighash === SignatureHash.DEFAULT ? SignatureHash.ALL : sighash & 0b11;\n        const sigInputs = sighash & SignatureHash.ANYONECANPAY;\n        return { sigInputs, sigOutputs };\n    }\n    // Very nice for debug purposes, but slow. If there is too much inputs/outputs to add, will be quadratic.\n    // Some cache will be nice, but there chance to have bugs with cache invalidation\n    signStatus() {\n        // if addInput or addOutput is not possible, then all inputs or outputs are signed\n        let addInput = true, addOutput = true;\n        let inputs = [], outputs = [];\n        for (let idx = 0; idx < this.inputs.length; idx++) {\n            const status = this.inputStatus(idx);\n            // Unsigned input doesn't affect anything\n            if (status === 'unsigned')\n                continue;\n            const { sigInputs, sigOutputs } = this.inputSighash(idx);\n            // Input type\n            if (sigInputs === SignatureHash.ANYONECANPAY)\n                inputs.push(idx);\n            else\n                addInput = false;\n            // Output type\n            if (sigOutputs === SignatureHash.ALL)\n                addOutput = false;\n            else if (sigOutputs === SignatureHash.SINGLE)\n                outputs.push(idx);\n            else if (sigOutputs === SignatureHash.NONE) {\n                // Doesn't affect any outputs at all\n            }\n            else\n                throw new Error(`Wrong signature hash output type: ${sigOutputs}`);\n        }\n        return { addInput, addOutput, inputs, outputs };\n    }\n    get isFinal() {\n        for (let idx = 0; idx < this.inputs.length; idx++)\n            if (this.inputStatus(idx) !== 'finalized')\n                return false;\n        return true;\n    }\n    // Info utils\n    get hasWitnesses() {\n        let out = false;\n        for (const i of this.inputs)\n            if (i.finalScriptWitness && i.finalScriptWitness.length)\n                out = true;\n        return out;\n    }\n    // https://en.bitcoin.it/wiki/Weight_units\n    get weight() {\n        if (!this.isFinal)\n            throw new Error('Transaction is not finalized');\n        let out = 32;\n        // Outputs\n        const outputs = this.outputs.map(outputBeforeSign);\n        out += 4 * script_js_1.CompactSizeLen.encode(this.outputs.length).length;\n        for (const o of outputs)\n            out += 32 + 4 * script_js_1.VarBytes.encode(o.script).length;\n        // Inputs\n        if (this.hasWitnesses)\n            out += 2;\n        out += 4 * script_js_1.CompactSizeLen.encode(this.inputs.length).length;\n        for (const i of this.inputs) {\n            out += 160 + 4 * script_js_1.VarBytes.encode(i.finalScriptSig || P.EMPTY).length;\n            if (this.hasWitnesses && i.finalScriptWitness)\n                out += script_js_1.RawWitness.encode(i.finalScriptWitness).length;\n        }\n        return out;\n    }\n    get vsize() {\n        return (0, utxo_js_1.toVsize)(this.weight);\n    }\n    toBytes(withScriptSig = false, withWitness = false) {\n        return script_js_1.RawTx.encode({\n            version: this.version,\n            lockTime: this.lockTime,\n            inputs: this.inputs.map(inputBeforeSign).map((i) => ({\n                ...i,\n                finalScriptSig: (withScriptSig && i.finalScriptSig) || P.EMPTY,\n            })),\n            outputs: this.outputs.map(outputBeforeSign),\n            witnesses: this.inputs.map((i) => i.finalScriptWitness || []),\n            segwitFlag: withWitness && this.hasWitnesses,\n        });\n    }\n    get unsignedTx() {\n        return this.toBytes(false, false);\n    }\n    get hex() {\n        return base_1.hex.encode(this.toBytes(true, this.hasWitnesses));\n    }\n    get hash() {\n        if (!this.isFinal)\n            throw new Error('Transaction is not finalized');\n        return base_1.hex.encode(u.sha256x2(this.toBytes(true)));\n    }\n    get id() {\n        if (!this.isFinal)\n            throw new Error('Transaction is not finalized');\n        return base_1.hex.encode(u.sha256x2(this.toBytes(true)).reverse());\n    }\n    // Input stuff\n    checkInputIdx(idx) {\n        if (!Number.isSafeInteger(idx) || 0 > idx || idx >= this.inputs.length)\n            throw new Error(`Wrong input index=${idx}`);\n    }\n    getInput(idx) {\n        this.checkInputIdx(idx);\n        return cloneDeep(this.inputs[idx]);\n    }\n    get inputsLength() {\n        return this.inputs.length;\n    }\n    // Modification\n    addInput(input, _ignoreSignStatus = false) {\n        if (!_ignoreSignStatus && !this.signStatus().addInput)\n            throw new Error('Tx has signed inputs, cannot add new one');\n        this.inputs.push((0, utxo_js_1.normalizeInput)(input, undefined, undefined, this.opts.disableScriptCheck));\n        return this.inputs.length - 1;\n    }\n    updateInput(idx, input, _ignoreSignStatus = false) {\n        this.checkInputIdx(idx);\n        let allowedFields = undefined;\n        if (!_ignoreSignStatus) {\n            const status = this.signStatus();\n            if (!status.addInput || status.inputs.includes(idx))\n                allowedFields = psbt.PSBTInputUnsignedKeys;\n        }\n        this.inputs[idx] = (0, utxo_js_1.normalizeInput)(input, this.inputs[idx], allowedFields, this.opts.disableScriptCheck);\n    }\n    // Output stuff\n    checkOutputIdx(idx) {\n        if (!Number.isSafeInteger(idx) || 0 > idx || idx >= this.outputs.length)\n            throw new Error(`Wrong output index=${idx}`);\n    }\n    getOutput(idx) {\n        this.checkOutputIdx(idx);\n        return cloneDeep(this.outputs[idx]);\n    }\n    get outputsLength() {\n        return this.outputs.length;\n    }\n    normalizeOutput(o, cur, allowedFields) {\n        let { amount, script } = o;\n        if (amount === undefined)\n            amount = cur?.amount;\n        if (typeof amount !== 'bigint')\n            throw new Error('amount must be bigint sats');\n        if (typeof script === 'string')\n            script = base_1.hex.decode(script);\n        if (script === undefined)\n            script = cur?.script;\n        let res = { ...cur, ...o, amount, script };\n        if (res.amount === undefined)\n            delete res.amount;\n        res = psbt.mergeKeyMap(psbt.PSBTOutput, res, cur, allowedFields);\n        psbt.PSBTOutputCoder.encode(res);\n        if (res.script &&\n            !this.opts.allowUnknownOutputs &&\n            payment_js_1.OutScript.decode(res.script).type === 'unknown') {\n            throw new Error('Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure');\n        }\n        if (!this.opts.disableScriptCheck)\n            (0, payment_js_1.checkScript)(res.script, res.redeemScript, res.witnessScript);\n        return res;\n    }\n    addOutput(o, _ignoreSignStatus = false) {\n        if (!_ignoreSignStatus && !this.signStatus().addOutput)\n            throw new Error('Tx has signed outputs, cannot add new one');\n        this.outputs.push(this.normalizeOutput(o));\n        return this.outputs.length - 1;\n    }\n    updateOutput(idx, output, _ignoreSignStatus = false) {\n        this.checkOutputIdx(idx);\n        let allowedFields = undefined;\n        if (!_ignoreSignStatus) {\n            const status = this.signStatus();\n            if (!status.addOutput || status.outputs.includes(idx))\n                allowedFields = psbt.PSBTOutputUnsignedKeys;\n        }\n        this.outputs[idx] = this.normalizeOutput(output, this.outputs[idx], allowedFields);\n    }\n    addOutputAddress(address, amount, network = utils_js_1.NETWORK) {\n        return this.addOutput({ script: payment_js_1.OutScript.encode((0, payment_js_1.Address)(network).decode(address)), amount });\n    }\n    // Utils\n    get fee() {\n        let res = 0n;\n        for (const i of this.inputs) {\n            const prevOut = (0, utxo_js_1.getPrevOut)(i);\n            if (!prevOut)\n                throw new Error('Empty input amount');\n            res += prevOut.amount;\n        }\n        const outputs = this.outputs.map(outputBeforeSign);\n        for (const o of outputs)\n            res -= o.amount;\n        return res;\n    }\n    // Signing\n    // Based on https://github.com/bitcoin/bitcoin/blob/5871b5b5ab57a0caf9b7514eb162c491c83281d5/test/functional/test_framework/script.py#L624\n    // There is optimization opportunity to re-use hashes for multiple inputs for witness v0/v1,\n    // but we are trying to be less complicated for audit purpose for now.\n    preimageLegacy(idx, prevOutScript, hashType) {\n        const { isAny, isNone, isSingle } = unpackSighash(hashType);\n        if (idx < 0 || !Number.isSafeInteger(idx))\n            throw new Error(`Invalid input idx=${idx}`);\n        if ((isSingle && idx >= this.outputs.length) || idx >= this.inputs.length)\n            return P.U256BE.encode(1n);\n        prevOutScript = script_js_1.Script.encode(script_js_1.Script.decode(prevOutScript).filter((i) => i !== 'CODESEPARATOR'));\n        let inputs = this.inputs\n            .map(inputBeforeSign)\n            .map((input, inputIdx) => ({\n            ...input,\n            finalScriptSig: inputIdx === idx ? prevOutScript : P.EMPTY,\n        }));\n        if (isAny)\n            inputs = [inputs[idx]];\n        else if (isNone || isSingle) {\n            inputs = inputs.map((input, inputIdx) => ({\n                ...input,\n                sequence: inputIdx === idx ? input.sequence : 0,\n            }));\n        }\n        let outputs = this.outputs.map(outputBeforeSign);\n        if (isNone)\n            outputs = [];\n        else if (isSingle) {\n            outputs = outputs.slice(0, idx).fill(EMPTY_OUTPUT).concat([outputs[idx]]);\n        }\n        const tmpTx = script_js_1.RawTx.encode({\n            lockTime: this.lockTime,\n            version: this.version,\n            segwitFlag: false,\n            inputs,\n            outputs,\n        });\n        return u.sha256x2(tmpTx, P.I32LE.encode(hashType));\n    }\n    preimageWitnessV0(idx, prevOutScript, hashType, amount) {\n        const { isAny, isNone, isSingle } = unpackSighash(hashType);\n        let inputHash = EMPTY32;\n        let sequenceHash = EMPTY32;\n        let outputHash = EMPTY32;\n        const inputs = this.inputs.map(inputBeforeSign);\n        const outputs = this.outputs.map(outputBeforeSign);\n        if (!isAny)\n            inputHash = u.sha256x2(...inputs.map(TxHashIdx.encode));\n        if (!isAny && !isSingle && !isNone)\n            sequenceHash = u.sha256x2(...inputs.map((i) => P.U32LE.encode(i.sequence)));\n        if (!isSingle && !isNone) {\n            outputHash = u.sha256x2(...outputs.map(script_js_1.RawOutput.encode));\n        }\n        else if (isSingle && idx < outputs.length)\n            outputHash = u.sha256x2(script_js_1.RawOutput.encode(outputs[idx]));\n        const input = inputs[idx];\n        return u.sha256x2(P.I32LE.encode(this.version), inputHash, sequenceHash, P.bytes(32, true).encode(input.txid), P.U32LE.encode(input.index), script_js_1.VarBytes.encode(prevOutScript), P.U64LE.encode(amount), P.U32LE.encode(input.sequence), outputHash, P.U32LE.encode(this.lockTime), P.U32LE.encode(hashType));\n    }\n    preimageWitnessV1(idx, prevOutScript, hashType, amount, codeSeparator = -1, leafScript, leafVer = 0xc0, annex) {\n        if (!Array.isArray(amount) || this.inputs.length !== amount.length)\n            throw new Error(`Invalid amounts array=${amount}`);\n        if (!Array.isArray(prevOutScript) || this.inputs.length !== prevOutScript.length)\n            throw new Error(`Invalid prevOutScript array=${prevOutScript}`);\n        const out = [\n            P.U8.encode(0),\n            P.U8.encode(hashType), // U8 sigHash\n            P.I32LE.encode(this.version),\n            P.U32LE.encode(this.lockTime),\n        ];\n        const outType = hashType === SignatureHash.DEFAULT ? SignatureHash.ALL : hashType & 0b11;\n        const inType = hashType & SignatureHash.ANYONECANPAY;\n        const inputs = this.inputs.map(inputBeforeSign);\n        const outputs = this.outputs.map(outputBeforeSign);\n        if (inType !== SignatureHash.ANYONECANPAY) {\n            out.push(...[\n                inputs.map(TxHashIdx.encode),\n                amount.map(P.U64LE.encode),\n                prevOutScript.map(script_js_1.VarBytes.encode),\n                inputs.map((i) => P.U32LE.encode(i.sequence)),\n            ].map((i) => u.sha256((0, utils_js_1.concatBytes)(...i))));\n        }\n        if (outType === SignatureHash.ALL) {\n            out.push(u.sha256((0, utils_js_1.concatBytes)(...outputs.map(script_js_1.RawOutput.encode))));\n        }\n        const spendType = (annex ? 1 : 0) | (leafScript ? 2 : 0);\n        out.push(new Uint8Array([spendType]));\n        if (inType === SignatureHash.ANYONECANPAY) {\n            const inp = inputs[idx];\n            out.push(TxHashIdx.encode(inp), P.U64LE.encode(amount[idx]), script_js_1.VarBytes.encode(prevOutScript[idx]), P.U32LE.encode(inp.sequence));\n        }\n        else\n            out.push(P.U32LE.encode(idx));\n        if (spendType & 1)\n            out.push(u.sha256(script_js_1.VarBytes.encode(annex || P.EMPTY)));\n        if (outType === SignatureHash.SINGLE)\n            out.push(idx < outputs.length ? u.sha256(script_js_1.RawOutput.encode(outputs[idx])) : EMPTY32);\n        if (leafScript)\n            out.push((0, payment_js_1.tapLeafHash)(leafScript, leafVer), P.U8.encode(0), P.I32LE.encode(codeSeparator));\n        return u.tagSchnorr('TapSighash', ...out);\n    }\n    // Signer can be privateKey OR instance of bip32 HD stuff\n    signIdx(privateKey, idx, allowedSighash, _auxRand) {\n        this.checkInputIdx(idx);\n        const input = this.inputs[idx];\n        const inputType = (0, utxo_js_1.getInputType)(input, this.opts.allowLegacyWitnessUtxo);\n        // Handle BIP32 HDKey\n        if (!(0, utils_js_1.isBytes)(privateKey)) {\n            if (!input.bip32Derivation || !input.bip32Derivation.length)\n                throw new Error('bip32Derivation: empty');\n            const signers = input.bip32Derivation\n                .filter((i) => i[1].fingerprint == privateKey.fingerprint)\n                .map(([pubKey, { path }]) => {\n                let s = privateKey;\n                for (const i of path)\n                    s = s.deriveChild(i);\n                if (!(0, utils_js_1.equalBytes)(s.publicKey, pubKey))\n                    throw new Error('bip32Derivation: wrong pubKey');\n                if (!s.privateKey)\n                    throw new Error('bip32Derivation: no privateKey');\n                return s;\n            });\n            if (!signers.length)\n                throw new Error(`bip32Derivation: no items with fingerprint=${privateKey.fingerprint}`);\n            let signed = false;\n            for (const s of signers)\n                if (this.signIdx(s.privateKey, idx))\n                    signed = true;\n            return signed;\n        }\n        // Sighash checks\n        // Just for compat with bitcoinjs-lib, so users won't face unexpected behaviour.\n        if (!allowedSighash)\n            allowedSighash = [inputType.defaultSighash];\n        else\n            allowedSighash.forEach(validateSigHash);\n        const sighash = inputType.sighash;\n        if (!allowedSighash.includes(sighash)) {\n            throw new Error(`Input with not allowed sigHash=${sighash}. Allowed: ${allowedSighash.join(', ')}`);\n        }\n        // It is possible to sign these inputs for legacy/segwit v0 (but no taproot!),\n        // however this was because of bug in bitcoin-core, which remains here because of consensus.\n        // If this is absolutely neccessary for your case, please open issue.\n        // We disable it to avoid complicated workflow where SINGLE will block adding new outputs\n        const { sigOutputs } = this.inputSighash(idx);\n        if (sigOutputs === SignatureHash.SINGLE && idx >= this.outputs.length) {\n            throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${idx}`);\n        }\n        // Actual signing\n        // Taproot\n        const prevOut = (0, utxo_js_1.getPrevOut)(input);\n        if (inputType.txType === 'taproot') {\n            if (input.tapBip32Derivation)\n                throw new Error('tapBip32Derivation unsupported');\n            const prevOuts = this.inputs.map(utxo_js_1.getPrevOut);\n            const prevOutScript = prevOuts.map((i) => i.script);\n            const amount = prevOuts.map((i) => i.amount);\n            let signed = false;\n            let schnorrPub = u.pubSchnorr(privateKey);\n            let merkleRoot = input.tapMerkleRoot || P.EMPTY;\n            if (input.tapInternalKey) {\n                // internal + tweak = tweaked key\n                // if internal key == current public key, we need to tweak private key,\n                // otherwise sign as is. bitcoinjs implementation always wants tweaked\n                // priv key to be provided\n                const { pubKey, privKey } = getTaprootKeys(privateKey, schnorrPub, input.tapInternalKey, merkleRoot);\n                const [taprootPubKey, _] = u.taprootTweakPubkey(input.tapInternalKey, merkleRoot);\n                if ((0, utils_js_1.equalBytes)(taprootPubKey, pubKey)) {\n                    const hash = this.preimageWitnessV1(idx, prevOutScript, sighash, amount);\n                    const sig = (0, utils_js_1.concatBytes)(u.signSchnorr(hash, privKey, _auxRand), sighash !== SignatureHash.DEFAULT ? new Uint8Array([sighash]) : P.EMPTY);\n                    this.updateInput(idx, { tapKeySig: sig }, true);\n                    signed = true;\n                }\n            }\n            if (input.tapLeafScript) {\n                input.tapScriptSig = input.tapScriptSig || [];\n                for (const [_, _script] of input.tapLeafScript) {\n                    const script = _script.subarray(0, -1);\n                    const scriptDecoded = script_js_1.Script.decode(script);\n                    const ver = _script[_script.length - 1];\n                    const hash = (0, payment_js_1.tapLeafHash)(script, ver);\n                    // NOTE: no need to tweak internal key here, since we don't support nested p2tr\n                    const pos = scriptDecoded.findIndex((i) => (0, utils_js_1.isBytes)(i) && (0, utils_js_1.equalBytes)(i, schnorrPub));\n                    // Skip if there is no public key in tapLeafScript\n                    if (pos === -1)\n                        continue;\n                    const msg = this.preimageWitnessV1(idx, prevOutScript, sighash, amount, undefined, script, ver);\n                    const sig = (0, utils_js_1.concatBytes)(u.signSchnorr(msg, privateKey, _auxRand), sighash !== SignatureHash.DEFAULT ? new Uint8Array([sighash]) : P.EMPTY);\n                    this.updateInput(idx, { tapScriptSig: [[{ pubKey: schnorrPub, leafHash: hash }, sig]] }, true);\n                    signed = true;\n                }\n            }\n            if (!signed)\n                throw new Error('No taproot scripts signed');\n            return true;\n        }\n        else {\n            // only compressed keys are supported for now\n            const pubKey = u.pubECDSA(privateKey);\n            // TODO: replace with explicit checks\n            // Check if script has public key or its has inside\n            let hasPubkey = false;\n            const pubKeyHash = u.hash160(pubKey);\n            for (const i of script_js_1.Script.decode(inputType.lastScript)) {\n                if ((0, utils_js_1.isBytes)(i) && ((0, utils_js_1.equalBytes)(i, pubKey) || (0, utils_js_1.equalBytes)(i, pubKeyHash)))\n                    hasPubkey = true;\n            }\n            if (!hasPubkey)\n                throw new Error(`Input script doesn't have pubKey: ${inputType.lastScript}`);\n            let hash;\n            if (inputType.txType === 'legacy') {\n                hash = this.preimageLegacy(idx, inputType.lastScript, sighash);\n            }\n            else if (inputType.txType === 'segwit') {\n                let script = inputType.lastScript;\n                // If wpkh OR sh-wpkh, wsh-wpkh is impossible, so looks ok\n                if (inputType.last.type === 'wpkh')\n                    script = payment_js_1.OutScript.encode({ type: 'pkh', hash: inputType.last.hash });\n                hash = this.preimageWitnessV0(idx, script, sighash, prevOut.amount);\n            }\n            else\n                throw new Error(`Transaction/sign: unknown tx type: ${inputType.txType}`);\n            const sig = u.signECDSA(hash, privateKey, this.opts.lowR);\n            this.updateInput(idx, {\n                partialSig: [[pubKey, (0, utils_js_1.concatBytes)(sig, new Uint8Array([sighash]))]],\n            }, true);\n        }\n        return true;\n    }\n    // This is bad API. Will work if user creates and signs tx, but if\n    // there is some complex workflow with exchanging PSBT and signing them,\n    // then it is better to validate which output user signs. How could a better API look like?\n    // Example: user adds input, sends to another party, then signs received input (mixer etc),\n    // another user can add different input for same key and user will sign it.\n    // Even worse: another user can add bip32 derivation, and spend money from different address.\n    // Better api: signIdx\n    sign(privateKey, allowedSighash, _auxRand) {\n        let num = 0;\n        for (let i = 0; i < this.inputs.length; i++) {\n            try {\n                if (this.signIdx(privateKey, i, allowedSighash, _auxRand))\n                    num++;\n            }\n            catch (e) { }\n        }\n        if (!num)\n            throw new Error('No inputs signed');\n        return num;\n    }\n    finalizeIdx(idx) {\n        this.checkInputIdx(idx);\n        if (this.fee < 0n)\n            throw new Error('Outputs spends more than inputs amount');\n        const input = this.inputs[idx];\n        const inputType = (0, utxo_js_1.getInputType)(input, this.opts.allowLegacyWitnessUtxo);\n        // Taproot finalize\n        if (inputType.txType === 'taproot') {\n            if (input.tapKeySig)\n                input.finalScriptWitness = [input.tapKeySig];\n            else if (input.tapLeafScript && input.tapScriptSig) {\n                // Sort leafs by control block length.\n                const leafs = input.tapLeafScript.sort((a, b) => psbt.TaprootControlBlock.encode(a[0]).length -\n                    psbt.TaprootControlBlock.encode(b[0]).length);\n                for (const [cb, _script] of leafs) {\n                    // Last byte is version\n                    const script = _script.slice(0, -1);\n                    const ver = _script[_script.length - 1];\n                    const outScript = payment_js_1.OutScript.decode(script);\n                    const hash = (0, payment_js_1.tapLeafHash)(script, ver);\n                    const scriptSig = input.tapScriptSig.filter((i) => (0, utils_js_1.equalBytes)(i[0].leafHash, hash));\n                    let signatures = [];\n                    if (outScript.type === 'tr_ms') {\n                        const m = outScript.m;\n                        const pubkeys = outScript.pubkeys;\n                        let added = 0;\n                        for (const pub of pubkeys) {\n                            const sigIdx = scriptSig.findIndex((i) => (0, utils_js_1.equalBytes)(i[0].pubKey, pub));\n                            // Should have exact amount of signatures (more -- will fail)\n                            if (added === m || sigIdx === -1) {\n                                signatures.push(P.EMPTY);\n                                continue;\n                            }\n                            signatures.push(scriptSig[sigIdx][1]);\n                            added++;\n                        }\n                        // Should be exact same as m\n                        if (added !== m)\n                            continue;\n                    }\n                    else if (outScript.type === 'tr_ns') {\n                        for (const pub of outScript.pubkeys) {\n                            const sigIdx = scriptSig.findIndex((i) => (0, utils_js_1.equalBytes)(i[0].pubKey, pub));\n                            if (sigIdx === -1)\n                                continue;\n                            signatures.push(scriptSig[sigIdx][1]);\n                        }\n                        if (signatures.length !== outScript.pubkeys.length)\n                            continue;\n                    }\n                    else if (outScript.type === 'unknown' && this.opts.allowUnknownInputs) {\n                        // Trying our best to sign what we can\n                        const scriptDecoded = script_js_1.Script.decode(script);\n                        signatures = scriptSig\n                            .map(([{ pubKey }, signature]) => {\n                            const pos = scriptDecoded.findIndex((i) => (0, utils_js_1.isBytes)(i) && (0, utils_js_1.equalBytes)(i, pubKey));\n                            if (pos === -1)\n                                throw new Error('finalize/taproot: cannot find position of pubkey in script');\n                            return { signature, pos };\n                        })\n                            // Reverse order (because witness is stack and we take last element first from it)\n                            .sort((a, b) => a.pos - b.pos)\n                            .map((i) => i.signature);\n                        if (!signatures.length)\n                            continue;\n                    }\n                    else {\n                        const custom = this.opts.customScripts;\n                        if (custom) {\n                            for (const c of custom) {\n                                if (!c.finalizeTaproot)\n                                    continue;\n                                const scriptDecoded = script_js_1.Script.decode(script);\n                                const csEncoded = c.encode(scriptDecoded);\n                                if (csEncoded === undefined)\n                                    continue;\n                                const finalized = c.finalizeTaproot(script, csEncoded, scriptSig);\n                                if (!finalized)\n                                    continue;\n                                input.finalScriptWitness = finalized.concat(psbt.TaprootControlBlock.encode(cb));\n                                input.finalScriptSig = P.EMPTY;\n                                cleanFinalInput(input);\n                                return;\n                            }\n                        }\n                        throw new Error('Finalize: Unknown tapLeafScript');\n                    }\n                    // Witness is stack, so last element will be used first\n                    input.finalScriptWitness = signatures\n                        .reverse()\n                        .concat([script, psbt.TaprootControlBlock.encode(cb)]);\n                    break;\n                }\n                if (!input.finalScriptWitness)\n                    throw new Error('finalize/taproot: empty witness');\n            }\n            else\n                throw new Error('finalize/taproot: unknown input');\n            input.finalScriptSig = P.EMPTY;\n            cleanFinalInput(input);\n            return;\n        }\n        if (!input.partialSig || !input.partialSig.length)\n            throw new Error('Not enough partial sign');\n        let inputScript = P.EMPTY;\n        let witness = [];\n        // TODO: move input scripts closer to payments/output scripts\n        // Multisig\n        if (inputType.last.type === 'ms') {\n            const m = inputType.last.m;\n            const pubkeys = inputType.last.pubkeys;\n            let signatures = [];\n            // partial: [pubkey, sign]\n            for (const pub of pubkeys) {\n                const sign = input.partialSig.find((s) => (0, utils_js_1.equalBytes)(pub, s[0]));\n                if (!sign)\n                    continue;\n                signatures.push(sign[1]);\n            }\n            signatures = signatures.slice(0, m);\n            if (signatures.length !== m) {\n                throw new Error(`Multisig: wrong signatures count, m=${m} n=${pubkeys.length} signatures=${signatures.length}`);\n            }\n            inputScript = script_js_1.Script.encode([0, ...signatures]);\n        }\n        else if (inputType.last.type === 'pk') {\n            inputScript = script_js_1.Script.encode([input.partialSig[0][1]]);\n        }\n        else if (inputType.last.type === 'pkh') {\n            inputScript = script_js_1.Script.encode([input.partialSig[0][1], input.partialSig[0][0]]);\n        }\n        else if (inputType.last.type === 'wpkh') {\n            inputScript = P.EMPTY;\n            witness = [input.partialSig[0][1], input.partialSig[0][0]];\n        }\n        else if (inputType.last.type === 'unknown' && !this.opts.allowUnknownInputs)\n            throw new Error('Unknown inputs not allowed');\n        // Create final scripts (generic part)\n        let finalScriptSig, finalScriptWitness;\n        if (inputType.type.includes('wsh-')) {\n            // P2WSH\n            if (inputScript.length && inputType.lastScript.length) {\n                witness = script_js_1.Script.decode(inputScript).map((i) => {\n                    if (i === 0)\n                        return P.EMPTY;\n                    if ((0, utils_js_1.isBytes)(i))\n                        return i;\n                    throw new Error(`Wrong witness op=${i}`);\n                });\n            }\n            witness = witness.concat(inputType.lastScript);\n        }\n        if (inputType.txType === 'segwit')\n            finalScriptWitness = witness;\n        if (inputType.type.startsWith('sh-wsh-')) {\n            finalScriptSig = script_js_1.Script.encode([script_js_1.Script.encode([0, u.sha256(inputType.lastScript)])]);\n        }\n        else if (inputType.type.startsWith('sh-')) {\n            finalScriptSig = script_js_1.Script.encode([...script_js_1.Script.decode(inputScript), inputType.lastScript]);\n        }\n        else if (inputType.type.startsWith('wsh-')) {\n        }\n        else if (inputType.txType !== 'segwit')\n            finalScriptSig = inputScript;\n        if (!finalScriptSig && !finalScriptWitness)\n            throw new Error('Unknown error finalizing input');\n        if (finalScriptSig)\n            input.finalScriptSig = finalScriptSig;\n        if (finalScriptWitness)\n            input.finalScriptWitness = finalScriptWitness;\n        cleanFinalInput(input);\n    }\n    finalize() {\n        for (let i = 0; i < this.inputs.length; i++)\n            this.finalizeIdx(i);\n    }\n    extract() {\n        if (!this.isFinal)\n            throw new Error('Transaction has unfinalized inputs');\n        if (!this.outputs.length)\n            throw new Error('Transaction has no outputs');\n        if (this.fee < 0n)\n            throw new Error('Outputs spends more than inputs amount');\n        return this.toBytes(true, true);\n    }\n    combine(other) {\n        for (const k of ['PSBTVersion', 'version', 'lockTime']) {\n            if (this.opts[k] !== other.opts[k]) {\n                throw new Error(`Transaction/combine: different ${k} this=${this.opts[k]} other=${other.opts[k]}`);\n            }\n        }\n        for (const k of ['inputs', 'outputs']) {\n            if (this[k].length !== other[k].length) {\n                throw new Error(`Transaction/combine: different ${k} length this=${this[k].length} other=${other[k].length}`);\n            }\n        }\n        const thisUnsigned = this.global.unsignedTx ? script_js_1.RawTx.encode(this.global.unsignedTx) : P.EMPTY;\n        const otherUnsigned = other.global.unsignedTx ? script_js_1.RawTx.encode(other.global.unsignedTx) : P.EMPTY;\n        if (!(0, utils_js_1.equalBytes)(thisUnsigned, otherUnsigned))\n            throw new Error(`Transaction/combine: different unsigned tx`);\n        this.global = psbt.mergeKeyMap(psbt.PSBTGlobal, this.global, other.global);\n        for (let i = 0; i < this.inputs.length; i++)\n            this.updateInput(i, other.inputs[i], true);\n        for (let i = 0; i < this.outputs.length; i++)\n            this.updateOutput(i, other.outputs[i], true);\n        return this;\n    }\n    clone() {\n        // deepClone probably faster, but this enforces that encoding is valid\n        return Transaction.fromPSBT(this.toPSBT(this.opts.PSBTVersion), this.opts);\n    }\n}\nexports.Transaction = Transaction;\nfunction PSBTCombine(psbts) {\n    if (!psbts || !Array.isArray(psbts) || !psbts.length)\n        throw new Error('PSBTCombine: wrong PSBT list');\n    const tx = Transaction.fromPSBT(psbts[0]);\n    for (let i = 1; i < psbts.length; i++)\n        tx.combine(Transaction.fromPSBT(psbts[i]));\n    return tx.toPSBT();\n}\nexports.PSBTCombine = PSBTCombine;\n// Copy-pasted from bip32 derive, maybe do something like 'bip32.parsePath'?\nconst HARDENED_OFFSET = 0x80000000;\nfunction bip32Path(path) {\n    const out = [];\n    if (!/^[mM]'?/.test(path))\n        throw new Error('Path must start with \"m\" or \"M\"');\n    if (/^[mM]'?$/.test(path))\n        return out;\n    const parts = path.replace(/^[mM]'?\\//, '').split('/');\n    for (const c of parts) {\n        const m = /^(\\d+)('?)$/.exec(c);\n        if (!m || m.length !== 3)\n            throw new Error(`Invalid child index: ${c}`);\n        let idx = +m[1];\n        if (!Number.isSafeInteger(idx) || idx >= HARDENED_OFFSET)\n            throw new Error('Invalid index');\n        // hardened key\n        if (m[2] === \"'\")\n            idx += HARDENED_OFFSET;\n        out.push(idx);\n    }\n    return out;\n}\nexports.bip32Path = bip32Path;\n//# sourceMappingURL=transaction.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RawPSBTV2 = exports.RawPSBTV0 = exports.mergeKeyMap = exports.cleanPSBTFields = exports._DebugPSBT = exports._RawPSBTV2 = exports._RawPSBTV0 = exports.PSBTOutputCoder = exports.PSBTInputCoder = exports.PSBTOutputUnsignedKeys = exports.PSBTOutput = exports.PSBTInputUnsignedKeys = exports.PSBTInputFinalKeys = exports.PSBTInput = exports.PSBTGlobal = exports.TaprootControlBlock = void 0;\nconst base_1 = require(\"@scure/base\");\nconst P = require(\"micro-packed\");\nconst script_js_1 = require(\"./script.js\");\nconst transaction_js_1 = require(\"./transaction.js\"); // circular\nconst utils_js_1 = require(\"./utils.js\");\n// PSBT BIP174, BIP370, BIP371\n// Can be 33 or 64 bytes\nconst PubKeyECDSA = P.validate(P.bytes(null), (pub) => (0, utils_js_1.validatePubkey)(pub, utils_js_1.PubT.ecdsa));\nconst PubKeySchnorr = P.validate(P.bytes(32), (pub) => (0, utils_js_1.validatePubkey)(pub, utils_js_1.PubT.schnorr));\nconst SignatureSchnorr = P.validate(P.bytes(null), (sig) => {\n    if (sig.length !== 64 && sig.length !== 65)\n        throw new Error('Schnorr signature should be 64 or 65 bytes long');\n    return sig;\n});\nconst BIP32Der = P.struct({\n    fingerprint: P.U32BE,\n    path: P.array(null, P.U32LE),\n});\nconst TaprootBIP32Der = P.struct({\n    hashes: P.array(script_js_1.CompactSizeLen, P.bytes(32)),\n    der: BIP32Der,\n});\n// The 78 byte serialized extended public key as defined by BIP 32.\nconst GlobalXPUB = P.bytes(78);\nconst tapScriptSigKey = P.struct({ pubKey: PubKeySchnorr, leafHash: P.bytes(32) });\n// Complex structure for PSBT fields\n// <control byte with leaf version and parity bit> <internal key p> <C> <E> <AB>\nconst _TaprootControlBlock = P.struct({\n    version: P.U8, // With parity :(\n    internalKey: P.bytes(32),\n    merklePath: P.array(null, P.bytes(32)),\n});\nexports.TaprootControlBlock = P.validate(_TaprootControlBlock, (cb) => {\n    if (cb.merklePath.length > 128)\n        throw new Error('TaprootControlBlock: merklePath should be of length 0..128 (inclusive)');\n    return cb;\n});\n// {<8-bit uint depth> <8-bit uint leaf version> <compact size uint scriptlen> <bytes script>}*\nconst tapTree = P.array(null, P.struct({\n    depth: P.U8,\n    version: P.U8,\n    script: script_js_1.VarBytes,\n}));\nconst BytesInf = P.bytes(null); // Bytes will conflict with Bytes type\nconst Bytes20 = P.bytes(20);\nconst Bytes32 = P.bytes(32);\n// versionsRequiringExclusing = !versionsAllowsInclusion (as set)\n// {name: [tag, keyCoder, valueCoder, versionsRequiringInclusion, versionsRequiringExclusing, versionsAllowsInclusion, silentIgnore]}\n// SilentIgnore: we use some v2 fields for v1 representation too, so we just clean them before serialize\n// Tables from BIP-0174 (https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki)\n// prettier-ignore\nexports.PSBTGlobal = {\n    unsignedTx: [0x00, false, script_js_1.RawTx, [0], [0], false],\n    xpub: [0x01, GlobalXPUB, BIP32Der, [], [0, 2], false],\n    txVersion: [0x02, false, P.U32LE, [2], [2], false],\n    fallbackLocktime: [0x03, false, P.U32LE, [], [2], false],\n    inputCount: [0x04, false, script_js_1.CompactSizeLen, [2], [2], false],\n    outputCount: [0x05, false, script_js_1.CompactSizeLen, [2], [2], false],\n    txModifiable: [0x06, false, P.U8, [], [2], false], // TODO: bitfield\n    version: [0xfb, false, P.U32LE, [], [0, 2], false],\n    proprietary: [0xfc, BytesInf, BytesInf, [], [0, 2], false],\n};\n// prettier-ignore\nexports.PSBTInput = {\n    nonWitnessUtxo: [0x00, false, script_js_1.RawTx, [], [0, 2], false],\n    witnessUtxo: [0x01, false, script_js_1.RawOutput, [], [0, 2], false],\n    partialSig: [0x02, PubKeyECDSA, BytesInf, [], [0, 2], false],\n    sighashType: [0x03, false, P.U32LE, [], [0, 2], false],\n    redeemScript: [0x04, false, BytesInf, [], [0, 2], false],\n    witnessScript: [0x05, false, BytesInf, [], [0, 2], false],\n    bip32Derivation: [0x06, PubKeyECDSA, BIP32Der, [], [0, 2], false],\n    finalScriptSig: [0x07, false, BytesInf, [], [0, 2], false],\n    finalScriptWitness: [0x08, false, script_js_1.RawWitness, [], [0, 2], false],\n    porCommitment: [0x09, false, BytesInf, [], [0, 2], false],\n    ripemd160: [0x0a, Bytes20, BytesInf, [], [0, 2], false],\n    sha256: [0x0b, Bytes32, BytesInf, [], [0, 2], false],\n    hash160: [0x0c, Bytes20, BytesInf, [], [0, 2], false],\n    hash256: [0x0d, Bytes32, BytesInf, [], [0, 2], false],\n    txid: [0x0e, false, Bytes32, [2], [2], true],\n    index: [0x0f, false, P.U32LE, [2], [2], true],\n    sequence: [0x10, false, P.U32LE, [], [2], true],\n    requiredTimeLocktime: [0x11, false, P.U32LE, [], [2], false],\n    requiredHeightLocktime: [0x12, false, P.U32LE, [], [2], false],\n    tapKeySig: [0x13, false, SignatureSchnorr, [], [0, 2], false],\n    tapScriptSig: [0x14, tapScriptSigKey, SignatureSchnorr, [], [0, 2], false],\n    tapLeafScript: [0x15, exports.TaprootControlBlock, BytesInf, [], [0, 2], false],\n    tapBip32Derivation: [0x16, Bytes32, TaprootBIP32Der, [], [0, 2], false],\n    tapInternalKey: [0x17, false, PubKeySchnorr, [], [0, 2], false],\n    tapMerkleRoot: [0x18, false, Bytes32, [], [0, 2], false],\n    proprietary: [0xfc, BytesInf, BytesInf, [], [0, 2], false],\n};\n// All other keys removed when finalizing\nexports.PSBTInputFinalKeys = [\n    'txid',\n    'sequence',\n    'index',\n    'witnessUtxo',\n    'nonWitnessUtxo',\n    'finalScriptSig',\n    'finalScriptWitness',\n    'unknown',\n];\n// Can be modified even on signed input\nexports.PSBTInputUnsignedKeys = [\n    'partialSig',\n    'finalScriptSig',\n    'finalScriptWitness',\n    'tapKeySig',\n    'tapScriptSig',\n];\n// prettier-ignore\nexports.PSBTOutput = {\n    redeemScript: [0x00, false, BytesInf, [], [0, 2], false],\n    witnessScript: [0x01, false, BytesInf, [], [0, 2], false],\n    bip32Derivation: [0x02, PubKeyECDSA, BIP32Der, [], [0, 2], false],\n    amount: [0x03, false, P.I64LE, [2], [2], true],\n    script: [0x04, false, BytesInf, [2], [2], true],\n    tapInternalKey: [0x05, false, PubKeySchnorr, [], [0, 2], false],\n    tapTree: [0x06, false, tapTree, [], [0, 2], false],\n    tapBip32Derivation: [0x07, PubKeySchnorr, TaprootBIP32Der, [], [0, 2], false],\n    proprietary: [0xfc, BytesInf, BytesInf, [], [0, 2], false],\n};\n// Can be modified even on signed input\nexports.PSBTOutputUnsignedKeys = [];\nconst PSBTKeyPair = P.array(P.NULL, P.struct({\n    //  <key> := <keylen> <keytype> <keydata> WHERE keylen = len(keytype)+len(keydata)\n    key: P.prefix(script_js_1.CompactSizeLen, P.struct({ type: script_js_1.CompactSizeLen, key: P.bytes(null) })),\n    //  <value> := <valuelen> <valuedata>\n    value: P.bytes(script_js_1.CompactSizeLen),\n}));\nfunction PSBTKeyInfo(info) {\n    const [type, kc, vc, reqInc, allowInc, silentIgnore] = info;\n    return { type, kc, vc, reqInc, allowInc, silentIgnore };\n}\nconst PSBTUnknownKey = P.struct({ type: script_js_1.CompactSizeLen, key: P.bytes(null) });\n// Key cannot be 'unknown', value coder cannot be array for elements with empty key\nfunction PSBTKeyMap(psbtEnum) {\n    // -> Record<type, [keyName, ...coders]>\n    const byType = {};\n    for (const k in psbtEnum) {\n        const [num, kc, vc] = psbtEnum[k];\n        byType[num] = [k, kc, vc];\n    }\n    return P.wrap({\n        encodeStream: (w, value) => {\n            let out = [];\n            // Because we use order of psbtEnum, keymap is sorted here\n            for (const name in psbtEnum) {\n                const val = value[name];\n                if (val === undefined)\n                    continue;\n                const [type, kc, vc] = psbtEnum[name];\n                if (!kc) {\n                    out.push({ key: { type, key: P.EMPTY }, value: vc.encode(val) });\n                }\n                else {\n                    // Low level interface, returns keys as is (with duplicates). Useful for debug\n                    const kv = val.map(([k, v]) => [\n                        kc.encode(k),\n                        vc.encode(v),\n                    ]);\n                    // sort by keys\n                    kv.sort((a, b) => (0, utils_js_1.compareBytes)(a[0], b[0]));\n                    for (const [key, value] of kv)\n                        out.push({ key: { key, type }, value });\n                }\n            }\n            if (value.unknown) {\n                value.unknown.sort((a, b) => (0, utils_js_1.compareBytes)(a[0].key, b[0].key));\n                for (const [k, v] of value.unknown)\n                    out.push({ key: k, value: v });\n            }\n            PSBTKeyPair.encodeStream(w, out);\n        },\n        decodeStream: (r) => {\n            const raw = PSBTKeyPair.decodeStream(r);\n            const out = {};\n            const noKey = {};\n            for (const elm of raw) {\n                let name = 'unknown';\n                let key = elm.key.key;\n                let value = elm.value;\n                if (byType[elm.key.type]) {\n                    const [_name, kc, vc] = byType[elm.key.type];\n                    name = _name;\n                    if (!kc && key.length) {\n                        throw new Error(`PSBT: Non-empty key for ${name} (key=${base_1.hex.encode(key)} value=${base_1.hex.encode(value)}`);\n                    }\n                    key = kc ? kc.decode(key) : undefined;\n                    value = vc.decode(value);\n                    if (!kc) {\n                        if (out[name])\n                            throw new Error(`PSBT: Same keys: ${name} (key=${key} value=${value})`);\n                        out[name] = value;\n                        noKey[name] = true;\n                        continue;\n                    }\n                }\n                else {\n                    // For unknown: add key type inside key\n                    key = { type: elm.key.type, key: elm.key.key };\n                }\n                // Only keyed elements at this point\n                if (noKey[name])\n                    throw new Error(`PSBT: Key type with empty key and no key=${name} val=${value}`);\n                if (!out[name])\n                    out[name] = [];\n                out[name].push([key, value]);\n            }\n            return out;\n        },\n    });\n}\nexports.PSBTInputCoder = P.validate(PSBTKeyMap(exports.PSBTInput), (i) => {\n    if (i.finalScriptWitness && !i.finalScriptWitness.length)\n        throw new Error('validateInput: wmpty finalScriptWitness');\n    //if (i.finalScriptSig && !i.finalScriptSig.length) throw new Error('validateInput: empty finalScriptSig');\n    if (i.partialSig && !i.partialSig.length)\n        throw new Error('Empty partialSig');\n    if (i.partialSig)\n        for (const [k] of i.partialSig)\n            (0, utils_js_1.validatePubkey)(k, utils_js_1.PubT.ecdsa);\n    if (i.bip32Derivation)\n        for (const [k] of i.bip32Derivation)\n            (0, utils_js_1.validatePubkey)(k, utils_js_1.PubT.ecdsa);\n    // Locktime = unsigned little endian integer greater than or equal to 500000000 representing\n    if (i.requiredTimeLocktime !== undefined && i.requiredTimeLocktime < 500000000)\n        throw new Error(`validateInput: wrong timeLocktime=${i.requiredTimeLocktime}`);\n    // unsigned little endian integer greater than 0 and less than 500000000\n    if (i.requiredHeightLocktime !== undefined &&\n        (i.requiredHeightLocktime <= 0 || i.requiredHeightLocktime >= 500000000))\n        throw new Error(`validateInput: wrong heighLocktime=${i.requiredHeightLocktime}`);\n    if (i.nonWitnessUtxo && i.index !== undefined) {\n        const last = i.nonWitnessUtxo.outputs.length - 1;\n        if (i.index > last)\n            throw new Error(`validateInput: index(${i.index}) not in nonWitnessUtxo`);\n        const prevOut = i.nonWitnessUtxo.outputs[i.index];\n        if (i.witnessUtxo &&\n            (!(0, utils_js_1.equalBytes)(i.witnessUtxo.script, prevOut.script) || i.witnessUtxo.amount !== prevOut.amount))\n            throw new Error('validateInput: witnessUtxo different from nonWitnessUtxo');\n    }\n    if (i.tapLeafScript) {\n        // tap leaf version appears here twice: in control block and at the end of script\n        for (const [k, v] of i.tapLeafScript) {\n            if ((k.version & 254) !== v[v.length - 1])\n                throw new Error('validateInput: tapLeafScript version mimatch');\n            if (v[v.length - 1] & 1)\n                throw new Error('validateInput: tapLeafScript version has parity bit!');\n        }\n    }\n    // Validate txid for nonWitnessUtxo is correct\n    if (i.nonWitnessUtxo && i.index !== undefined && i.txid) {\n        const outputs = i.nonWitnessUtxo.outputs;\n        if (outputs.length - 1 < i.index)\n            throw new Error('nonWitnessUtxo: incorect output index');\n        // At this point, we are using previous tx output to create new input.\n        // Script safety checks are unnecessary:\n        // - User has no control over previous tx. If somebody send money in same tx\n        //   as unspendable output, we still want user able to spend money\n        // - We still want some checks to notify user about possible errors early\n        //   in case user wants to use wrong input by mistake\n        // - Worst case: tx will be rejected by nodes. Still better than disallowing user\n        //   to spend real input, no matter how broken it looks\n        const tx = transaction_js_1.Transaction.fromRaw(script_js_1.RawTx.encode(i.nonWitnessUtxo), {\n            allowUnknownOutputs: true,\n            disableScriptCheck: true,\n            allowUnknownInputs: true,\n        });\n        const txid = base_1.hex.encode(i.txid);\n        // PSBTv2 vectors have non-final tx in inputs\n        if (tx.isFinal && tx.id !== txid)\n            throw new Error(`nonWitnessUtxo: wrong txid, exp=${txid} got=${tx.id}`);\n    }\n    return i;\n});\nexports.PSBTOutputCoder = P.validate(PSBTKeyMap(exports.PSBTOutput), (o) => {\n    if (o.bip32Derivation)\n        for (const [k] of o.bip32Derivation)\n            (0, utils_js_1.validatePubkey)(k, utils_js_1.PubT.ecdsa);\n    return o;\n});\nconst PSBTGlobalCoder = P.validate(PSBTKeyMap(exports.PSBTGlobal), (g) => {\n    const version = g.version || 0;\n    if (version === 0) {\n        if (!g.unsignedTx)\n            throw new Error('PSBTv0: missing unsignedTx');\n        if (g.unsignedTx.segwitFlag || g.unsignedTx.witnesses)\n            throw new Error('PSBTv0: witness in unsingedTx');\n        for (const inp of g.unsignedTx.inputs)\n            if (inp.finalScriptSig && inp.finalScriptSig.length)\n                throw new Error('PSBTv0: input scriptSig found in unsignedTx');\n    }\n    return g;\n});\nexports._RawPSBTV0 = P.struct({\n    magic: P.magic(P.string(new Uint8Array([0xff])), 'psbt'),\n    global: PSBTGlobalCoder,\n    inputs: P.array('global/unsignedTx/inputs/length', exports.PSBTInputCoder),\n    outputs: P.array(null, exports.PSBTOutputCoder),\n});\nexports._RawPSBTV2 = P.struct({\n    magic: P.magic(P.string(new Uint8Array([0xff])), 'psbt'),\n    global: PSBTGlobalCoder,\n    inputs: P.array('global/inputCount', exports.PSBTInputCoder),\n    outputs: P.array('global/outputCount', exports.PSBTOutputCoder),\n});\nexports._DebugPSBT = P.struct({\n    magic: P.magic(P.string(new Uint8Array([0xff])), 'psbt'),\n    items: P.array(null, P.apply(P.array(P.NULL, P.tuple([P.hex(script_js_1.CompactSizeLen), P.bytes(script_js_1.CompactSize)])), P.coders.dict())),\n});\nfunction validatePSBTFields(version, info, lst) {\n    for (const k in lst) {\n        if (k === 'unknown')\n            continue;\n        if (!info[k])\n            continue;\n        const { allowInc } = PSBTKeyInfo(info[k]);\n        if (!allowInc.includes(version))\n            throw new Error(`PSBTv${version}: field ${k} is not allowed`);\n    }\n    for (const k in info) {\n        const { reqInc } = PSBTKeyInfo(info[k]);\n        if (reqInc.includes(version) && lst[k] === undefined)\n            throw new Error(`PSBTv${version}: missing required field ${k}`);\n    }\n}\nfunction cleanPSBTFields(version, info, lst) {\n    const out = {};\n    for (const _k in lst) {\n        const k = _k;\n        if (k !== 'unknown') {\n            if (!info[k])\n                continue;\n            const { allowInc, silentIgnore } = PSBTKeyInfo(info[k]);\n            if (!allowInc.includes(version)) {\n                if (silentIgnore)\n                    continue;\n                throw new Error(`Failed to serialize in PSBTv${version}: ${k} but versions allows inclusion=${allowInc}`);\n            }\n        }\n        out[k] = lst[k];\n    }\n    return out;\n}\nexports.cleanPSBTFields = cleanPSBTFields;\nfunction validatePSBT(tx) {\n    const version = (tx && tx.global && tx.global.version) || 0;\n    validatePSBTFields(version, exports.PSBTGlobal, tx.global);\n    for (const i of tx.inputs)\n        validatePSBTFields(version, exports.PSBTInput, i);\n    for (const o of tx.outputs)\n        validatePSBTFields(version, exports.PSBTOutput, o);\n    // We allow only one empty element at the end of map (compat with bitcoinjs-lib bug)\n    const inputCount = !version ? tx.global.unsignedTx.inputs.length : tx.global.inputCount;\n    if (tx.inputs.length < inputCount)\n        throw new Error('Not enough inputs');\n    const inputsLeft = tx.inputs.slice(inputCount);\n    if (inputsLeft.length > 1 || (inputsLeft.length && Object.keys(inputsLeft[0]).length))\n        throw new Error(`Unexpected inputs left in tx=${inputsLeft}`);\n    // Same for inputs\n    const outputCount = !version ? tx.global.unsignedTx.outputs.length : tx.global.outputCount;\n    if (tx.outputs.length < outputCount)\n        throw new Error('Not outputs inputs');\n    const outputsLeft = tx.outputs.slice(outputCount);\n    if (outputsLeft.length > 1 || (outputsLeft.length && Object.keys(outputsLeft[0]).length))\n        throw new Error(`Unexpected outputs left in tx=${outputsLeft}`);\n    return tx;\n}\nfunction mergeKeyMap(psbtEnum, val, cur, allowedFields) {\n    const res = { ...cur, ...val };\n    // All arguments can be provided as hex\n    for (const k in psbtEnum) {\n        const key = k;\n        const [_, kC, vC] = psbtEnum[key];\n        const cannotChange = allowedFields && !allowedFields.includes(k);\n        if (val[k] === undefined && k in val) {\n            if (cannotChange)\n                throw new Error(`Cannot remove signed field=${k}`);\n            delete res[k];\n        }\n        else if (kC) {\n            const oldKV = (cur && cur[k] ? cur[k] : []);\n            let newKV = val[key];\n            if (newKV) {\n                if (!Array.isArray(newKV))\n                    throw new Error(`keyMap(${k}): KV pairs should be [k, v][]`);\n                // Decode hex in k-v\n                newKV = newKV.map((val) => {\n                    if (val.length !== 2)\n                        throw new Error(`keyMap(${k}): KV pairs should be [k, v][]`);\n                    return [\n                        typeof val[0] === 'string' ? kC.decode(base_1.hex.decode(val[0])) : val[0],\n                        typeof val[1] === 'string' ? vC.decode(base_1.hex.decode(val[1])) : val[1],\n                    ];\n                });\n                const map = {};\n                const add = (kStr, k, v) => {\n                    if (map[kStr] === undefined) {\n                        map[kStr] = [k, v];\n                        return;\n                    }\n                    const oldVal = base_1.hex.encode(vC.encode(map[kStr][1]));\n                    const newVal = base_1.hex.encode(vC.encode(v));\n                    if (oldVal !== newVal)\n                        throw new Error(`keyMap(${key}): same key=${kStr} oldVal=${oldVal} newVal=${newVal}`);\n                };\n                for (const [k, v] of oldKV) {\n                    const kStr = base_1.hex.encode(kC.encode(k));\n                    add(kStr, k, v);\n                }\n                for (const [k, v] of newKV) {\n                    const kStr = base_1.hex.encode(kC.encode(k));\n                    // undefined removes previous value\n                    if (v === undefined) {\n                        if (cannotChange)\n                            throw new Error(`Cannot remove signed field=${key}/${k}`);\n                        delete map[kStr];\n                    }\n                    else\n                        add(kStr, k, v);\n                }\n                res[key] = Object.values(map);\n            }\n        }\n        else if (typeof res[k] === 'string') {\n            res[k] = vC.decode(base_1.hex.decode(res[k]));\n        }\n        else if (cannotChange && k in val && cur && cur[k] !== undefined) {\n            if (!(0, utils_js_1.equalBytes)(vC.encode(val[k]), vC.encode(cur[k])))\n                throw new Error(`Cannot change signed field=${k}`);\n        }\n    }\n    // Remove unknown keys\n    for (const k in res)\n        if (!psbtEnum[k])\n            delete res[k];\n    return res;\n}\nexports.mergeKeyMap = mergeKeyMap;\nexports.RawPSBTV0 = P.validate(exports._RawPSBTV0, validatePSBT);\nexports.RawPSBTV2 = P.validate(exports._RawPSBTV2, validatePSBT);\n//# sourceMappingURL=psbt.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Address = exports.WIF = exports.sortedMultisig = exports.multisig = exports._sortPubkeys = exports.getAddress = exports.p2tr_ms = exports.p2tr_pk = exports.p2tr_ns = exports.combinations = exports.p2tr = exports.tapLeafHash = exports.TAP_LEAF_VERSION = exports.taprootListToTree = exports.p2ms = exports.p2wpkh = exports.p2wsh = exports.p2sh = exports.p2pkh = exports.p2pk = exports.checkScript = exports.OutScript = void 0;\nconst base_1 = require(\"@scure/base\");\nconst P = require(\"micro-packed\");\nconst psbt_js_1 = require(\"./psbt.js\");\nconst script_js_1 = require(\"./script.js\");\nconst utils_js_1 = require(\"./utils.js\");\nconst u = require(\"./utils.js\");\nfunction isValidPubkey(pub, type) {\n    try {\n        u.validatePubkey(pub, type);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\nconst OutPK = {\n    encode(from) {\n        if (from.length !== 2 ||\n            !u.isBytes(from[0]) ||\n            !isValidPubkey(from[0], u.PubT.ecdsa) ||\n            from[1] !== 'CHECKSIG')\n            return;\n        return { type: 'pk', pubkey: from[0] };\n    },\n    decode: (to) => (to.type === 'pk' ? [to.pubkey, 'CHECKSIG'] : undefined),\n};\nconst OutPKH = {\n    encode(from) {\n        if (from.length !== 5 || from[0] !== 'DUP' || from[1] !== 'HASH160' || !u.isBytes(from[2]))\n            return;\n        if (from[3] !== 'EQUALVERIFY' || from[4] !== 'CHECKSIG')\n            return;\n        return { type: 'pkh', hash: from[2] };\n    },\n    decode: (to) => to.type === 'pkh' ? ['DUP', 'HASH160', to.hash, 'EQUALVERIFY', 'CHECKSIG'] : undefined,\n};\nconst OutSH = {\n    encode(from) {\n        if (from.length !== 3 || from[0] !== 'HASH160' || !u.isBytes(from[1]) || from[2] !== 'EQUAL')\n            return;\n        return { type: 'sh', hash: from[1] };\n    },\n    decode: (to) => to.type === 'sh' ? ['HASH160', to.hash, 'EQUAL'] : undefined,\n};\nconst OutWSH = {\n    encode(from) {\n        if (from.length !== 2 || from[0] !== 0 || !u.isBytes(from[1]))\n            return;\n        if (from[1].length !== 32)\n            return;\n        return { type: 'wsh', hash: from[1] };\n    },\n    decode: (to) => (to.type === 'wsh' ? [0, to.hash] : undefined),\n};\nconst OutWPKH = {\n    encode(from) {\n        if (from.length !== 2 || from[0] !== 0 || !u.isBytes(from[1]))\n            return;\n        if (from[1].length !== 20)\n            return;\n        return { type: 'wpkh', hash: from[1] };\n    },\n    decode: (to) => (to.type === 'wpkh' ? [0, to.hash] : undefined),\n};\nconst OutMS = {\n    encode(from) {\n        const last = from.length - 1;\n        if (from[last] !== 'CHECKMULTISIG')\n            return;\n        const m = from[0];\n        const n = from[last - 1];\n        if (typeof m !== 'number' || typeof n !== 'number')\n            return;\n        const pubkeys = from.slice(1, -2);\n        if (n !== pubkeys.length)\n            return;\n        for (const pub of pubkeys)\n            if (!u.isBytes(pub))\n                return;\n        return { type: 'ms', m, pubkeys: pubkeys }; // we don't need n, since it is the same as pubkeys\n    },\n    // checkmultisig(n, ..pubkeys, m)\n    decode: (to) => to.type === 'ms' ? [to.m, ...to.pubkeys, to.pubkeys.length, 'CHECKMULTISIG'] : undefined,\n};\nconst OutTR = {\n    encode(from) {\n        if (from.length !== 2 || from[0] !== 1 || !u.isBytes(from[1]))\n            return;\n        return { type: 'tr', pubkey: from[1] };\n    },\n    decode: (to) => (to.type === 'tr' ? [1, to.pubkey] : undefined),\n};\nconst OutTRNS = {\n    encode(from) {\n        const last = from.length - 1;\n        if (from[last] !== 'CHECKSIG')\n            return;\n        const pubkeys = [];\n        // On error return, since it can be different script\n        for (let i = 0; i < last; i++) {\n            const elm = from[i];\n            if (i & 1) {\n                if (elm !== 'CHECKSIGVERIFY' || i === last - 1)\n                    return;\n                continue;\n            }\n            if (!u.isBytes(elm))\n                return;\n            pubkeys.push(elm);\n        }\n        return { type: 'tr_ns', pubkeys };\n    },\n    decode: (to) => {\n        if (to.type !== 'tr_ns')\n            return;\n        const out = [];\n        for (let i = 0; i < to.pubkeys.length - 1; i++)\n            out.push(to.pubkeys[i], 'CHECKSIGVERIFY');\n        out.push(to.pubkeys[to.pubkeys.length - 1], 'CHECKSIG');\n        return out;\n    },\n};\nconst OutTRMS = {\n    encode(from) {\n        const last = from.length - 1;\n        if (from[last] !== 'NUMEQUAL' || from[1] !== 'CHECKSIG')\n            return;\n        const pubkeys = [];\n        const m = (0, script_js_1.OpToNum)(from[last - 1]);\n        if (typeof m !== 'number')\n            return;\n        for (let i = 0; i < last - 1; i++) {\n            const elm = from[i];\n            if (i & 1) {\n                if (elm !== (i === 1 ? 'CHECKSIG' : 'CHECKSIGADD'))\n                    throw new Error('OutScript.encode/tr_ms: wrong element');\n                continue;\n            }\n            if (!u.isBytes(elm))\n                throw new Error('OutScript.encode/tr_ms: wrong key element');\n            pubkeys.push(elm);\n        }\n        return { type: 'tr_ms', pubkeys, m };\n    },\n    decode: (to) => {\n        if (to.type !== 'tr_ms')\n            return;\n        const out = [to.pubkeys[0], 'CHECKSIG'];\n        for (let i = 1; i < to.pubkeys.length; i++)\n            out.push(to.pubkeys[i], 'CHECKSIGADD');\n        out.push(to.m, 'NUMEQUAL');\n        return out;\n    },\n};\nconst OutUnknown = {\n    encode(from) {\n        return { type: 'unknown', script: script_js_1.Script.encode(from) };\n    },\n    decode: (to) => to.type === 'unknown' ? script_js_1.Script.decode(to.script) : undefined,\n};\n// /Payments\nconst OutScripts = [\n    OutPK,\n    OutPKH,\n    OutSH,\n    OutWSH,\n    OutWPKH,\n    OutMS,\n    OutTR,\n    OutTRNS,\n    OutTRMS,\n    OutUnknown,\n];\n// TODO: we can support user supplied output scripts now\n// - addOutScript\n// - removeOutScript\n// - We can do that as log we modify array in-place\n// - Actually is very hard, since there is sign/finalize logic\nconst _OutScript = P.apply(script_js_1.Script, P.coders.match(OutScripts));\n// We can validate this once, because of packed & coders\nexports.OutScript = P.validate(_OutScript, (i) => {\n    if (i.type === 'pk' && !isValidPubkey(i.pubkey, u.PubT.ecdsa))\n        throw new Error('OutScript/pk: wrong key');\n    if ((i.type === 'pkh' || i.type === 'sh' || i.type === 'wpkh') &&\n        (!u.isBytes(i.hash) || i.hash.length !== 20))\n        throw new Error(`OutScript/${i.type}: wrong hash`);\n    if (i.type === 'wsh' && (!u.isBytes(i.hash) || i.hash.length !== 32))\n        throw new Error(`OutScript/wsh: wrong hash`);\n    if (i.type === 'tr' && (!u.isBytes(i.pubkey) || !isValidPubkey(i.pubkey, u.PubT.schnorr)))\n        throw new Error('OutScript/tr: wrong taproot public key');\n    if (i.type === 'ms' || i.type === 'tr_ns' || i.type === 'tr_ms')\n        if (!Array.isArray(i.pubkeys))\n            throw new Error('OutScript/multisig: wrong pubkeys array');\n    if (i.type === 'ms') {\n        const n = i.pubkeys.length;\n        for (const p of i.pubkeys)\n            if (!isValidPubkey(p, u.PubT.ecdsa))\n                throw new Error('OutScript/multisig: wrong pubkey');\n        if (i.m <= 0 || n > 16 || i.m > n)\n            throw new Error('OutScript/multisig: invalid params');\n    }\n    if (i.type === 'tr_ns' || i.type === 'tr_ms') {\n        for (const p of i.pubkeys)\n            if (!isValidPubkey(p, u.PubT.schnorr))\n                throw new Error(`OutScript/${i.type}: wrong pubkey`);\n    }\n    if (i.type === 'tr_ms') {\n        const n = i.pubkeys.length;\n        if (i.m <= 0 || n > 999 || i.m > n)\n            throw new Error('OutScript/tr_ms: invalid params');\n    }\n    return i;\n});\n// Basic sanity check for scripts\nfunction checkWSH(s, witnessScript) {\n    if (!u.equalBytes(s.hash, u.sha256(witnessScript)))\n        throw new Error('checkScript: wsh wrong witnessScript hash');\n    const w = exports.OutScript.decode(witnessScript);\n    if (w.type === 'tr' || w.type === 'tr_ns' || w.type === 'tr_ms')\n        throw new Error(`checkScript: P2${w.type} cannot be wrapped in P2SH`);\n    if (w.type === 'wpkh' || w.type === 'sh')\n        throw new Error(`checkScript: P2${w.type} cannot be wrapped in P2WSH`);\n}\nfunction checkScript(script, redeemScript, witnessScript) {\n    if (script) {\n        const s = exports.OutScript.decode(script);\n        // ms||pk maybe work, but there will be no address, hard to spend\n        if (s.type === 'tr_ns' || s.type === 'tr_ms' || s.type === 'ms' || s.type == 'pk')\n            throw new Error(`checkScript: non-wrapped ${s.type}`);\n        if (s.type === 'sh' && redeemScript) {\n            if (!u.equalBytes(s.hash, u.hash160(redeemScript)))\n                throw new Error('checkScript: sh wrong redeemScript hash');\n            const r = exports.OutScript.decode(redeemScript);\n            if (r.type === 'tr' || r.type === 'tr_ns' || r.type === 'tr_ms')\n                throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);\n            // Not sure if this unspendable, but we cannot represent this via PSBT\n            if (r.type === 'sh')\n                throw new Error('checkScript: P2SH cannot be wrapped in P2SH');\n        }\n        if (s.type === 'wsh' && witnessScript)\n            checkWSH(s, witnessScript);\n    }\n    if (redeemScript) {\n        const r = exports.OutScript.decode(redeemScript);\n        if (r.type === 'wsh' && witnessScript)\n            checkWSH(r, witnessScript);\n    }\n}\nexports.checkScript = checkScript;\nfunction uniqPubkey(pubkeys) {\n    const map = {};\n    for (const pub of pubkeys) {\n        const key = base_1.hex.encode(pub);\n        if (map[key])\n            throw new Error(`Multisig: non-uniq pubkey: ${pubkeys.map(base_1.hex.encode)}`);\n        map[key] = true;\n    }\n}\n// @ts-ignore\nconst p2pk = (pubkey, network = utils_js_1.NETWORK) => {\n    // network is unused\n    if (!isValidPubkey(pubkey, u.PubT.ecdsa))\n        throw new Error('P2PK: invalid publicKey');\n    return {\n        type: 'pk',\n        script: exports.OutScript.encode({ type: 'pk', pubkey }),\n    };\n};\nexports.p2pk = p2pk;\nconst p2pkh = (publicKey, network = utils_js_1.NETWORK) => {\n    if (!isValidPubkey(publicKey, u.PubT.ecdsa))\n        throw new Error('P2PKH: invalid publicKey');\n    const hash = u.hash160(publicKey);\n    return {\n        type: 'pkh',\n        script: exports.OutScript.encode({ type: 'pkh', hash }),\n        address: Address(network).encode({ type: 'pkh', hash }),\n    };\n};\nexports.p2pkh = p2pkh;\nconst p2sh = (child, network = utils_js_1.NETWORK) => {\n    // It is already tested inside noble-hashes and checkScript\n    const cs = child.script;\n    if (!u.isBytes(cs))\n        throw new Error(`Wrong script: ${typeof child.script}, expected Uint8Array`);\n    const hash = u.hash160(cs);\n    const script = exports.OutScript.encode({ type: 'sh', hash });\n    checkScript(script, cs, child.witnessScript);\n    const res = {\n        type: 'sh',\n        redeemScript: cs,\n        script: exports.OutScript.encode({ type: 'sh', hash }),\n        address: Address(network).encode({ type: 'sh', hash }),\n    };\n    if (child.witnessScript)\n        res.witnessScript = child.witnessScript;\n    return res;\n};\nexports.p2sh = p2sh;\nconst p2wsh = (child, network = utils_js_1.NETWORK) => {\n    const cs = child.script;\n    if (!u.isBytes(cs))\n        throw new Error(`Wrong script: ${typeof cs}, expected Uint8Array`);\n    const hash = u.sha256(cs);\n    const script = exports.OutScript.encode({ type: 'wsh', hash });\n    checkScript(script, undefined, cs);\n    return {\n        type: 'wsh',\n        witnessScript: cs,\n        script: exports.OutScript.encode({ type: 'wsh', hash }),\n        address: Address(network).encode({ type: 'wsh', hash }),\n    };\n};\nexports.p2wsh = p2wsh;\nconst p2wpkh = (publicKey, network = utils_js_1.NETWORK) => {\n    if (!isValidPubkey(publicKey, u.PubT.ecdsa))\n        throw new Error('P2WPKH: invalid publicKey');\n    if (publicKey.length === 65)\n        throw new Error('P2WPKH: uncompressed public key');\n    const hash = u.hash160(publicKey);\n    return {\n        type: 'wpkh',\n        script: exports.OutScript.encode({ type: 'wpkh', hash }),\n        address: Address(network).encode({ type: 'wpkh', hash }),\n    };\n};\nexports.p2wpkh = p2wpkh;\nconst p2ms = (m, pubkeys, allowSamePubkeys = false) => {\n    if (!allowSamePubkeys)\n        uniqPubkey(pubkeys);\n    return { type: 'ms', script: exports.OutScript.encode({ type: 'ms', pubkeys, m }) };\n};\nexports.p2ms = p2ms;\nfunction checkTaprootScript(script, internalPubKey, allowUnknownOutputs = false, customScripts) {\n    const out = exports.OutScript.decode(script);\n    if (out.type === 'unknown') {\n        // NOTE: this check should be before allowUnknownOutputs, otherwise it will\n        // disable custom. All custom scripts for taproot should have prefix 'tr_'\n        if (customScripts) {\n            const cs = P.apply(script_js_1.Script, P.coders.match(customScripts));\n            const c = cs.decode(script);\n            if (c !== undefined) {\n                if (typeof c.type !== 'string' || !c.type.startsWith('tr_'))\n                    throw new Error(`P2TR: invalid custom type=${c.type}`);\n                return;\n            }\n        }\n        if (allowUnknownOutputs)\n            return;\n    }\n    if (!['tr_ns', 'tr_ms'].includes(out.type))\n        throw new Error(`P2TR: invalid leaf script=${out.type}`);\n    const outms = out;\n    if (!allowUnknownOutputs && outms.pubkeys) {\n        for (const p of outms.pubkeys) {\n            if (u.equalBytes(p, u.TAPROOT_UNSPENDABLE_KEY))\n                throw new Error('Unspendable taproot key in leaf script');\n            // It's likely a mistake at this point:\n            // 1. p2tr(A, p2tr_ns(2, [A, B])) == p2tr(A, p2tr_pk(B)) (A or B key)\n            // but will take more space and fees.\n            // 2. For multi-sig p2tr(A, p2tr_ns(2, [A, B, C])) it's probably a security issue:\n            // User creates 2 of 3 multisig of keys [A, B, C],\n            // but key A always can spend whole output without signatures from other keys.\n            // p2tr(A, p2tr_ns(2, [B, C, D])) is ok: A or (B and C) or (B and D) or (C and D)\n            if (u.equalBytes(p, internalPubKey)) {\n                throw new Error('Using P2TR with leaf script with same key as internal key is not supported');\n            }\n        }\n    }\n}\n// Helper for generating binary tree from list, with weights\nfunction taprootListToTree(taprootList) {\n    // Clone input in order to not corrupt it\n    const lst = Array.from(taprootList);\n    // We have at least 2 elements => can create branch\n    while (lst.length >= 2) {\n        // Sort: elements with smallest weight are in the end of queue\n        lst.sort((a, b) => (b.weight || 1) - (a.weight || 1));\n        const b = lst.pop();\n        const a = lst.pop();\n        const weight = (a?.weight || 1) + (b?.weight || 1);\n        lst.push({\n            weight,\n            // Unwrap children array\n            // TODO: Very hard to remove any here\n            childs: [a?.childs || a, b?.childs || b],\n        });\n    }\n    // At this point there is always 1 element in lst\n    const last = lst[0];\n    return (last?.childs || last);\n}\nexports.taprootListToTree = taprootListToTree;\nfunction taprootAddPath(tree, path = []) {\n    if (!tree)\n        throw new Error(`taprootAddPath: empty tree`);\n    if (tree.type === 'leaf')\n        return { ...tree, path };\n    if (tree.type !== 'branch')\n        throw new Error(`taprootAddPath: wrong type=${tree}`);\n    return {\n        ...tree,\n        path,\n        // Left element has right hash in path and otherwise\n        left: taprootAddPath(tree.left, [tree.right.hash, ...path]),\n        right: taprootAddPath(tree.right, [tree.left.hash, ...path]),\n    };\n}\nfunction taprootWalkTree(tree) {\n    if (!tree)\n        throw new Error(`taprootAddPath: empty tree`);\n    if (tree.type === 'leaf')\n        return [tree];\n    if (tree.type !== 'branch')\n        throw new Error(`taprootWalkTree: wrong type=${tree}`);\n    return [...taprootWalkTree(tree.left), ...taprootWalkTree(tree.right)];\n}\nfunction taprootHashTree(tree, internalPubKey, allowUnknownOutputs = false, customScripts) {\n    if (!tree)\n        throw new Error('taprootHashTree: empty tree');\n    if (Array.isArray(tree) && tree.length === 1)\n        tree = tree[0];\n    // Terminal node (leaf)\n    if (!Array.isArray(tree)) {\n        const { leafVersion: version, script: leafScript } = tree;\n        // Earliest tree walk where we can validate tapScripts\n        if (tree.tapLeafScript || (tree.tapMerkleRoot && !u.equalBytes(tree.tapMerkleRoot, P.EMPTY)))\n            throw new Error('P2TR: tapRoot leafScript cannot have tree');\n        const script = typeof leafScript === 'string' ? base_1.hex.decode(leafScript) : leafScript;\n        if (!u.isBytes(script))\n            throw new Error(`checkScript: wrong script type=${script}`);\n        checkTaprootScript(script, internalPubKey, allowUnknownOutputs, customScripts);\n        return {\n            type: 'leaf',\n            version,\n            script,\n            hash: (0, exports.tapLeafHash)(script, version),\n        };\n    }\n    // If tree / branch is not binary tree, convert it\n    if (tree.length !== 2)\n        tree = taprootListToTree(tree);\n    if (tree.length !== 2)\n        throw new Error('hashTree: non binary tree!');\n    // branch\n    // Both nodes should exist\n    const left = taprootHashTree(tree[0], internalPubKey, allowUnknownOutputs, customScripts);\n    const right = taprootHashTree(tree[1], internalPubKey, allowUnknownOutputs, customScripts);\n    // We cannot swap left/right here, since it will change structure of tree\n    let [lH, rH] = [left.hash, right.hash];\n    if (u.compareBytes(rH, lH) === -1)\n        [lH, rH] = [rH, lH];\n    return { type: 'branch', left, right, hash: u.tagSchnorr('TapBranch', lH, rH) };\n}\nexports.TAP_LEAF_VERSION = 0xc0;\nconst tapLeafHash = (script, version = exports.TAP_LEAF_VERSION) => u.tagSchnorr('TapLeaf', new Uint8Array([version]), script_js_1.VarBytes.encode(script));\nexports.tapLeafHash = tapLeafHash;\n// Works as key OR tree.\n// If we only have tree, need to add unspendable key, otherwise\n// complex multisig wallet can be spent by owner of key only. See TAPROOT_UNSPENDABLE_KEY\nfunction p2tr(internalPubKey, tree, network = utils_js_1.NETWORK, allowUnknownOutputs = false, customScripts) {\n    // Unspendable\n    if (!internalPubKey && !tree)\n        throw new Error('p2tr: should have pubKey or scriptTree (or both)');\n    const pubKey = typeof internalPubKey === 'string'\n        ? base_1.hex.decode(internalPubKey)\n        : internalPubKey || u.TAPROOT_UNSPENDABLE_KEY;\n    if (!isValidPubkey(pubKey, u.PubT.schnorr))\n        throw new Error('p2tr: non-schnorr pubkey');\n    let hashedTree = tree\n        ? taprootAddPath(taprootHashTree(tree, pubKey, allowUnknownOutputs, customScripts))\n        : undefined;\n    const tapMerkleRoot = hashedTree ? hashedTree.hash : undefined;\n    const [tweakedPubkey, parity] = u.taprootTweakPubkey(pubKey, tapMerkleRoot || P.EMPTY);\n    let leaves;\n    if (hashedTree) {\n        leaves = taprootWalkTree(hashedTree).map((l) => ({\n            ...l,\n            controlBlock: psbt_js_1.TaprootControlBlock.encode({\n                version: (l.version || exports.TAP_LEAF_VERSION) + parity,\n                internalKey: pubKey,\n                merklePath: l.path,\n            }),\n        }));\n    }\n    let tapLeafScript;\n    if (leaves) {\n        tapLeafScript = leaves.map((l) => [\n            psbt_js_1.TaprootControlBlock.decode(l.controlBlock),\n            u.concatBytes(l.script, new Uint8Array([l.version || exports.TAP_LEAF_VERSION])),\n        ]);\n    }\n    const res = {\n        type: 'tr',\n        script: exports.OutScript.encode({ type: 'tr', pubkey: tweakedPubkey }),\n        address: Address(network).encode({ type: 'tr', pubkey: tweakedPubkey }),\n        // For tests\n        tweakedPubkey,\n        // PSBT stuff\n        tapInternalKey: pubKey,\n    };\n    // Just in case someone would want to select a specific script\n    if (leaves)\n        res.leaves = leaves;\n    if (tapLeafScript)\n        res.tapLeafScript = tapLeafScript;\n    if (tapMerkleRoot)\n        res.tapMerkleRoot = tapMerkleRoot;\n    return res;\n}\nexports.p2tr = p2tr;\n// Returns all combinations of size M from lst\nfunction combinations(m, list) {\n    const res = [];\n    if (!Array.isArray(list))\n        throw new Error('combinations: lst arg should be array');\n    const n = list.length;\n    if (m > n)\n        throw new Error('combinations: m > lst.length, no combinations possible');\n    /*\n    Basically works as M nested loops like:\n    for (;idx[0]<lst.length;idx[0]++) for (idx[1]=idx[0]+1;idx[1]<lst.length;idx[1]++)\n    but since we cannot create nested loops dynamically, we unroll it to a single loop\n    */\n    const idx = Array.from({ length: m }, (_, i) => i);\n    const last = idx.length - 1;\n    main: for (;;) {\n        res.push(idx.map((i) => list[i]));\n        idx[last] += 1;\n        let i = last;\n        // Propagate increment\n        // idx[i] cannot be bigger than n-m+i, otherwise last elements in right part will overflow\n        for (; i >= 0 && idx[i] > n - m + i; i--) {\n            idx[i] = 0;\n            // Overflow in idx[0], break\n            if (i === 0)\n                break main;\n            idx[i - 1] += 1;\n        }\n        // Propagate: idx[i+1] = idx[idx]+1\n        for (i += 1; i < idx.length; i++)\n            idx[i] = idx[i - 1] + 1;\n    }\n    return res;\n}\nexports.combinations = combinations;\n/**\n * M-of-N multi-leaf wallet via p2tr_ns. If m == n, single script is emitted.\n * Takes O(n^2) if m != n. 99-of-100 is ok, 5-of-100 is not.\n * `2-of-[A,B,C] => [A,B] | [A,C] | [B,C]`\n */\nconst p2tr_ns = (m, pubkeys, allowSamePubkeys = false) => {\n    if (!allowSamePubkeys)\n        uniqPubkey(pubkeys);\n    return combinations(m, pubkeys).map((i) => ({\n        type: 'tr_ns',\n        script: exports.OutScript.encode({ type: 'tr_ns', pubkeys: i }),\n    }));\n};\nexports.p2tr_ns = p2tr_ns;\n// Taproot public key (case of p2tr_ns)\nconst p2tr_pk = (pubkey) => (0, exports.p2tr_ns)(1, [pubkey], undefined)[0];\nexports.p2tr_pk = p2tr_pk;\nfunction p2tr_ms(m, pubkeys, allowSamePubkeys = false) {\n    if (!allowSamePubkeys)\n        uniqPubkey(pubkeys);\n    return {\n        type: 'tr_ms',\n        script: exports.OutScript.encode({ type: 'tr_ms', pubkeys, m }),\n    };\n}\nexports.p2tr_ms = p2tr_ms;\n// Simple pubkey address, without complex scripts\nfunction getAddress(type, privKey, network = utils_js_1.NETWORK) {\n    if (type === 'tr') {\n        return p2tr(u.pubSchnorr(privKey), undefined, network).address;\n    }\n    const pubKey = u.pubECDSA(privKey);\n    if (type === 'pkh')\n        return (0, exports.p2pkh)(pubKey, network).address;\n    if (type === 'wpkh')\n        return (0, exports.p2wpkh)(pubKey, network).address;\n    throw new Error(`getAddress: unknown type=${type}`);\n}\nexports.getAddress = getAddress;\nconst _sortPubkeys = (pubkeys) => Array.from(pubkeys).sort(u.compareBytes);\nexports._sortPubkeys = _sortPubkeys;\nfunction multisig(m, pubkeys, sorted = false, witness = false, network = utils_js_1.NETWORK) {\n    const ms = (0, exports.p2ms)(m, sorted ? (0, exports._sortPubkeys)(pubkeys) : pubkeys);\n    return witness ? (0, exports.p2wsh)(ms, network) : (0, exports.p2sh)(ms, network);\n}\nexports.multisig = multisig;\nfunction sortedMultisig(m, pubkeys, witness = false, network = utils_js_1.NETWORK) {\n    return multisig(m, pubkeys, true, witness, network);\n}\nexports.sortedMultisig = sortedMultisig;\nconst base58check = (0, base_1.createBase58check)(u.sha256);\nfunction validateWitness(version, data) {\n    if (data.length < 2 || data.length > 40)\n        throw new Error('Witness: invalid length');\n    if (version > 16)\n        throw new Error('Witness: invalid version');\n    if (version === 0 && !(data.length === 20 || data.length === 32))\n        throw new Error('Witness: invalid length for version');\n}\nfunction programToWitness(version, data, network = utils_js_1.NETWORK) {\n    validateWitness(version, data);\n    const coder = version === 0 ? base_1.bech32 : base_1.bech32m;\n    return coder.encode(network.bech32, [version].concat(coder.toWords(data)));\n}\nfunction formatKey(hashed, prefix) {\n    return base58check.encode(u.concatBytes(Uint8Array.from(prefix), hashed));\n}\nfunction WIF(network = utils_js_1.NETWORK) {\n    return {\n        encode(privKey) {\n            const compressed = u.concatBytes(privKey, new Uint8Array([0x01]));\n            return formatKey(compressed.subarray(0, 33), [network.wif]);\n        },\n        decode(wif) {\n            let parsed = base58check.decode(wif);\n            if (parsed[0] !== network.wif)\n                throw new Error('Wrong WIF prefix');\n            parsed = parsed.subarray(1);\n            // Check what it is. Compressed flag?\n            if (parsed.length !== 33)\n                throw new Error('Wrong WIF length');\n            if (parsed[32] !== 0x01)\n                throw new Error('Wrong WIF postfix');\n            return parsed.subarray(0, -1);\n        },\n    };\n}\nexports.WIF = WIF;\n// Returns OutType, which can be used to create outscript\nfunction Address(network = utils_js_1.NETWORK) {\n    return {\n        encode(from) {\n            const { type } = from;\n            if (type === 'wpkh')\n                return programToWitness(0, from.hash, network);\n            else if (type === 'wsh')\n                return programToWitness(0, from.hash, network);\n            else if (type === 'tr')\n                return programToWitness(1, from.pubkey, network);\n            else if (type === 'pkh')\n                return formatKey(from.hash, [network.pubKeyHash]);\n            else if (type === 'sh')\n                return formatKey(from.hash, [network.scriptHash]);\n            throw new Error(`Unknown address type=${type}`);\n        },\n        decode(address) {\n            if (address.length < 14 || address.length > 74)\n                throw new Error('Invalid address length');\n            // Bech32\n            if (network.bech32 && address.toLowerCase().startsWith(network.bech32)) {\n                let res;\n                try {\n                    res = base_1.bech32.decode(address);\n                    if (res.words[0] !== 0)\n                        throw new Error(`bech32: wrong version=${res.words[0]}`);\n                }\n                catch (_) {\n                    // Starting from version 1 it is decoded as bech32m\n                    res = base_1.bech32m.decode(address);\n                    if (res.words[0] === 0)\n                        throw new Error(`bech32m: wrong version=${res.words[0]}`);\n                }\n                if (res.prefix !== network.bech32)\n                    throw new Error(`wrong bech32 prefix=${res.prefix}`);\n                const [version, ...program] = res.words;\n                const data = base_1.bech32.fromWords(program);\n                validateWitness(version, data);\n                if (version === 0 && data.length === 32)\n                    return { type: 'wsh', hash: data };\n                else if (version === 0 && data.length === 20)\n                    return { type: 'wpkh', hash: data };\n                else if (version === 1 && data.length === 32)\n                    return { type: 'tr', pubkey: data };\n                else\n                    throw new Error('Unknown witness program');\n            }\n            const data = base58check.decode(address);\n            if (data.length !== 21)\n                throw new Error('Invalid base58 address');\n            // Pay To Public Key Hash\n            if (data[0] === network.pubKeyHash) {\n                return { type: 'pkh', hash: data.slice(1) };\n            }\n            else if (data[0] === network.scriptHash) {\n                return {\n                    type: 'sh',\n                    hash: data.slice(1),\n                };\n            }\n            throw new Error(`Invalid address prefix=${data[0]}`);\n        },\n    };\n}\nexports.Address = Address;\n//# sourceMappingURL=payment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._Estimator = exports._cmpBig = exports.DEFAULT_SEQUENCE = exports.PSBTCombine = exports.SigHash = exports.bip32Path = exports.Decimal = exports.TaprootControlBlock = exports._DebugPSBT = exports.combinations = exports.sortedMultisig = exports._sortPubkeys = exports.OutScript = exports.taprootListToTree = exports.WIF = exports.getAddress = exports.Address = exports.utils = exports.TAPROOT_UNSPENDABLE_KEY = exports.TEST_NETWORK = exports.NETWORK = exports.selectUTXO = exports.getInputType = exports.Transaction = exports.MAX_SCRIPT_BYTE_LENGTH = exports.ScriptNum = exports.Script = exports.CompactSize = exports.RawTx = exports.OP = exports.multisig = exports.p2tr_pk = exports.p2tr_ms = exports.p2tr_ns = exports.p2tr = exports.p2wpkh = exports.p2wsh = exports.p2ms = exports.p2sh = exports.p2pkh = exports.p2pk = void 0;\n/*! scure-btc-signer - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nconst utils_js_1 = require(\"./utils.js\");\n// prettier-ignore\nvar payment_js_1 = require(\"./payment.js\");\nObject.defineProperty(exports, \"p2pk\", { enumerable: true, get: function () { return payment_js_1.p2pk; } });\nObject.defineProperty(exports, \"p2pkh\", { enumerable: true, get: function () { return payment_js_1.p2pkh; } });\nObject.defineProperty(exports, \"p2sh\", { enumerable: true, get: function () { return payment_js_1.p2sh; } });\nObject.defineProperty(exports, \"p2ms\", { enumerable: true, get: function () { return payment_js_1.p2ms; } });\nObject.defineProperty(exports, \"p2wsh\", { enumerable: true, get: function () { return payment_js_1.p2wsh; } });\nObject.defineProperty(exports, \"p2wpkh\", { enumerable: true, get: function () { return payment_js_1.p2wpkh; } });\nObject.defineProperty(exports, \"p2tr\", { enumerable: true, get: function () { return payment_js_1.p2tr; } });\nObject.defineProperty(exports, \"p2tr_ns\", { enumerable: true, get: function () { return payment_js_1.p2tr_ns; } });\nObject.defineProperty(exports, \"p2tr_ms\", { enumerable: true, get: function () { return payment_js_1.p2tr_ms; } });\nObject.defineProperty(exports, \"p2tr_pk\", { enumerable: true, get: function () { return payment_js_1.p2tr_pk; } });\nObject.defineProperty(exports, \"multisig\", { enumerable: true, get: function () { return payment_js_1.multisig; } }); // => classicMultisig?\n// prettier-ignore\nvar script_js_1 = require(\"./script.js\");\nObject.defineProperty(exports, \"OP\", { enumerable: true, get: function () { return script_js_1.OP; } });\nObject.defineProperty(exports, \"RawTx\", { enumerable: true, get: function () { return script_js_1.RawTx; } });\nObject.defineProperty(exports, \"CompactSize\", { enumerable: true, get: function () { return script_js_1.CompactSize; } });\nObject.defineProperty(exports, \"Script\", { enumerable: true, get: function () { return script_js_1.Script; } });\nObject.defineProperty(exports, \"ScriptNum\", { enumerable: true, get: function () { return script_js_1.ScriptNum; } });\nObject.defineProperty(exports, \"MAX_SCRIPT_BYTE_LENGTH\", { enumerable: true, get: function () { return script_js_1.MAX_SCRIPT_BYTE_LENGTH; } });\nvar transaction_js_1 = require(\"./transaction.js\");\nObject.defineProperty(exports, \"Transaction\", { enumerable: true, get: function () { return transaction_js_1.Transaction; } });\nvar utxo_js_1 = require(\"./utxo.js\");\nObject.defineProperty(exports, \"getInputType\", { enumerable: true, get: function () { return utxo_js_1.getInputType; } });\nObject.defineProperty(exports, \"selectUTXO\", { enumerable: true, get: function () { return utxo_js_1.selectUTXO; } });\nvar utils_js_2 = require(\"./utils.js\");\nObject.defineProperty(exports, \"NETWORK\", { enumerable: true, get: function () { return utils_js_2.NETWORK; } });\nObject.defineProperty(exports, \"TEST_NETWORK\", { enumerable: true, get: function () { return utils_js_2.TEST_NETWORK; } });\nObject.defineProperty(exports, \"TAPROOT_UNSPENDABLE_KEY\", { enumerable: true, get: function () { return utils_js_2.TAPROOT_UNSPENDABLE_KEY; } });\nexports.utils = {\n    isBytes: utils_js_1.isBytes,\n    concatBytes: utils_js_1.concatBytes,\n    compareBytes: utils_js_1.compareBytes,\n    pubSchnorr: utils_js_1.pubSchnorr,\n    randomPrivateKeyBytes: utils_js_1.randomPrivateKeyBytes,\n    taprootTweakPubkey: utils_js_1.taprootTweakPubkey,\n};\n// Utils\n// prettier-ignore\nvar payment_js_2 = require(\"./payment.js\"); // remove\nObject.defineProperty(exports, \"Address\", { enumerable: true, get: function () { return payment_js_2.Address; } });\nObject.defineProperty(exports, \"getAddress\", { enumerable: true, get: function () { return payment_js_2.getAddress; } });\nObject.defineProperty(exports, \"WIF\", { enumerable: true, get: function () { return payment_js_2.WIF; } });\nObject.defineProperty(exports, \"taprootListToTree\", { enumerable: true, get: function () { return payment_js_2.taprootListToTree; } });\nObject.defineProperty(exports, \"OutScript\", { enumerable: true, get: function () { return payment_js_2.OutScript; } });\nObject.defineProperty(exports, \"_sortPubkeys\", { enumerable: true, get: function () { return payment_js_2._sortPubkeys; } });\nObject.defineProperty(exports, \"sortedMultisig\", { enumerable: true, get: function () { return payment_js_2.sortedMultisig; } });\nObject.defineProperty(exports, \"combinations\", { enumerable: true, get: function () { return payment_js_2.combinations; } });\nvar psbt_js_1 = require(\"./psbt.js\"); // remove\nObject.defineProperty(exports, \"_DebugPSBT\", { enumerable: true, get: function () { return psbt_js_1._DebugPSBT; } });\nObject.defineProperty(exports, \"TaprootControlBlock\", { enumerable: true, get: function () { return psbt_js_1.TaprootControlBlock; } });\nvar transaction_js_2 = require(\"./transaction.js\"); // remove\nObject.defineProperty(exports, \"Decimal\", { enumerable: true, get: function () { return transaction_js_2.Decimal; } });\nObject.defineProperty(exports, \"bip32Path\", { enumerable: true, get: function () { return transaction_js_2.bip32Path; } });\nObject.defineProperty(exports, \"SigHash\", { enumerable: true, get: function () { return transaction_js_2.SigHash; } });\nObject.defineProperty(exports, \"PSBTCombine\", { enumerable: true, get: function () { return transaction_js_2.PSBTCombine; } });\nObject.defineProperty(exports, \"DEFAULT_SEQUENCE\", { enumerable: true, get: function () { return transaction_js_2.DEFAULT_SEQUENCE; } });\nvar utxo_js_2 = require(\"./utxo.js\");\nObject.defineProperty(exports, \"_cmpBig\", { enumerable: true, get: function () { return utxo_js_2._cmpBig; } });\nObject.defineProperty(exports, \"_Estimator\", { enumerable: true, get: function () { return utxo_js_2._Estimator; } });\n//# sourceMappingURL=index.js.map","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar t=function(){return t=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var s in r=arguments[e])Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);return t},t.apply(this,arguments)};var r=\"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";var e=t=>{if(!t||\"string\"!=typeof t)throw new Error(`Expected base58 string but got “${t}”`);if(t.match(/[IOl0]/gmu))throw new Error(`Invalid base58 character “${t.match(/[IOl0]/gmu)}”`);const e=t.match(/^1+/gmu),n=e?e[0].length:0,s=(t.length-n)*(Math.log(58)/Math.log(256))+1>>>0;return new Uint8Array([...new Uint8Array(n),...t.match(/.{1}/gmu).map((t=>r.indexOf(t))).reduce(((t,r)=>t=t.map((t=>{const e=58*t+r;return r=e>>8,e}))),new Uint8Array(s)).reverse().filter((i=!1,t=>i=i||t))]);var i};(()=>{const t=Array(256).fill(-1);for(let e=0;e<r.length;++e)t[r.charCodeAt(e)]=e})();var n=e;var s,i,o,h=(s=function(t,r){Object.defineProperty(r,\"__esModule\",{value:!0}),r.bech32m=r.bech32=void 0;const e=\"qpzry9x8gf2tvdw0s3jn54khce6mua7l\",n={};for(let t=0;t<32;t++){const r=e.charAt(t);n[r]=t}function s(t){const r=t>>25;return(33554431&t)<<5^996825010&-(r>>0&1)^642813549&-(r>>1&1)^513874426&-(r>>2&1)^1027748829&-(r>>3&1)^705979059&-(r>>4&1)}function i(t){let r=1;for(let e=0;e<t.length;++e){const n=t.charCodeAt(e);if(n<33||n>126)return\"Invalid prefix (\"+t+\")\";r=s(r)^n>>5}r=s(r);for(let e=0;e<t.length;++e){const n=t.charCodeAt(e);r=s(r)^31&n}return r}function o(t,r,e,n){let s=0,i=0;const o=(1<<e)-1,h=[];for(let n=0;n<t.length;++n)for(s=s<<r|t[n],i+=r;i>=e;)i-=e,h.push(s>>i&o);if(n)i>0&&h.push(s<<e-i&o);else{if(i>=r)return\"Excess padding\";if(s<<e-i&o)return\"Non-zero padding\"}return h}function h(t){return o(t,8,5,!0)}function c(t){const r=o(t,5,8,!1);if(Array.isArray(r))return r}function a(t){const r=o(t,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function f(t){let r;function o(t,e){if(e=e||90,t.length<8)return t+\" too short\";if(t.length>e)return\"Exceeds length limit\";const o=t.toLowerCase(),h=t.toUpperCase();if(t!==o&&t!==h)return\"Mixed-case string \"+t;const c=(t=o).lastIndexOf(\"1\");if(-1===c)return\"No separator character for \"+t;if(0===c)return\"Missing prefix for \"+t;const a=t.slice(0,c),f=t.slice(c+1);if(f.length<6)return\"Data too short\";let u=i(a);if(\"string\"==typeof u)return u;const l=[];for(let t=0;t<f.length;++t){const r=f.charAt(t),e=n[r];if(void 0===e)return\"Unknown character \"+r;u=s(u)^e,t+6>=f.length||l.push(e)}return u!==r?\"Invalid checksum for \"+t:{prefix:a,words:l}}return r=\"bech32\"===t?1:734539939,{decodeUnsafe:function(t,r){const e=o(t,r);if(\"object\"==typeof e)return e},decode:function(t,r){const e=o(t,r);if(\"object\"==typeof e)return e;throw new Error(e)},encode:function(t,n,o){if(o=o||90,t.length+7+n.length>o)throw new TypeError(\"Exceeds length limit\");let h=i(t=t.toLowerCase());if(\"string\"==typeof h)throw new Error(h);let c=t+\"1\";for(let t=0;t<n.length;++t){const r=n[t];if(r>>5!=0)throw new Error(\"Non 5-bit word\");h=s(h)^r,c+=e.charAt(r)}for(let t=0;t<6;++t)h=s(h);h^=r;for(let t=0;t<6;++t)c+=e.charAt(h>>5*(5-t)&31);return c},toWords:h,fromWordsUnsafe:c,fromWords:a}}r.bech32=f(\"bech32\"),r.bech32m=f(\"bech32m\")},s(i={exports:{}},i.exports),i.exports);(o=h)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,\"default\")&&o.default;var c=h.bech32m,a=h.bech32;const f=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],u={sha256:1};class l{constructor(){this.A=1779033703,this.B=-1150833019,this.C=1013904242,this.D=-1521486534,this.E=1359893119,this.F=-1694144372,this.G=528734635,this.H=1541459225,this._size=0,this._sp=0,(!p||w>=8e3)&&(p=new ArrayBuffer(8e3),w=0),this._byte=new Uint8Array(p,w,80),this._word=new Int32Array(p,w,20),w+=80}update(t){if(\"string\"==typeof t)return this._utf8(t);if(null==t)throw new TypeError(\"Invalid type: \"+typeof t);const r=t.byteOffset,e=t.byteLength;let n=e/64|0,s=0;if(n&&!(3&r)&&!(this._size%64)){const e=new Int32Array(t.buffer,r,16*n);for(;n--;)this._int32(e,s>>2),s+=64;this._size+=s}if(1!==t.BYTES_PER_ELEMENT&&t.buffer){const n=new Uint8Array(t.buffer,r+s,e-s);return this._uint8(n)}return s===e?this:this._uint8(t,s)}_uint8(t,r){const{_byte:e,_word:n}=this,s=t.length;for(r|=0;r<s;){const i=this._size%64;let o=i;for(;r<s&&o<64;)e[o++]=t[r++];o>=64&&this._int32(n),this._size+=o-i}return this}_utf8(t){const{_byte:r,_word:e}=this,n=t.length;let s=this._sp;for(let i=0;i<n;){const o=this._size%64;let h=o;for(;i<n&&h<64;){let e=0|t.charCodeAt(i++);e<128?r[h++]=e:e<2048?(r[h++]=192|e>>>6,r[h++]=128|63&e):e<55296||e>57343?(r[h++]=224|e>>>12,r[h++]=128|e>>>6&63,r[h++]=128|63&e):s?(e=((1023&s)<<10)+(1023&e)+65536,r[h++]=240|e>>>18,r[h++]=128|e>>>12&63,r[h++]=128|e>>>6&63,r[h++]=128|63&e,s=0):s=e}h>=64&&(this._int32(e),e[0]=e[16]),this._size+=h-o}return this._sp=s,this}_int32(t,r){let{A:e,B:n,C:s,D:i,E:o,F:h,G:c,H:a}=this,u=0;for(r|=0;u<16;)d[u++]=g(t[r++]);for(u=16;u<64;u++)d[u]=A(d[u-2])+d[u-7]+m(d[u-15])+d[u-16]|0;for(u=0;u<64;u++){const t=a+E(o)+b(o,h,c)+f[u]+d[u]|0,r=v(e)+_(e,n,s)|0;a=c,c=h,h=o,o=i+t|0,i=s,s=n,n=e,e=t+r|0}this.A=e+this.A|0,this.B=n+this.B|0,this.C=s+this.C|0,this.D=i+this.D|0,this.E=o+this.E|0,this.F=h+this.F|0,this.G=c+this.G|0,this.H=a+this.H|0}digest(t){const{_byte:r,_word:e}=this;let n=this._size%64|0;for(r[n++]=128;3&n;)r[n++]=0;if(n>>=2,n>14){for(;n<16;)e[n++]=0;n=0,this._int32(e)}for(;n<16;)e[n++]=0;const s=8*this._size,i=(4294967295&s)>>>0,o=(s-i)/4294967296;return o&&(e[14]=g(o)),i&&(e[15]=g(i)),this._int32(e),\"hex\"===t?this._hex():this._bin()}_hex(){const{A:t,B:r,C:e,D:n,E:s,F:i,G:o,H:h}=this;return y(t)+y(r)+y(e)+y(n)+y(s)+y(i)+y(o)+y(h)}_bin(){const{A:t,B:r,C:e,D:n,E:s,F:i,G:o,H:h,_byte:c,_word:a}=this;return a[0]=g(t),a[1]=g(r),a[2]=g(e),a[3]=g(n),a[4]=g(s),a[5]=g(i),a[6]=g(o),a[7]=g(h),c.slice(0,32)}}const d=new Int32Array(64);let p,w=0;const y=t=>(t+4294967296).toString(16).substr(-8),g=254===new Uint8Array(new Uint16Array([65279]).buffer)[0]?t=>t:t=>t<<24&4278190080|t<<8&16711680|t>>8&65280|t>>24&255,b=(t,r,e)=>e^t&(r^e),_=(t,r,e)=>t&r|e&(t|r),v=t=>(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),E=t=>(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7),m=t=>(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3,A=t=>(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10;var x,k,I=function(t){return function(t){if(t&&!u[t]&&!u[t.toLowerCase()])throw new Error(\"Digest method not supported\");return new l}().update(t).digest()};!function(t){t.mainnet=\"mainnet\",t.testnet=\"testnet\",t.regtest=\"regtest\"}(x||(x={})),function(t){t.p2pkh=\"p2pkh\",t.p2sh=\"p2sh\",t.p2wpkh=\"p2wpkh\",t.p2wsh=\"p2wsh\",t.p2tr=\"p2tr\"}(k||(k={}));var C={0:{type:k.p2pkh,network:x.mainnet},111:{type:k.p2pkh,network:x.testnet},5:{type:k.p2sh,network:x.mainnet},196:{type:k.p2sh,network:x.testnet}},z=function(r){var e,s=r.substr(0,2).toLowerCase();if(\"bc\"===s||\"tb\"===s)return function(t){var r;try{r=t.startsWith(\"bc1p\")||t.startsWith(\"tb1p\")||t.startsWith(\"bcrt1p\")?c.decode(t):a.decode(t)}catch(t){throw new Error(\"Invalid address\")}var e={bc:x.mainnet,tb:x.testnet,bcrt:x.regtest}[r.prefix];if(void 0===e)throw new Error(\"Invalid address\");var n=r.words[0];if(n<0||n>16)throw new Error(\"Invalid address\");return{bech32:!0,network:e,address:t,type:20===a.fromWords(r.words.slice(1)).length?k.p2wpkh:1===n?k.p2tr:k.p2wsh}}(r);try{e=n(r)}catch(t){throw new Error(\"Invalid address\")}var i=e.length;if(25!==i)throw new Error(\"Invalid address\");var o=e[0],h=e.slice(i-4,i),f=e.slice(0,i-4),u=I(I(f)).slice(0,4);if(h.some((function(t,r){return t!==u[r]})))throw new Error(\"Invalid address\");if(!Object.keys(C).map(Number).includes(o))throw new Error(\"Invalid address\");return t(t({},C[o]),{address:r,bech32:!1})},O=function(t,r){try{var e=z(t);return!r||r===e.network}catch(t){return!1}};export{k as AddressType,x as Network,O as default,z as getAddressInfo,O as validate};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBtcNetwork = void 0;\nexports.createTransfer = createTransfer;\nexports.getInputFromUtxoAndTx = getInputFromUtxoAndTx;\nconst btc_signer_1 = require(\"@scure/btc-signer\");\nconst base_1 = require(\"@scure/base\");\nconst bitcoin_address_validation_1 = require(\"bitcoin-address-validation\");\nconst esplora_1 = require(\"../esplora\");\nconst bitcoinNetworks = {\n    mainnet: btc_signer_1.NETWORK,\n    testnet: btc_signer_1.TEST_NETWORK\n};\nconst getBtcNetwork = (name) => {\n    return bitcoinNetworks[name];\n};\nexports.getBtcNetwork = getBtcNetwork;\nasync function createTransfer(network, addressType, fromAddress, toAddress, amount, publicKey, opReturnData, confirmationTarget = 3) {\n    const esploraClient = new esplora_1.DefaultEsploraClient(network);\n    const [confirmedUtxos, feeRate] = await Promise.all([\n        esploraClient.getAddressUtxos(fromAddress),\n        esploraClient.getFeeEstimate(confirmationTarget)\n    ]);\n    if (confirmedUtxos.length === 0) {\n        throw new Error('No confirmed UTXOs');\n    }\n    let possibleInputs = [];\n    await Promise.all(confirmedUtxos.map(async (utxo) => {\n        const hex = await esploraClient.getTransactionHex(utxo.txid);\n        const transaction = btc_signer_1.Transaction.fromRaw(Buffer.from(hex, 'hex'), { allowUnknownOutputs: true });\n        const input = getInputFromUtxoAndTx(network, utxo, transaction, addressType, publicKey);\n        possibleInputs.push(input);\n    }));\n    const outputs = [\n        {\n            address: toAddress,\n            amount: BigInt(amount)\n        }\n    ];\n    if (opReturnData) {\n        if (opReturnData.startsWith('0x')) {\n            opReturnData = opReturnData.slice(2);\n        }\n        outputs.push({\n            script: btc_signer_1.Script.encode(['RETURN', base_1.hex.decode(opReturnData)]),\n            amount: BigInt(0)\n        });\n    }\n    const transaction = (0, btc_signer_1.selectUTXO)(possibleInputs, outputs, 'default', {\n        changeAddress: fromAddress,\n        feePerByte: BigInt(Math.ceil(feeRate)),\n        bip69: true,\n        createTx: true,\n        network: (0, exports.getBtcNetwork)(network),\n        allowUnknownOutputs: true,\n        allowLegacyWitnessUtxo: true\n    });\n    if (!transaction || !transaction.tx) {\n        throw new Error('Failed to create transaction. Do you have enough funds?');\n    }\n    return transaction.tx;\n}\nfunction getInputFromUtxoAndTx(network, utxo, transaction, addressType, pubKey) {\n    const output = transaction.getOutput(utxo.vout);\n    let redeemScript = {};\n    if (addressType === bitcoin_address_validation_1.AddressType.p2sh) {\n        const inner = (0, btc_signer_1.p2wpkh)(Buffer.from(pubKey, 'hex'), (0, exports.getBtcNetwork)(network));\n        redeemScript = (0, btc_signer_1.p2sh)(inner);\n    }\n    const scriptMixin = {\n        ...redeemScript\n    };\n    const nonWitnessUtxo = {\n        nonWitnessUtxo: Buffer.from(transaction.hex, 'hex')\n    };\n    const witnessUtxo = {\n        witnessUtxo: {\n            script: output.script,\n            amount: output.amount\n        }\n    };\n    const witnessMixin = transaction.hasWitnesses ? witnessUtxo : nonWitnessUtxo;\n    const input = {\n        txid: utxo.txid,\n        index: utxo.vout,\n        ...scriptMixin,\n        ...witnessMixin\n    };\n    return input;\n}\n//# sourceMappingURL=utxo.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./address\"), exports);\n__exportStar(require(\"./utxo\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GatewayApiClient = void 0;\nclass GatewayApiClient {\n    constructor(baseUrl) {\n        this.baseUrl = baseUrl;\n    }\n    async getQuote(address, atomicAmount) {\n        const response = await fetch(`${this.baseUrl}/quote/${address}/${atomicAmount || ''}`, {\n            headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n            }\n        });\n        return await response.json();\n    }\n    async createOrder(contractAddress, userAddress, atomicAmount) {\n        const response = await fetch(`${this.baseUrl}/order`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n            },\n            body: JSON.stringify({ onramp_address: contractAddress, user_address: userAddress, satoshis: atomicAmount })\n        });\n        if (!response.ok) {\n            throw new Error('Failed to create order');\n        }\n        return await response.json();\n    }\n    async updateOrder(id, tx) {\n        const response = await fetch(`${this.baseUrl}/order/${id}`, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n            },\n            body: JSON.stringify({ bitcoin_tx: tx })\n        });\n        if (!response.ok) {\n            throw new Error('Failed to update order');\n        }\n    }\n    async getOrders(userAddress) {\n        const response = await fetch(`${this.baseUrl}/orders/${userAddress}`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n            }\n        });\n        return response.json();\n    }\n}\nexports.GatewayApiClient = GatewayApiClient;\n//# sourceMappingURL=gateway.js.map","\"use client\";\n\n// src/fee.ts\nimport * as bitcoin from \"bitcoinjs-lib\";\nfunction estimateTxSize(network, toAddress) {\n  const tx = new bitcoin.Transaction();\n  tx.addInput(Buffer.alloc(32, 0), 0);\n  tx.ins[0].witness = [Buffer.alloc(71, 0), Buffer.alloc(33, 0)];\n  tx.addOutput(bitcoin.address.toOutputScript(toAddress, network), 0);\n  return tx.virtualSize();\n}\n\n// src/inscription.ts\nimport * as bitcoin2 from \"bitcoinjs-lib\";\nimport { InscriptionId } from \"@gobob/bob-sdk/dist/ordinal-api\";\nvar TAPROOT_ANNEX_PREFIX = 80;\nvar PROTOCOL_ID = Buffer.from(\"6f7264\", \"hex\");\nvar CONTENT_TYPE_TAG = bitcoin2.opcodes.OP_1;\nfunction getTapscript(witness) {\n  const len = witness.length;\n  const last = witness[len - 1];\n  if (typeof last === \"undefined\") {\n    return null;\n  }\n  let scriptPosFromLast = 2;\n  if (len >= 2 && last[0] == TAPROOT_ANNEX_PREFIX) {\n    scriptPosFromLast = 3;\n  }\n  if (typeof witness[len - scriptPosFromLast] === \"undefined\") {\n    return null;\n  }\n  return bitcoin2.script.decompile(witness[len - scriptPosFromLast]);\n}\nfunction parseInscriptions(tx) {\n  let inscriptions = [];\n  for (const txInput of tx.ins) {\n    const tapscript = getTapscript(txInput.witness);\n    if (tapscript == null) {\n      continue;\n    }\n    const chunks = tapscript.values();\n    for (let chunk = chunks.next(); !chunk.done; chunk = chunks.next()) {\n      if (chunk.value != bitcoin2.opcodes.OP_FALSE) {\n        continue;\n      }\n      if (chunks.next().value != bitcoin2.opcodes.OP_IF) {\n        continue;\n      }\n      const data = chunks.next().value;\n      if (!Buffer.isBuffer(data) && !data.equals(PROTOCOL_ID)) {\n        continue;\n      }\n      let tags = {};\n      let body = [];\n      let isBody = false;\n      for (let chunk2 = chunks.next(); !chunk2.done; chunk2 = chunks.next()) {\n        if (chunk2.value == bitcoin2.opcodes.OP_ENDIF) {\n          inscriptions.push({ tags, body });\n          break;\n        } else if (chunk2.value == bitcoin2.opcodes.OP_0) {\n          isBody = true;\n          continue;\n        }\n        if (!isBody) {\n          const data2 = chunks.next().value;\n          if (typeof chunk2.value == \"number\" && Buffer.isBuffer(data2)) {\n            tags[chunk2.value] = data2;\n          }\n        } else if (Buffer.isBuffer(chunk2.value)) {\n          body.push(chunk2.value);\n        }\n      }\n    }\n  }\n  return inscriptions;\n}\nasync function getTxInscriptions(electrsClient, txid) {\n  const txHex = await electrsClient.getTransactionHex(txid);\n  const tx = bitcoin2.Transaction.fromHex(txHex);\n  return parseInscriptions(tx);\n}\nfunction parseInscriptionId(id) {\n  const [txid, index] = id.split(\"i\");\n  return {\n    txid,\n    index: parseInt(index, 10)\n  };\n}\nvar encoder = new TextEncoder();\nfunction createImageInscription(image) {\n  const contentType = Buffer.from(encoder.encode(\"image/jpg\"));\n  return { contentType, content: image };\n}\nasync function getInscriptionFromId(electrsClient, inscriptionId) {\n  const { txid, index } = InscriptionId.fromString(inscriptionId);\n  const inscriptions = await getTxInscriptions(electrsClient, txid);\n  return inscriptions[index];\n}\nfunction getContentType(inscription) {\n  const data = inscription.tags[CONTENT_TYPE_TAG];\n  if (Buffer.isBuffer(data)) {\n    return data.toString(\"utf-8\");\n  }\n  return null;\n}\n\n// src/utxo.ts\nimport { TESTNET_ORD_BASE_PATH } from \"@gobob/bob-sdk/dist/ordinal-api\";\nasync function findUtxoForInscriptionId(electrsClient, utxos, inscriptionId) {\n  const { txid, index } = parseInscriptionId(inscriptionId);\n  for (const utxo of utxos) {\n    if (utxo.confirmed) {\n      const res = await fetch(`${TESTNET_ORD_BASE_PATH}/output/${utxo.txid}:${utxo.vout}`, {\n        headers: {\n          Accept: \"application/json\"\n        }\n      });\n      const inscriptionUtxo = await res.json();\n      if (inscriptionUtxo.inscriptions && inscriptionUtxo.inscriptions.includes(inscriptionId)) {\n        return utxo;\n      }\n    } else if (txid == utxo.txid) {\n      const inscriptions = await getTxInscriptions(electrsClient, utxo.txid);\n      if (typeof inscriptions[index] !== \"undefined\") {\n        return utxo;\n      }\n    }\n  }\n  return void 0;\n}\nasync function findUtxosWithoutInscriptions(electrsClient, utxos) {\n  const safeUtxos = [];\n  for (const utxo of utxos) {\n    if (utxo.confirmed) {\n      const res = await fetch(`${TESTNET_ORD_BASE_PATH}/output/${utxo.txid}:${utxo.vout}`, {\n        headers: {\n          Accept: \"application/json\"\n        }\n      });\n      const inscriptionUtxo = await res.json();\n      if (inscriptionUtxo.inscriptions.length === 0) {\n        safeUtxos.push(utxo);\n      }\n    } else {\n      const inscriptions = await getTxInscriptions(electrsClient, utxo.txid);\n      if (inscriptions.length === 0) {\n        safeUtxos.push(utxo);\n      }\n    }\n  }\n  return safeUtxos;\n}\n\n// src/truncate.ts\nvar truncateBtcAddress = (address2) => address2.slice(0, 6) + \"...\" + address2.slice(-6);\nvar truncateEthRegex = /^(0x[a-zA-Z0-9]{4})[a-zA-Z0-9]+([a-zA-Z0-9]{4})$/;\nvar truncateEthAddress = (address2) => {\n  const match = address2.match(truncateEthRegex);\n  if (!match)\n    return address2;\n  return `${match[1]}\\u2026${match[2]}`;\n};\n\n// src/address.ts\nvar BTC_REGTEST_REGEX = /\\b([2mn][a-km-zA-HJ-NP-Z1-9]{25,34}|bcrt1[ac-hj-np-zAC-HJ-NP-Z02-9]{11,71})\\b/;\nvar BTC_TESTNET_REGEX = /\\b([2mn][a-km-zA-HJ-NP-Z1-9]{25,34}|tb1[ac-hj-np-zAC-HJ-NP-Z02-9]{11,71})\\b/;\nvar BTC_MAINNET_REGEX = /\\b([13][a-km-zA-HJ-NP-Z1-9]{25,34}|bc1[ac-hj-np-zAC-HJ-NP-Z02-9]{11,71})\\b/;\nvar testnetRegex = new RegExp(BTC_TESTNET_REGEX);\nvar regtestRegex = new RegExp(BTC_REGTEST_REGEX);\nvar mainnetRegex = new RegExp(BTC_MAINNET_REGEX);\nvar isValidBTCAddress = (network, address2) => {\n  switch (network) {\n    case \"mainnet\":\n      return mainnetRegex.test(address2);\n    case \"testnet\":\n      return testnetRegex.test(address2);\n    case \"regtest\":\n      return regtestRegex.test(address2);\n    default:\n      throw new Error(`Invalid bitcoin network configured: ${network}. Valid values are: testnet | regtest | mainnet.`);\n  }\n};\nexport {\n  createImageInscription,\n  estimateTxSize,\n  findUtxoForInscriptionId,\n  findUtxosWithoutInscriptions,\n  getContentType,\n  getInscriptionFromId,\n  getTapscript,\n  getTxInscriptions,\n  isValidBTCAddress,\n  parseInscriptionId,\n  parseInscriptions,\n  truncateBtcAddress,\n  truncateEthAddress\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./esplora\"), exports);\n__exportStar(require(\"./relay\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./ordinals\"), exports);\n__exportStar(require(\"./helpers\"), exports);\n__exportStar(require(\"./wallet\"), exports);\n__exportStar(require(\"./gateway\"), exports);\n//# sourceMappingURL=index.js.map",null,null,null,null,null,"/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Creates an array of the own and inherited enumerable symbol properties\n * of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable string keyed properties of `object` that are\n * not omitted.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = baseRest(function(object, props) {\n  if (object == null) {\n    return {};\n  }\n  props = arrayMap(baseFlatten(props, 1), toKey);\n  return basePick(object, baseDifference(getAllKeysIn(object), props));\n});\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = omit;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decode = exports.encode = exports.unescape = exports.escape = exports.pad = void 0;\nconst base64_js_1 = require(\"base64-js\");\nfunction pad(base64) {\n    return `${base64}${'='.repeat(4 - (base64.length % 4 || 4))}`;\n}\nexports.pad = pad;\nfunction escape(base64) {\n    return base64.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\nexports.escape = escape;\nfunction unescape(base64Url) {\n    return pad(base64Url).replace(/-/g, '+').replace(/_/g, '/');\n}\nexports.unescape = unescape;\nfunction encode(base64) {\n    return escape((0, base64_js_1.fromByteArray)(new TextEncoder().encode(base64)));\n}\nexports.encode = encode;\nfunction decode(base64Url) {\n    return new TextDecoder().decode((0, base64_js_1.toByteArray)(pad(unescape(base64Url))));\n}\nexports.decode = decode;\n//# sourceMappingURL=base64Url.js.map","\"use strict\";\n/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.utils = exports.schnorr = exports.verify = exports.signSync = exports.sign = exports.getSharedSecret = exports.recoverPublicKey = exports.getPublicKey = exports.Signature = exports.Point = exports.CURVE = void 0;\nconst nodeCrypto = require(\"crypto\");\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _3n = BigInt(3);\nconst _8n = BigInt(8);\nconst CURVE = Object.freeze({\n    a: _0n,\n    b: BigInt(7),\n    P: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n    n: BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141'),\n    h: _1n,\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n});\nexports.CURVE = CURVE;\nconst divNearest = (a, b) => (a + b / _2n) / b;\nconst endo = {\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n    splitScalar(k) {\n        const { n } = CURVE;\n        const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n        const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n        const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n        const b2 = a1;\n        const POW_2_128 = BigInt('0x100000000000000000000000000000000');\n        const c1 = divNearest(b2 * k, n);\n        const c2 = divNearest(-b1 * k, n);\n        let k1 = mod(k - c1 * a1 - c2 * a2, n);\n        let k2 = mod(-c1 * b1 - c2 * b2, n);\n        const k1neg = k1 > POW_2_128;\n        const k2neg = k2 > POW_2_128;\n        if (k1neg)\n            k1 = n - k1;\n        if (k2neg)\n            k2 = n - k2;\n        if (k1 > POW_2_128 || k2 > POW_2_128) {\n            throw new Error('splitScalarEndo: Endomorphism failed, k=' + k);\n        }\n        return { k1neg, k1, k2neg, k2 };\n    },\n};\nconst fieldLen = 32;\nconst groupLen = 32;\nconst hashLen = 32;\nconst compressedLen = fieldLen + 1;\nconst uncompressedLen = 2 * fieldLen + 1;\nfunction weierstrass(x) {\n    const { a, b } = CURVE;\n    const x2 = mod(x * x);\n    const x3 = mod(x2 * x);\n    return mod(x3 + a * x + b);\n}\nconst USE_ENDOMORPHISM = CURVE.a === _0n;\nclass ShaError extends Error {\n    constructor(message) {\n        super(message);\n    }\n}\nfunction assertJacPoint(other) {\n    if (!(other instanceof JacobianPoint))\n        throw new TypeError('JacobianPoint expected');\n}\nclass JacobianPoint {\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    static fromAffine(p) {\n        if (!(p instanceof Point)) {\n            throw new TypeError('JacobianPoint#fromAffine: expected Point');\n        }\n        if (p.equals(Point.ZERO))\n            return JacobianPoint.ZERO;\n        return new JacobianPoint(p.x, p.y, _1n);\n    }\n    static toAffineBatch(points) {\n        const toInv = invertBatch(points.map((p) => p.z));\n        return points.map((p, i) => p.toAffine(toInv[i]));\n    }\n    static normalizeZ(points) {\n        return JacobianPoint.toAffineBatch(points).map(JacobianPoint.fromAffine);\n    }\n    equals(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        return U1 === U2 && S1 === S2;\n    }\n    negate() {\n        return new JacobianPoint(this.x, mod(-this.y), this.z);\n    }\n    double() {\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const A = mod(X1 * X1);\n        const B = mod(Y1 * Y1);\n        const C = mod(B * B);\n        const x1b = X1 + B;\n        const D = mod(_2n * (mod(x1b * x1b) - A - C));\n        const E = mod(_3n * A);\n        const F = mod(E * E);\n        const X3 = mod(F - _2n * D);\n        const Y3 = mod(E * (D - X3) - _8n * C);\n        const Z3 = mod(_2n * Y1 * Z1);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    add(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        if (X2 === _0n || Y2 === _0n)\n            return this;\n        if (X1 === _0n || Y1 === _0n)\n            return other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        const H = mod(U2 - U1);\n        const r = mod(S2 - S1);\n        if (H === _0n) {\n            if (r === _0n) {\n                return this.double();\n            }\n            else {\n                return JacobianPoint.ZERO;\n            }\n        }\n        const HH = mod(H * H);\n        const HHH = mod(H * HH);\n        const V = mod(U1 * HH);\n        const X3 = mod(r * r - HHH - _2n * V);\n        const Y3 = mod(r * (V - X3) - S1 * HHH);\n        const Z3 = mod(Z1 * Z2 * H);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiplyUnsafe(scalar) {\n        const P0 = JacobianPoint.ZERO;\n        if (typeof scalar === 'bigint' && scalar === _0n)\n            return P0;\n        let n = normalizeScalar(scalar);\n        if (n === _1n)\n            return this;\n        if (!USE_ENDOMORPHISM) {\n            let p = P0;\n            let d = this;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        }\n        let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n        let k1p = P0;\n        let k2p = P0;\n        let d = this;\n        while (k1 > _0n || k2 > _0n) {\n            if (k1 & _1n)\n                k1p = k1p.add(d);\n            if (k2 & _1n)\n                k2p = k2p.add(d);\n            d = d.double();\n            k1 >>= _1n;\n            k2 >>= _1n;\n        }\n        if (k1neg)\n            k1p = k1p.negate();\n        if (k2neg)\n            k2p = k2p.negate();\n        k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n        return k1p.add(k2p);\n    }\n    precomputeWindow(W) {\n        const windows = USE_ENDOMORPHISM ? 128 / W + 1 : 256 / W + 1;\n        const points = [];\n        let p = this;\n        let base = p;\n        for (let window = 0; window < windows; window++) {\n            base = p;\n            points.push(base);\n            for (let i = 1; i < 2 ** (W - 1); i++) {\n                base = base.add(p);\n                points.push(base);\n            }\n            p = base.double();\n        }\n        return points;\n    }\n    wNAF(n, affinePoint) {\n        if (!affinePoint && this.equals(JacobianPoint.BASE))\n            affinePoint = Point.BASE;\n        const W = (affinePoint && affinePoint._WINDOW_SIZE) || 1;\n        if (256 % W) {\n            throw new Error('Point#wNAF: Invalid precomputation window, must be power of 2');\n        }\n        let precomputes = affinePoint && pointPrecomputes.get(affinePoint);\n        if (!precomputes) {\n            precomputes = this.precomputeWindow(W);\n            if (affinePoint && W !== 1) {\n                precomputes = JacobianPoint.normalizeZ(precomputes);\n                pointPrecomputes.set(affinePoint, precomputes);\n            }\n        }\n        let p = JacobianPoint.ZERO;\n        let f = JacobianPoint.BASE;\n        const windows = 1 + (USE_ENDOMORPHISM ? 128 / W : 256 / W);\n        const windowSize = 2 ** (W - 1);\n        const mask = BigInt(2 ** W - 1);\n        const maxNumber = 2 ** W;\n        const shiftBy = BigInt(W);\n        for (let window = 0; window < windows; window++) {\n            const offset = window * windowSize;\n            let wbits = Number(n & mask);\n            n >>= shiftBy;\n            if (wbits > windowSize) {\n                wbits -= maxNumber;\n                n += _1n;\n            }\n            const offset1 = offset;\n            const offset2 = offset + Math.abs(wbits) - 1;\n            const cond1 = window % 2 !== 0;\n            const cond2 = wbits < 0;\n            if (wbits === 0) {\n                f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n            }\n            else {\n                p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n            }\n        }\n        return { p, f };\n    }\n    multiply(scalar, affinePoint) {\n        let n = normalizeScalar(scalar);\n        let point;\n        let fake;\n        if (USE_ENDOMORPHISM) {\n            const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let { p: k1p, f: f1p } = this.wNAF(k1, affinePoint);\n            let { p: k2p, f: f2p } = this.wNAF(k2, affinePoint);\n            k1p = constTimeNegate(k1neg, k1p);\n            k2p = constTimeNegate(k2neg, k2p);\n            k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n            point = k1p.add(k2p);\n            fake = f1p.add(f2p);\n        }\n        else {\n            const { p, f } = this.wNAF(n, affinePoint);\n            point = p;\n            fake = f;\n        }\n        return JacobianPoint.normalizeZ([point, fake])[0];\n    }\n    toAffine(invZ) {\n        const { x, y, z } = this;\n        const is0 = this.equals(JacobianPoint.ZERO);\n        if (invZ == null)\n            invZ = is0 ? _8n : invert(z);\n        const iz1 = invZ;\n        const iz2 = mod(iz1 * iz1);\n        const iz3 = mod(iz2 * iz1);\n        const ax = mod(x * iz2);\n        const ay = mod(y * iz3);\n        const zz = mod(z * iz1);\n        if (is0)\n            return Point.ZERO;\n        if (zz !== _1n)\n            throw new Error('invZ was invalid');\n        return new Point(ax, ay);\n    }\n}\nJacobianPoint.BASE = new JacobianPoint(CURVE.Gx, CURVE.Gy, _1n);\nJacobianPoint.ZERO = new JacobianPoint(_0n, _1n, _0n);\nfunction constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n}\nconst pointPrecomputes = new WeakMap();\nclass Point {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    _setWindowSize(windowSize) {\n        this._WINDOW_SIZE = windowSize;\n        pointPrecomputes.delete(this);\n    }\n    hasEvenY() {\n        return this.y % _2n === _0n;\n    }\n    static fromCompressedHex(bytes) {\n        const isShort = bytes.length === 32;\n        const x = bytesToNumber(isShort ? bytes : bytes.subarray(1));\n        if (!isValidFieldElement(x))\n            throw new Error('Point is not on curve');\n        const y2 = weierstrass(x);\n        let y = sqrtMod(y2);\n        const isYOdd = (y & _1n) === _1n;\n        if (isShort) {\n            if (isYOdd)\n                y = mod(-y);\n        }\n        else {\n            const isFirstByteOdd = (bytes[0] & 1) === 1;\n            if (isFirstByteOdd !== isYOdd)\n                y = mod(-y);\n        }\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromUncompressedHex(bytes) {\n        const x = bytesToNumber(bytes.subarray(1, fieldLen + 1));\n        const y = bytesToNumber(bytes.subarray(fieldLen + 1, fieldLen * 2 + 1));\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        const len = bytes.length;\n        const header = bytes[0];\n        if (len === fieldLen)\n            return this.fromCompressedHex(bytes);\n        if (len === compressedLen && (header === 0x02 || header === 0x03)) {\n            return this.fromCompressedHex(bytes);\n        }\n        if (len === uncompressedLen && header === 0x04)\n            return this.fromUncompressedHex(bytes);\n        throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${len}`);\n    }\n    static fromPrivateKey(privateKey) {\n        return Point.BASE.multiply(normalizePrivateKey(privateKey));\n    }\n    static fromSignature(msgHash, signature, recovery) {\n        const { r, s } = normalizeSignature(signature);\n        if (![0, 1, 2, 3].includes(recovery))\n            throw new Error('Cannot recover: invalid recovery bit');\n        const h = truncateHash(ensureBytes(msgHash));\n        const { n } = CURVE;\n        const radj = recovery === 2 || recovery === 3 ? r + n : r;\n        const rinv = invert(radj, n);\n        const u1 = mod(-h * rinv, n);\n        const u2 = mod(s * rinv, n);\n        const prefix = recovery & 1 ? '03' : '02';\n        const R = Point.fromHex(prefix + numTo32bStr(radj));\n        const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2);\n        if (!Q)\n            throw new Error('Cannot recover signature: point at infinify');\n        Q.assertValidity();\n        return Q;\n    }\n    toRawBytes(isCompressed = false) {\n        return hexToBytes(this.toHex(isCompressed));\n    }\n    toHex(isCompressed = false) {\n        const x = numTo32bStr(this.x);\n        if (isCompressed) {\n            const prefix = this.hasEvenY() ? '02' : '03';\n            return `${prefix}${x}`;\n        }\n        else {\n            return `04${x}${numTo32bStr(this.y)}`;\n        }\n    }\n    toHexX() {\n        return this.toHex(true).slice(2);\n    }\n    toRawX() {\n        return this.toRawBytes(true).slice(1);\n    }\n    assertValidity() {\n        const msg = 'Point is not on elliptic curve';\n        const { x, y } = this;\n        if (!isValidFieldElement(x) || !isValidFieldElement(y))\n            throw new Error(msg);\n        const left = mod(y * y);\n        const right = weierstrass(x);\n        if (mod(left - right) !== _0n)\n            throw new Error(msg);\n    }\n    equals(other) {\n        return this.x === other.x && this.y === other.y;\n    }\n    negate() {\n        return new Point(this.x, mod(-this.y));\n    }\n    double() {\n        return JacobianPoint.fromAffine(this).double().toAffine();\n    }\n    add(other) {\n        return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(other)).toAffine();\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiply(scalar) {\n        return JacobianPoint.fromAffine(this).multiply(scalar, this).toAffine();\n    }\n    multiplyAndAddUnsafe(Q, a, b) {\n        const P = JacobianPoint.fromAffine(this);\n        const aP = a === _0n || a === _1n || this !== Point.BASE ? P.multiplyUnsafe(a) : P.multiply(a);\n        const bQ = JacobianPoint.fromAffine(Q).multiplyUnsafe(b);\n        const sum = aP.add(bQ);\n        return sum.equals(JacobianPoint.ZERO) ? undefined : sum.toAffine();\n    }\n}\nexports.Point = Point;\nPoint.BASE = new Point(CURVE.Gx, CURVE.Gy);\nPoint.ZERO = new Point(_0n, _0n);\nfunction sliceDER(s) {\n    return Number.parseInt(s[0], 16) >= 8 ? '00' + s : s;\n}\nfunction parseDERInt(data) {\n    if (data.length < 2 || data[0] !== 0x02) {\n        throw new Error(`Invalid signature integer tag: ${bytesToHex(data)}`);\n    }\n    const len = data[1];\n    const res = data.subarray(2, len + 2);\n    if (!len || res.length !== len) {\n        throw new Error(`Invalid signature integer: wrong length`);\n    }\n    if (res[0] === 0x00 && res[1] <= 0x7f) {\n        throw new Error('Invalid signature integer: trailing length');\n    }\n    return { data: bytesToNumber(res), left: data.subarray(len + 2) };\n}\nfunction parseDERSignature(data) {\n    if (data.length < 2 || data[0] != 0x30) {\n        throw new Error(`Invalid signature tag: ${bytesToHex(data)}`);\n    }\n    if (data[1] !== data.length - 2) {\n        throw new Error('Invalid signature: incorrect length');\n    }\n    const { data: r, left: sBytes } = parseDERInt(data.subarray(2));\n    const { data: s, left: rBytesLeft } = parseDERInt(sBytes);\n    if (rBytesLeft.length) {\n        throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(rBytesLeft)}`);\n    }\n    return { r, s };\n}\nclass Signature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromCompact(hex) {\n        const arr = hex instanceof Uint8Array;\n        const name = 'Signature.fromCompact';\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`${name}: Expected string or Uint8Array`);\n        const str = arr ? bytesToHex(hex) : hex;\n        if (str.length !== 128)\n            throw new Error(`${name}: Expected 64-byte hex`);\n        return new Signature(hexToNumber(str.slice(0, 64)), hexToNumber(str.slice(64, 128)));\n    }\n    static fromDER(hex) {\n        const arr = hex instanceof Uint8Array;\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`Signature.fromDER: Expected string or Uint8Array`);\n        const { r, s } = parseDERSignature(arr ? hex : hexToBytes(hex));\n        return new Signature(r, s);\n    }\n    static fromHex(hex) {\n        return this.fromDER(hex);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isWithinCurveOrder(r))\n            throw new Error('Invalid Signature: r must be 0 < r < n');\n        if (!isWithinCurveOrder(s))\n            throw new Error('Invalid Signature: s must be 0 < s < n');\n    }\n    hasHighS() {\n        const HALF = CURVE.n >> _1n;\n        return this.s > HALF;\n    }\n    normalizeS() {\n        return this.hasHighS() ? new Signature(this.r, mod(-this.s, CURVE.n)) : this;\n    }\n    toDERRawBytes() {\n        return hexToBytes(this.toDERHex());\n    }\n    toDERHex() {\n        const sHex = sliceDER(numberToHexUnpadded(this.s));\n        const rHex = sliceDER(numberToHexUnpadded(this.r));\n        const sHexL = sHex.length / 2;\n        const rHexL = rHex.length / 2;\n        const sLen = numberToHexUnpadded(sHexL);\n        const rLen = numberToHexUnpadded(rHexL);\n        const length = numberToHexUnpadded(rHexL + sHexL + 4);\n        return `30${length}02${rLen}${rHex}02${sLen}${sHex}`;\n    }\n    toRawBytes() {\n        return this.toDERRawBytes();\n    }\n    toHex() {\n        return this.toDERHex();\n    }\n    toCompactRawBytes() {\n        return hexToBytes(this.toCompactHex());\n    }\n    toCompactHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n}\nexports.Signature = Signature;\nfunction concatBytes(...arrays) {\n    if (!arrays.every((b) => b instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\nfunction bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Expected Uint8Array');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\nconst POW_2_256 = BigInt('0x10000000000000000000000000000000000000000000000000000000000000000');\nfunction numTo32bStr(num) {\n    if (typeof num !== 'bigint')\n        throw new Error('Expected bigint');\n    if (!(_0n <= num && num < POW_2_256))\n        throw new Error('Expected number 0 <= n < 2^256');\n    return num.toString(16).padStart(64, '0');\n}\nfunction numTo32b(num) {\n    const b = hexToBytes(numTo32bStr(num));\n    if (b.length !== 32)\n        throw new Error('Error: expected 32 bytes');\n    return b;\n}\nfunction numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nfunction hexToNumber(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToNumber: expected string, got ' + typeof hex);\n    }\n    return BigInt(`0x${hex}`);\n}\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex' + hex.length);\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nfunction bytesToNumber(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nfunction ensureBytes(hex) {\n    return hex instanceof Uint8Array ? Uint8Array.from(hex) : hexToBytes(hex);\n}\nfunction normalizeScalar(num) {\n    if (typeof num === 'number' && Number.isSafeInteger(num) && num > 0)\n        return BigInt(num);\n    if (typeof num === 'bigint' && isWithinCurveOrder(num))\n        return num;\n    throw new TypeError('Expected valid private scalar: 0 < scalar < curve.n');\n}\nfunction mod(a, b = CURVE.P) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\nfunction pow2(x, power) {\n    const { P } = CURVE;\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= P;\n    }\n    return res;\n}\nfunction sqrtMod(x) {\n    const { P } = CURVE;\n    const _6n = BigInt(6);\n    const _11n = BigInt(11);\n    const _22n = BigInt(22);\n    const _23n = BigInt(23);\n    const _44n = BigInt(44);\n    const _88n = BigInt(88);\n    const b2 = (x * x * x) % P;\n    const b3 = (b2 * b2 * x) % P;\n    const b6 = (pow2(b3, _3n) * b3) % P;\n    const b9 = (pow2(b6, _3n) * b3) % P;\n    const b11 = (pow2(b9, _2n) * b2) % P;\n    const b22 = (pow2(b11, _11n) * b11) % P;\n    const b44 = (pow2(b22, _22n) * b22) % P;\n    const b88 = (pow2(b44, _44n) * b44) % P;\n    const b176 = (pow2(b88, _88n) * b88) % P;\n    const b220 = (pow2(b176, _44n) * b44) % P;\n    const b223 = (pow2(b220, _3n) * b3) % P;\n    const t1 = (pow2(b223, _23n) * b22) % P;\n    const t2 = (pow2(t1, _6n) * b2) % P;\n    const rt = pow2(t2, _2n);\n    const xc = (rt * rt) % P;\n    if (xc !== x)\n        throw new Error('Cannot find square root');\n    return rt;\n}\nfunction invert(number, modulo = CURVE.P) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    let a = mod(number, modulo);\n    let b = modulo;\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\nfunction invertBatch(nums, p = CURVE.P) {\n    const scratch = new Array(nums.length);\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = acc;\n        return mod(acc * num, p);\n    }, _1n);\n    const inverted = invert(lastMultiplied, p);\n    nums.reduceRight((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = mod(acc * scratch[i], p);\n        return mod(acc * num, p);\n    }, inverted);\n    return scratch;\n}\nfunction bits2int_2(bytes) {\n    const delta = bytes.length * 8 - groupLen * 8;\n    const num = bytesToNumber(bytes);\n    return delta > 0 ? num >> BigInt(delta) : num;\n}\nfunction truncateHash(hash, truncateOnly = false) {\n    const h = bits2int_2(hash);\n    if (truncateOnly)\n        return h;\n    const { n } = CURVE;\n    return h >= n ? h - n : h;\n}\nlet _sha256Sync;\nlet _hmacSha256Sync;\nclass HmacDrbg {\n    constructor(hashLen, qByteLen) {\n        this.hashLen = hashLen;\n        this.qByteLen = qByteLen;\n        if (typeof hashLen !== 'number' || hashLen < 2)\n            throw new Error('hashLen must be a number');\n        if (typeof qByteLen !== 'number' || qByteLen < 2)\n            throw new Error('qByteLen must be a number');\n        this.v = new Uint8Array(hashLen).fill(1);\n        this.k = new Uint8Array(hashLen).fill(0);\n        this.counter = 0;\n    }\n    hmac(...values) {\n        return exports.utils.hmacSha256(this.k, ...values);\n    }\n    hmacSync(...values) {\n        return _hmacSha256Sync(this.k, ...values);\n    }\n    checkSync() {\n        if (typeof _hmacSha256Sync !== 'function')\n            throw new ShaError('hmacSha256Sync needs to be set');\n    }\n    incr() {\n        if (this.counter >= 1000)\n            throw new Error('Tried 1,000 k values for sign(), all were invalid');\n        this.counter += 1;\n    }\n    async reseed(seed = new Uint8Array()) {\n        this.k = await this.hmac(this.v, Uint8Array.from([0x00]), seed);\n        this.v = await this.hmac(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = await this.hmac(this.v, Uint8Array.from([0x01]), seed);\n        this.v = await this.hmac(this.v);\n    }\n    reseedSync(seed = new Uint8Array()) {\n        this.checkSync();\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x00]), seed);\n        this.v = this.hmacSync(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x01]), seed);\n        this.v = this.hmacSync(this.v);\n    }\n    async generate() {\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = await this.hmac(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n    generateSync() {\n        this.checkSync();\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = this.hmacSync(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n}\nfunction isWithinCurveOrder(num) {\n    return _0n < num && num < CURVE.n;\n}\nfunction isValidFieldElement(num) {\n    return _0n < num && num < CURVE.P;\n}\nfunction kmdToSig(kBytes, m, d, lowS = true) {\n    const { n } = CURVE;\n    const k = truncateHash(kBytes, true);\n    if (!isWithinCurveOrder(k))\n        return;\n    const kinv = invert(k, n);\n    const q = Point.BASE.multiply(k);\n    const r = mod(q.x, n);\n    if (r === _0n)\n        return;\n    const s = mod(kinv * mod(m + d * r, n), n);\n    if (s === _0n)\n        return;\n    let sig = new Signature(r, s);\n    let recovery = (q.x === sig.r ? 0 : 2) | Number(q.y & _1n);\n    if (lowS && sig.hasHighS()) {\n        sig = sig.normalizeS();\n        recovery ^= 1;\n    }\n    return { sig, recovery };\n}\nfunction normalizePrivateKey(key) {\n    let num;\n    if (typeof key === 'bigint') {\n        num = key;\n    }\n    else if (typeof key === 'number' && Number.isSafeInteger(key) && key > 0) {\n        num = BigInt(key);\n    }\n    else if (typeof key === 'string') {\n        if (key.length !== 2 * groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = hexToNumber(key);\n    }\n    else if (key instanceof Uint8Array) {\n        if (key.length !== groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = bytesToNumber(key);\n    }\n    else {\n        throw new TypeError('Expected valid private key');\n    }\n    if (!isWithinCurveOrder(num))\n        throw new Error('Expected private key: 0 < key < n');\n    return num;\n}\nfunction normalizePublicKey(publicKey) {\n    if (publicKey instanceof Point) {\n        publicKey.assertValidity();\n        return publicKey;\n    }\n    else {\n        return Point.fromHex(publicKey);\n    }\n}\nfunction normalizeSignature(signature) {\n    if (signature instanceof Signature) {\n        signature.assertValidity();\n        return signature;\n    }\n    try {\n        return Signature.fromDER(signature);\n    }\n    catch (error) {\n        return Signature.fromCompact(signature);\n    }\n}\nfunction getPublicKey(privateKey, isCompressed = false) {\n    return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n}\nexports.getPublicKey = getPublicKey;\nfunction recoverPublicKey(msgHash, signature, recovery, isCompressed = false) {\n    return Point.fromSignature(msgHash, signature, recovery).toRawBytes(isCompressed);\n}\nexports.recoverPublicKey = recoverPublicKey;\nfunction isProbPub(item) {\n    const arr = item instanceof Uint8Array;\n    const str = typeof item === 'string';\n    const len = (arr || str) && item.length;\n    if (arr)\n        return len === compressedLen || len === uncompressedLen;\n    if (str)\n        return len === compressedLen * 2 || len === uncompressedLen * 2;\n    if (item instanceof Point)\n        return true;\n    return false;\n}\nfunction getSharedSecret(privateA, publicB, isCompressed = false) {\n    if (isProbPub(privateA))\n        throw new TypeError('getSharedSecret: first arg must be private key');\n    if (!isProbPub(publicB))\n        throw new TypeError('getSharedSecret: second arg must be public key');\n    const b = normalizePublicKey(publicB);\n    b.assertValidity();\n    return b.multiply(normalizePrivateKey(privateA)).toRawBytes(isCompressed);\n}\nexports.getSharedSecret = getSharedSecret;\nfunction bits2int(bytes) {\n    const slice = bytes.length > fieldLen ? bytes.slice(0, fieldLen) : bytes;\n    return bytesToNumber(slice);\n}\nfunction bits2octets(bytes) {\n    const z1 = bits2int(bytes);\n    const z2 = mod(z1, CURVE.n);\n    return int2octets(z2 < _0n ? z1 : z2);\n}\nfunction int2octets(num) {\n    return numTo32b(num);\n}\nfunction initSigArgs(msgHash, privateKey, extraEntropy) {\n    if (msgHash == null)\n        throw new Error(`sign: expected valid message hash, not \"${msgHash}\"`);\n    const h1 = ensureBytes(msgHash);\n    const d = normalizePrivateKey(privateKey);\n    const seedArgs = [int2octets(d), bits2octets(h1)];\n    if (extraEntropy != null) {\n        if (extraEntropy === true)\n            extraEntropy = exports.utils.randomBytes(fieldLen);\n        const e = ensureBytes(extraEntropy);\n        if (e.length !== fieldLen)\n            throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);\n        seedArgs.push(e);\n    }\n    const seed = concatBytes(...seedArgs);\n    const m = bits2int(h1);\n    return { seed, m, d };\n}\nfunction finalizeSig(recSig, opts) {\n    const { sig, recovery } = recSig;\n    const { der, recovered } = Object.assign({ canonical: true, der: true }, opts);\n    const hashed = der ? sig.toDERRawBytes() : sig.toCompactRawBytes();\n    return recovered ? [hashed, recovery] : hashed;\n}\nasync function sign(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    await drbg.reseed(seed);\n    let sig;\n    while (!(sig = kmdToSig(await drbg.generate(), m, d, opts.canonical)))\n        await drbg.reseed();\n    return finalizeSig(sig, opts);\n}\nexports.sign = sign;\nfunction signSync(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    drbg.reseedSync(seed);\n    let sig;\n    while (!(sig = kmdToSig(drbg.generateSync(), m, d, opts.canonical)))\n        drbg.reseedSync();\n    return finalizeSig(sig, opts);\n}\nexports.signSync = signSync;\nconst vopts = { strict: true };\nfunction verify(signature, msgHash, publicKey, opts = vopts) {\n    let sig;\n    try {\n        sig = normalizeSignature(signature);\n        msgHash = ensureBytes(msgHash);\n    }\n    catch (error) {\n        return false;\n    }\n    const { r, s } = sig;\n    if (opts.strict && sig.hasHighS())\n        return false;\n    const h = truncateHash(msgHash);\n    let P;\n    try {\n        P = normalizePublicKey(publicKey);\n    }\n    catch (error) {\n        return false;\n    }\n    const { n } = CURVE;\n    const sinv = invert(s, n);\n    const u1 = mod(h * sinv, n);\n    const u2 = mod(r * sinv, n);\n    const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2);\n    if (!R)\n        return false;\n    const v = mod(R.x, n);\n    return v === r;\n}\nexports.verify = verify;\nfunction schnorrChallengeFinalize(ch) {\n    return mod(bytesToNumber(ch), CURVE.n);\n}\nclass SchnorrSignature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        if (bytes.length !== 64)\n            throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${bytes.length}`);\n        const r = bytesToNumber(bytes.subarray(0, 32));\n        const s = bytesToNumber(bytes.subarray(32, 64));\n        return new SchnorrSignature(r, s);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isValidFieldElement(r) || !isWithinCurveOrder(s))\n            throw new Error('Invalid signature');\n    }\n    toHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n    toRawBytes() {\n        return hexToBytes(this.toHex());\n    }\n}\nfunction schnorrGetPublicKey(privateKey) {\n    return Point.fromPrivateKey(privateKey).toRawX();\n}\nclass InternalSchnorrSignature {\n    constructor(message, privateKey, auxRand = exports.utils.randomBytes()) {\n        if (message == null)\n            throw new TypeError(`sign: Expected valid message, not \"${message}\"`);\n        this.m = ensureBytes(message);\n        const { x, scalar } = this.getScalar(normalizePrivateKey(privateKey));\n        this.px = x;\n        this.d = scalar;\n        this.rand = ensureBytes(auxRand);\n        if (this.rand.length !== 32)\n            throw new TypeError('sign: Expected 32 bytes of aux randomness');\n    }\n    getScalar(priv) {\n        const point = Point.fromPrivateKey(priv);\n        const scalar = point.hasEvenY() ? priv : CURVE.n - priv;\n        return { point, scalar, x: point.toRawX() };\n    }\n    initNonce(d, t0h) {\n        return numTo32b(d ^ bytesToNumber(t0h));\n    }\n    finalizeNonce(k0h) {\n        const k0 = mod(bytesToNumber(k0h), CURVE.n);\n        if (k0 === _0n)\n            throw new Error('sign: Creation of signature failed. k is zero');\n        const { point: R, x: rx, scalar: k } = this.getScalar(k0);\n        return { R, rx, k };\n    }\n    finalizeSig(R, k, e, d) {\n        return new SchnorrSignature(R.x, mod(k + e * d, CURVE.n)).toRawBytes();\n    }\n    error() {\n        throw new Error('sign: Invalid signature produced');\n    }\n    async calc() {\n        const { m, d, px, rand } = this;\n        const tag = exports.utils.taggedHash;\n        const t = this.initNonce(d, await tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(await tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(await tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!(await schnorrVerify(sig, m, px)))\n            this.error();\n        return sig;\n    }\n    calcSync() {\n        const { m, d, px, rand } = this;\n        const tag = exports.utils.taggedHashSync;\n        const t = this.initNonce(d, tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!schnorrVerifySync(sig, m, px))\n            this.error();\n        return sig;\n    }\n}\nasync function schnorrSign(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calc();\n}\nfunction schnorrSignSync(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calcSync();\n}\nfunction initSchnorrVerify(signature, message, publicKey) {\n    const raw = signature instanceof SchnorrSignature;\n    const sig = raw ? signature : SchnorrSignature.fromHex(signature);\n    if (raw)\n        sig.assertValidity();\n    return {\n        ...sig,\n        m: ensureBytes(message),\n        P: normalizePublicKey(publicKey),\n    };\n}\nfunction finalizeSchnorrVerify(r, P, s, e) {\n    const R = Point.BASE.multiplyAndAddUnsafe(P, normalizePrivateKey(s), mod(-e, CURVE.n));\n    if (!R || !R.hasEvenY() || R.x !== r)\n        return false;\n    return true;\n}\nasync function schnorrVerify(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(await exports.utils.taggedHash(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        return false;\n    }\n}\nfunction schnorrVerifySync(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(exports.utils.taggedHashSync(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        if (error instanceof ShaError)\n            throw error;\n        return false;\n    }\n}\nexports.schnorr = {\n    Signature: SchnorrSignature,\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    signSync: schnorrSignSync,\n    verifySync: schnorrVerifySync,\n};\nPoint.BASE._setWindowSize(8);\nconst crypto = {\n    node: nodeCrypto,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\nconst TAGS = {\n    challenge: 'BIP0340/challenge',\n    aux: 'BIP0340/aux',\n    nonce: 'BIP0340/nonce',\n};\nconst TAGGED_HASH_PREFIXES = {};\nexports.utils = {\n    bytesToHex,\n    hexToBytes,\n    concatBytes,\n    mod,\n    invert,\n    isValidPrivateKey(privateKey) {\n        try {\n            normalizePrivateKey(privateKey);\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    },\n    _bigintTo32Bytes: numTo32b,\n    _normalizePrivateKey: normalizePrivateKey,\n    hashToPrivateKey: (hash) => {\n        hash = ensureBytes(hash);\n        const minLen = groupLen + 8;\n        if (hash.length < minLen || hash.length > 1024) {\n            throw new Error(`Expected valid bytes of private key as per FIPS 186`);\n        }\n        const num = mod(bytesToNumber(hash), CURVE.n - _1n) + _1n;\n        return numTo32b(num);\n    },\n    randomBytes: (bytesLength = 32) => {\n        if (crypto.web) {\n            return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n        }\n        else if (crypto.node) {\n            const { randomBytes } = crypto.node;\n            return Uint8Array.from(randomBytes(bytesLength));\n        }\n        else {\n            throw new Error(\"The environment doesn't have randomBytes function\");\n        }\n    },\n    randomPrivateKey: () => exports.utils.hashToPrivateKey(exports.utils.randomBytes(groupLen + 8)),\n    precompute(windowSize = 8, point = Point.BASE) {\n        const cached = point === Point.BASE ? point : new Point(point.x, point.y);\n        cached._setWindowSize(windowSize);\n        cached.multiply(_3n);\n        return cached;\n    },\n    sha256: async (...messages) => {\n        if (crypto.web) {\n            const buffer = await crypto.web.subtle.digest('SHA-256', concatBytes(...messages));\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHash } = crypto.node;\n            const hash = createHash('sha256');\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have sha256 function\");\n        }\n    },\n    hmacSha256: async (key, ...messages) => {\n        if (crypto.web) {\n            const ckey = await crypto.web.subtle.importKey('raw', key, { name: 'HMAC', hash: { name: 'SHA-256' } }, false, ['sign']);\n            const message = concatBytes(...messages);\n            const buffer = await crypto.web.subtle.sign('HMAC', ckey, message);\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHmac } = crypto.node;\n            const hash = createHmac('sha256', key);\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have hmac-sha256 function\");\n        }\n    },\n    sha256Sync: undefined,\n    hmacSha256Sync: undefined,\n    taggedHash: async (tag, ...messages) => {\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = await exports.utils.sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return exports.utils.sha256(tagP, ...messages);\n    },\n    taggedHashSync: (tag, ...messages) => {\n        if (typeof _sha256Sync !== 'function')\n            throw new ShaError('sha256Sync is undefined, you need to set it');\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = _sha256Sync(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return _sha256Sync(tagP, ...messages);\n    },\n    _JacobianPoint: JacobianPoint,\n};\nObject.defineProperties(exports.utils, {\n    sha256Sync: {\n        configurable: false,\n        get() {\n            return _sha256Sync;\n        },\n        set(val) {\n            if (!_sha256Sync)\n                _sha256Sync = val;\n        },\n    },\n    hmacSha256Sync: {\n        configurable: false,\n        get() {\n            return _hmacSha256Sync;\n        },\n        set(val) {\n            if (!_hmacSha256Sync)\n                _hmacSha256Sync = val;\n        },\n    },\n});\n","\"use strict\";\n//  NOTICE\n//  Copyright 2015 D2L Corporation\n//\n//  Licensed under the Apache License, Version 2.0 (the \"License\");\n//  you may not use this file except in compliance with the License.\n//  You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n//  Unless required by applicable law or agreed to in writing, software\n//  distributed under the License is distributed on an \"AS IS\" BASIS,\n//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n//  See the License for the specific language governing permissions and\n//  limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.joseToDer = exports.derToJose = void 0;\n// The following code is adapted from https://github.com/Brightspace/node-ecdsa-sig-formatter\nconst base64_js_1 = require(\"base64-js\");\nconst base64Url_1 = require(\"./base64Url\");\nfunction getParamSize(keySize) {\n    return ((keySize / 8) | 0) + (keySize % 8 === 0 ? 0 : 1);\n}\nconst paramBytesForAlg = {\n    ES256: getParamSize(256),\n    ES384: getParamSize(384),\n    ES512: getParamSize(521),\n};\nfunction getParamBytesForAlg(alg) {\n    const paramBytes = paramBytesForAlg[alg];\n    if (paramBytes) {\n        return paramBytes;\n    }\n    throw new Error(`Unknown algorithm \"${alg}\"`);\n}\nconst MAX_OCTET = 0x80;\nconst CLASS_UNIVERSAL = 0;\nconst PRIMITIVE_BIT = 0x20;\nconst TAG_SEQ = 0x10;\nconst TAG_INT = 0x02;\nconst ENCODED_TAG_SEQ = TAG_SEQ | PRIMITIVE_BIT | (CLASS_UNIVERSAL << 6);\nconst ENCODED_TAG_INT = TAG_INT | (CLASS_UNIVERSAL << 6);\nfunction signatureAsBytes(signature) {\n    if (signature instanceof Uint8Array) {\n        return signature;\n    }\n    else if ('string' === typeof signature) {\n        return (0, base64_js_1.toByteArray)((0, base64Url_1.pad)(signature));\n    }\n    throw new TypeError('ECDSA signature must be a Base64 string or a Uint8Array');\n}\nfunction derToJose(signature, alg) {\n    const signatureBytes = signatureAsBytes(signature);\n    const paramBytes = getParamBytesForAlg(alg);\n    // the DER encoded param should at most be the param size, plus a padding\n    // zero, since due to being a signed integer\n    const maxEncodedParamLength = paramBytes + 1;\n    const inputLength = signatureBytes.length;\n    let offset = 0;\n    if (signatureBytes[offset++] !== ENCODED_TAG_SEQ) {\n        throw new Error('Could not find expected \"seq\"');\n    }\n    let seqLength = signatureBytes[offset++];\n    if (seqLength === (MAX_OCTET | 1)) {\n        seqLength = signatureBytes[offset++];\n    }\n    if (inputLength - offset < seqLength) {\n        throw new Error(`\"seq\" specified length of \"${seqLength}\", only \"${inputLength - offset}\" remaining`);\n    }\n    if (signatureBytes[offset++] !== ENCODED_TAG_INT) {\n        throw new Error('Could not find expected \"int\" for \"r\"');\n    }\n    const rLength = signatureBytes[offset++];\n    if (inputLength - offset - 2 < rLength) {\n        throw new Error(`\"r\" specified length of \"${rLength}\", only \"${inputLength - offset - 2}\" available`);\n    }\n    if (maxEncodedParamLength < rLength) {\n        throw new Error(`\"r\" specified length of \"${rLength}\", max of \"${maxEncodedParamLength}\" is acceptable`);\n    }\n    const rOffset = offset;\n    offset += rLength;\n    if (signatureBytes[offset++] !== ENCODED_TAG_INT) {\n        throw new Error('Could not find expected \"int\" for \"s\"');\n    }\n    const sLength = signatureBytes[offset++];\n    if (inputLength - offset !== sLength) {\n        throw new Error(`\"s\" specified length of \"${sLength}\", expected \"${inputLength - offset}\"`);\n    }\n    if (maxEncodedParamLength < sLength) {\n        throw new Error(`\"s\" specified length of \"${sLength}\", max of \"${maxEncodedParamLength}\" is acceptable`);\n    }\n    const sOffset = offset;\n    offset += sLength;\n    if (offset !== inputLength) {\n        throw new Error(`Expected to consume entire array, but \"${inputLength - offset}\" bytes remain`);\n    }\n    const rPadding = paramBytes - rLength;\n    const sPadding = paramBytes - sLength;\n    const dst = new Uint8Array(rPadding + rLength + sPadding + sLength);\n    for (offset = 0; offset < rPadding; ++offset) {\n        dst[offset] = 0;\n    }\n    dst.set(signatureBytes.subarray(rOffset + Math.max(-rPadding, 0), rOffset + rLength), offset);\n    offset = paramBytes;\n    for (const o = offset; offset < o + sPadding; ++offset) {\n        dst[offset] = 0;\n    }\n    dst.set(signatureBytes.subarray(sOffset + Math.max(-sPadding, 0), sOffset + sLength), offset);\n    return (0, base64Url_1.escape)((0, base64_js_1.fromByteArray)(dst));\n}\nexports.derToJose = derToJose;\nfunction countPadding(buf, start, stop) {\n    let padding = 0;\n    while (start + padding < stop && buf[start + padding] === 0) {\n        ++padding;\n    }\n    const needsSign = buf[start + padding] >= MAX_OCTET;\n    if (needsSign) {\n        --padding;\n    }\n    return padding;\n}\nfunction joseToDer(signature, alg) {\n    signature = signatureAsBytes(signature);\n    const paramBytes = getParamBytesForAlg(alg);\n    const signatureBytes = signature.length;\n    if (signatureBytes !== paramBytes * 2) {\n        throw new TypeError(`\"${alg}\" signatures must be \"${paramBytes * 2}\" bytes, saw \"${signatureBytes}\"`);\n    }\n    const rPadding = countPadding(signature, 0, paramBytes);\n    const sPadding = countPadding(signature, paramBytes, signature.length);\n    const rLength = paramBytes - rPadding;\n    const sLength = paramBytes - sPadding;\n    const rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;\n    const shortLength = rsBytes < MAX_OCTET;\n    const dst = new Uint8Array((shortLength ? 2 : 3) + rsBytes);\n    let offset = 0;\n    dst[offset++] = ENCODED_TAG_SEQ;\n    if (shortLength) {\n        // Bit 8 has value \"0\"\n        // bits 7-1 give the length.\n        dst[offset++] = rsBytes;\n    }\n    else {\n        // Bit 8 of first octet has value \"1\"\n        // bits 7-1 give the number of additional length octets.\n        dst[offset++] = MAX_OCTET | 1;\n        // length, base 256\n        dst[offset++] = rsBytes & 0xff;\n    }\n    dst[offset++] = ENCODED_TAG_INT;\n    dst[offset++] = rLength;\n    if (rPadding < 0) {\n        dst[offset++] = 0;\n        dst.set(signature.subarray(0, paramBytes), offset);\n        offset += paramBytes;\n    }\n    else {\n        dst.set(signature.subarray(rPadding, paramBytes), offset);\n        offset += paramBytes - rPadding;\n    }\n    dst[offset++] = ENCODED_TAG_INT;\n    dst[offset++] = sLength;\n    if (sPadding < 0) {\n        dst[offset++] = 0;\n        dst.set(signature.subarray(paramBytes), offset);\n    }\n    else {\n        dst.set(signature.subarray(paramBytes + sPadding), offset);\n    }\n    return dst;\n}\nexports.joseToDer = joseToDer;\n//# sourceMappingURL=ecdsaSigFormatter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvalidTokenError = exports.MissingParametersError = void 0;\nclass MissingParametersError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'MissingParametersError';\n        this.message = message || '';\n    }\n}\nexports.MissingParametersError = MissingParametersError;\nclass InvalidTokenError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'InvalidTokenError';\n        this.message = message || '';\n    }\n}\nexports.InvalidTokenError = InvalidTokenError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SECP256K1Client = void 0;\nconst hmac_1 = require(\"@noble/hashes/hmac\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst secp = require(\"@noble/secp256k1\");\nconst ecdsaSigFormatter_1 = require(\"../ecdsaSigFormatter\");\nconst errors_1 = require(\"../errors\");\nconst utils_1 = require(\"@noble/hashes/utils\");\n// required to use noble secp https://github.com/paulmillr/noble-secp256k1\nsecp.utils.hmacSha256Sync = (key, ...msgs) => {\n    const h = hmac_1.hmac.create(sha256_1.sha256, key);\n    msgs.forEach(msg => h.update(msg));\n    return h.digest();\n};\nclass SECP256K1Client {\n    static derivePublicKey(privateKey, compressed = true) {\n        if (privateKey.length === 66) {\n            privateKey = privateKey.slice(0, 64);\n        }\n        if (privateKey.length < 64) {\n            // backward compatibly accept too short private keys\n            privateKey = privateKey.padStart(64, '0');\n        }\n        return (0, utils_1.bytesToHex)(secp.getPublicKey(privateKey, compressed));\n    }\n    static signHash(signingInputHash, privateKey, format = 'jose') {\n        // make sure the required parameters are provided\n        if (!signingInputHash || !privateKey) {\n            throw new errors_1.MissingParametersError('a signing input hash and private key are all required');\n        }\n        const derSignature = secp.signSync(signingInputHash, privateKey.slice(0, 64), {\n            der: true,\n            canonical: false,\n        });\n        if (format === 'der')\n            return (0, utils_1.bytesToHex)(derSignature);\n        if (format === 'jose')\n            return (0, ecdsaSigFormatter_1.derToJose)(derSignature, 'ES256');\n        throw Error('Invalid signature format');\n    }\n    static loadSignature(joseSignature) {\n        // create and return the DER-formatted signature bytes\n        return (0, ecdsaSigFormatter_1.joseToDer)(joseSignature, 'ES256');\n    }\n    static verifyHash(signingInputHash, derSignatureBytes, publicKey) {\n        // make sure the required parameters are provided\n        if (!signingInputHash || !derSignatureBytes || !publicKey) {\n            throw new errors_1.MissingParametersError('a signing input hash, der signature, and public key are all required');\n        }\n        return secp.verify(derSignatureBytes, signingInputHash, publicKey, { strict: false });\n    }\n}\nexports.SECP256K1Client = SECP256K1Client;\nSECP256K1Client.algorithmName = 'ES256K';\n//# sourceMappingURL=secp256k1.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cryptoClients = exports.SECP256K1Client = void 0;\nconst secp256k1_1 = require(\"./secp256k1\");\nObject.defineProperty(exports, \"SECP256K1Client\", { enumerable: true, get: function () { return secp256k1_1.SECP256K1Client; } });\nconst cryptoClients = {\n    ES256K: secp256k1_1.SECP256K1Client,\n};\nexports.cryptoClients = cryptoClients;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hashSha256Async = exports.hashSha256 = void 0;\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nfunction hashSha256(input) {\n    return (0, sha256_1.sha256)(input);\n}\nexports.hashSha256 = hashSha256;\nfunction hashSha256Async(input) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const isSubtleCryptoAvailable = typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n            if (isSubtleCryptoAvailable) {\n                // Use the W3C Web Crypto API if available (running in a web browser).\n                const bytes = typeof input === 'string' ? new TextEncoder().encode(input) : input;\n                const hash = yield crypto.subtle.digest('SHA-256', bytes);\n                return new Uint8Array(hash);\n            }\n            else {\n                // Otherwise try loading the Node.js `crypto` module (running in Node.js, or an older browser with a polyfill).\n                const nodeCrypto = require('crypto');\n                if (!nodeCrypto.createHash) {\n                    throw new Error('`crypto` module does not contain `createHash`');\n                }\n                return Promise.resolve(nodeCrypto.createHash('sha256').update(input).digest());\n            }\n        }\n        catch (error) {\n            console.log(error);\n            console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, ' +\n                'nor the or the Node.js `require(\"crypto\").createHash` module is available. ' +\n                'Falling back to JS implementation.');\n            return Promise.resolve(hashSha256(input));\n        }\n    });\n}\nexports.hashSha256Async = hashSha256Async;\n//# sourceMappingURL=sha256.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenSigner = exports.createUnsecuredToken = void 0;\nconst base64url = require(\"./base64Url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nfunction createSigningInput(payload, header) {\n    const tokenParts = [];\n    // add in the header\n    const encodedHeader = base64url.encode(JSON.stringify(header));\n    tokenParts.push(encodedHeader);\n    // add in the payload\n    const encodedPayload = base64url.encode(JSON.stringify(payload));\n    tokenParts.push(encodedPayload);\n    // prepare the message\n    const signingInput = tokenParts.join('.');\n    // return the signing input\n    return signingInput;\n}\nfunction createUnsecuredToken(payload) {\n    const header = { typ: 'JWT', alg: 'none' };\n    return createSigningInput(payload, header) + '.';\n}\nexports.createUnsecuredToken = createUnsecuredToken;\nclass TokenSigner {\n    constructor(signingAlgorithm, rawPrivateKey) {\n        if (!(signingAlgorithm && rawPrivateKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and private key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw new Error('signing algorithm parameter must be a string');\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw new Error('invalid signing algorithm');\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPrivateKey = rawPrivateKey;\n    }\n    header(header = {}) {\n        const defaultHeader = { typ: this.tokenType, alg: this.cryptoClient.algorithmName };\n        return Object.assign({}, defaultHeader, header);\n    }\n    sign(payload, expanded = false, customHeader = {}) {\n        // generate the token header\n        const header = this.header(customHeader);\n        // prepare the message to be signed\n        const signingInput = createSigningInput(payload, header);\n        const signingInputHash = (0, sha256_1.hashSha256)(signingInput);\n        return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n    }\n    signAsync(payload, expanded = false, customHeader = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // generate the token header\n            const header = this.header(customHeader);\n            // prepare the message to be signed\n            const signingInput = createSigningInput(payload, header);\n            const signingInputHash = yield (0, sha256_1.hashSha256Async)(signingInput);\n            return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n        });\n    }\n    createWithSignedHash(payload, expanded, header, signingInput, signingInputHash) {\n        // sign the message and add in the signature\n        const signature = this.cryptoClient.signHash(signingInputHash, this.rawPrivateKey);\n        if (expanded) {\n            const signedToken = {\n                header: [base64url.encode(JSON.stringify(header))],\n                payload: JSON.stringify(payload),\n                signature: [signature],\n            };\n            return signedToken;\n        }\n        else {\n            return [signingInput, signature].join('.');\n        }\n    }\n}\nexports.TokenSigner = TokenSigner;\n//# sourceMappingURL=signer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenVerifier = void 0;\nconst base64url = require(\"./base64Url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nclass TokenVerifier {\n    constructor(signingAlgorithm, rawPublicKey) {\n        if (!(signingAlgorithm && rawPublicKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and public key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw 'signing algorithm parameter must be a string';\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw 'invalid signing algorithm';\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPublicKey = rawPublicKey;\n    }\n    verify(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, false);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, false);\n        }\n        else {\n            return false;\n        }\n    }\n    verifyAsync(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, true);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, true);\n        }\n        else {\n            return Promise.resolve(false);\n        }\n    }\n    verifyCompact(token, async) {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        // calculate the signing input hash\n        const signingInput = tokenParts[0] + '.' + tokenParts[1];\n        const performVerify = (signingInputHash) => {\n            // extract the signature as a DER array\n            const derSignatureBytes = this.cryptoClient.loadSignature(tokenParts[2]);\n            // verify the signed hash\n            return this.cryptoClient.verifyHash(signingInputHash, derSignatureBytes, this.rawPublicKey);\n        };\n        if (async) {\n            return (0, sha256_1.hashSha256Async)(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = (0, sha256_1.hashSha256)(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n    verifyExpanded(token, async) {\n        const signingInput = [token['header'].join('.'), base64url.encode(token['payload'])].join('.');\n        let verified = true;\n        const performVerify = (signingInputHash) => {\n            token['signature'].map((signature) => {\n                const derSignatureBytes = this.cryptoClient.loadSignature(signature);\n                const signatureVerified = this.cryptoClient.verifyHash(signingInputHash, derSignatureBytes, this.rawPublicKey);\n                if (!signatureVerified) {\n                    verified = false;\n                }\n            });\n            return verified;\n        };\n        if (async) {\n            return (0, sha256_1.hashSha256Async)(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = (0, sha256_1.hashSha256)(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n}\nexports.TokenVerifier = TokenVerifier;\n//# sourceMappingURL=verifier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeToken = void 0;\nconst base64url = require(\"./base64Url\");\nfunction decodeToken(token) {\n    if (typeof token === 'string') {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        const header = JSON.parse(base64url.decode(tokenParts[0]));\n        const payload = JSON.parse(base64url.decode(tokenParts[1]));\n        const signature = tokenParts[2];\n        // return the token object\n        return {\n            header: header,\n            payload: payload,\n            signature: signature,\n        };\n    }\n    else if (typeof token === 'object') {\n        if (typeof token.payload !== 'string') {\n            throw new Error('Expected token payload to be a base64 or json string');\n        }\n        let payload = token.payload;\n        if (token.payload[0] !== '{') {\n            payload = base64url.decode(payload);\n        }\n        const allHeaders = [];\n        token.header.map((headerValue) => {\n            const header = JSON.parse(base64url.decode(headerValue));\n            allHeaders.push(header);\n        });\n        return {\n            header: allHeaders,\n            payload: JSON.parse(payload),\n            signature: token.signature,\n        };\n    }\n}\nexports.decodeToken = decodeToken;\n//# sourceMappingURL=decode.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./signer\"), exports);\n__exportStar(require(\"./verifier\"), exports);\n__exportStar(require(\"./decode\"), exports);\n__exportStar(require(\"./errors\"), exports);\n__exportStar(require(\"./cryptoClients\"), exports);\n//# sourceMappingURL=index.js.map","// src/types.ts\nimport * as v from \"valibot\";\nvar BitcoinNetworkType = /* @__PURE__ */ ((BitcoinNetworkType3) => {\n  BitcoinNetworkType3[\"Mainnet\"] = \"Mainnet\";\n  BitcoinNetworkType3[\"Testnet\"] = \"Testnet\";\n  BitcoinNetworkType3[\"Signet\"] = \"Signet\";\n  return BitcoinNetworkType3;\n})(BitcoinNetworkType || {});\nvar RpcIdSchema = v.optional(v.union([v.string(), v.number(), v.null()]));\nvar rpcRequestMessageSchema = v.object({\n  jsonrpc: v.literal(\"2.0\"),\n  method: v.string(),\n  params: v.optional(\n    v.union([\n      v.array(v.unknown()),\n      v.looseObject({}),\n      // Note: This is to support current incorrect usage of RPC 2.0. Params need\n      // to be either an array or an object when provided. Changing this now would\n      // be a breaking change, so accepting null values for now. Tracking in\n      // https://linear.app/xverseapp/issue/ENG-4538.\n      v.null()\n    ])\n  ),\n  id: RpcIdSchema\n});\nvar RpcErrorCode = /* @__PURE__ */ ((RpcErrorCode2) => {\n  RpcErrorCode2[RpcErrorCode2[\"PARSE_ERROR\"] = -32700] = \"PARSE_ERROR\";\n  RpcErrorCode2[RpcErrorCode2[\"INVALID_REQUEST\"] = -32600] = \"INVALID_REQUEST\";\n  RpcErrorCode2[RpcErrorCode2[\"METHOD_NOT_FOUND\"] = -32601] = \"METHOD_NOT_FOUND\";\n  RpcErrorCode2[RpcErrorCode2[\"INVALID_PARAMS\"] = -32602] = \"INVALID_PARAMS\";\n  RpcErrorCode2[RpcErrorCode2[\"INTERNAL_ERROR\"] = -32603] = \"INTERNAL_ERROR\";\n  RpcErrorCode2[RpcErrorCode2[\"USER_REJECTION\"] = -32e3] = \"USER_REJECTION\";\n  RpcErrorCode2[RpcErrorCode2[\"METHOD_NOT_SUPPORTED\"] = -32001] = \"METHOD_NOT_SUPPORTED\";\n  RpcErrorCode2[RpcErrorCode2[\"ACCESS_DENIED\"] = -32002] = \"ACCESS_DENIED\";\n  return RpcErrorCode2;\n})(RpcErrorCode || {});\nvar rpcSuccessResponseMessageSchema = v.object({\n  jsonrpc: v.literal(\"2.0\"),\n  result: v.nonOptional(v.unknown()),\n  id: RpcIdSchema\n});\nvar rpcErrorResponseMessageSchema = v.object({\n  jsonrpc: v.literal(\"2.0\"),\n  error: v.nonOptional(v.unknown()),\n  id: RpcIdSchema\n});\nvar rpcResponseMessageSchema = v.union([\n  rpcSuccessResponseMessageSchema,\n  rpcErrorResponseMessageSchema\n]);\n\n// src/runes/api.ts\nimport axios from \"axios\";\nvar urlNetworkSuffix = {\n  [\"Mainnet\" /* Mainnet */]: \"\",\n  [\"Testnet\" /* Testnet */]: \"-testnet\",\n  [\"Signet\" /* Signet */]: \"-signet\"\n};\nvar ORDINALS_API_BASE_URL = (network = \"Mainnet\" /* Mainnet */) => `https://ordinals${urlNetworkSuffix[network]}.xverse.app/v1`;\nvar RunesApi = class {\n  client;\n  constructor(network) {\n    this.client = axios.create({\n      baseURL: ORDINALS_API_BASE_URL(network)\n    });\n  }\n  parseError = (error) => {\n    return {\n      code: error.response?.status,\n      message: JSON.stringify(error.response?.data)\n    };\n  };\n  estimateMintCost = async (mintParams) => {\n    try {\n      const response = await this.client.post(\"/runes/mint/estimate\", {\n        ...mintParams\n      });\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n  estimateEtchCost = async (etchParams) => {\n    try {\n      const response = await this.client.post(\"/runes/etch/estimate\", {\n        ...etchParams\n      });\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n  createMintOrder = async (mintOrderParams) => {\n    try {\n      const response = await this.client.post(\"/runes/mint/orders\", {\n        ...mintOrderParams\n      });\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n  createEtchOrder = async (etchOrderParams) => {\n    try {\n      const response = await this.client.post(\"/runes/etch/orders\", {\n        ...etchOrderParams\n      });\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n  executeMint = async (orderId, fundTransactionId) => {\n    try {\n      const response = await this.client.post(`/runes/mint/orders/${orderId}/execute`, {\n        fundTransactionId\n      });\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n  executeEtch = async (orderId, fundTransactionId) => {\n    try {\n      const response = await this.client.post(`/runes/etch/orders/${orderId}/execute`, {\n        fundTransactionId\n      });\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n  getOrder = async (orderId) => {\n    try {\n      const response = await this.client.get(`/orders/${orderId}`);\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n  rbfOrder = async (rbfRequest) => {\n    const { orderId, newFeeRate } = rbfRequest;\n    try {\n      const response = await this.client.post(`/orders/${orderId}/rbf-estimate`, {\n        newFeeRate\n      });\n      return {\n        data: response.data\n      };\n    } catch (error) {\n      const err = error;\n      return {\n        error: this.parseError(err)\n      };\n    }\n  };\n};\nvar clients = {};\nvar getRunesApiClient = (network = \"Mainnet\" /* Mainnet */) => {\n  if (!clients[network]) {\n    clients[network] = new RunesApi(network);\n  }\n  return clients[network];\n};\n\n// src/adapters/satsConnectAdapter.ts\nvar SatsConnectAdapter = class {\n  async mintRunes(params) {\n    try {\n      const walletInfo = await this.requestInternal(\"getInfo\", null).catch(() => null);\n      if (walletInfo && walletInfo.status === \"success\") {\n        const isMintSupported = walletInfo.result.methods?.includes(\"runes_mint\");\n        if (isMintSupported) {\n          const response = await this.requestInternal(\"runes_mint\", params);\n          if (response) {\n            if (response.status === \"success\") {\n              return response;\n            }\n            if (response.status === \"error\" && response.error.code !== -32601 /* METHOD_NOT_FOUND */) {\n              return response;\n            }\n          }\n        }\n      }\n      const mintRequest = {\n        destinationAddress: params.destinationAddress,\n        feeRate: params.feeRate,\n        refundAddress: params.refundAddress,\n        repeats: params.repeats,\n        runeName: params.runeName,\n        appServiceFee: params.appServiceFee,\n        appServiceFeeAddress: params.appServiceFeeAddress\n      };\n      const orderResponse = await new RunesApi(params.network).createMintOrder(mintRequest);\n      if (!orderResponse.data) {\n        return {\n          status: \"error\",\n          error: {\n            code: orderResponse.error.code === 400 ? -32600 /* INVALID_REQUEST */ : -32603 /* INTERNAL_ERROR */,\n            message: orderResponse.error.message\n          }\n        };\n      }\n      const paymentResponse = await this.requestInternal(\"sendTransfer\", {\n        recipients: [\n          {\n            address: orderResponse.data.fundAddress,\n            amount: orderResponse.data.fundAmount\n          }\n        ]\n      });\n      if (paymentResponse.status !== \"success\") {\n        return paymentResponse;\n      }\n      await new RunesApi(params.network).executeMint(\n        orderResponse.data.orderId,\n        paymentResponse.result.txid\n      );\n      return {\n        status: \"success\",\n        result: {\n          orderId: orderResponse.data.orderId,\n          fundTransactionId: paymentResponse.result.txid,\n          fundingAddress: orderResponse.data.fundAddress\n        }\n      };\n    } catch (error) {\n      return {\n        status: \"error\",\n        error: {\n          code: -32603 /* INTERNAL_ERROR */,\n          message: error.message\n        }\n      };\n    }\n  }\n  async etchRunes(params) {\n    const etchRequest = {\n      destinationAddress: params.destinationAddress,\n      refundAddress: params.refundAddress,\n      feeRate: params.feeRate,\n      runeName: params.runeName,\n      divisibility: params.divisibility,\n      symbol: params.symbol,\n      premine: params.premine,\n      isMintable: params.isMintable,\n      terms: params.terms,\n      inscriptionDetails: params.inscriptionDetails,\n      delegateInscriptionId: params.delegateInscriptionId,\n      appServiceFee: params.appServiceFee,\n      appServiceFeeAddress: params.appServiceFeeAddress\n    };\n    try {\n      const walletInfo = await this.requestInternal(\"getInfo\", null).catch(() => null);\n      if (walletInfo && walletInfo.status === \"success\") {\n        const isEtchSupported = walletInfo.result.methods?.includes(\"runes_etch\");\n        if (isEtchSupported) {\n          const response = await this.requestInternal(\"runes_etch\", params);\n          if (response) {\n            if (response.status === \"success\") {\n              return response;\n            }\n            if (response.status === \"error\" && response.error.code !== -32601 /* METHOD_NOT_FOUND */) {\n              return response;\n            }\n          }\n        }\n      }\n      const orderResponse = await new RunesApi(params.network).createEtchOrder(etchRequest);\n      if (!orderResponse.data) {\n        return {\n          status: \"error\",\n          error: {\n            code: orderResponse.error.code === 400 ? -32600 /* INVALID_REQUEST */ : -32603 /* INTERNAL_ERROR */,\n            message: orderResponse.error.message\n          }\n        };\n      }\n      const paymentResponse = await this.requestInternal(\"sendTransfer\", {\n        recipients: [\n          {\n            address: orderResponse.data.fundAddress,\n            amount: orderResponse.data.fundAmount\n          }\n        ]\n      });\n      if (paymentResponse.status !== \"success\") {\n        return paymentResponse;\n      }\n      await new RunesApi(params.network).executeEtch(\n        orderResponse.data.orderId,\n        paymentResponse.result.txid\n      );\n      return {\n        status: \"success\",\n        result: {\n          orderId: orderResponse.data.orderId,\n          fundTransactionId: paymentResponse.result.txid,\n          fundingAddress: orderResponse.data.fundAddress\n        }\n      };\n    } catch (error) {\n      return {\n        status: \"error\",\n        error: {\n          code: -32603 /* INTERNAL_ERROR */,\n          message: error.message\n        }\n      };\n    }\n  }\n  async estimateMint(params) {\n    const estimateMintRequest = {\n      destinationAddress: params.destinationAddress,\n      feeRate: params.feeRate,\n      repeats: params.repeats,\n      runeName: params.runeName,\n      appServiceFee: params.appServiceFee,\n      appServiceFeeAddress: params.appServiceFeeAddress\n    };\n    const response = await getRunesApiClient(\n      params.network\n    ).estimateMintCost(estimateMintRequest);\n    if (response.data) {\n      return {\n        status: \"success\",\n        result: response.data\n      };\n    }\n    return {\n      status: \"error\",\n      error: {\n        code: response.error.code === 400 ? -32600 /* INVALID_REQUEST */ : -32603 /* INTERNAL_ERROR */,\n        message: response.error.message\n      }\n    };\n  }\n  async estimateEtch(params) {\n    const estimateEtchRequest = {\n      destinationAddress: params.destinationAddress,\n      feeRate: params.feeRate,\n      runeName: params.runeName,\n      divisibility: params.divisibility,\n      symbol: params.symbol,\n      premine: params.premine,\n      isMintable: params.isMintable,\n      terms: params.terms,\n      inscriptionDetails: params.inscriptionDetails,\n      delegateInscriptionId: params.delegateInscriptionId,\n      appServiceFee: params.appServiceFee,\n      appServiceFeeAddress: params.appServiceFeeAddress\n    };\n    const response = await getRunesApiClient(params.network).estimateEtchCost(estimateEtchRequest);\n    if (response.data) {\n      return {\n        status: \"success\",\n        result: response.data\n      };\n    }\n    return {\n      status: \"error\",\n      error: {\n        code: response.error.code === 400 ? -32600 /* INVALID_REQUEST */ : -32603 /* INTERNAL_ERROR */,\n        message: response.error.message\n      }\n    };\n  }\n  async getOrder(params) {\n    const response = await getRunesApiClient(params.network).getOrder(params.id);\n    if (response.data) {\n      return {\n        status: \"success\",\n        result: response.data\n      };\n    }\n    return {\n      status: \"error\",\n      error: {\n        code: response.error.code === 400 || response.error.code === 404 ? -32600 /* INVALID_REQUEST */ : -32603 /* INTERNAL_ERROR */,\n        message: response.error.message\n      }\n    };\n  }\n  async estimateRbfOrder(params) {\n    const rbfOrderRequest = {\n      newFeeRate: params.newFeeRate,\n      orderId: params.orderId\n    };\n    const response = await getRunesApiClient(params.network).rbfOrder(rbfOrderRequest);\n    if (response.data) {\n      return {\n        status: \"success\",\n        result: {\n          fundingAddress: response.data.fundingAddress,\n          rbfCost: response.data.rbfCost\n        }\n      };\n    }\n    return {\n      status: \"error\",\n      error: {\n        code: response.error.code === 400 || response.error.code === 404 ? -32600 /* INVALID_REQUEST */ : -32603 /* INTERNAL_ERROR */,\n        message: response.error.message\n      }\n    };\n  }\n  async rbfOrder(params) {\n    try {\n      const rbfOrderRequest = {\n        newFeeRate: params.newFeeRate,\n        orderId: params.orderId\n      };\n      const orderResponse = await getRunesApiClient(params.network).rbfOrder(rbfOrderRequest);\n      if (!orderResponse.data) {\n        return {\n          status: \"error\",\n          error: {\n            code: orderResponse.error.code === 400 || orderResponse.error.code === 404 ? -32600 /* INVALID_REQUEST */ : -32603 /* INTERNAL_ERROR */,\n            message: orderResponse.error.message\n          }\n        };\n      }\n      const paymentResponse = await this.requestInternal(\"sendTransfer\", {\n        recipients: [\n          {\n            address: orderResponse.data.fundingAddress,\n            amount: orderResponse.data.rbfCost\n          }\n        ]\n      });\n      if (paymentResponse.status !== \"success\") {\n        return paymentResponse;\n      }\n      return {\n        status: \"success\",\n        result: {\n          fundingAddress: orderResponse.data.fundingAddress,\n          orderId: rbfOrderRequest.orderId,\n          fundRBFTransactionId: paymentResponse.result.txid\n        }\n      };\n    } catch (error) {\n      return {\n        status: \"error\",\n        error: {\n          code: -32603 /* INTERNAL_ERROR */,\n          message: error.message\n        }\n      };\n    }\n  }\n  async request(method, params) {\n    switch (method) {\n      case \"runes_mint\":\n        return this.mintRunes(params);\n      case \"runes_etch\":\n        return this.etchRunes(params);\n      case \"runes_estimateMint\":\n        return this.estimateMint(params);\n      case \"runes_estimateEtch\":\n        return this.estimateEtch(params);\n      case \"runes_getOrder\": {\n        return this.getOrder(params);\n      }\n      case \"runes_estimateRbfOrder\": {\n        return this.estimateRbfOrder(params);\n      }\n      case \"runes_rbfOrder\": {\n        return this.rbfOrder(params);\n      }\n      default:\n        return this.requestInternal(method, params);\n    }\n  }\n};\n\n// src/provider/index.ts\nimport omit from \"lodash.omit\";\nasync function getProviderOrThrow(getProvider) {\n  const provider = await getProvider?.() || window.XverseProviders?.BitcoinProvider || window.BitcoinProvider;\n  if (!provider) {\n    throw new Error(\"No Bitcoin wallet installed\");\n  }\n  return provider;\n}\nfunction getProviders() {\n  if (!window.btc_providers)\n    window.btc_providers = [];\n  return window.btc_providers;\n}\nfunction getProviderById(providerId) {\n  return providerId?.split(\".\").reduce((acc, part) => acc?.[part], window);\n}\nfunction isProviderInstalled(providerId) {\n  return !!getProviderById(providerId);\n}\nfunction setDefaultProvider(providerId) {\n  localStorage.setItem(\"sats-connect_defaultProvider\", providerId);\n}\nfunction getDefaultProvider() {\n  return localStorage.getItem(\"sats-connect_defaultProvider\");\n}\nfunction removeDefaultProvider() {\n  localStorage.removeItem(\"sats-connect_defaultProvider\");\n}\nfunction getSupportedWallets() {\n  const btc_providers = getProviders();\n  const allProviders = [...btc_providers];\n  for (const key in omit(DefaultAdaptersInfo, [\"xverse\"])) {\n    allProviders.push(DefaultAdaptersInfo[key]);\n  }\n  const wallets = allProviders.map((provider) => {\n    {\n      return {\n        ...provider,\n        isInstalled: isProviderInstalled(provider.id)\n      };\n    }\n  });\n  return wallets;\n}\n\n// src/request/index.ts\nimport * as v8 from \"valibot\";\n\n// src/addresses/index.ts\nimport { createUnsecuredToken } from \"jsontokens\";\n\n// src/addresses/types.ts\nimport * as v2 from \"valibot\";\nvar AddressPurpose = /* @__PURE__ */ ((AddressPurpose2) => {\n  AddressPurpose2[\"Ordinals\"] = \"ordinals\";\n  AddressPurpose2[\"Payment\"] = \"payment\";\n  AddressPurpose2[\"Stacks\"] = \"stacks\";\n  return AddressPurpose2;\n})(AddressPurpose || {});\nvar AddressType = /* @__PURE__ */ ((AddressType3) => {\n  AddressType3[\"p2pkh\"] = \"p2pkh\";\n  AddressType3[\"p2sh\"] = \"p2sh\";\n  AddressType3[\"p2wpkh\"] = \"p2wpkh\";\n  AddressType3[\"p2wsh\"] = \"p2wsh\";\n  AddressType3[\"p2tr\"] = \"p2tr\";\n  AddressType3[\"stacks\"] = \"stacks\";\n  return AddressType3;\n})(AddressType || {});\nvar addressSchema = v2.object({\n  address: v2.string(),\n  publicKey: v2.string(),\n  purpose: v2.enum(AddressPurpose),\n  addressType: v2.enum(AddressType)\n});\n\n// src/addresses/index.ts\nvar getAddress = async (options) => {\n  const provider = await getProviderOrThrow(options.getProvider);\n  const { purposes } = options.payload;\n  if (!purposes) {\n    throw new Error(\"Address purposes are required\");\n  }\n  try {\n    const request2 = createUnsecuredToken(options.payload);\n    const response = await provider.connect(request2);\n    options.onFinish?.(response);\n  } catch (error) {\n    console.error(\"[Connect] Error during address request\", error);\n    options.onCancel?.();\n  }\n};\n\n// src/request/types/stxMethods.ts\nimport * as v3 from \"valibot\";\nvar stxGetAddressesMethodName = \"stx_getAddresses\";\nvar stxGetAddressesParamsSchema = v3.nullish(\n  v3.object({\n    /**\n     * A message to be displayed to the user in the request prompt.\n     */\n    message: v3.optional(v3.string())\n  })\n);\nvar stxGetAddressesResultSchema = v3.object({\n  /**\n   * The addresses generated for the given purposes.\n   */\n  addresses: v3.array(addressSchema)\n});\nvar stxGetAddressesRequestMessageSchema = v3.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v3.object({\n    method: v3.literal(stxGetAddressesMethodName),\n    params: stxGetAddressesParamsSchema,\n    id: v3.string()\n  }).entries\n});\n\n// src/request/types/btcMethods.ts\nimport * as v4 from \"valibot\";\nvar getInfoMethodName = \"getInfo\";\nvar getInfoParamsSchema = v4.nullish(v4.null());\nvar getInfoResultSchema = v4.object({\n  /**\n   * Version of the wallet.\n   */\n  version: v4.string(),\n  /**\n   * [WBIP](https://wbips.netlify.app/wbips/WBIP002) methods supported by the wallet.\n   */\n  methods: v4.optional(v4.array(v4.string())),\n  /**\n   * List of WBIP standards supported by the wallet. Not currently used.\n   */\n  supports: v4.array(v4.string())\n});\nvar getInfoRequestMessageSchema = v4.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v4.object({\n    method: v4.literal(getInfoMethodName),\n    params: getInfoParamsSchema,\n    id: v4.string()\n  }).entries\n});\nvar getAddressesMethodName = \"getAddresses\";\nvar getAddressesParamsSchema = v4.object({\n  /**\n   * The purposes for which to generate addresses. See\n   * {@linkcode AddressPurpose} for available purposes.\n   */\n  purposes: v4.array(v4.enum(AddressPurpose)),\n  /**\n   * A message to be displayed to the user in the request prompt.\n   */\n  message: v4.optional(v4.string())\n});\nvar getAddressesResultSchema = v4.object({\n  /**\n   * The addresses generated for the given purposes.\n   */\n  addresses: v4.array(addressSchema)\n});\nvar getAddressesRequestMessageSchema = v4.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v4.object({\n    method: v4.literal(getAddressesMethodName),\n    params: getAddressesParamsSchema,\n    id: v4.string()\n  }).entries\n});\nvar signMessageMethodName = \"signMessage\";\nvar signMessageParamsSchema = v4.object({\n  /**\n   * The address used for signing.\n   **/\n  address: v4.string(),\n  /**\n   * The message to sign.\n   **/\n  message: v4.string()\n});\nvar signMessageResultSchema = v4.object({\n  /**\n   * The signature of the message.\n   */\n  signature: v4.string(),\n  /**\n   * hash of the message.\n   */\n  messageHash: v4.string(),\n  /**\n   * The address used for signing.\n   */\n  address: v4.string()\n});\nvar signMessageRequestMessageSchema = v4.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v4.object({\n    method: v4.literal(signMessageMethodName),\n    params: signMessageParamsSchema,\n    id: v4.string()\n  }).entries\n});\nvar getAccountsMethodName = \"getAccounts\";\nvar getAccountsParamsSchema = getAddressesParamsSchema;\nvar getAccountsResultSchema = v4.array(addressSchema);\nvar getAccountsRequestMessageSchema = v4.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v4.object({\n    method: v4.literal(getAccountsMethodName),\n    params: getAccountsParamsSchema,\n    id: v4.string()\n  }).entries\n});\nvar getBalanceMethodName = \"getBalance\";\nvar getBalanceParamsSchema = v4.nullish(v4.null());\nvar getBalanceResultSchema = v4.object({\n  /**\n   * The confirmed balance of the wallet in sats. Using a string due to chrome\n   * messages not supporting bigint\n   * (https://issues.chromium.org/issues/40116184).\n   */\n  confirmed: v4.string(),\n  /**\n   * The unconfirmed balance of the wallet in sats. Using a string due to chrome\n   * messages not supporting bigint\n   * (https://issues.chromium.org/issues/40116184).\n   */\n  unconfirmed: v4.string(),\n  /**\n   * The total balance (both confirmed and unconfrimed UTXOs) of the wallet in\n   * sats. Using a string due to chrome messages not supporting bigint\n   * (https://issues.chromium.org/issues/40116184).\n   */\n  total: v4.string()\n});\nvar getBalanceRequestMessageSchema = v4.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v4.object({\n    method: v4.literal(getBalanceMethodName),\n    id: v4.string()\n  }).entries\n});\n\n// src/request/types/walletMethods.ts\nimport * as v5 from \"valibot\";\nvar requestPermissionsMethodName = \"wallet_requestPermissions\";\nvar requestPermissionsParamsSchema = v5.undefined();\nvar requestPermissionsResultSchema = v5.literal(true);\nvar requestPermissionsRequestMessageSchema = v5.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v5.object({\n    method: v5.literal(requestPermissionsMethodName),\n    params: requestPermissionsParamsSchema,\n    id: v5.string()\n  }).entries\n});\nvar renouncePermissionsMethodName = \"wallet_renouncePermissions\";\nvar renouncePermissionsParamsSchema = v5.undefined();\nvar renouncePermissionsResultSchema = v5.literal(true);\nvar renouncePermissionsRequestMessageSchema = v5.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v5.object({\n    method: v5.literal(renouncePermissionsMethodName),\n    params: renouncePermissionsParamsSchema,\n    id: v5.string()\n  }).entries\n});\n\n// src/request/types/runesMethods.ts\nimport * as v6 from \"valibot\";\nvar getRunesBalanceMethodName = \"runes_getBalance\";\nvar getRunesBalanceParamsSchema = v6.nullish(v6.null());\nvar getRunesBalanceResultSchema = v6.object({\n  balances: v6.array(\n    v6.object({\n      runeName: v6.string(),\n      amount: v6.string(),\n      divisibility: v6.number(),\n      symbol: v6.string(),\n      inscriptionId: v6.nullish(v6.string())\n    })\n  )\n});\nvar getRunesBalanceRequestMessageSchema = v6.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v6.object({\n    method: v6.literal(getRunesBalanceMethodName),\n    params: getRunesBalanceParamsSchema,\n    id: v6.string()\n  }).entries\n});\n\n// src/request/types/ordinalsMethods.ts\nimport * as v7 from \"valibot\";\nvar getInscriptionsMethodName = \"ord_getInscriptions\";\nvar getInscriptionsParamsSchema = v7.object({\n  offset: v7.number(),\n  limit: v7.number()\n});\nvar getInscriptionsResultSchema = v7.object({\n  total: v7.number(),\n  limit: v7.number(),\n  offset: v7.number(),\n  inscriptions: v7.array(\n    v7.object({\n      inscriptionId: v7.string(),\n      inscriptionNumber: v7.string(),\n      address: v7.string(),\n      collectionName: v7.optional(v7.string()),\n      postage: v7.string(),\n      contentLength: v7.string(),\n      contentType: v7.string(),\n      timestamp: v7.number(),\n      offset: v7.number(),\n      genesisTransaction: v7.string(),\n      output: v7.string()\n    })\n  )\n});\nvar getInscriptionsSchema = v7.object({\n  ...rpcRequestMessageSchema.entries,\n  ...v7.object({\n    method: v7.literal(getInscriptionsMethodName),\n    params: getInscriptionsParamsSchema,\n    id: v7.string()\n  }).entries\n});\n\n// src/request/index.ts\nvar request = async (method, params, providerId) => {\n  let provider = window.XverseProviders?.BitcoinProvider || window.BitcoinProvider;\n  if (providerId) {\n    provider = await getProviderById(providerId);\n  }\n  if (!provider) {\n    throw new Error(\"no wallet provider was found\");\n  }\n  if (!method) {\n    throw new Error(\"A wallet method is required\");\n  }\n  const response = await provider.request(method, params);\n  if (v8.is(rpcErrorResponseMessageSchema, response)) {\n    return {\n      status: \"error\",\n      error: response.error\n    };\n  }\n  if (v8.is(rpcSuccessResponseMessageSchema, response)) {\n    return {\n      status: \"success\",\n      result: response.result\n    };\n  }\n  return {\n    status: \"error\",\n    error: {\n      code: -32603 /* INTERNAL_ERROR */,\n      message: \"Received unknown response from provider.\",\n      data: response\n    }\n  };\n};\n\n// src/adapters/xverse.ts\nvar XverseAdapter = class extends SatsConnectAdapter {\n  id = DefaultAdaptersInfo.xverse.id;\n  requestInternal = async (method, params) => {\n    return request(method, params, this.id);\n  };\n};\n\n// src/adapters/unisat.ts\nimport { Buffer } from \"buffer\";\nimport { AddressType as AddressType2, getAddressInfo } from \"bitcoin-address-validation\";\nfunction convertSignInputsToInputType(signInputs, allowedSignHash) {\n  let result = [];\n  for (let address in signInputs) {\n    let indexes = signInputs[address];\n    for (let index of indexes) {\n      result.push({\n        index,\n        address,\n        sighashTypes: allowedSignHash ? [allowedSignHash] : void 0\n      });\n    }\n  }\n  return result;\n}\nvar UnisatAdapter = class extends SatsConnectAdapter {\n  id = DefaultAdaptersInfo.unisat.id;\n  async getAccounts(params) {\n    const { purposes } = params;\n    if (purposes.includes(\"stacks\" /* Stacks */)) {\n      throw new Error(\"Only bitcoin addresses are supported\");\n    }\n    const accounts = await window.unisat.requestAccounts();\n    const publicKey = await window.unisat.getPublicKey();\n    const address = accounts[0];\n    const addressType = getAddressInfo(accounts[0]).type;\n    const pk = addressType === AddressType2.p2tr ? publicKey.slice(2) : publicKey;\n    const paymentAddress = {\n      address,\n      publicKey: pk,\n      addressType,\n      purpose: \"payment\" /* Payment */\n    };\n    const ordinalsAddress = {\n      address,\n      publicKey: pk,\n      addressType,\n      purpose: \"ordinals\" /* Ordinals */\n    };\n    const response = [];\n    if (purposes.includes(\"payment\" /* Payment */)) {\n      response.push(paymentAddress);\n    }\n    if (purposes.includes(\"ordinals\" /* Ordinals */)) {\n      response.push(ordinalsAddress);\n    }\n    return response;\n  }\n  async signMessage(params) {\n    const { message, address } = params;\n    const addressType = getAddressInfo(address).type;\n    const Bip322supportedTypes = [AddressType2.p2wpkh, AddressType2.p2tr];\n    if (Bip322supportedTypes.includes(addressType)) {\n      const response2 = await window.unisat.signMessage(message, \"bip322-simple\");\n      return {\n        address,\n        messageHash: \"\",\n        signature: response2\n      };\n    }\n    const response = await window.unisat.signMessage(message, \"ecdsa\");\n    return {\n      address,\n      messageHash: \"\",\n      signature: response\n    };\n  }\n  async sendTransfer(params) {\n    const { recipients } = params;\n    if (recipients.length > 1) {\n      throw new Error(\"Only one recipient is supported by this wallet provider\");\n    }\n    const txid = await window.unisat.sendBitcoin(recipients[0].address, recipients[0].amount);\n    return {\n      txid\n    };\n  }\n  async signPsbt(params) {\n    const { psbt, signInputs, allowedSignHash, broadcast } = params;\n    const psbtHex = Buffer.from(psbt, \"base64\").toString(\"hex\");\n    const signedPsbt = await window.unisat.signPsbt(psbtHex, {\n      autoFinalized: broadcast,\n      toSignInputs: convertSignInputsToInputType(signInputs, allowedSignHash)\n    });\n    if (broadcast) {\n      const txid = await window.unisat.pushPsbt(psbtHex);\n      return {\n        psbt: signedPsbt,\n        txid\n      };\n    }\n    return {\n      psbt: psbtHex\n    };\n  }\n  requestInternal = async (method, params) => {\n    try {\n      switch (method) {\n        case \"getAccounts\": {\n          const response = await this.getAccounts(\n            params\n          );\n          return {\n            status: \"success\",\n            result: response\n          };\n        }\n        case \"sendTransfer\": {\n          const response = await this.sendTransfer(params);\n          return {\n            status: \"success\",\n            result: response\n          };\n        }\n        case \"signMessage\": {\n          const response = await this.signMessage(params);\n          return {\n            status: \"success\",\n            result: response\n          };\n        }\n        case \"signPsbt\": {\n          const response = await this.signPsbt(params);\n          return {\n            status: \"success\",\n            result: response\n          };\n        }\n        default: {\n          const error = {\n            code: -32001 /* METHOD_NOT_SUPPORTED */,\n            message: \"Method not supported by the selected wallet\"\n          };\n          console.error(\"Error calling the method\", error);\n          return {\n            status: \"error\",\n            error\n          };\n        }\n      }\n    } catch (error) {\n      console.error(\"Error calling the method\", error);\n      return {\n        status: \"error\",\n        error: {\n          code: error.code === 4001 ? -32e3 /* USER_REJECTION */ : -32603 /* INTERNAL_ERROR */,\n          message: error.message ? error.message : \"Wallet method call error\",\n          data: error\n        }\n      };\n    }\n  };\n};\n\n// src/adapters/BaseAdapter.ts\nvar BaseAdapter = class extends SatsConnectAdapter {\n  id = \"\";\n  constructor(providerId) {\n    super();\n    this.id = providerId;\n  }\n  requestInternal = async (method, params) => {\n    return request(method, params, this.id);\n  };\n};\n\n// src/adapters/index.ts\nvar DefaultAdaptersInfo = {\n  xverse: {\n    id: \"XverseProviders.BitcoinProvider\",\n    name: \"Xverse\",\n    webUrl: \"https://www.xverse.app/\",\n    googlePlayStoreUrl: \"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse\",\n    iOSAppStoreUrl: \"https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513\",\n    chromeWebStoreUrl: \"https://chromewebstore.google.com/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg\",\n    icon: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyIiBoZWlnaHQ9IjEwMiIgdmlld0JveD0iMCAwIDEwMiAxMDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGlkPSJJY29uX0FydCAoRWRpdCBNZSkiPgo8cmVjdCB3aWR0aD0iMTAyIiBoZWlnaHQ9IjEwMiIgZmlsbD0iIzE4MTgxOCIvPgo8ZyBpZD0iTG9nby9FbWJsZW0iIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yMF8xMjIzKSI+CjxwYXRoIGlkPSJWZWN0b3IiIGQ9Ik03NC42NTQyIDczLjg4ODNWNjUuMjMxMkM3NC42NTQyIDY0Ljg4OCA3NC41MTc3IDY0LjU2MDYgNzQuMjc0NSA2NC4zMTc0TDM3LjQzOTcgMjcuNDgyNUMzNy4xOTY1IDI3LjIzOTIgMzYuODY5MSAyNy4xMDI4IDM2LjUyNTggMjcuMTAyOEgyNy44NjlDMjcuNDQxNiAyNy4xMDI4IDI3LjA5MzggMjcuNDUwNiAyNy4wOTM4IDI3Ljg3OFYzNS45MjExQzI3LjA5MzggMzYuMjY0NCAyNy4yMzAyIDM2LjU5MTcgMjcuNDczNCAzNi44MzVMNDAuNjk1MiA1MC4wNTY3QzQwLjk5NzUgNTAuMzU5MSA0MC45OTc1IDUwLjg1MDEgNDAuNjk1MiA1MS4xNTI0TDI3LjMyMTEgNjQuNTI2NUMyNy4xNzU2IDY0LjY3MiAyNy4wOTM4IDY0Ljg2OTggMjcuMDkzOCA2NS4wNzQ0VjczLjg4ODNDMjcuMDkzOCA3NC4zMTUzIDI3LjQ0MTYgNzQuNjYzNSAyNy44NjkgNzQuNjYzNUg0Mi4zMzQyQzQyLjc2MTYgNzQuNjYzNSA0My4xMDk0IDc0LjMxNTMgNDMuMTA5NCA3My44ODgzVjY4LjY5NThDNDMuMTA5NCA2OC40OTEyIDQzLjE5MTIgNjguMjkzNSA0My4zMzY4IDY4LjE0NzlMNTAuNTExNCA2MC45NzMzQzUwLjgxMzggNjAuNjcwOSA1MS4zMDQ4IDYwLjY3MDkgNTEuNjA3MiA2MC45NzMzTDY0LjkxOTggNzQuMjg2MUM2NS4xNjMxIDc0LjUyOTMgNjUuNDkwNCA3NC42NjU4IDY1LjgzMzcgNzQuNjY1OEg3My44NzY3Qzc0LjMwNDIgNzQuNjY1OCA3NC42NTE5IDc0LjMxNzYgNzQuNjUxOSA3My44OTA2TDc0LjY1NDIgNzMuODg4M1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGlkPSJWZWN0b3JfMiIgZD0iTTU1LjM1OCAzOC41NjcySDYyLjYwMzFDNjMuMDMyOCAzOC41NjcyIDYzLjM4MjkgMzguOTE3MyA2My4zODI5IDM5LjM0NjlWNDYuNTkyMUM2My4zODI5IDQ3LjI4NzcgNjQuMjI0IDQ3LjYzNTUgNjQuNzE1MSA0Ny4xNDIyTDc0LjY1NDEgMzcuMTg3M0M3NC43OTk0IDM3LjA0MTggNzQuODgxNiAzNi44NDQgNzQuODgxNiAzNi42MzcxVjI3LjkxODlDNzQuODgxNiAyNy40ODkyIDc0LjUzMzQgMjcuMTM5MSA3NC4xMDE3IDI3LjEzOTFMNjUuMjUzOCAyNy4xMjc3QzY1LjA0NyAyNy4xMjc3IDY0Ljg0OTIgMjcuMjA5NiA2NC43MDE0IDI3LjM1NTFMNTQuODA1NiAzNy4yMzVDNTQuMzE0NSAzNy43MjYgNTQuNjYyMyAzOC41NjcyIDU1LjM1NTcgMzguNTY3Mkg1NS4zNThaIiBmaWxsPSIjRUU3QTMwIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8yMF8xMjIzIj4KPHJlY3Qgd2lkdGg9IjQ3LjgxMjUiIGhlaWdodD0iNDcuODEyNSIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3LjA5MzggMjcuMDkzOCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K\"\n  },\n  unisat: {\n    id: \"unisat\",\n    name: \"Unisat\",\n    webUrl: \"https://unisat.io/\",\n    icon: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiBmaWxsPSJibGFjayIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTAwNTBfNDE3MSkiPgo8cGF0aCBkPSJNMTEzLjY2IDI5LjI4OTdMMTQzLjk3IDU5LjMwOTdDMTQ2LjU1IDYxLjg1OTcgMTQ3LjgyIDY0LjQzOTcgMTQ3Ljc4IDY3LjAzOTdDMTQ3Ljc0IDY5LjYzOTcgMTQ2LjYzIDcyLjAwOTcgMTQ0LjQ2IDc0LjE1OTdDMTQyLjE5IDc2LjQwOTcgMTM5Ljc0IDc3LjU0OTcgMTM3LjEyIDc3LjU5OTdDMTM0LjUgNzcuNjM5NyAxMzEuOSA3Ni4zNzk3IDEyOS4zMiA3My44Mjk3TDk4LjMxOTkgNDMuMTI5N0M5NC43OTk5IDM5LjYzOTcgOTEuMzk5OSAzNy4xNjk3IDg4LjEyOTkgMzUuNzE5N0M4NC44NTk5IDM0LjI2OTcgODEuNDE5OSAzNC4wMzk3IDc3LjgxOTkgMzUuMDM5N0M3NC4yMDk5IDM2LjAyOTcgNzAuMzM5OSAzOC41Nzk3IDY2LjE4OTkgNDIuNjc5N0M2MC40Njk5IDQ4LjM0OTcgNTcuNzM5OSA1My42Njk3IDU4LjAxOTkgNTguNjM5N0M1OC4yOTk5IDYzLjYwOTcgNjEuMTM5OSA2OC43Njk3IDY2LjUyOTkgNzQuMDk5N0w5Ny43Nzk5IDEwNS4wNkMxMDAuMzkgMTA3LjY0IDEwMS42NyAxMTAuMjIgMTAxLjYzIDExMi43OEMxMDEuNTkgMTE1LjM1IDEwMC40NyAxMTcuNzIgOTguMjU5OSAxMTkuOTFDOTYuMDU5OSAxMjIuMDkgOTMuNjI5OSAxMjMuMjMgOTAuOTg5OSAxMjMuMzJDODguMzQ5OSAxMjMuNDEgODUuNzE5OSAxMjIuMTYgODMuMTE5OSAxMTkuNThMNTIuODA5OSA4OS41NTk3QzQ3Ljg3OTkgODQuNjc5NyA0NC4zMTk5IDgwLjA1OTcgNDIuMTI5OSA3NS42OTk3QzM5LjkzOTkgNzEuMzM5NyAzOS4xMTk5IDY2LjQwOTcgMzkuNjg5OSA2MC45MDk3QzQwLjE5OTkgNTYuMTk5NyA0MS43MDk5IDUxLjYzOTcgNDQuMjI5OSA0Ny4yMTk3QzQ2LjczOTkgNDIuNzk5NyA1MC4zMzk5IDM4LjI3OTcgNTUuMDA5OSAzMy42NDk3QzYwLjU2OTkgMjguMTM5NyA2NS44Nzk5IDIzLjkxOTcgNzAuOTM5OSAyMC45Nzk3Qzc1Ljk4OTkgMTguMDM5NyA4MC44Nzk5IDE2LjQwOTcgODUuNTk5OSAxNi4wNjk3QzkwLjMyOTkgMTUuNzI5NyA5NC45ODk5IDE2LjY2OTcgOTkuNTk5OSAxOC44ODk3QzEwNC4yMSAyMS4xMDk3IDEwOC44OSAyNC41Njk3IDExMy42NSAyOS4yODk3SDExMy42NloiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8xMDA1MF80MTcxKSIvPgo8cGF0aCBkPSJNNjYuMTA5OSAxNTAuNDJMMzUuODA5OSAxMjAuNEMzMy4yMjk5IDExNy44NCAzMS45NTk5IDExNS4yNyAzMS45OTk5IDExMi42N0MzMi4wMzk5IDExMC4wNyAzMy4xNDk5IDEwNy43IDM1LjMxOTkgMTA1LjU1QzM3LjU4OTkgMTAzLjMgNDAuMDM5OSAxMDIuMTYgNDIuNjU5OSAxMDIuMTFDNDUuMjc5OSAxMDIuMDcgNDcuODc5OSAxMDMuMzIgNTAuNDU5OSAxMDUuODhMODEuNDQ5OSAxMzYuNThDODQuOTc5OSAxNDAuMDcgODguMzY5OSAxNDIuNTQgOTEuNjM5OSAxNDMuOTlDOTQuOTA5OSAxNDUuNDQgOTguMzQ5OSAxNDUuNjYgMTAxLjk2IDE0NC42N0MxMDUuNTcgMTQzLjY4IDEwOS40NCAxNDEuMTMgMTEzLjU5IDEzNy4wMkMxMTkuMzEgMTMxLjM1IDEyMi4wNCAxMjYuMDMgMTIxLjc2IDEyMS4wNkMxMjEuNDggMTE2LjA5IDExOC42NCAxMTAuOTMgMTEzLjI1IDEwNS41OUw5Ni41OTk5IDg5LjI0MDFDOTMuOTg5OSA4Ni42NjAxIDkyLjcwOTkgODQuMDgwMSA5Mi43NDk5IDgxLjUyMDFDOTIuNzg5OSA3OC45NTAxIDkzLjkwOTkgNzYuNTgwMSA5Ni4xMTk5IDc0LjM5MDFDOTguMzE5OSA3Mi4yMTAxIDEwMC43NSA3MS4wNzAxIDEwMy4zOSA3MC45ODAxQzEwNi4wMyA3MC44OTAxIDEwOC42NiA3Mi4xNDAxIDExMS4yNiA3NC43MjAxTDEyNi45NiA5MC4xMzAxQzEzMS44OSA5NS4wMTAxIDEzNS40NSA5OS42MzAxIDEzNy42NCAxMDMuOTlDMTM5LjgzIDEwOC4zNSAxNDAuNjUgMTEzLjI4IDE0MC4wOCAxMTguNzhDMTM5LjU3IDEyMy40OSAxMzguMDYgMTI4LjA1IDEzNS41NCAxMzIuNDdDMTMzLjAzIDEzNi44OSAxMjkuNDMgMTQxLjQxIDEyNC43NiAxNDYuMDRDMTE5LjIgMTUxLjU1IDExMy44OSAxNTUuNzcgMTA4LjgzIDE1OC43MUMxMDMuNzcgMTYxLjY1IDk4Ljg3OTkgMTYzLjI5IDk0LjE0OTkgMTYzLjYzQzg5LjQxOTkgMTYzLjk3IDg0Ljc1OTkgMTYzLjAzIDgwLjE0OTkgMTYwLjgxQzc1LjUzOTkgMTU4LjU5IDcwLjg1OTkgMTU1LjEzIDY2LjA5OTkgMTUwLjQxTDY2LjEwOTkgMTUwLjQyWiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzEwMDUwXzQxNzEpIi8+CjxwYXRoIGQ9Ik04NS4wMDk5IDcyLjk1OTJDOTEuMTU2OCA3Mi45NTkyIDk2LjEzOTkgNjcuOTc2MSA5Ni4xMzk5IDYxLjgyOTJDOTYuMTM5OSA1NS42ODIzIDkxLjE1NjggNTAuNjk5MiA4NS4wMDk5IDUwLjY5OTJDNzguODYzIDUwLjY5OTIgNzMuODc5OSA1NS42ODIzIDczLjg3OTkgNjEuODI5MkM3My44Nzk5IDY3Ljk3NjEgNzguODYzIDcyLjk1OTIgODUuMDA5OSA3Mi45NTkyWiIgZmlsbD0idXJsKCNwYWludDJfcmFkaWFsXzEwMDUwXzQxNzEpIi8+CjwvZz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMDA1MF80MTcxIiB4MT0iMTM4Ljk4NSIgeTE9IjQ2Ljc3OTUiIHgyPSI0NS4wNTI5IiB5Mj0iODguNTIzMyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMjAxQzFCIi8+CjxzdG9wIG9mZnNldD0iMC4zNiIgc3RvcC1jb2xvcj0iIzc3MzkwRCIvPgo8c3RvcCBvZmZzZXQ9IjAuNjciIHN0b3AtY29sb3I9IiNFQTgxMDEiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjRCODUyIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMDA1MF80MTcxIiB4MT0iNDMuMzgxMiIgeTE9IjEzNC4xNjciIHgyPSIxNTIuMjMxIiB5Mj0iMTAxLjc3MSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMUYxRDFDIi8+CjxzdG9wIG9mZnNldD0iMC4zNyIgc3RvcC1jb2xvcj0iIzc3MzkwRCIvPgo8c3RvcCBvZmZzZXQ9IjAuNjciIHN0b3AtY29sb3I9IiNFQTgxMDEiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjRGQjUyIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQyX3JhZGlhbF8xMDA1MF80MTcxIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDg1LjAwOTkgNjEuODM5Mikgc2NhbGUoMTEuMTMpIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y0Qjg1MiIvPgo8c3RvcCBvZmZzZXQ9IjAuMzMiIHN0b3AtY29sb3I9IiNFQTgxMDEiLz4KPHN0b3Agb2Zmc2V0PSIwLjY0IiBzdG9wLWNvbG9yPSIjNzczOTBEIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIxMUMxRCIvPgo8L3JhZGlhbEdyYWRpZW50Pgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEwMDUwXzQxNzEiPgo8cmVjdCB3aWR0aD0iMTE1Ljc3IiBoZWlnaHQ9IjE0Ny43IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgMTYpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==\"\n  }\n};\nvar defaultAdapters = {\n  [DefaultAdaptersInfo.xverse.id]: XverseAdapter,\n  [DefaultAdaptersInfo.unisat.id]: UnisatAdapter\n};\n\n// src/capabilities/index.ts\nimport { createUnsecuredToken as createUnsecuredToken2 } from \"jsontokens\";\nvar extractOrValidateCapabilities = (provider, reportedCapabilities) => {\n  const validateCapability = (capability) => {\n    if (!provider[capability]) {\n      return false;\n    }\n    if (reportedCapabilities && !reportedCapabilities.has(capability)) {\n      return false;\n    }\n    return true;\n  };\n  const capabilityMap = {\n    request: validateCapability(\"request\"),\n    connect: validateCapability(\"connect\"),\n    signMessage: validateCapability(\"signMessage\"),\n    signTransaction: validateCapability(\"signTransaction\"),\n    sendBtcTransaction: validateCapability(\"sendBtcTransaction\"),\n    createInscription: validateCapability(\"createInscription\"),\n    createRepeatInscriptions: validateCapability(\"createRepeatInscriptions\"),\n    signMultipleTransactions: validateCapability(\"signMultipleTransactions\")\n  };\n  return Object.entries(capabilityMap).reduce((acc, [capability, value]) => {\n    if (value)\n      return [...acc, capability];\n    return acc;\n  }, []);\n};\nvar getCapabilities = async (options) => {\n  const provider = await getProviderOrThrow(options.getProvider);\n  const request2 = createUnsecuredToken2(options.payload);\n  if (provider.getCapabilities) {\n    try {\n      const response = await provider.getCapabilities(request2);\n      options.onFinish?.(extractOrValidateCapabilities(provider, new Set(response)));\n    } catch (error) {\n      console.error(\"[Connect] Error during capabilities request\", error);\n    }\n  }\n  try {\n    const inferredCapabilities = extractOrValidateCapabilities(provider);\n    options.onFinish?.(inferredCapabilities);\n  } catch (error) {\n    console.error(\"[Connect] Error during capabilities request\", error);\n    options.onCancel?.();\n  }\n};\n\n// src/inscriptions/createInscription.ts\nimport { createUnsecuredToken as createUnsecuredToken3 } from \"jsontokens\";\n\n// src/inscriptions/utils.ts\nvar MAX_CONTENT_LENGTH_MAINNET = 4e5;\nvar MAX_CONTENT_LENGTH_TESTNET = 6e4;\nvar validateInscriptionPayload = (payload) => {\n  const { contentType, content, payloadType, network, appFeeAddress, appFee } = payload;\n  if (!/^[a-z]+\\/[a-z0-9\\-\\.\\+]+(?=;.*|$)/.test(contentType)) {\n    throw new Error(\"Invalid content type detected\");\n  }\n  if (!content || content.length === 0) {\n    throw new Error(\"Empty content not allowed\");\n  }\n  if (!payloadType || payloadType !== \"BASE_64\" && payloadType !== \"PLAIN_TEXT\") {\n    throw new Error(\"Empty invalid payloadType specified\");\n  }\n  if (content.length > (network.type === \"Mainnet\" ? MAX_CONTENT_LENGTH_MAINNET : MAX_CONTENT_LENGTH_TESTNET)) {\n    throw new Error(\"Content too large\");\n  }\n  if ((appFeeAddress?.length ?? 0) > 0 && (appFee ?? 0) <= 0) {\n    throw new Error(\"Invalid combination of app fee address and fee provided\");\n  }\n};\n\n// src/inscriptions/createInscription.ts\nvar createInscription = async (options) => {\n  const { getProvider } = options;\n  const provider = await getProviderOrThrow(getProvider);\n  validateInscriptionPayload(options.payload);\n  try {\n    const request2 = createUnsecuredToken3(options.payload);\n    const response = await provider.createInscription(request2);\n    options.onFinish?.(response);\n  } catch (error) {\n    console.error(\"[Connect] Error during create inscription\", error);\n    options.onCancel?.();\n  }\n};\n\n// src/inscriptions/createRepeatInscriptions.ts\nimport { createUnsecuredToken as createUnsecuredToken4 } from \"jsontokens\";\nvar createRepeatInscriptions = async (options) => {\n  const { getProvider } = options;\n  const provider = await getProviderOrThrow(getProvider);\n  validateInscriptionPayload(options.payload);\n  try {\n    const request2 = createUnsecuredToken4(options.payload);\n    const response = await provider.createRepeatInscriptions(request2);\n    options.onFinish?.(response);\n  } catch (error) {\n    console.error(\"[Connect] Error during create repeat inscriptions\", error);\n    options.onCancel?.();\n  }\n};\n\n// src/messages/index.ts\nimport { createUnsecuredToken as createUnsecuredToken5 } from \"jsontokens\";\nvar signMessage = async (options) => {\n  const provider = await getProviderOrThrow(options.getProvider);\n  const { address, message } = options.payload;\n  if (!address) {\n    throw new Error(\"An address is required to sign a message\");\n  }\n  if (!message) {\n    throw new Error(\"A message to be signed is required\");\n  }\n  try {\n    const request2 = createUnsecuredToken5(options.payload);\n    const response = await provider.signMessage(request2);\n    options.onFinish?.(response);\n  } catch (error) {\n    console.error(\"[Connect] Error during sign message request\", error);\n    options.onCancel?.();\n  }\n};\n\n// src/transactions/sendBtcTransaction.ts\nimport { createUnsecuredToken as createUnsecuredToken6 } from \"jsontokens\";\nvar serializer = (recipient) => {\n  return recipient.map((value) => {\n    const { address, amountSats } = value;\n    return {\n      address,\n      amountSats: amountSats.toString()\n    };\n  });\n};\nvar sendBtcTransaction = async (options) => {\n  const provider = await getProviderOrThrow(options.getProvider);\n  const { recipients, senderAddress, network, message } = options.payload;\n  if (!recipients || recipients.length === 0) {\n    throw new Error(\"At least one recipient is required\");\n  }\n  if (recipients.some(\n    (item) => typeof item.address !== \"string\" || typeof item.amountSats !== \"bigint\"\n  )) {\n    throw new Error(\"Incorrect recipient format\");\n  }\n  if (!senderAddress) {\n    throw new Error(\"The sender address is required\");\n  }\n  try {\n    const serializedRecipients = serializer(recipients);\n    const serializedPayload = {\n      network,\n      senderAddress,\n      message,\n      recipients: serializedRecipients\n    };\n    const request2 = createUnsecuredToken6(serializedPayload);\n    const response = await provider.sendBtcTransaction(request2);\n    options.onFinish?.(response);\n  } catch (error) {\n    console.error(\"[Connect] Error during send BTC transaction request\", error);\n    options.onCancel?.();\n  }\n};\n\n// src/transactions/signTransaction.ts\nimport { createUnsecuredToken as createUnsecuredToken7 } from \"jsontokens\";\nvar signTransaction = async (options) => {\n  const provider = await getProviderOrThrow(options.getProvider);\n  const { psbtBase64, inputsToSign } = options.payload;\n  if (!psbtBase64) {\n    throw new Error(\"A value for psbtBase64 representing the tx hash is required\");\n  }\n  if (!inputsToSign) {\n    throw new Error(\"An array specifying the inputs to be signed by the wallet is required\");\n  }\n  try {\n    const request2 = createUnsecuredToken7(options.payload);\n    const response = await provider.signTransaction(request2);\n    options.onFinish?.(response);\n  } catch (error) {\n    console.error(\"[Connect] Error during sign transaction request\", error);\n    options.onCancel?.();\n  }\n};\n\n// src/transactions/signMultipleTransactions.ts\nimport { createUnsecuredToken as createUnsecuredToken8 } from \"jsontokens\";\nvar signMultipleTransactions = async (options) => {\n  const provider = await getProviderOrThrow(options.getProvider);\n  const { psbts } = options.payload;\n  if (!psbts || !psbts.length) {\n    throw new Error(\"psbts array is required\");\n  }\n  if (psbts.length > 100) {\n    throw new Error(\"psbts array must contain less than 100 psbts\");\n  }\n  try {\n    const request2 = createUnsecuredToken8(options.payload);\n    const response = await provider.signMultipleTransactions(request2);\n    options.onFinish?.(response);\n  } catch (error) {\n    console.error(\"[Connect] Error during sign Multiple transactions request\", error);\n    options.onCancel?.();\n  }\n};\nexport {\n  AddressPurpose,\n  AddressType,\n  BaseAdapter,\n  BitcoinNetworkType,\n  DefaultAdaptersInfo,\n  RpcErrorCode,\n  RpcIdSchema,\n  SatsConnectAdapter,\n  addressSchema,\n  createInscription,\n  createRepeatInscriptions,\n  defaultAdapters,\n  getAccountsMethodName,\n  getAccountsParamsSchema,\n  getAccountsRequestMessageSchema,\n  getAccountsResultSchema,\n  getAddress,\n  getAddressesMethodName,\n  getAddressesParamsSchema,\n  getAddressesRequestMessageSchema,\n  getAddressesResultSchema,\n  getBalanceMethodName,\n  getBalanceParamsSchema,\n  getBalanceRequestMessageSchema,\n  getBalanceResultSchema,\n  getCapabilities,\n  getDefaultProvider,\n  getInfoMethodName,\n  getInfoParamsSchema,\n  getInfoRequestMessageSchema,\n  getInfoResultSchema,\n  getInscriptionsMethodName,\n  getInscriptionsParamsSchema,\n  getInscriptionsResultSchema,\n  getInscriptionsSchema,\n  getProviderById,\n  getProviderOrThrow,\n  getProviders,\n  getRunesBalanceMethodName,\n  getRunesBalanceParamsSchema,\n  getRunesBalanceRequestMessageSchema,\n  getRunesBalanceResultSchema,\n  getSupportedWallets,\n  isProviderInstalled,\n  removeDefaultProvider,\n  renouncePermissionsMethodName,\n  renouncePermissionsParamsSchema,\n  renouncePermissionsRequestMessageSchema,\n  renouncePermissionsResultSchema,\n  request,\n  requestPermissionsMethodName,\n  requestPermissionsParamsSchema,\n  requestPermissionsRequestMessageSchema,\n  requestPermissionsResultSchema,\n  rpcErrorResponseMessageSchema,\n  rpcRequestMessageSchema,\n  rpcResponseMessageSchema,\n  rpcSuccessResponseMessageSchema,\n  sendBtcTransaction,\n  setDefaultProvider,\n  signMessage,\n  signMessageMethodName,\n  signMessageParamsSchema,\n  signMessageRequestMessageSchema,\n  signMessageResultSchema,\n  signMultipleTransactions,\n  signTransaction,\n  stxGetAddressesMethodName,\n  stxGetAddressesParamsSchema,\n  stxGetAddressesRequestMessageSchema,\n  stxGetAddressesResultSchema\n};\n",null,null,null,null,null],"names":["Subscribable","constructor","this","listeners","Set","subscribe","bind","listener","add","onSubscribe","delete","onUnsubscribe","hasListeners","size","isServer","window","globalThis","noop","isValidTimeout","value","Infinity","timeUntilStale","updatedAt","staleTime","Math","max","Date","now","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","type","exact","fetchStatus","predicate","queryKey","stale","queryHash","hashQueryKeyByOptions","options","partialMatchKey","isActive","isStale","state","matchMutation","mutation","status","mutationKey","hashKey","queryKeyHashFn","JSON","stringify","_","val","isPlainObject","Object","keys","sort","reduce","result","key","a","b","some","replaceEqualDeep","array","isPlainArray","aItems","aSize","length","bItems","bSize","copy","equalItems","i","includes","shallowEqualObjects","Array","isArray","o","hasObjectPrototype","ctor","prot","prototype","hasOwnProperty","getPrototypeOf","toString","call","replaceData","prevData","data","structuralSharing","addToEnd","items","item","newItems","slice","addToStart","skipToken","Symbol","ensureQueryFn","fetchOptions","process","env","NODE_ENV","queryFn","console","error","initialPromise","Promise","reject","Error","focusManager","focused","cleanup","setup","super","onFocus","addEventListener","removeEventListener","setEventListener","setFocused","isFocused","forEach","document","visibilityState","onlineManager","online","onOnline","onlineListener","offlineListener","setOnline","isOnline","defaultRetryDelay","failureCount","min","canFetch","networkMode","CancelledError","revert","silent","isCancelledError","createRetryer","config","continueFn","promiseResolve","promiseReject","isRetryCancelled","isResolved","promise","outerResolve","outerReject","canContinue","canRun","canStart","resolve","onSuccess","onError","pause","continueResolve","onPause","then","onContinue","run","promiseOrValue","fn","catch","retry","retryDelay","delay","shouldRetry","timeout","onFail","setTimeout","cancel","cancelOptions","abort","continue","cancelRetry","continueRetry","start","notifyManager","queue","transactions","notifyFn","callback","batchNotifyFn","scheduleFn","cb","schedule","push","flush","originalQueue","batch","batchCalls","args","setNotifyFunction","setBatchNotifyFunction","setScheduler","createNotifyManager","Removable","gcTimeout","destroy","clearGcTimeout","scheduleGc","gcTime","optionalRemove","updateGcTime","newGcTime","clearTimeout","Query","initialState","revertState","cache","retryer","defaultOptions","abortSignalConsumed","setOptions","observers","initialData","hasData","initialDataUpdatedAt","dataUpdateCount","dataUpdatedAt","errorUpdateCount","errorUpdatedAt","fetchFailureCount","fetchFailureReason","fetchMeta","isInvalidated","getDefaultState","meta","remove","setData","newData","dispatch","manual","setState","setStateOptions","reset","observer","isDisabled","getObserversCount","getCurrentResult","isStaleByTime","find","x","shouldFetchOnWindowFocus","refetch","cancelRefetch","shouldFetchOnReconnect","addObserver","notify","removeObserver","filter","invalidate","fetch","abortController","AbortController","addSignalProperty","object","defineProperty","enumerable","get","signal","context","fetchFn","queryFnContext","persister","behavior","onFetch","onSettled","isFetchingOptimistic","action","fetchState","reducer","onQueryUpdate","QueryCache","queries","Map","build","client","defaultQueryOptions","getQueryDefaults","has","set","queryInMap","clear","getAll","values","defaultedFilters","findAll","event","Mutation","mutationCache","mutationId","failureReason","isPaused","variables","submittedAt","execute","mutationFn","restored","onMutate","runNext","onMutationUpdate","MutationCache","mutations","defaultMutationOptions","scope","scopeFor","firstPendingMutation","m","foundMutation","flat","resumePausedMutations","pausedMutations","all","map","id","String","infiniteQueryBehavior","pages","async","direction","fetchMore","oldPages","oldPageParams","pageParams","empty","cancelled","fetchPage","param","previous","pageParam","aborted","page","maxPages","addTo","oldData","getPreviousPageParam","getNextPageParam","initialPageParam","remainingPages","lastIndex","QueryClient","queryCache","queryDefaults","mutationDefaults","mountCount","unsubscribeFocus","unsubscribeOnline","mount","unmount","isFetching","isMutating","getQueryData","ensureQueryData","cachedData","fetchQuery","defaultedOptions","revalidateIfStale","prefetchQuery","getQueriesData","setQueryData","updater","input","functionalUpdate","setQueriesData","getQueryState","removeQueries","resetQueries","refetchFilters","refetchQueries","cancelQueries","defaultedCancelOptions","promises","invalidateQueries","refetchType","throwOnError","fetchInfiniteQuery","prefetchInfiniteQuery","getQueryCache","getMutationCache","getDefaultOptions","setDefaultOptions","setQueryDefaults","defaults","queryDefault","setMutationDefaults","getMutationDefaults","_defaulted","refetchOnReconnect","suspense","QueryObserver","selectError","bindMethods","currentQuery","currentQueryInitialState","currentResult","currentResultState","currentResultOptions","selectFn","selectResult","lastQueryWithDefinedData","staleTimeoutId","refetchIntervalId","currentRefetchInterval","trackedProps","shouldFetchOnMount","executeFetch","updateResult","updateTimers","shouldFetchOn","refetchOnWindowFocus","clearStaleTimeout","clearRefetchInterval","notifyOptions","prevOptions","prevQuery","updateQuery","mounted","shouldFetchOptionally","updateStaleTimeout","nextRefetchInterval","computeRefetchInterval","updateRefetchInterval","getOptimisticResult","createResult","optimisticResult","shouldAssignObserverCurrentProperties","trackResult","onPropTracked","trackedResult","configurable","trackProp","getCurrentQuery","fetchOptimistic","refetchInterval","nextInterval","setInterval","refetchIntervalInBackground","clearInterval","prevResult","prevResultState","prevResultOptions","queryInitialState","newState","isPlaceholderData","_optimisticResults","fetchOnMount","fetchOptionally","select","placeholderData","isPending","isError","isLoading","isSuccess","isInitialLoading","isFetched","isFetchedAfterMount","isRefetching","isLoadingError","isRefetchError","nextResult","defaultNotifyOptions","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","shouldNotifyListeners","retryOnMount","shouldLoadOnMount","refetchOnMount","field","MutationObserver","currentMutation","mutateOptions","mutate","isIdle","QueryClientContext","React","createContext","useQueryClient","queryClient","useContext","QueryClientProvider","children","useEffect","jsx","Provider","IsRestoringContext","useIsRestoring","QueryErrorResetBoundaryContext","isReset","clearReset","createValue","useQueryErrorResetBoundary","shouldThrowError","throwError","params","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","getHasError","ensureStaleTime","shouldSuspend","useQuery","Observer","isRestoring","_experimental_beforeQuery","useState","useSyncExternalStore","useCallback","onStoreChange","unsubscribe","_experimental_afterQuery","useBaseQuery","useMutation","mutateAsync","extendStatics","d","setPrototypeOf","__proto__","p","__extends","TypeError","__","create","__assign","assign","t","s","n","arguments","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","adopt","__generator","body","f","y","g","label","sent","trys","ops","verb","throw","return","iterator","v","op","pop","SuppressedError","RetryOperation","timeouts","forever","_originalTimeouts","parse","_timeouts","_options","_maxRetryTime","maxRetryTime","_fn","_errors","_attempts","_operationTimeout","_operationTimeoutCb","_timeout","_operationStart","_timer","_cachedTimeouts","retry_operation","stop","err","currentTime","getTime","unshift","shift","undefined","splice","self","unref","attempt","timeoutOps","try","log","errors","attempts","mainError","counts","mainErrorCount","message","count","require$$0","exports","operation","retries","concat","opts","factor","minTimeout","maxTimeout","randomize","createTimeout","random","round","pow","wrap","obj","methods","method","original","retrier","bail","num","onRetry","networks","testnet","regtest","bitcoin","messagePrefix","bech32","bip32","public","private","pubKeyHash","scriptHash","wif","bip66","encode","decode","check","buffer","lenR","lenS","r","signature","Buffer","allocUnsafe","REVERSE_OPS","OPS","OP_FALSE","OP_0","OP_PUSHDATA1","OP_PUSHDATA2","OP_PUSHDATA4","OP_1NEGATE","OP_RESERVED","OP_TRUE","OP_1","OP_2","OP_3","OP_4","OP_5","OP_6","OP_7","OP_8","OP_9","OP_10","OP_11","OP_12","OP_13","OP_14","OP_15","OP_16","OP_NOP","OP_VER","OP_IF","OP_NOTIF","OP_VERIF","OP_VERNOTIF","OP_ELSE","OP_ENDIF","OP_VERIFY","OP_RETURN","OP_TOALTSTACK","OP_FROMALTSTACK","OP_2DROP","OP_2DUP","OP_3DUP","OP_2OVER","OP_2ROT","OP_2SWAP","OP_IFDUP","OP_DEPTH","OP_DROP","OP_DUP","OP_NIP","OP_OVER","OP_PICK","OP_ROLL","OP_ROT","OP_SWAP","OP_TUCK","OP_CAT","OP_SUBSTR","OP_LEFT","OP_RIGHT","OP_SIZE","OP_INVERT","OP_AND","OP_OR","OP_XOR","OP_EQUAL","OP_EQUALVERIFY","OP_RESERVED1","OP_RESERVED2","OP_1ADD","OP_1SUB","OP_2MUL","OP_2DIV","OP_NEGATE","OP_ABS","OP_NOT","OP_0NOTEQUAL","OP_ADD","OP_SUB","OP_MUL","OP_DIV","OP_MOD","OP_LSHIFT","OP_RSHIFT","OP_BOOLAND","OP_BOOLOR","OP_NUMEQUAL","OP_NUMEQUALVERIFY","OP_NUMNOTEQUAL","OP_LESSTHAN","OP_GREATERTHAN","OP_LESSTHANOREQUAL","OP_GREATERTHANOREQUAL","OP_MIN","OP_MAX","OP_WITHIN","OP_RIPEMD160","OP_SHA1","OP_SHA256","OP_HASH160","OP_HASH256","OP_CODESEPARATOR","OP_CHECKSIG","OP_CHECKSIGVERIFY","OP_CHECKMULTISIG","OP_CHECKMULTISIGVERIFY","OP_NOP1","OP_NOP2","OP_CHECKLOCKTIMEVERIFY","OP_NOP3","OP_CHECKSEQUENCEVERIFY","OP_NOP4","OP_NOP5","OP_NOP6","OP_NOP7","OP_NOP8","OP_NOP9","OP_NOP10","OP_CHECKSIGADD","OP_PUBKEYHASH","OP_PUBKEY","OP_INVALIDOPCODE","push_data","ops_1","encodingLength","offset","writeUInt8","writeUInt16LE","writeUInt32LE","opcode","readUInt8","readUInt16LE","readUInt32LE","number","script_number","maxLength","minimal","_number","abs","scriptNumSize","negative","types","Boolean","Function","Nil","Number","typeName","Null","toJSON","native","getTypeName","name","match","getValueTypeName","captureStackTrace","tfJSON","tfErrorString","valueTypeName","valueJson","getValue","TfTypeError","__type","__value","__valueTypeName","TfPropertyTypeError","property","description","tfPropertyErrorString","__label","__property","tfCustomError","expected","actual","tfSubError","NATIVE","require$$1","TYPES","arrayOf","_arrayOf","strict","minLength","every","typeforce","compile","str","maybe","_maybe","propertyType","propertyKeyType","_map","propertyName","propertyValue","uncompiled","typePropertyName","_object","anyOf","_anyOf","join","allOf","_allOf","quacksLike","_quacksLike","tuple","_tuple","_value","surrogate","oneOf","EXTRA","ERRORS","_Buffer","isBuffer","Hex","test","_LengthN","Length","_ArrayN","_BufferN","_HexN","_StringN","INT53_MAX","ArrayN","BufferN","Finite","isFinite","HexN","Int8","Int16","Int32","Int53","floor","Range","_range","StringN","UInt8","UInt16","UInt32","UInt53","extra","require$$2","typeforce_1","isCanonicalScriptSignature","isDefinedHashType","isCanonicalPubKey","toStack","fromASM","toASM","decompile","countNonPushOnlyOPs","isPushOnly","pushdata","scriptNumber","require$$3","scriptSignature","script_signature","script_1","ZERO","alloc","toDER","fromDER","bstart","hashType","decoded","hashTypeBuffer","require$$4","require$$5","OP_INT_BASE","isPushOnlyChunk","isOPInt","asMinimalOP","chunksIsBuffer","buf","singleChunkIsBuffer","chunks","bufferSize","accum","chunk","hashTypeMod","asm","split","chunkStr","from","isPoint","Hash256bit","Hash160bit","Buffer256bit","isTaptree","isTapleaf","TAPLEAF_VERSION_MASK","Satoshi","stacksEqual","buffer_1","ZERO32","EC_P","equals","compare","output","version","scriptTree","lazy","prop","writable","embed","p2data","networks_1","bscript","types_1","validate","network","p2ms_1","p2ms","pubkeys","signatures","isAcceptableSignature","allowIncomplete","p2pk_1","p2pk","pubkey","_chunks","isSafeInteger","bool","isBytes","Uint8Array","bytes","lengths","hash","h","outputLen","blockLen","exists","instance","checkFinished","destroyed","finished","out","_assert","assert","default","crypto","randomBytes","wrapXOFConstructorWithOpts","wrapConstructorWithOpts","wrapConstructor","checkOpts","Hash","toBytes","utf8ToBytes","asyncLoop","nextTick","hexToBytes","bytesToHex","byteSwapIfBE","byteSwap","isLE","rotl","rotr","createView","u8","crypto_1","_assert_js_1","arr","byteOffset","byteLength","u32","Uint32Array","DataView","word","byteSwap32","hexes","padStart","hex","asciis","_0","_9","_A","_F","_a","_f","asciiToBase16","char","hl","al","ai","hi","n1","charCodeAt","n2","TextEncoder","iters","tick","ts","diff","concatBytes","arrays","sum","res","pad","clone","_cloneInto","toStr","hashCons","hashC","msg","update","digest","tmp","bytesLength","getRandomValues","_md","HashMD","Maj","utils_js_1","Chi","c","padOffset","pos","view","len","take","subarray","dataView","roundClean","digestInto","fill","setBigUint64","_32n","BigInt","_u32_max","wh","wl","l","setUint32","oview","outLen","to","ripemd160","RIPEMD160","_md_js_1","Rho","Id","Pi","idxL","idxR","j","k","shifts","shiftsL","idx","shiftsR","Kl","Kr","group","z","R_BUF","h0","h1","h2","h3","h4","getUint32","ar","bl","br","cl","cr","dl","dr","el","er","rGroup","hbl","hbr","rl","rr","sl","sr","tl","tr","sha1","SHA1_IV","SHA1_W","SHA1","A","B","C","D","E","F","K","T","sha256","sha224","SHA256_K","SHA256_IV","SHA256_W","SHA256","G","H","W15","W2","s0","s1","T1","T2","SHA224","taggedHash","TAGGED_HASH_PREFIXES","TAGS","hash256","hash160","ripemd160_1","sha1_1","sha256_1","TapLeaf","TapBranch","TapSighash","TapTweak","prefix","src","ALPHABET","BASE_MAP","charAt","xc","BASE","LEADER","FACTOR","iFACTOR","decodeUnsafe","source","psz","zeroes","b256","carry","it3","it4","vch","ArrayBuffer","isView","pbegin","pend","b58","it1","it2","repeat","string","base58","bs58check","checksumFn","decodeRaw","payload","checksum","newChecksum","payloadU8","both","bs58checkBase","p2pkh_1","p2pkh","bcrypto","address","_address","hash2","pkh","p2sh_1","p2sh","redeem","witness","_redeem","lastChunk","nameParts","checkRedeem","hasInput","hasWitness","richunks","dist","bech32m","ALPHABET_MAP","polymodStep","pre","prefixChk","chk","convert","inBits","outBits","bits","maxV","toWords","fromWordsUnsafe","words","fromWords","getLibraryFromEncoding","encoding","ENCODING_CONST","__decode","LIMIT","lowered","toLowerCase","uppered","toUpperCase","lastIndexOf","wordChars","p2wpkh_1","p2wpkh","bech32_1","EMPTY_BUFFER","p2wsh_1","p2wsh","chunkHasUncompressedPubkey","_rchunks","stack","wScript","ecc_lib","getEccLib","initEccLib","_ECCLIB_CACHE","eccLib","ecc","isXOnlyPoint","xOnlyPointAddTweak","tweakAddVectors","tweak","parity","xOnlyPubkey","copyProps","dst","SafeBuffer","arg","encodingOrOffset","allocUnsafeSlow","module","SlowBuffer","MAX_SAFE_INTEGER","checkUInt53","RangeError","varuintBitcoin","first","lo","bufferutils","BufferReader","BufferWriter","cloneBuffer","reverseBuffer","writeUInt64LE","readUInt64LE","varuint","verifuint","writeInt32LE","withCapacity","writeInt32","writeUInt32","writeUInt64","writeVarInt","writeSlice","writeVarSlice","writeVector","vector","end","p2tr","embed_1","require$$6","p2tr_1","ecc_lib_1","bip341_1","require$$7","address_1","require$$8","internalPubkey","redeemVersion","fromBech32","_witness","_hashTree","toHashTree","hashTree","w","controlBlock","leafVersion","script","leafHash","tapleafHash","rootHashFromPath","LEAF_VERSION_TAPSCRIPT","tweakedKey","tweakKey","path","findScriptPath","outputKey","controlBock","toOutputScript","fromOutputScript","toBech32","toBase58Check","fromBase58Check","payments","FUTURE_SEGWIT_MAX_SIZE","FUTURE_SEGWIT_MIN_SIZE","FUTURE_SEGWIT_MAX_VERSION","FUTURE_SEGWIT_MIN_VERSION","FUTURE_SEGWIT_VERSION_DIFF","FUTURE_SEGWIT_VERSION_WARNING","warn","_toFutureSegwitAddress","decodeBase58","decodeBech32","readInt32","readInt32LE","readUInt32","readUInt64","readVarInt","vi","readSlice","readVarSlice","readVector","tapTweakHash","MAX_TAPTREE_DEPTH","bufferutils_1","leaf","serializeScript","pubKey","tapBranchHash","varintLen","kj","ej","hashes","left","right","node","ht","leftPath","rightPath","tweakHash","merkle","fastMerkleRoot","digestFn","results","transaction","Transaction","varSliceSize","someScript","EMPTY_WITNESS","ONE","VALUE_UINT64_MAX","BLANK_OUTPUT","valueBuffer","locktime","ins","outs","fromBuffer","_NO_STRICT","bufferReader","tx","marker","flag","hasWitnesses","ADVANCED_TRANSACTION_MARKER","ADVANCED_TRANSACTION_FLAG","vinLen","index","sequence","voutLen","fromHex","isCoinbaseHash","isCoinbase","addInput","scriptSig","DEFAULT_SEQUENCE","addOutput","scriptPubKey","weight","virtualSize","ceil","_ALLOW_WITNESS","someVector","vectorSize","newTx","txIn","txOut","hashForSignature","inIndex","prevOutScript","ourScript","txTmp","SIGHASH_NONE","SIGHASH_SINGLE","SIGHASH_ANYONECANPAY","__toBuffer","hashForWitnessV1","prevOutScripts","annex","outputType","SIGHASH_DEFAULT","SIGHASH_ALL","SIGHASH_OUTPUT_MASK","isAnyoneCanPay","SIGHASH_INPUT_MASK","isNone","isSingle","hashPrevouts","hashAmounts","hashScriptPubKeys","hashSequences","hashOutputs","bufferWriter","txOutsSize","spendType","sigMsgSize","sigMsgWriter","hashForWitnessV0","tbuffer","hashSequence","getHash","forWitness","getId","toBuffer","initialOffset","toHex","setInputScript","setWitness","block","Block","merkle_1","transaction_1","errorMerkleNoTxes","errorWitnessNotSegwit","prevHash","merkleRoot","timestamp","witnessCommit","nonce","readTransaction","nTransactions","getWitnessCommit","calculateTarget","exponent","mantissa","target","writeUIntBE","calculateMerkleRoot","txesHaveWitnessCommit","rootHash","witnessCommits","hasWitnessCommit","headersOnly","allowWitness","getUTCDate","date","setUTCSeconds","txSize","checkTxRoots","__checkMerkleRoot","__checkWitnessCommit","checkProofOfWork","actualMerkleRoot","actualWitnessCommit","GlobalTypes","InputTypes","OutputTypes","GLOBAL_TYPE_NAMES","INPUT_TYPE_NAMES","OUTPUT_TYPE_NAMES","globalXpub","typeFields_1","keyVal","GLOBAL_XPUB","extendedPubkey","masterFingerprint","range","isHard","head","splitPath","level","parseInt","epk","mfp","canAddToArray","dupeSet","dupeString","unsignedTx","UNSIGNED_TX","finalScriptSig","FINAL_SCRIPTSIG","canAdd","currentData","finalScriptWitness","FINAL_SCRIPTWITNESS","nonWitnessUtxo","NON_WITNESS_UTXO","partialSig","PARTIAL_SIG","pSig","rLen","sLen","isDerSigWithSighash","porCommitment","POR_COMMITMENT","sighashType","SIGHASH_TYPE","tapKeySig","TAP_KEY_SIG","tapLeafScript","TAP_LEAF_SCRIPT","tScript","verBuf","tapMerkleRoot","TAP_MERKLE_ROOT","tapScriptSig","TAP_SCRIPT_SIG","tSig","varint","tools","keyValToBuffer","keyLen","valLen","keyVarIntLen","valVarIntLen","keyValsToBuffer","keyVals","buffers","witnessUtxo","tools_1","WITNESS_UTXO","_offset","scriptLen","tapTree","TAP_TREE","depth","leaves","tree","bufs","tapLeaf","of","bip32Derivation","isValidDERKey","makeConverter","TYPE_BYTE","isValidPubkey","checkPubkey","makeChecker","pubkeyTypes","redeemScript","tapBip32Derivation","isValidBIP340Key","parent","nHashes","nHashesLen","base","leafHashes","nHashesBuf","tapInternalKey","witnessScript","converter","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","require$$20","globals","inputs","BIP32_DERIVATION","REDEEM_SCRIPT","WITNESS_SCRIPT","TAP_BIP32_DERIVATION","TAP_INTERNAL_KEY","outputs","checkKeyBuffer","keyBuf","keyNum","psbtFromKeyVals","globalMapKeyVals","inputKeyVals","outputKeyVals","globalMap","txCount","unknownKeyVals","inputCount","outputCount","psbtFromBuffer","txGetter","varSlice","getKeyValue","checkEndOfKeyValPairs","isEnd","readUInt32BE","globalKeyIndex","hexKey","unsignedTxMaps","getInputOutputCounts","inputKeyIndex","outputKeyIndex","psbtToBuffer","globalKeyVals","psbtToKeyVals","globalBuffer","keyValsOrEmptyToBuffer","inputBuffers","outputBuffers","header","sortKeyVals","keyValsFromMap","keyValMap","converterFactory","keyHexSet","entries","encodedKeyVals","kv","otherKeyVals","__export","combiner","parser_1","keyPusher","selfSet","selfKeyVals","newKv","getTx","psbt","getKeySet","combine","psbts","others","selfTx","selfGlobalSet","selfInputSets","selfOutputSets","other","otherTx","inputSet","outputSet","checkForInput","inputIndex","checkForOutput","outputIndex","throwForUpdateMaker","updateMaker","updateData","mainData","dupeCheckSet","checkHasKey","checkKeyVal","enumLength","getEnumLength","myenum","isNaN","inputCheckUncleanFinalized","needScriptSig","needWitnessScript","scriptSigOK","witnessScriptOK","hasOneFinal","updateGlobal","updateInput","updateOutput","addInputAttributes","addOutputAttributes","defaultVersionSetter","txBuf","defaultLocktimeSetter","combiner_1","utils_1","Psbt","fromBase64","txFromBuffer","toBase64","addUnknownKeyValToGlobal","addUnknownKeyValToInput","addUnknownKeyValToOutput","inputData","addKeyVals","outputData","clearFinalizedInput","those","getTransaction","psbtutils","signatureBlocksAction","checkInputForSig","pubkeyInScript","pubkeyPositionInScript","witnessStackToScriptWitness","isP2TR","isP2SHScript","isP2WSHScript","isP2WPKH","isP2PKH","isP2PK","isP2MS","isPaymentFactory","payment","pubkeyHash","pubkeyXOnly","decompiled","findIndex","element","signatureDecodeFn","whitelist","currentLen","pSigs","scriptItems","witnessItems","sig","getPsigsFromInputFinalScripts","extractPartialSigs","bip371","checkTaprootInputForSigs","tapTreeFromList","tapTreeToList","tweakInternalPubKey","checkTaprootOutputFields","checkTaprootInputFields","isTaprootOutput","isTaprootInput","serializeTaprootSignature","tapScriptFinalizer","toXOnly","psbtutils_1","payments_1","psbtutils_2","instertLeafInTree","instertLeavesInTree","decodeSchnorrSignature","_tapTreeToList","leftSide","rightSide","isTapLeafInTree","hasNonTaprootFields","io","tapLeafHashToFinalize","leafHashToFinalize","whiteListedHash","tss","canFinalizeLeaf","findTapLeafToFinalize","sigs","positionInScript","addPubkeyPositionInScript","t1","t2","sortSignatures","sighashTypeByte","newInputData","isBadTaprootUpdate","isBadNonTaprootUpdate","hasMixedFields","checkMixedTaprootAndNonTaprootInputFields","newLeafsInTree","oldLeafsInTree","checkIfTapLeafInTree","newOutputData","checkMixedTaprootAndNonTaprootOutputFields","scriptPubkey","getTaprootScripPubkey","checkTaprootScriptPubkey","finalTapKeySig","getTapKeySigFromWithness","extractTaprootSigs","bip174_1","bip371_1","DEFAULT_OPTS","maximumFeeRate","psbtBase","transactionFromBuffer","__CACHE","__TX","checkTxInputCache","PsbtTransaction","__NON_WITNESS_UTXO_TX_CACHE","__NON_WITNESS_UTXO_BUF_CACHE","__TX_IN_CACHE","__UNSAFE_SIGN_NONSEGWIT","setVersion","dpew","attr","setLocktime","txInputs","txOutputs","setMaximumFeeRate","satoshiPerByte","check32Bit","checkInputsForPartialSig","__EXTRACTED_TX","setInputSequence","addInputs","inputDatas","checkInvalidP2WSH","addNonWitnessTxCache","__FEE","__FEE_RATE","addOutputs","outputDatas","extractTransaction","disableFeeCheck","isFinalized","feeRate","getFeeRate","vsize","satoshis","toFixed","checkFees","inputFinalizeGetAmts","getTxCacheValue","getFee","finalizeAllInputs","finalizeInput","finalScriptsFunc","_finalizeTaprootInput","_finalizeInput","finalizeTaprootInput","getFinalScripts","isP2SH","isP2WSH","isSegwit","nonWitnessUtxoTx","nonWitnessUtxoTxFromCache","prevoutIndex","getScriptFromInput","checkPartialSigSighashes","getInputType","getMeaningfulScript","getScriptFromUtxo","finalScript","decomp","lastItem","isPubkeyLike","redeemFromFinalScriptSig","scriptWitnessToWitnessStack","redeemFromFinalWitnessScript","classifyScript","meaningfulScript","inputHasPubkey","pubkeyInInput","inputHasHDKey","root","derivationIsMine","bip32DerivationIsMine","outputHasPubkey","pubkeyInOutput","outputHasHDKey","validateSignaturesOfAllInputs","validator","validateSignaturesOfInput","final","validateSignaturesOfTaprootInput","_validateSignaturesOfInput","mySigs","hashCache","scriptCache","sighashCache","getHashForSig","checkScriptForPubkey","allHashses","getTaprootHashesForSig","allPublicKeys","getPrevoutTaprootKey","tapScriptPubkeys","allHashes","pubicKey","getAllTaprootHashesForSig","tapKeyHash","validationResultCount","trimTaprootSig","tapSig","tapSigHash","signAllInputsHD","hdKeyPair","sighashTypes","publicKey","fingerprint","signInputHD","signAllInputsHDAsync","signInputHDAsync","getSignersFromHD","signer","signInput","signInputAsync","signAllInputs","keyPair","signAllInputsAsync","_signTaprootInput","_signInput","signTaprootInput","tapLeafHashToSign","getHashAndSighashType","sign","allowedSighashTypes","hashesForSig","checkTaprootHashesForSig","signSchnorr","_signTaprootInputAsync","_signInputAsync","signTaprootInputAsync","tapLeafHash","signaturePromises","tapKeySigPromise","tapScriptHashes","tapScriptSigPromises","tsh","checkCache","checkTxEmpty","hasSigs","neededSigs","pkey","newKey","compressPubkey","derivePath","scriptCheckerFactory","paymentScriptName","ioType","redeemScriptOutput","checkRedeemScript","checkWitnessScript","mustFinalize","scriptType","canFinalize","pk","ps","getSortedSigs","getPayment","prepareFinalScripts","forValidate","prevout","checkSighashTypeAllowed","prevoutHash","utxoHash","signingScript","getScriptAndAmountFromUtxo","prevOuts","signingScripts","tapLeafHashes","tapScriptHash","text","sighashTypeToString","myDerivations","bipDv","selfIndex","txCache","newBuf","inputAmount","nwTx","vout","outputAmount","total","fee","isP2SHP2WSH","opcodes","block_1","psbt_1","encodeEsploraMerkleProof","reverse","DefaultEsploraClient","REGTEST_ESPLORA_BASE_PATH","TESTNET_ESPLORA_BASE_PATH","MAINNET_ESPLORA_BASE_PATH","networkOrUrl","basePath","getLatestHeight","getText","getBlock","blockHash","getJson","getBlockHash","height","getBlockHeader","getBlockHeaderAt","txId","getTransactionHex","getMerkleProof","response","blockHeight","block_height","getFeeEstimate","confirmationTarget","getAddressUtxos","confirmed","utxo","txid","broadcastTx","txHex","url","ok","statusText","json","__createBinding","k2","desc","getOwnPropertyDescriptor","__esModule","__setModuleDefault","__importStar","mod","utils","encodeRawInput","inputSize","inputBuffer","inputBufferWriter","encodeRawOutput","outputSize","outputBuffer","outputBufferWriter","encodeRawWitness","witnessSize","witnessBuffer","witnessBufferWriter","txHash","txIds","merkleAndRoot","last","chunkArray","pair","createMerkleBranchAndRoot","proof","estimateTxFee","numInputs","tx_input","chunkSize","chunkedArray","relay","getBitcoinTxInfo","esploraClient","bitcoinjs_lib_1","versionBuffer","locktimeBuffer","inputVector","outputVector","witnessVector","getBitcoinTxProof","txProofDifficultyFactor","merkleProof","bitcoinHeaders","getBitcoinHeaders","txIndexInBlock","startHeight","numBlocks","blockHeights","_element","DummySigner","_hash","_lowR","commit","createCommitTxData","inscription","xOnlyPublicKey","toScript","outputScript","scriptTaproot","cblock","customFinalizer","createRevealTx","commitTxData","commitTxResult","toAddress","amount","signRevealTx","psbtUtils","ordinals","inscribeData","postage","bitcoinNetwork","getNetwork","getPublicKey","commit_1","revealTxSize","signer_1","reveal_1","estimateTxSize","commitTxAmount","commitAddress","commitTxId","sendToAddress","commitTx","commitUtxoIndex","revealPsbt","revealTx","InscriptionId","OutPoint","SatPoint","DefaultOrdinalsClient","TESTNET_ORD_BASE_PATH","REGTEST_ORD_BASE_PATH","MAINNET_ORD_BASE_PATH","fromString","outpoint","getInscriptionFromId","inscriptionJson","satpoint","getInscriptions","inscriptionsJson","parseInscriptionsJson","getInscriptionsFromBlock","getInscriptionsFromOutPoint","outPoint","getInscriptionsFromSat","sat","satJson","inscriptions","getInscriptionsFromStartBlock","headers","Accept","ids","Inscription","MAX_CHUNK_SIZE","PROTOCOL_ID","chunkContent","parseInscriptions","getTxInscriptions","inscriptionId","ordinal_api_1","textEncoder","TAPROOT_ANNEX_PREFIX","CONTENT_TYPE_TAG","CONTENT_ENCODING_TAG","convertOpInt","tags","getContentType","getContentEncoding","setContentType","contentType","setContentEncoding","contentEncoding","getTags","getTapscript","scriptPosFromLast","txInput","tapscript","isBody","createTextInscription","createInscription","content","helpers","getInscriptionIds","ordinalsClient","bitcoinAddress","utxos","inscriptionIds","inscription_1","getInscriptionIdsForUtxo","isValidBtcAddress","mainnetRegex","RegExp","testnetRegex","chain","reduceRight","alphabet","digits","letter","separator","padding","chr","normalize","convertRadix","digit","digitBase","rounded","stringToBytes","bytesToString","utf8","base58check","createBase58check","base58xmr","base58xrp","base58flickr","base64urlnopad","base64url","base64nopad","base64","base32crockford","base32hexnopad","base32hex","base32nopad","base32","base16","assertNumber","gcd","radix2carry","convertRadix2","mask","radix","radix2","revPadding","unsafeWrapper","oldChecksum","replace","genBase58","abc","XMR_BLOCK_LEN","BECH_ALPHABET","POLYMOD_GENERATORS","bech32Polymod","bechChecksum","encodingConst","genBech32","_words","limit","sepIndex","endsWith","actualLength","decodeToBytes","TextDecoder","CODERS","coderTypeError","constant","magicBytes","optional","flagged","cstring","F64LE","F64BE","F32LE","F32BE","I8","I16BE","I16LE","U16BE","U16LE","I32BE","I32LE","U32LE","int","I64BE","I64LE","U64BE","U64LE","I128LE","U128BE","U128LE","I256BE","I256LE","U256BE","bigint","coders","isCoder","NULL","EMPTY","_TEST","pointer","padRight","padLeft","ZeroPad","bitset","mappedTag","tag","struct","base_1","equalBytes","isNum","checkBounds","lengthCoder","encodeStream","byteLen","Path","decodeStream","Bitset","BITS","FULL_MASK","clean","bs","debug","checkLen","chunkLen","bsLen","allowRewrite","indices","invert","lastMask","cur","rangeDebug","setRange","lastPos","pushObj","objFn","fieldFn","parts","objPath","_Reader","parentOffset","bitBuf","bitPos","_enablePointers","allowMultipleReads","markBytesBS","markBytes","readView","absBytes","finish","allowUnreadBytes","leftBytes","notRead","formatted","offsetReader","peek","byte","totalBytes","needle","_Writer","ptrs","viewBuf","writeView","ptr","swapEndianness","signed","signBit","_wrap","inner","isBaseCoder","elm","numberBigint","coder","dict","tsEnum","decimal","precision","decimalMask","sep","frac","neg","startsWith","intS","fracS","fracLen","lst","le","sized","bLen","U256LE","I128BE","write","read","intView","maxVal","U32BE","getInt32","setInt32","getUint16","setUint16","getInt16","setInt16","U8","getUint8","setUint8","getInt8","setInt8","f32","getFloat32","setFloat32","fround","f64","getFloat64","setFloat64","_length","_isb","tPos","innerValue","with0x","magic","flagValue","xor","hasFlag","def","sizeof","fields","variants","variantNames","variant","TAG","dataType","_w","_r","startPos","tagCoder","mapValue","tagValue","names","padLength","blockSize","padFn","_padFn","padBytes","ptrVal","_bitset","hmac","HMAC","_key","iHash","oHash","bitMask","abytes","numberToHexUnpadded","hexToNumber","bytesToNumberBE","bytesToNumberLE","numberToBytesBE","numberToBytesLE","numberToVarBytesBE","ensureBytes","title","expectedLength","bitLen","_0n","_1n","bitGet","bitSet","createHmacDrbg","hashLen","qByteLen","hmacFn","u8n","reseed","seed","u8fr","gen","pred","validateObject","validators","optValidators","checkField","fieldName","isOptional","checkVal","validatorFns","_2n","function","boolean","stringOrUint8Array","Fp","isValid","modular","isNegativeLE","pow2","power","modulo","tonelliShanks","FpSqrt","validateField","FIELD_FIELDS","ORDER","MASK","BYTES","FpPow","FpInvertBatch","FpDiv","lhs","rhs","mul","inv","FpIsSquare","legendreConst","eql","nLength","Field","redef","nBitLength","nByteLength","sqrtP","freeze","is0","isOdd","sqr","sub","div","sqrN","addN","subN","mulN","sqrt","invertBatch","cmov","fromBytes","FpSqrtOdd","FpSqrtEven","hashToPrivateScalar","groupOrder","minLen","getFieldBytesLength","getMinHashLength","mapHashToField","fieldOrder","fieldLen","reduced","_3n","_4n","_5n","_8n","u","legendreC","Q","S","Z","p1div4","Q1div2","ge","c1","nv","nums","lastMultiplied","acc","inverted","_nBitLength","bitLength","curve","wNAF","constTimeNegate","condition","negate","W","windows","windowSize","unsafeLadder","double","precomputeWindow","points","precomputes","maxNumber","shiftBy","wbits","offset1","offset2","cond1","cond2","wNAFCached","precomputesMap","transform","_WINDOW_SIZE","comp","validateBasic","modular_js_1","Gx","Gy","DER","weierstrassPoints","weierstrass","curveDef","CURVE","curve_js_1","ut","bits2int","bits2int_modN","lowS","validateOpts","CURVE_ORDER","compressedLen","uncompressedLen","modN","invN","ProjectivePoint","Point","normPrivateKeyToScalar","weierstrassEquation","isWithinCurveOrder","_c","point","isCompressed","toAffine","cat","hasEvenY","tail","y2","sqrtError","suffix","numToNByteStr","isBiggerThanHalfOrder","slcNum","Signature","recovery","assertValidity","fromCompact","toSig","addRecoveryBit","recoverPublicKey","msgHash","rec","radj","R","ir","u1","u2","multiplyAndAddUnsafe","hasHighS","normalizeS","toDERRawBytes","toDERHex","hexFromSig","toCompactRawBytes","toCompactHex","isValidPrivateKey","privateKey","randomPrivateKey","precompute","_setWindowSize","multiply","isProbPub","delta","ORDER_MASK","int2octets","prepSig","defaultSigOpts","prehash","extraEntropy","ent","h1int","seedArgs","k2sig","kBytes","ik","q","normS","defaultVerOpts","fromPrivateKey","toRawBytes","getSharedSecret","privateA","publicB","privKey","drbg","verify","sg","_sig","derError","Err","is","SWUFpSqrtRatio","mapToCurveSimpleSWU","sqrtRatio","tv1","tv2","tv3","tv4","tv5","tv6","e1","b2n","h2b","_parseInt","sBytes","rBytesLeft","shl","rhl","allowedPrivateKeyLengths","wrapPrivateKey","isTorsionFree","clearCofactor","allowInfinityPoint","endo","beta","splitScalar","validatePointOpts","_isCompressed","x2","x3","assertGE","pointPrecomputes","assertPrjPoint","px","py","pz","fromAffine","normalizeZ","toInv","X1","Y1","Z1","X2","Y2","Z2","U1","U2","b3","X3","Y3","Z3","t0","t3","t4","t5","subtract","wnaf","multiplyUnsafe","I","k1neg","k1","k2neg","k1p","k2p","scalar","fake","f1p","f2p","iz","ax","ay","zz","cofactor","_bits","_2n_pow_c1_1","_2n_pow_c1","c2","c3","c4","c5","c6","c7","isQR","tvv5","y1","_shortw_utils","createCurve","defHash","weierstrass_js_1","hmac_1","msgs","hashToCurve","expand_message_xmd","expand_message_xof","hash_to_field","isogenyMap","COEFF","xNum","xDen","yNum","yDen","createHasher","mapToCurve","DST","u0","encodeToCurve","encodeDST","scalars","os2ip","i2osp","strxor","anum","lenInBytes","b_in_bytes","r_in_bytes","ell","DST_prime","Z_pad","l_i_b_str","b_0","dkLen","expand","_DST","log2p","L","len_in_bytes","prb","elm_offset","tv","schnorr","secp256k1","_shortw_utils_js_1","hash_to_curve_js_1","secp256k1P","secp256k1N","divNearest","sqrtMod","_6n","_11n","_22n","_23n","_44n","_88n","b2","b6","b9","b11","b22","b44","b88","b176","b220","b223","a1","b1","a2","POW_2_128","fe","messages","tagP","tagH","pointToBytes","numTo32b","modP","GmulAdd","schnorrGetExtPubKey","priv","d_","lift_x","xx","challenge","schnorrGetPublicKey","schnorrSign","auxRand","rand","k_","rx","schnorrVerify","pub","isoMap","mapSWU","htf","compareBytes","TEST_NETWORK","TAPROOT_UNSPENDABLE_KEY","taprootTweakPubkey","tapTweak","validatePubkey","PubT","tagSchnorr","signECDSA","pubSchnorr","randomPrivateKeyBytes","micro_packed_1","secp256k1_1","sha256x2","pubECDSA","hasLowR","tn","lowR","counter","ecdsa","taprootTweakPrivKey","seckey0","seckey","NETWORK","RawTx","RawOutput","RawInput","BTCArray","RawWitness","CompactSizeLen","CompactSize","Script","OpToNum","ScriptNum","OP","MAX_SCRIPT_BYTE_LENGTH","bytesLimit","forceMinimal","PUSHDATA1","PUSHDATA2","PUSHDATA4","CSLimits","b0","VarBytes","_RawTx","segwitFlag","witnesses","lockTime","selectUTXO","_Estimator","toVsize","getPrevOut","payment_js_1","script_js_1","transaction_js_1","utils_js_2","normalizeInput","allowedFields","disableScriptCheck","prevOut","mergeKeyMap","PSBTInput","PSBTInputCoder","checkScript","allowLegacyWitnessUtxo","txType","defaultSighash","SignatureHash","ALL","OutScript","DEFAULT","lastScript","sighash","child","encodeTapBlock","TaprootControlBlock","estimateInput","inputType","SCHNORR_SIG_SIZE","sigSize","customScripts","leafs","_script","ver","_pub","finalizeTaproot","scriptDecoded","csEncoded","pubKeys","finalized","iterLeafs","emptyPub","inputScript","inputWitness","ltype","allowUnknownInputs","getScript","Address","allowUnknownOutputs","_cmpBig","dust","feePerByte","baseWeight","changeAddress","changeWeight","normalizedInputs","normalized","inputBeforeSign","prev","estimate","checkInputIdx","sortIndices","bi","sortOutputs","scripts","aa","ba","getSatoshi","weigth","biggest","_i","smallest","oldest","newest","accumulate","skipNegative","alwaysChange","inputsAmount","targetAmount","newWeight","totalWeight","strategy","Oldest","Newest","Smallest","Biggest","exactData","accumData","needChange","changeFee","change","bip69","createTx","_opts","bip32Path","PSBTCombine","SigHash","cloneDeep","Decimal","DEFAULT_LOCKTIME","DEFAULT_VERSION","PRECISION","utxo_js_1","EMPTY32","EMPTY_OUTPUT","fromEntries","outputBeforeSign","cleanFinalInput","_k","PSBTInputFinalKeys","TxHashIdx","validateSigHash","unpackSighash","masked","isAny","ANYONECANPAY","NONE","SINGLE","global","PSBTVersion","allowUnknowInput","allowUnknowOutput","cs","fallbackLocktime","txVersion","fromRaw","raw","parsed","fromPSBT","psbt_","RawPSBTV0","e0","RawPSBTV2","e2","unsigned","toPSBT","cleanPSBTFields","inp","PSBTOutput","bip174jsCompat","heightCnt","time","timeCnt","requiredHeightLocktime","requiredTimeLocktime","inputStatus","inputSighash","sigOutputs","sigInputs","signStatus","isFinal","withScriptSig","withWitness","getInput","inputsLength","_ignoreSignStatus","PSBTInputUnsignedKeys","checkOutputIdx","getOutput","outputsLength","normalizeOutput","PSBTOutputCoder","PSBTOutputUnsignedKeys","addOutputAddress","preimageLegacy","inputIdx","tmpTx","preimageWitnessV0","inputHash","sequenceHash","outputHash","preimageWitnessV1","codeSeparator","leafScript","leafVer","outType","inType","signIdx","allowedSighash","_auxRand","signers","deriveChild","schnorrPub","internalKey","getTaprootKeys","taprootPubKey","hasPubkey","finalizeIdx","outScript","added","sigIdx","custom","finalize","extract","thisUnsigned","otherUnsigned","PSBTGlobal","HARDENED_OFFSET","exec","_DebugPSBT","_RawPSBTV2","PubKeyECDSA","PubKeySchnorr","SignatureSchnorr","BIP32Der","TaprootBIP32Der","der","GlobalXPUB","tapScriptSigKey","_TaprootControlBlock","merklePath","BytesInf","Bytes20","Bytes32","xpub","txModifiable","proprietary","PSBTKeyPair","PSBTKeyInfo","info","kc","vc","reqInc","allowInc","silentIgnore","PSBTKeyMap","psbtEnum","byType","unknown","noKey","_name","PSBTGlobalCoder","validatePSBTFields","validatePSBT","inputsLeft","outputsLeft","_RawPSBTV0","kC","vC","cannotChange","oldKV","newKV","kStr","oldVal","newVal","WIF","multisig","_sortPubkeys","p2tr_ms","p2tr_pk","p2tr_ns","combinations","taprootListToTree","psbt_js_1","OutPK","OutPKH","OutSH","OutWSH","OutWPKH","OutMS","OutTR","OutTRNS","OutTRMS","OutScripts","_OutScript","checkWSH","uniqPubkey","taprootList","childs","taprootAddPath","taprootWalkTree","taprootHashTree","internalPubKey","outms","checkTaprootScript","lH","rH","allowSamePubkeys","TAP_LEAF_VERSION","hashedTree","tweakedPubkey","list","main","getAddress","sorted","ms","sortedMultisig","validateWitness","programToWitness","formatKey","hashed","program","payment_js_2","transaction_js_2","utxo_js_2","_size","_sp","_byte","_word","Int32Array","_utf8","_int32","BYTES_PER_ELEMENT","_uint8","_hex","_bin","substr","Uint16Array","mainnet","bc","tb","bcrt","O","getBtcNetwork","createTransfer","addressType","fromAddress","opReturnData","esplora_1","confirmedUtxos","possibleInputs","btc_signer_1","getInputFromUtxoAndTx","bitcoin_address_validation_1","bitcoinNetworks","AddressType","scriptMixin","witnessMixin","__exportStar","gateway","GatewayApiClient","bitcoin.Transaction","bitcoin.address","baseUrl","getQuote","atomicAmount","createOrder","contractAddress","userAddress","onramp_address","user_address","updateOrder","bitcoin_tx","getOrders","bitcoin2.opcodes","bitcoin2.script","chunk2","data2","electrsClient","bitcoin2.Transaction","parseInscriptionId","encoder","createImageInscription","image","findUtxoForInscriptionId","inscriptionUtxo","truncateEthRegex","regtestRegex","isValidBTCAddress","address2","SatsConnector","ready","accounts","switchNetwork","toNetwork","disconnect","getAccount","getAccounts","isAuthorized","sendInscription","inscriptionId_1","utx","_this","inscribe","getSigner","inscribeTx","getLibNetwork","getBitgetNetwork","BitgetConnector","_super","homepage","connect","bitkeep","unisat","_b","expectedNetwork","requestAccounts","publickKey","on","changeAccount","removeListener","isReady","signMessage","sendBitcoin","signPsbt","autoFinalized","toSignInputs","disableTweakSigner","psbtHex","LeatherConnector","btc","request","userAddresses","account","addresses","derivationPath","LeatherProvider","signAtIndex","broadcast","getOkxNetwork","OkxConnector","okxwallet","getUnisatNetwork","UnisatConnector","_d","funcTag","genTag","reIsHostCtor","freeGlobal","freeSelf","uid","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","baseIsNative","isObject","func","pattern","isFunction","isHostObject","toSource","getNative","isConcatSpreadable","base64Js","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","code","base64Url","unescape","escape","base64_js_1","fromByteArray","toByteArray","signSync","nodeCrypto","groupLen","USE_ENDOMORPHISM","ShaError","assertJacPoint","JacobianPoint","toAffineBatch","scratch","Z1Z1","Z2Z2","S1","S2","x1b","HH","HHH","V","P0","normalizeScalar","affinePoint","invZ","iz1","iz2","iz3","WeakMap","fromCompressedHex","isShort","bytesToNumber","isValidFieldElement","rt","isYOdd","fromUncompressedHex","normalizePrivateKey","fromSignature","normalizeSignature","truncateHash","rinv","numTo32bStr","toHexX","toRawX","aP","bQ","sliceDER","parseDERInt","parseDERSignature","HALF","sHex","rHex","sHexL","rHexL","uint8a","POW_2_256","hexByte","truncateOnly","bits2int_2","_sha256Sync","_hmacSha256Sync","HmacDrbg","hmacSha256","hmacSync","checkSync","incr","reseedSync","generate","generateSync","kmdToSig","kinv","normalizePublicKey","bits2octets","z1","z2","initSigArgs","finalizeSig","recSig","recovered","canonical","vopts","schnorrChallengeFinalize","ch","sinv","SchnorrSignature","InternalSchnorrSignature","getScalar","initNonce","t0h","finalizeNonce","k0h","k0","calc","aux","calcSync","taggedHashSync","schnorrVerifySync","initSchnorrVerify","finalizeSchnorrVerify","verifySync","web","_bigintTo32Bytes","_normalizePrivateKey","hashToPrivateKey","cached","subtle","createHash","ckey","importKey","createHmac","sha256Sync","hmacSha256Sync","_JacobianPoint","defineProperties","ecdsaSigFormatter","joseToDer","derToJose","base64Url_1","getParamSize","keySize","paramBytesForAlg","ES256","ES384","ES512","getParamBytesForAlg","alg","paramBytes","MAX_OCTET","signatureAsBytes","countPadding","signatureBytes","maxEncodedParamLength","inputLength","TAG_SEQ","seqLength","rLength","rOffset","sLength","sOffset","rPadding","sPadding","rsBytes","shortLength","InvalidTokenError","MissingParametersError","SECP256K1Client","secp","ecdsaSigFormatter_1","errors_1","derivePublicKey","compressed","signHash","signingInputHash","format","derSignature","loadSignature","joseSignature","verifyHash","derSignatureBytes","algorithmName","cryptoClients","ES256K","hashSha256Async","hashSha256","require","TokenSigner","createUnsecuredToken","cryptoClients_1","createSigningInput","tokenParts","encodedHeader","encodedPayload","typ","signingAlgorithm","rawPrivateKey","tokenType","cryptoClient","defaultHeader","expanded","customHeader","signingInput","createWithSignedHash","signAsync","verifier","TokenVerifier","rawPublicKey","token","verifyCompact","verifyExpanded","verifyAsync","performVerify","verified","decodeToken","allHeaders","headerValue","BitcoinNetworkType","BitcoinNetworkType3","RpcIdSchema","union","null","rpcRequestMessageSchema","jsonrpc","literal","looseObject","rpcSuccessResponseMessageSchema","nonOptional","rpcErrorResponseMessageSchema","getProviderOrThrow","getProvider","provider","XverseProviders","BitcoinProvider","AddressPurpose","AddressPurpose2","AddressType3","addressSchema","v2","purpose","enum","purposes","request2","onFinish","onCancel","stxGetAddressesParamsSchema","v3","nullish","getInfoParamsSchema","v4","supports","getAddressesParamsSchema","signMessageParamsSchema","messageHash","getAccountsParamsSchema","unconfirmed","requestPermissionsParamsSchema","v5","renouncePermissionsParamsSchema","getRunesBalanceParamsSchema","v6","balances","runeName","divisibility","symbol","getInscriptionsParamsSchema","v7","inscriptionNumber","collectionName","contentLength","genesisTransaction","payloadType","appFeeAddress","appFee","validateInscriptionPayload","createUnsecuredToken3","createUnsecuredToken5","sendBtcTransaction","recipients","senderAddress","amountSats","serializedRecipients","serializedPayload","createUnsecuredToken6","signTransaction","psbtBase64","inputsToSign","createUnsecuredToken7","getWalletNetwork","Mainnet","Testnet","XverseConnector","Ordinals","Payment","paymentAddress","signMessageXverse","signingIndexes","defaultState","connectors","connector","setConnector","setNetwork","BitcoinWagmiContext","useBitcoinWagmi","initialNetwork","setConnectors","_e","createElement","safeUtxos","rest","open","connectAsync","disconnectAsync"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,146,147,148,149,150,151,152,153,154,155,156,157,158,159]}